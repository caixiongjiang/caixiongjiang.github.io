<!DOCTYPE html>
<html><head>
<title>正则表达式30分钟入门</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="正则表达式30分钟入门" />
<meta property="og:description" content="转载自：https://deerchao.net/tutorials/regex/regex.htm
如何使用本教程 别被下面那些复杂的表达式吓倒，只要跟着我一步一步来，你会发现正则表达式其实并没有想像中的那么困难。当然，如果你看完了这篇教程之后，发现自己明白了很多，却又几乎什么都记不得，那也是很正常的——我认为，没接触过正则表达式的人在看完这篇教程后，能把提到过的语法记住80%以上的可能性为零。这里只是让你明白基本的原理，以后你还需要多练习，多使用，才能熟练掌握正则表达式。
除了作为入门教程之外，本文还试图成为可以在日常工作中使用的正则表达式语法参考手册。就作者本人的经历来说，这个目标还是完成得不错的——你看，我自己也没能把所有的东西记下来，不是吗？
本文将会对特别的字符做一些 斜体，加粗 处理，希望读者在阅读的时候可以多体会和留心这些细节，从而有更深刻的了解。# 正则表达式到底是什么东西？
在编写处理字符串的程序或网页时，经常会有查找符合某些复杂规则的字符串的需要。正则表达式就是用于描述这些规则的工具。换句话说，正则表达式就是记录文本规则的代码。
很可能你使用过Windows/Dos下用于文件查找的通配符(wildcard)，也就是 &lsquo;*&rsquo; 和 &lsquo;?&#39;。
如果你想查找某个目录下的所有的Word文档的话，你会搜索 *.doc。在这里，&quot; * &ldquo;会被解释成任意的字符串。
和通配符类似，正则表达式也是用来进行文本匹配的工具，只不过比起通配符，它能更精确地描述你的需求——当然，代价就是更复杂——比如你可以编写一个正则表达式，用来查找所有以 0 开头，后面跟着 2-3 个数字，然后是一个连字号“-”，最后是7或8位数字的字符串(像010-12345678或0376-7654321)。
入门 学习正则表达式的最好方法是从例子开始，理解例子之后再自己对例子进行修改，实验。下面给出了不少简单的例子，并对它们作了详细的说明。
假设你在一篇英文小说里查找hi，你可以使用正则表达式 &quot; hi &ldquo;。
这几乎是最简单的正则表达式了，它可以精确匹配这样的字符串：由两个字符组成，前一个字符是 h, 后一个是 i。
通常，处理正则表达式的工具会提供一个忽略大小写的选项，如果选中了这个选项，它可以匹配 hi, HI, Hi, hI 这四种情况中的任意一种。
不幸的是，很多单词里包含 hi 这两个连续的字符，比如 him, history, high 等等。用 hi 来查找的话，这里边的 hi 也会被找出来。如果要精确地查找 hi 这个单词的话，我们应该使用 \bhi\b。
\b 是正则表达式规定的一个特殊代码（好吧，某些人叫它元字符，metacharacter），代表着单词的开头或结尾，也就是单词的分界处。虽然通常英文的单词是由空格，标点符号或者换行来分隔的，但是 \b 并不匹配这些单词分隔字符中的任何一个，它只匹配一个位置。
如果需要更精确的说法，\b 匹配这样的位置：它的前一个字符和后一个字符不全是(一个是,一个不是或不存在) \w。
假如你要找的是 hi 后面不远处跟着一个 Lucy，你应该用 \bhi\b.*\bLucy\b。
这里，. 是另一个元字符，匹配除了换行符以外的任意字符。*同样是元字符，不过它代表的不是字符，也不是位置，而是数量——它指定前边的内容可以连续重复使用任意次以使整个表达式得到匹配。因此，.* 连在一起就意味着任意数量的不包含换行的字符。现在 \bhi\b.*\bLucy\b 的意思就很明显了：先是一个单词hi,然后是任意个任意字符(但不能是换行)，最后是Lucy这个单词。
换行符就是 &#39;\n&#39;, ASCII编码为10(十六进制0x0A)的字符。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.riba2534.cn/blog/2019/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F30%E5%88%86%E9%92%9F%E5%85%A5%E9%97%A8/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2019-07-17T10:38:01+08:00" />
<meta property="article:modified_time" content="2019-07-17T10:38:01+08:00" />











<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<script src="/vendor/js/vue.min.js" ></script>


  




<link rel="icon" href="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20210427152737.jpeg">



<link rel="stylesheet" href="https://blog.riba2534.cn/scss/journal.min.3f72a5fc8f5b5dd732a4b476aced0eece2156958d9d414316494ddb10593ddf7.css" integrity="sha256-P3Kl/I9bXdcypLR2rO0O7OIVaVjZ1BQxZJTdsQWT3fc=" media="screen">



<link rel="stylesheet" href="https://blog.riba2534.cn/scss/dark-mode.min.c0082f0b082177f6fb3768ff91439a097de49689bd26f4d49f76d94ebb81e02d.css" integrity="sha256-wAgvCwghd/b7N2j/kUOaCX3klom9JvTUn3bZTruB4C0=" media="screen">


<script src="/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>


  
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script type="text/javascript" id="MathJax-script"
async
src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
MathJax.Hub.Queue(function() {



var all = MathJax.Hub.getAllJax(), i;
for(i = 0; i < all.length; i += 1) {
all[i].SourceElement().parentNode.className += ' has-jax';
}
});
</script>

<style>
code.has-jax {
font: inherit;
font-size: 100%;
background: inherit;
border: inherit;
color: #515151;
}
</style>





  
    <script src="/js/toc.js"></script>
  











<script src="https://cdn.jsdelivr.net/npm/twikoo@1.3.1/dist/twikoo.all.min.js"></script>




</head>
<body>
    	<div id="app"><div ref="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://blog.riba2534.cn/">
    
        <div class="nav-title">
            🌀riba2534&#39;s Blog
        </div>
        
        <div class="nav-subtitle">
            凡事有交代，件件有着落，事事有回音
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/blog">
                文章📖
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                分类📌
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                标签🏷️
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/series">
                系列📚
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/archive">
                归档📃
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about">
                关于👋
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/friends">
                友链🔗
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS📢
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
<a href="https://blog.csdn.net/riba2534">
    CSDN
</a>
<br>

<a href="https://github.com/riba2534">
    GitHub
</a>
<br>

<a href="https://www.zhihu.com/people/riba2534">
    Zhihu
</a>
<br>

<a href="mailto:riba2534@qq.com">
    Email
</a>
<br>

        <hr>
        
魔改自 <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://blog.riba2534.cn">riba2534</a>
<br>

&copy;
	
	2021 🌀riba2534&#39;s Blog
	
    </div>
    
</div><div ref="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8%e6%9c%ac%e6%95%99%e7%a8%8b" onclick="onNavClick(`#如何使用本教程-nav`)" id="如何使用本教程-nav">
									如何使用本教程
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%85%a5%e9%97%a8" onclick="onNavClick(`#入门-nav`)" id="入门-nav">
									入门
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b5%8b%e8%af%95%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f" onclick="onNavClick(`#测试正则表达式-nav`)" id="测试正则表达式-nav">
									测试正则表达式
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bb%a3%e7%a0%81%e5%ba%93" onclick="onNavClick(`#代码库-nav`)" id="代码库-nav">
									代码库
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" onclick="onNavClick(`#调试工具-nav`)" id="调试工具-nav">
									调试工具
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%85%83%e5%ad%97%e7%ac%a6" onclick="onNavClick(`#元字符-nav`)" id="元字符-nav">
									元字符
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%ad%97%e7%ac%a6%e8%bd%ac%e4%b9%89" onclick="onNavClick(`#字符转义-nav`)" id="字符转义-nav">
									字符转义
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%87%8d%e5%a4%8d" onclick="onNavClick(`#重复-nav`)" id="重复-nav">
									重复
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%ad%97%e7%ac%a6%e7%b1%bb" onclick="onNavClick(`#字符类-nav`)" id="字符类-nav">
									字符类
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%86%e6%9e%9d%e6%9d%a1%e4%bb%b6" onclick="onNavClick(`#分枝条件-nav`)" id="分枝条件-nav">
									分枝条件
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%86%e7%bb%84" onclick="onNavClick(`#分组-nav`)" id="分组-nav">
									分组
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%8d%e4%b9%89" onclick="onNavClick(`#反义-nav`)" id="反义-nav">
									反义
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%90%8e%e5%90%91%e5%bc%95%e7%94%a8" onclick="onNavClick(`#后向引用-nav`)" id="后向引用-nav">
									后向引用
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%9b%b6%e5%ae%bd%e6%96%ad%e8%a8%80" onclick="onNavClick(`#零宽断言-nav`)" id="零宽断言-nav">
									零宽断言
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%b4%9f%e5%90%91%e9%9b%b6%e5%ae%bd%e6%96%ad%e8%a8%80" onclick="onNavClick(`#负向零宽断言-nav`)" id="负向零宽断言-nav">
									负向零宽断言
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b3%a8%e9%87%8a" onclick="onNavClick(`#注释-nav`)" id="注释-nav">
									注释
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%b4%aa%e5%a9%aa%e4%b8%8e%e6%87%92%e6%83%b0" onclick="onNavClick(`#贪婪与懒惰-nav`)" id="贪婪与懒惰-nav">
									贪婪与懒惰
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%a4%84%e7%90%86%e9%80%89%e9%a1%b9" onclick="onNavClick(`#处理选项-nav`)" id="处理选项-nav">
									处理选项
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b9%b3%e8%a1%a1%e7%bb%84%e9%80%92%e5%bd%92%e5%8c%b9%e9%85%8d" onclick="onNavClick(`#平衡组递归匹配-nav`)" id="平衡组递归匹配-nav">
									平衡组/递归匹配
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a class="pagination-action" v-on:click="toggleDarkMode">
            <i class="material-icons pagination-action-icon" v-if="isDarkMode">
                brightness_4
            </i>
            <i class="material-icons pagination-action-icon" v-else="isDarkMode">
                brightness_7
            </i>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/blog">
                    文章📖
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    分类📌
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    标签🏷️
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/series">
                    系列📚
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/archive">
                    归档📃
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about">
                    关于👋
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/friends">
                    友链🔗
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS📢
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8%e6%9c%ac%e6%95%99%e7%a8%8b" onclick="onNavClick(`#如何使用本教程-nav`)" id="如何使用本教程-nav">
									如何使用本教程
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%85%a5%e9%97%a8" onclick="onNavClick(`#入门-nav`)" id="入门-nav">
									入门
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b5%8b%e8%af%95%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f" onclick="onNavClick(`#测试正则表达式-nav`)" id="测试正则表达式-nav">
									测试正则表达式
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bb%a3%e7%a0%81%e5%ba%93" onclick="onNavClick(`#代码库-nav`)" id="代码库-nav">
									代码库
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7" onclick="onNavClick(`#调试工具-nav`)" id="调试工具-nav">
									调试工具
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%85%83%e5%ad%97%e7%ac%a6" onclick="onNavClick(`#元字符-nav`)" id="元字符-nav">
									元字符
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%ad%97%e7%ac%a6%e8%bd%ac%e4%b9%89" onclick="onNavClick(`#字符转义-nav`)" id="字符转义-nav">
									字符转义
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%87%8d%e5%a4%8d" onclick="onNavClick(`#重复-nav`)" id="重复-nav">
									重复
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%ad%97%e7%ac%a6%e7%b1%bb" onclick="onNavClick(`#字符类-nav`)" id="字符类-nav">
									字符类
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%86%e6%9e%9d%e6%9d%a1%e4%bb%b6" onclick="onNavClick(`#分枝条件-nav`)" id="分枝条件-nav">
									分枝条件
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%86%e7%bb%84" onclick="onNavClick(`#分组-nav`)" id="分组-nav">
									分组
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%8d%e4%b9%89" onclick="onNavClick(`#反义-nav`)" id="反义-nav">
									反义
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%90%8e%e5%90%91%e5%bc%95%e7%94%a8" onclick="onNavClick(`#后向引用-nav`)" id="后向引用-nav">
									后向引用
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%9b%b6%e5%ae%bd%e6%96%ad%e8%a8%80" onclick="onNavClick(`#零宽断言-nav`)" id="零宽断言-nav">
									零宽断言
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%b4%9f%e5%90%91%e9%9b%b6%e5%ae%bd%e6%96%ad%e8%a8%80" onclick="onNavClick(`#负向零宽断言-nav`)" id="负向零宽断言-nav">
									负向零宽断言
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b3%a8%e9%87%8a" onclick="onNavClick(`#注释-nav`)" id="注释-nav">
									注释
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%b4%aa%e5%a9%aa%e4%b8%8e%e6%87%92%e6%83%b0" onclick="onNavClick(`#贪婪与懒惰-nav`)" id="贪婪与懒惰-nav">
									贪婪与懒惰
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%a4%84%e7%90%86%e9%80%89%e9%a1%b9" onclick="onNavClick(`#处理选项-nav`)" id="处理选项-nav">
									处理选项
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b9%b3%e8%a1%a1%e7%bb%84%e9%80%92%e5%bd%92%e5%8c%b9%e9%85%8d" onclick="onNavClick(`#平衡组递归匹配-nav`)" id="平衡组递归匹配-nav">
									平衡组/递归匹配
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="https://blog.riba2534.cn/">
            🌀riba2534&#39;s Blog
        </a>
        
        <button type="button" class="nav-darkmode-toggle" v-on:click="toggleDarkMode">
            <i class="material-icons" v-if="isDarkMode">
                brightness_4
            </i>
            <i class="material-icons" v-else="isDarkMode">
                brightness_7
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://blog.riba2534.cn/">
        <div class="single-column-header-title">🌀riba2534&#39;s Blog</div>
        
        <div class="single-column-header-subtitle">凡事有交代，件件有着落，事事有回音</div>
        

    </a>
</div>

            <div id="content">
<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20210508201518.png')"
                    
                
            >
                <div class="post-title">
                    正则表达式30分钟入门
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2019-07-17 10:38
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB">技术分享</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">正则表达式</a>
                                &nbsp;
                            
                        
                        
                            <i class="material-icons" style="">schedule</i>
                            

                            
                            

                            
                            41 min
                            
                            29 s.
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <p>转载自：https://deerchao.net/tutorials/regex/regex.htm</p>
<h1 id="如何使用本教程">如何使用本教程</h1>
<p>别被下面那些复杂的表达式吓倒，只要跟着我一步一步来，你会发现正则表达式其实并没有想像中的那么困难。当然，如果你看完了这篇教程之后，发现自己明白了很多，却又几乎什么都记不得，那也是很正常的——我认为，没接触过正则表达式的人在看完这篇教程后，能把提到过的语法记住80%以上的可能性为零。这里只是让你明白基本的原理，以后你还需要多练习，多使用，才能熟练掌握正则表达式。</p>
<p>除了作为入门教程之外，本文还试图成为可以在日常工作中使用的正则表达式语法参考手册。就作者本人的经历来说，这个目标还是完成得不错的——你看，我自己也没能把所有的东西记下来，不是吗？</p>
<p>本文将会对特别的字符做一些 <em>斜体</em>，<strong>加粗</strong> 处理，希望读者在阅读的时候可以多体会和留心这些细节，从而有更深刻的了解。# 正则表达式到底是什么东西？</p>
<p>在编写处理字符串的程序或网页时，经常会有查找符合某些复杂规则的字符串的需要。正则表达式就是用于描述这些规则的工具。换句话说，正则表达式就是记录文本规则的代码。</p>
<p>很可能你使用过Windows/Dos下用于文件查找的通配符(wildcard)，也就是 &lsquo;*&rsquo; 和 &lsquo;?'。</p>
<p>如果你想查找某个目录下的所有的Word文档的话，你会搜索 <strong>*.doc</strong>。在这里，&quot; <strong>*</strong> &ldquo;会被解释成任意的字符串。</p>
<p>和通配符类似，正则表达式也是用来进行文本匹配的工具，只不过比起通配符，它能更精确地描述你的需求——当然，代价就是更复杂——比如你可以编写一个正则表达式，用来查找所有以 0 开头，后面跟着 2-3 个数字，然后是一个连字号“-”，最后是7或8位数字的字符串(像010-12345678或0376-7654321)。</p>
<h1 id="入门">入门</h1>
<p>学习正则表达式的最好方法是从例子开始，理解例子之后再自己对例子进行修改，实验。下面给出了不少简单的例子，并对它们作了详细的说明。</p>
<p>假设你在一篇英文小说里查找hi，你可以使用正则表达式 &quot; <strong>hi</strong> &ldquo;。</p>
<p>这几乎是最简单的正则表达式了，它可以精确匹配这样的字符串：由两个字符组成，前一个字符是 <strong>h</strong>, 后一个是 <strong>i</strong>。</p>
<p>通常，处理正则表达式的工具会提供一个忽略大小写的选项，如果选中了这个选项，它可以匹配 hi, HI, Hi, hI 这四种情况中的任意一种。</p>
<p>不幸的是，很多单词里包含 <strong>hi</strong> 这两个连续的字符，比如 <strong>hi</strong>m, <strong>hi</strong>story, <strong>hi</strong>gh 等等。用 <code>hi</code> 来查找的话，这里边的 <em><strong>hi</strong></em> 也会被找出来。如果要精确地查找 <em><strong>hi</strong></em> 这个单词的话，我们应该使用 <code>\bhi\b</code>。</p>
<p><code>\b</code> 是正则表达式规定的一个特殊代码（好吧，某些人叫它元字符，metacharacter），代表着单词的开头或结尾，也就是单词的分界处。虽然通常英文的单词是由空格，标点符号或者换行来分隔的，但是 <code>\b</code> <strong>并不匹配这些单词分隔字符中的任何一个，它只匹配一个位置</strong>。</p>
<p>如果需要更精确的说法，<code>\b</code> 匹配这样的位置：<strong>它的前一个字符和后一个字符不全是(一个是,一个不是或不存在) <code>\w</code></strong>。</p>
<p>假如你要找的是 <em><strong>hi</strong></em> 后面不远处跟着一个 Lucy，你应该用 <code>\bhi\b.*\bLucy\b</code>。</p>
<p>这里，<code>.</code> 是另一个<strong>元字符</strong>，匹配除了换行符以外的任意字符。<code>*</code>同样是<strong>元字符</strong>，不过它代表的不是字符，也不是位置，而是数量——它指定<strong>前边的内容可以连续重复使用任意次以使整个表达式得到匹配</strong>。因此，<code>.*</code> 连在一起就意味着任意数量的不包含换行的字符。现在 <code>\bhi\b.*\bLucy\b</code> 的意思就很明显了：先是一个单词hi,然后是任意个任意字符(但不能是换行)，最后是Lucy这个单词。</p>
<p>换行符就是 <code>'\n'</code>, ASCII编码为10(十六进制0x0A)的字符。</p>
<p>如果同时使用其它元字符，我们就能构造出功能更强大的正则表达式。比如下面这个例子：</p>
<p><code>0\d\d-\d\d\d\d\d\d\d\d</code></p>
<p>匹配这样的字符串：</p>
<blockquote>
<p>以0开头，然后是两个数字，然后是一个连字号“-”，最后是8个数字(也就是中国的电话号码。当然，这个例子只能匹配区号为3位的情形)。</p>
</blockquote>
<p>这里的 <code>\d</code> 是个新的<strong>元字符</strong>，匹配一位数字(0，或1，或2，或……)。<code>-</code> 不是元字符，只匹配它本身——连字符(或者减号，或者中横线，或者随你怎么称呼它)。</p>
<p>为了避免那么多烦人的重复，我们也可以这样写这个表达式：</p>
<pre><code>0\d{2}-\d{8}
</code></pre>
<p>这里 <strong>\d</strong> 后面的 <strong>{2}({8})</strong> 的意思是前面 <strong>\d</strong> 必须连续重复匹配2次(8次)。</p>
<h1 id="测试正则表达式">测试正则表达式</h1>
<p>如果你不觉得正则表达式很难读写的话，要么你是一个天才，要么，你不是地球人。正则表达式的语法很令人头疼，即使对经常使用它的人来说也是如此。由于难于读写，容易出错，所以找一种工具对正则表达式进行测试是很有必要的。</p>
<h2 id="代码库">代码库</h2>
<p>不同的环境下正则表达式的一些细节是不相同的，本教程介绍的是 python 2.7 环境下正则表达式的行为，所以，我向你推荐的是 python 中一个用于方便创建正则表达式的lib，名字为：<strong>PythonVerbalExpressions</strong>，安装也很方便，直接使用 pip 安装：</p>
<pre><code>pip install VerbalExpressions
</code></pre>
<h2 id="调试工具">调试工具</h2>
<p>如果你想要 GUI 调试工具的话，各个平台都有很多不错的工具，但是，我个人比较喜欢跨平台的东西，所以我使用的是 Chrome 扩展，名字叫做：<strong>RegExp Tester</strong></p>
<p>扩展安装地址：<a href="https://chrome.google.com/webstore/detail/regexp-tester/fekbbmalpajhfifodaakkfeodkpigjbk">点击安装</a></p>
<p>扩展截图：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9vb28uMG8wLm9vby8yMDE2LzA1LzE0LzU3MzZjMGEzN2Q4OTUucG5n" alt="regtester.png"></p>
<h1 id="元字符">元字符</h1>
<p>现在你已经知道几个很有用的元字符了，如 <code>\b,.,*</code>，还有 <code>\d.</code> 正则表达式里还有更多的元字符，比如 <code>\s</code> 匹配任意的空白符，包括空格，制表符(Tab)，换行符，中文全角空格等。<code>\w</code> 匹配字母或数字或下划线或汉字等。</p>
<p>对中文/汉字的特殊处理是由 python 提供的正则表达式引擎在 Python 2 不是原生支持的，需要做一些转换，Python 3 是原生支持的；其它语言环境下的具体情况请查看相关文档。</p>
<p>下面来看看更多的例子：</p>
<pre><code>\ba\w*\b
</code></pre>
<p>匹配以字母a开头的单词——先是某个单词开始处(\b)，然后是字母 a，然后是任意数量的字母或数字 <code>(\w*)</code>，最后是单词结束处(\b)。</p>
<p>好吧，现在我们说说正则表达式里的单词是什么意思吧：<strong>就是不少于一个的连续的\w</strong>。不错，这与学习英文时要背的成千上万个同名的东西的确关系不大 :)</p>
<p><code>\d+</code> 匹配1个或更多连续的数字。这里的 + 是和 * 类似的<strong>元字符</strong>，不同的是 <strong>*</strong> 匹配重复任意次(可能是0次)，而+则匹配重复1次或更多次。</p>
<p><code>\b\w{6}\b</code> 匹配刚好6个字符的单词。</p>
<p>表1.常用的元字符</p>
<table>
<thead>
<tr>
<th>代码</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>匹配除换行符以外的任意字符</td>
</tr>
<tr>
<td>\w</td>
<td>匹配字母或数字或下划线或汉字</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任意的空白符</td>
</tr>
<tr>
<td>\d</td>
<td>匹配数字</td>
</tr>
<tr>
<td>\b</td>
<td>匹配单词的开始或结束</td>
</tr>
<tr>
<td>^</td>
<td>匹配字符串的开始</td>
</tr>
<tr>
<td>$</td>
<td>匹配字符串的结束</td>
</tr>
</tbody>
</table>
<p>正则表达式引擎通常会提供一个 &ldquo;<em><strong>测试指定的字符串是否匹配一个正则表达式</strong></em>&rdquo; 的方法，如 JavaScript 里的 <code>RegExp.test()</code> 方法或 Python 里的 re.match() 方法。这里的匹配是指是字符串里有没有符合表达式规则的部分。如果不使用 <code>^</code> 和 <code>$</code> 的话，对于 <code>\d{5,12}</code> 而言，使用这样的方法就只能保证字符串里包含5到12连续位数字，而不是整个字符串就是5到12位数字。</p>
<p>元字符 <code>^</code>（和数字6在同一个键位上的符号）和 <code>$</code> 都匹配一个位置，这和 <code>\b</code> 有点类似。<code>^</code> 匹配你要用来查找的字符串的开头，<code>$</code> 匹配结尾。这两个代码在验证输入的内容时非常有用，比如一个网站如果要求你填写的QQ号必须为5位到12位数字时，可以使用：</p>
<pre><code>^\d{5,12}$。
</code></pre>
<p>这里的 <code>{5,12}</code> 和前面介绍过的 <code>{2}</code> 是类似的，只不过 <code>{2}</code> 匹配只能不多不少重复2次，<code>{5,12}</code> 则是<strong>重复的次数不能少于5次，不能多于12次，否则都不匹配</strong>。</p>
<p>因为使用了 <code>^</code> 和 <code>$</code> ，所以输入的整个字符串都要用来和<code>\d{5,12}</code> 来匹配，也就是说整个输入必须是5到12个数字，因此如果输入的QQ号能匹配这个正则表达式的话，那就符合要求了。</p>
<p>和忽略大小写的选项类似，有些正则表达式处理工具还有一个处理多行的选项。如果选中了这个选项，<code>^</code> 和 <code>$</code> 的意义就变成了匹配行的开始处和结束处。</p>
<h1 id="字符转义">字符转义</h1>
<p>如果你想查找元字符本身的话，比如你查找 <code>.,</code> 或者 <code>*</code> ,就出现了问题：<em>你没办法指定它们，因为它们会被解释成别的意思</em>。这时你就得使用 <code>\</code> 来取消这些字符的特殊意义。因此，你应该使用<code>\.</code> 和 <code>\*</code>。当然，要查找 <code>\</code> 本身，你也得用 <code>\\</code>.</p>
<p>例如：</p>
<ul>
<li><code>regtest\.py</code> 匹配 <code>regtest.py</code></li>
<li><code>C:\\Windows</code> 匹配 <code>C:\Windows</code>。</li>
</ul>
<h1 id="重复">重复</h1>
<p>你已经看过了前面的 <code>*,+,{2},{5,12}</code> 这几个匹配重复的方式了。下面是正则表达式中所有的限定符(指定数量的代码，例如<code>*,{5,12}</code>等)：</p>
<p>表2.常用的限定符</p>
<table>
<thead>
<tr>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>重复零次或更多次</td>
</tr>
<tr>
<td>+</td>
<td>重复一次或更多次</td>
</tr>
<tr>
<td>?</td>
<td>重复零次或一次</td>
</tr>
<tr>
<td>{n}</td>
<td>重复n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复n次或更多次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复n到m次</td>
</tr>
</tbody>
</table>
<p>下面是一些使用重复的例子：</p>
<ul>
<li><strong>Windows\d+</strong> 匹配 <em>Windows后面跟1个或更多数字</em></li>
<li><strong>^\w+</strong> 匹配 <em>一行的第一个单词(或整个字符串的第一个单词，具体匹配哪个意思得看选项设置)</em></li>
</ul>
<h1 id="字符类">字符类</h1>
<p>要想查找数字，字母或数字，空白是很简单的，因为已经有了对应这些字符集合的元字符，但是如果你想匹配没有预定义元字符的字符集合(比如元音字母 a, e, i, o, u ),应该怎么办？</p>
<p>很简单，你只需要在方括号里列出它们就行了，像 <code>[aeiou]</code> 就匹配任何一个英文元音字母，<code>[.?!]</code> 匹配标点符号( . 或 ? 或 ! )。</p>
<p>我们也可以轻松地指定一个字符范围，像 <code>[0-9]</code> 代表的含意与 <code>\d</code> 就是完全一致的：<strong>一位数字</strong>；同理 <code>[a-z0-9A-Z_]</code> 也完全等同于 <code>\w</code>（如果只考虑英文的话）。</p>
<p>下面是一个更复杂的表达式：</p>
<pre><code>\(?0\d{2}[) -]?\d{8}。
</code></pre>
<p>“<code>(</code>”和“<code>)</code>”也是元字符，后面的分组节里会提到，所以在这里需要使用转义。</p>
<p>这个表达式可以匹配几种格式的电话号码，像 <em>(010)88886666</em>，或<em>022-22334455</em>，或 <em>02912345678</em> 等。我们对它进行一些分析吧：首先是一个转义字符 <code>\(</code>,它能出现0次或1次 <code>(?)</code>,然后是一个0，后面跟着2个数字<code>(\d{2})</code>，然后是<code>)</code>或<code>-</code>或空格中的一个，它出现1次或不出现 <code>(?)</code>，最后是8个数字 <code>(\d{8})</code>。</p>
<h1 id="分枝条件">分枝条件</h1>
<p>不幸的是，刚才那个表达式也能匹配 <em>010)12345678</em> 或*(022-87654321* 这样的“不正确”的格式。</p>
<p>要解决这个问题，我们需要用到分枝条件。正则表达式里的分枝条件指的是有几种规则，如果满足其中任意一种规则都应该当成匹配，具体方法是用 <code>|</code> 把不同的规则分隔开。听不明白？没关系，看例子：</p>
<pre><code>0\d{2}-\d{8}|0\d{3}-\d{7}
</code></pre>
<p>这个表达式能匹配两种以连字号分隔的电话号码：</p>
<ul>
<li>
<p>一种是三位区号，8位本地号(如 010-12345678 )</p>
</li>
<li>
<p>一种是四位区号，7位本地号( 0376-2233445 )</p>
<pre><code>  \(?0\d{2}\)?[- ]?\d{8}|0\d{2}[- ]?\d{8}
</code></pre>
</li>
</ul>
<p>这个表达式匹配 3 位区号的电话号码，其中<strong>区号可以用小括号括起来，也可以不用</strong>，区号与本地号间<strong>可以用连字号或空格间隔，也可以没有间隔</strong>。<em><strong>你可以试试用分枝条件把这个表达式扩展成也支持4位区号的</strong></em>。</p>
<pre><code>\d{5}-\d{4}|\d{5}
</code></pre>
<p>这个表达式用于匹配美国的邮政编码。美国邮编的规则是5位数字，或者用连字号间隔的9位数字。之所以要给出这个例子是因为它能说明一个问题：使用分枝条件时，要注意各个条件的顺序。如果你把它改成\d{5}|\d{5}-\d{4}的话，那么就只会匹配5位的邮编(以及9位邮编的前5位)。原因是匹配分枝条件时，将会从左到右地测试每个条件，如果满足了某个分枝的话，就不会去再管其它的条件了。</p>
<h1 id="分组">分组</h1>
<p>我们已经提到了怎么重复单个字符（直接在字符后面加上限定符就行了）；但如果想要重复多个字符又该怎么办？你可以<strong>用小括号来指定子表达式(也叫做分组)</strong>，然后你就可以指定这个子表达式的重复次数了，你也可以对子表达式进行其它一些操作(后面会有介绍)。</p>
<pre><code>(\d{1,3}\.){3}\d{1,3}
</code></pre>
<p>是一个简单的 IP 地址匹配表达式。要理解这个表达式，请按下列顺序分析它：<code>\d{1,3}</code> 匹配1到3位的数字，<code>(\d{1,3}\.){3}</code> 匹配三位数字加上一个英文句号(<em>这个整体也就是这个分组</em>)重复3次，最后再加上一个一到三位的数字<code>(\d{1,3})</code>。</p>
<p><strong>IP地址中每个数字都不能大于255</strong>. 经常有人问我, 01.02.03.04 这样前面带有0的数字, 是不是正确的IP地址呢? 答案是: <strong>是的</strong>, IP 地址里的数字可以包含有前导 0 (leading zeroes).</p>
<p>不幸的是，它也将匹配 <em>256.300.888.999</em> 这种不可能存在的IP地址。如果能使用算术比较的话，或许能简单地解决这个问题，但是<strong>正则表达式中并不提供关于数学的任何功能</strong>，所以只能使用冗长的分组，选择，字符类来描述一个正确的IP地址：</p>
<pre><code>((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)。
</code></pre>
<p>理解这个表达式的关键是理解 <code>2[0-4]\d|25[0-5]|[01]?\d\d?</code>，这里我就不细说了，你自己应该能分析得出来它的意义。</p>
<h1 id="反义">反义</h1>
<p>有时需要查找不属于某个能简单定义的字符类的字符。比如想查找除了数字以外，其它任意字符都行的情况，这时需要用到反义：</p>
<p>表3.常用的反义代码</p>
<table>
<thead>
<tr>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>\W</td>
<td>匹配任意不是字母，数字，下划线，汉字的字符</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任意不是空白符的字符</td>
</tr>
<tr>
<td>\D</td>
<td>匹配任意非数字的字符</td>
</tr>
<tr>
<td>\B</td>
<td>匹配不是单词开头或结束的位置</td>
</tr>
<tr>
<td>[^x]</td>
<td>匹配除了x以外的任意字符</td>
</tr>
<tr>
<td>[^aeiou]</td>
<td>匹配除了aeiou这几个字母以外的任意字符</td>
</tr>
</tbody>
</table>
<p>例子：</p>
<ul>
<li><code>\S+</code>匹配 <em>不包含空白符的字符串</em>。</li>
<li><code>&lt;a[^&gt;]+&gt;</code>匹配 <em>用尖括号括起来的以a开头的字符串</em>。</li>
</ul>
<h1 id="后向引用">后向引用</h1>
<p>使用小括号指定一个子表达式后，匹配这个子表达式的文本(也就是此分组捕获的内容)可以在表达式或其它程序中作进一步的处理。默认情况下，每个分组会自动拥有一个组号，规则是：从左向右，以分组的左括号为标志，第一个出现的分组的组号为1，第二个为2，以此类推。</p>
<p>后向引用用于重复搜索前面某个分组匹配的文本。例如，<code>\1</code> 代表分组1匹配的文本。难以理解？请看示例：</p>
<pre><code>\b(\w+)\b\s+\1\b
</code></pre>
<p>可以用来匹配重复的单词，像go go, 或者kitty kitty。</p>
<p>这个表达式首先是一个单词，也就是单词开始处和结束处之间的多于一个的字母或数字 <code>(\b(\w+)\b)</code> ，这个单词会被捕获到编号为1的分组中，然后是1个或几个空白符 <code>(\s+)</code>，最后是分组1中捕获的内容（也就是前面匹配的那个单词）<code>(\1)</code>。</p>
<p>你也可以自己指定子表达式的组名。要指定一个子表达式的组名，请使用这样的语法：<code>(?&lt;Word&gt;\w+)</code>(或者把尖括号换成&rsquo;也行： <code>(?'Word'\w+))</code>,这样就把 <code>\w+</code> 的组名指定为 <code>Word</code> 了。要反向引用这个分组捕获的内容，你可以使用 <code>\k&lt;Word&gt;</code>,所以上一个例子也可以写成这样：</p>
<pre><code>\b(?&lt;Word&gt;\w+)\b\s+\k&lt;Word&gt;\b。
</code></pre>
<p>使用小括号的时候，还有很多特定用途的语法。下面列出了最常用的一些：</p>
<p>表4.常用分组语法</p>
<table>
<thead>
<tr>
<th>分类</th>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>捕获</td>
<td>(exp)</td>
<td>匹配exp,并捕获文本到自动命名的组里</td>
</tr>
<tr>
<td>(?<name>exp)</td>
<td>匹配exp,并捕获文本到名称为name的组里，也可以写成(?&lsquo;name&rsquo;exp)</td>
<td></td>
</tr>
<tr>
<td>(?:exp)</td>
<td>匹配exp,不捕获匹配的文本，也不给此分组分配组号</td>
<td></td>
</tr>
<tr>
<td>零宽断言</td>
<td>(?=exp)</td>
<td>匹配exp前面的位置</td>
</tr>
<tr>
<td>(?&lt;=exp)</td>
<td>匹配exp后面的位置</td>
<td></td>
</tr>
<tr>
<td>(?!exp)</td>
<td>匹配后面跟的不是exp的位置</td>
<td></td>
</tr>
<tr>
<td>(?&lt;!exp)</td>
<td>匹配前面不是exp的位置</td>
<td></td>
</tr>
<tr>
<td>注释</td>
<td>(?#comment)</td>
<td>这种类型的分组不对正则表达式的处理产生任何影响，用于提供注释让人阅读</td>
</tr>
</tbody>
</table>
<p>我们已经讨论了前两种语法。</p>
<p>第三个(?:exp)不会改变正则表达式的处理方式，只是这样的组匹配的内容 <em>不会像前两种那样被捕获到某个组里面，也不会拥有组号</em>。</p>
<p>“我为什么会想要这样做？”——好问题，你觉得为什么呢？</p>
<h1 id="零宽断言">零宽断言</h1>
<p>接下来的四个用于查找在某些内容(但并不包括这些内容)之前或之后的东西，也就是说它们像 <strong>\b,^,$</strong> 那样用于指定一个位置，这个位置应该满足一定的条件(即断言)，因此它们也被称为零宽断言。</p>
<p>最好还是拿例子来说明吧：</p>
<pre><code>(?=exp)
</code></pre>
<p>也叫<strong>零宽度正预测先行断言</strong>，它断言自身出现的位置的后面能匹配表达式<em>exp</em>。比如 <code>\b\w+(?=ing\b)</code>，匹配以ing结尾的单词的前面部分(除了ing以外的部分)，如查找 <code>I'm singing while you're dancing.</code> 时，它会匹配 <code>sing</code> 和 <code>danc</code>。</p>
<p><code>(?&lt;=exp)</code> 也叫<strong>零宽度正回顾后发断言</strong>，它断言自身出现的位置的前面能匹配表达式<code>exp</code>。比如 <code>(?&lt;=\bre)\w+\b</code> 会匹配以<code>re</code> 开头的单词的后半部分(除了 <code>re</code> 以外的部分)，例如在查找<code>reading a book</code>时，它匹配 <code>ading</code>。</p>
<p>假如你想要给一个很长的数字中每三位间加一个逗号(当然是从右边加起了)，你可以这样查找需要在前面和里面添加逗号的部分：</p>
<pre><code>((?&lt;=\d)\d{3})+\b
</code></pre>
<p>用它对1234567890进行查找时结果是234567890。</p>
<p>下面这个例子同时使用了这两种断言：</p>
<pre><code>(?&lt;=\s)\d+(?=\s)
</code></pre>
<p>匹配以空白符间隔的数字(再次强调，不包括这些空白符)。</p>
<h1 id="负向零宽断言">负向零宽断言</h1>
<p>前面我们提到过怎么查找<strong>不是某个字符或不在某个字符类里的字符的方法(反义)</strong>。但是如果我们只是想要<strong>确保某个字符没有出现</strong>，<strong>但并不想去匹配它</strong>时怎么办？例如，如果我们想查找这样的单词&ndash;它里面出现了字母q,但是q后面跟的不是字母u,我们可以尝试这样：</p>
<pre><code>\b\w*q[^u]\w*\b
</code></pre>
<p>匹配包含 <em>后面不是字母 u 的字母 q 的单词</em>。但是如果多做测试(或者你思维足够敏锐，直接就观察出来了)，你会发现，如果q出现在单词的结尾的话，像Iraq,Benq，这个表达式就会出错。这是因为 <code>[^u]</code> 总要匹配一个字符，所以如果 q是单词的最后一个字符的话，后面的 <code>[^u]</code> 将会匹配q后面的单词分隔符(可能是空格，或者是句号或其它的什么)，后面的 <code>\w*\b</code> 将会匹配下一个单词，于是 <code>\b\w*q[^u]\w*\b</code> 就能匹配整个 Iraq fighting。负向零宽断言能解决这样的问题，因为它只匹配一个位置，并不<strong>消费</strong>任何字符。现在，我们可以这样来解决这个问题：</p>
<pre><code>\b\w*q(?!u)\w*\b。
</code></pre>
<p>零宽度负预测先行断言<code>(?!exp)</code>，断言此位置的后面不能匹配表达式 <code>exp</code>。例如：<code>\d{3}(?!\d)</code>匹配三位数字，而且这三位数字的后面不能是数字；<code>\b((?!abc)\w)+\b</code> 匹配不包含连续字符串abc的单词。</p>
<p>同理，我们可以用<code>(?&lt;!exp)</code>,零宽度负回顾后发断言来断言此位置的前面不能匹配表达式exp; <code>(?&lt;![a-z])\d{7}</code>匹配前面不是小写字母的七位数字。</p>
<p>一个更复杂的例子：<code>(?&lt;=&lt;(\w+)&gt;).*(?=&lt;\/\1&gt;)</code> 匹配不包含属性的简单HTML标签内里的内容。</p>
<ul>
<li><code>(?&lt;=&lt;(\w+)&gt;)</code> 指定了这样的前缀：被尖括号括起来的单词(比如可能是 &lt;b&gt;)</li>
<li>然后是**.***(任意的字符串)</li>
<li>最后是一个后缀<code>(?=&lt;\/\1&gt;)</code>。</li>
</ul>
<p>注意后缀里的<code>\/</code>，它用到了前面提过的字符转义；</p>
<p><code>\1</code>则是一个反向引用，引用的正是捕获的第一组，前面的<code>(\w+)</code>匹配的内容，这样如果前缀实际上是<code>&lt;b&gt;</code>的话，后缀就是</b>了。整个表达式匹配的是<b>和</b>之间的内容(再次提醒，不包括前缀和后缀本身)。</p>
<h1 id="注释">注释</h1>
<p>小括号的另一种用途是通过语法<code>(?#comment)</code>来包含注释。</p>
<p>例如：</p>
<pre><code>2\[0-4\]\d(?#200-249)|25\[0\-5\](\?#250-255)|\[01\]?\d\d?(?#0-199)。
</code></pre>
<p>要包含注释的话，最好是启用“<em><strong>忽略模式里的空白符</strong></em>”选项，这样在编写表达式时能任意的添加空格，Tab，换行，而实际使用时这些都将被忽略。启用这个选项后，在#后面到这一行结束的所有文本都将被当成注释忽略掉。例如，我们可以前面的一个表达式写成这样：</p>
<pre><code>(?&lt;=    # 断言要匹配的文本的前缀
&lt;(\w+)&gt; # 查找尖括号括起来的字母或数字(即HTML/XML标签)
)       # 前缀结束
.*      # 匹配任意文本
(?=     # 断言要匹配的文本的后缀
&lt;\/\1&gt;  # 查找尖括号括起来的内容：前面是一个&quot;/&quot;，后面是先前捕获的标签
)       # 后缀结束
</code></pre>
<h1 id="贪婪与懒惰">贪婪与懒惰</h1>
<p>当正则表达式中包含能接受重复的限定符时，通常的行为是（在使整个表达式能得到匹配的前提下）匹配尽可能多的字符。以这个表达式为例：<code>a.*b</code>，它将会匹配最长的以 a 开始，以 b 结束的字符串。如果用它来搜索 <code>aabab</code> 的话，它会匹配整个字符串 <code>aabab</code>。这被称为<strong>贪婪匹配</strong>。</p>
<p>有时，我们更需要<strong>懒惰匹配</strong>，也就是<strong>匹配尽可能少的字符</strong>。前面给出的限定符都可以被转化为<strong>懒惰匹配模式</strong>，只要在它<strong>后面加上一个问号?</strong>。这样 <code>.*?</code> 就意味着匹配任意数量的重复，但是在能使整个匹配成功的前提下使用最少的重复。现在看看懒惰版的例子吧：</p>
<pre><code>a.*?b
</code></pre>
<p>匹配最短的，以a开始，以b结束的字符串。如果把它应用于 <code>aabab</code> 的话，它会匹配 <code>aab</code>（第一到第三个字符）和 <code>ab</code>（第四到第五个字符）。</p>
<p><strong>表5.懒惰限定符</strong></p>
<table>
<thead>
<tr>
<th>代码/语法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>*?</td>
<td>重复任意次，但尽可能少重复</td>
</tr>
<tr>
<td>+?</td>
<td>重复1次或更多次，但尽可能少重复</td>
</tr>
<tr>
<td>??</td>
<td>重复0次或1次，但尽可能少重复</td>
</tr>
<tr>
<td>{n,m}?</td>
<td>重复n到m次，但尽可能少重复</td>
</tr>
<tr>
<td>{n,}?</td>
<td>重复n次以上，但尽可能少重复</td>
</tr>
</tbody>
</table>
<h1 id="处理选项">处理选项</h1>
<p>上面介绍了几个选项如忽略大小写，处理多行等，这些选项能用来改变处理正则表达式的方式。下面是 Python 中常用的正则表达式选项：</p>
<p><strong>表6.常用的处理选项</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>re.IGNORECASE</td>
<td>匹配时不区分大小写。</td>
</tr>
<tr>
<td>re.MULTILINE</td>
<td>更改^和$的含义，使它们分别在任意一行的行首和行尾匹配，而不仅仅在整个字符串的开头和结尾匹配。(在此模式下,$的精确含意是:匹配\n之前的位置以及字符串结束前的位置.)</td>
</tr>
<tr>
<td>re.DOTALL</td>
<td>更改.的含义，使它与每一个字符匹配（包括换行符\n）。</td>
</tr>
<tr>
<td>re.VERBOSE</td>
<td>忽略表达式中的非转义空白并启用由#标记的注释。</td>
</tr>
<tr>
<td>re.DEBUG</td>
<td>显示编译表达式的 debug 信息</td>
</tr>
</tbody>
</table>
<h1 id="平衡组递归匹配">平衡组/递归匹配</h1>
<p>有时我们需要匹配像<code>( 100 * ( 50 + 15 ) )</code>这样的可嵌套的层次性结构，这时简单地使用<code>\(.+\)</code>则只会匹配到最左边的左括号和最右边的右括号之间的内容(这里我们讨论的是贪婪模式，懒惰模式也有下面的问题)。假如原来的字符串里的左括号和右括号出现的次数不相等，比如<code>( 5 / ( 3 + 2 ) ) )</code>，那我们的匹配结果里两者的个数也不会相等。有没有办法在这样的字符串里匹配到最长的，配对的括号之间的内容呢？</p>
<p>为了避免(和(把你的大脑彻底搞糊涂，我们还是用尖括号代替圆括号吧。现在我们的问题变成了如何把<code>xx &lt;aa &lt;bbb&gt; &lt;bbb&gt; aa&gt; yy</code>这样的字符串里，最长的配对的尖括号内的内容捕获出来？</p>
<p>这里需要用到以下的语法构造：</p>
<ul>
<li>(?&lsquo;group&rsquo;) 把捕获的内容命名为group,并压入堆栈(Stack)</li>
<li>(?'-group&rsquo;) 从堆栈上弹出最后压入堆栈的名为group的捕获内容，如果堆栈本来为空，则本分组的匹配失败</li>
<li>(?(group)yes|no) 如果堆栈上存在以名为group的捕获内容的话，继续匹配yes部分的表达式，否则继续匹配no部分</li>
<li>(?!) 零宽负向先行断言，由于没有后缀表达式，试图匹配总是失败</li>
</ul>
<p>我们需要做的是每碰到了左括号，就在压入一个&quot;Open&rdquo;,每碰到一个右括号，就弹出一个，到了最后就看看堆栈是否为空－－如果不为空那就证明左括号比右括号多，那匹配就应该失败。正则表达式引擎会进行回溯(放弃最前面或最后面的一些字符)，尽量使整个表达式得到匹配。</p>
<pre><code>&lt;                     #最外层的左括号
[^&lt;&gt;]*                #最外层的左括号后面的不是括号的内容
(
    (
        (?'Open'&lt;)    #碰到了左括号，在黑板上写一个&quot;Open&quot;
        [^&lt;&gt;]*        #匹配左括号后面的不是括号的内容
    )+
    (
        (?'-Open'&gt;)   #碰到了右括号，擦掉一个&quot;Open&quot;
        [^&lt;&gt;]*        #匹配右括号后面不是括号的内容
    )+
)*
(?(Open)(?!))         #在遇到最外层的右括号前面，判断黑板上还有没有没擦掉的&quot;Open&quot;；如果还有，则匹配失败

&gt;                     #最外层的右括号
</code></pre>
<p>平衡组的一个最常见的应用就是匹配HTML,下面这个例子可以匹配嵌套的<code>&lt;div&gt;</code>标签：</p>
<pre><code>&lt;div[^&gt;]*&gt;[^&lt;&gt;]*(((?'Open'&lt;div[^&gt;]*&gt;)[^&lt;&gt;]*)+((?'-Open'&lt;/div&gt;)[^&lt;&gt;]*)+)*(?(Open)(?!))&lt;/div&gt;.# 还有些什么东西没提到
</code></pre>
<p>上边已经描述了构造正则表达式的大量元素，但是还有很多没有提到的东西。下面是一些未提到的元素的列表，包含语法和简单的说明。你可以在网上找到更详细的参考资料来学习它们&ndash;当你需要用到它们的时候。</p>
<p>如果你想了解更多关于 Python 中正则表达式的应用的话，你可以下载 Python Docs 进行阅读，或者也可以<a href="https://docs.python.org/2.7/library/re.html">点此此处</a>进行在线阅读。</p>
<ul>
<li><a href="http://item.jd.com/11070361.html">精通正则表达式（第3版）</a></li>
<li><a href="https://msdn.microsoft.com/zh-cn/library/hs600312.aspx">微软的正则表达式教程</a></li>
<li><a href="https://docs.python.org/2.7/library/re.html">Python Re Module Reference</a></li>
<li><a href="http://www.regular-expressions.info/">专业的正则表达式教学网站(英文)</a></li>
</ul>

                    
                    <HR width="100%" id="EOF">
		            <p style="color:#777;">最后修改于 2019-07-17</p>
                    
                    
                    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20210508215939.png" /></a><br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://blog.riba2534.cn/blog/2019/golang%E7%9A%84%E5%8F%8D%E5%B0%84reflect%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%92%8C%E7%A4%BA%E4%BE%8B/">
			下回<br>Golang的反射reflect深入理解和示例
                </a>
                
                
                
                <a class="older-posts" href="https://blog.riba2534.cn/blog/2019/gin%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3/">
			上回<br>Gin官方文档
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                








<div id="tcomment"></div>



            </div>
        </div>
    </div>
</div>

            </div><div id="single-column-footer">
魔改自 <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://blog.riba2534.cn">riba2534</a>
<br>

&copy;
	
	2021 🌀riba2534&#39;s Blog
	</div>
            </div>
    <script>
let app;

app = new Vue({
    el: '#app',
    data: {
        scrollY: 0,
        navOpacity: 0,
        isDrawerOpen: false,
        mounted: false,
        isDarkMode: false
    },
    methods: {
            sgn(t, x) {
                let k = 1. / (1. - 2 * t);
                if (x <= t) return 0;
                else if (x >= 1 - t) return 1;
                else {
                    return k * (x - t);
                }
            },
            handleScroll() {
                this.scrollY = window.scrollY;
                this.navOpacity = this.sgn(.0, Math.min(1, Math.max(0, window.scrollY / (this.pageHeadHeight() - this.navBarHeight() * 0.8))));
                const {navBar, navBackground, navTitle, extraContainer, streamContainer} = this.$refs;

                if (this.navOpacity >= 1) {
                    navBackground.style.opacity = 1;
                    navTitle.style.opacity = 1;
                } else {
                    navBackground.style.opacity = 0;
                    navTitle.style.opacity = 0;
                }
            },
            handleResize() {
                const {navBar, navBackground, navTitle, extraContainer, streamContainer} = this.$refs;
                extraContainer.style.left = (streamContainer.offsetWidth - extraContainer.offsetWidth) + 'px';
            },
            navBarHeight() {
                return this.$refs.navBar.offsetHeight;
            },
            pageHeadHeight() {
                return this.$refs.pageHead.offsetHeight;
            },
            toggleDrawer() {
                this.isDrawerOpen = !this.isDrawerOpen;
                document.getElementsByTagName('html')[0].style.overflow = this.isDrawerOpen ? 'hidden' : 'unset';
            },
            closeDrawer() {
                this.isDrawerOpen = false;
                document.getElementsByTagName('html')[0].style.overflow = this.isDrawerOpen ? 'hidden' : 'unset';
            },
            toggleDarkMode() {
                this.isDarkMode = !this.isDarkMode;
                if (this.isDarkMode==true){
                    document.cookie = "night=1;path=/";
                    document.body.classList.add("night");
                } else {
                    document.cookie = "night=0;path=/";
                    document.body.classList.remove("night");
                }
            },
            debounce(func, wait, options) {
                let lastArgs,
                    lastThis,
                    maxWait,
                    result,
                    timerId,
                    lastCallTime

                let lastInvokeTime = 0
                let leading = false
                let maxing = false
                let trailing = true

                
                const useRAF = (!wait && wait !== 0 && typeof root.requestAnimationFrame === 'function')

                if (typeof func !== 'function') {
                    throw new TypeError('Expected a function')
                }
                function isObject(value) {
                    const type = typeof value
                    return value != null && (type === 'object' || type === 'function')
                }

                wait = +wait || 0
                if (isObject(options)) {
                    leading = !!options.leading
                    maxing = 'maxWait' in options
                    maxWait = maxing ? Math.max(+options.maxWait || 0, wait) : maxWait
                    trailing = 'trailing' in options ? !!options.trailing : trailing
                }

                function invokeFunc(time) {
                    const args = lastArgs
                    const thisArg = lastThis

                    lastArgs = lastThis = undefined
                    lastInvokeTime = time
                    result = func.apply(thisArg, args)
                    return result
                }

                function startTimer(pendingFunc, wait) {
                    if (useRAF) {
                    root.cancelAnimationFrame(timerId)
                    return root.requestAnimationFrame(pendingFunc)
                    }
                    return setTimeout(pendingFunc, wait)
                }

                function cancelTimer(id) {
                    if (useRAF) {
                    return root.cancelAnimationFrame(id)
                    }
                    clearTimeout(id)
                }

                function leadingEdge(time) {
                    
                    lastInvokeTime = time
                    
                    timerId = startTimer(timerExpired, wait)
                    
                    return leading ? invokeFunc(time) : result
                }

                function remainingWait(time) {
                    const timeSinceLastCall = time - lastCallTime
                    const timeSinceLastInvoke = time - lastInvokeTime
                    const timeWaiting = wait - timeSinceLastCall

                    return maxing
                    ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke)
                    : timeWaiting
                }

                function shouldInvoke(time) {
                    const timeSinceLastCall = time - lastCallTime
                    const timeSinceLastInvoke = time - lastInvokeTime

                    
                    
                    
                    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
                    (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait))
                }

                function timerExpired() {
                    const time = Date.now()
                    if (shouldInvoke(time)) {
                    return trailingEdge(time)
                    }
                    
                    timerId = startTimer(timerExpired, remainingWait(time))
                }

                function trailingEdge(time) {
                    timerId = undefined

                    
                    
                    if (trailing && lastArgs) {
                    return invokeFunc(time)
                    }
                    lastArgs = lastThis = undefined
                    return result
                }

                function cancel() {
                    if (timerId !== undefined) {
                    cancelTimer(timerId)
                    }
                    lastInvokeTime = 0
                    lastArgs = lastCallTime = lastThis = timerId = undefined
                }

                function flush() {
                    return timerId === undefined ? result : trailingEdge(Date.now())
                }

                function pending() {
                    return timerId !== undefined
                }

                function debounced(...args) {
                    const time = Date.now()
                    const isInvoking = shouldInvoke(time)

                    lastArgs = args
                    lastThis = this
                    lastCallTime = time

                    if (isInvoking) {
                    if (timerId === undefined) {
                        return leadingEdge(lastCallTime)
                    }
                    if (maxing) {
                        
                        timerId = startTimer(timerExpired, wait)
                        return invokeFunc(lastCallTime)
                    }
                    }
                    if (timerId === undefined) {
                    timerId = startTimer(timerExpired, wait)
                    }
                    return result
                }
                debounced.cancel = cancel
                debounced.flush = flush
                debounced.pending = pending
                return debounced
                }

    },
    created() {
        window.addEventListener('scroll', this.handleScroll);
        window.addEventListener('resize', this.handleResize);
        window._nonDesktop = function () {
            let check = false;
            (function (a) {
                if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) check = true;
            })(navigator.userAgent || navigator.vendor || window.opera);
            return check;
        };
        
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1");
        if (night==""){
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                
            }
        }else{
            
            if (night=="1") {
                this.toggleDarkMode();
            }
        }
    },
    mounted() {
        this.handleScroll();
        this.handleResize();
        this.mounted = true;

        
        
        
            twikoo.init({
                envId: "blog-9g6ht92ca9c564c6",
                el: '#tcomment',
                region:  null ,
            });
        

        document.querySelectorAll("table").forEach(function(elem){
            elem.classList.add("table-striped");
            elem.classList.add("table");
            elem.classList.add("table-responsive");
            elem.classList.add("table-hover");
        })

        
        spy();
        window.addEventListener('scroll', this.debounce(spy, 250, { 'maxWait': 250 }), false);
        
        
    },
    destroyed() {
        window.removeEventListener('scroll', this.handleScroll);
        window.removeEventListener('resize', this.handleResize);
    }
});



</script>
    </body>
</html>
