<!DOCTYPE html>
<html><head>
<title>LinuxÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑ</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="LinuxÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑ" />
<meta property="og:description" content="Linux ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑ Ëé∑ÂæóÊ∫êÁ†Å ÁõÆÂâçÔºåLinux ÂÜÖÊ†∏ÁöÑÊ∫êÁ†ÅÁª¥Êä§Âú® GitHub ‰∏äÔºåÂú∞ÂùÄ‰∏∫Ôºöhttps://github.com/torvalds/linux
 ÂÖãÈöÜÂà∞Êú¨Âú∞  git clone https://github.com/torvalds/linux Êú¨‰π¶‰ΩøÁî®ÁöÑÊ∫êÁ†ÅÁâàÊú¨‰∏∫ 2.6.34 ÔºåÊâÄ‰ª•ÂàáÊç¢Âà∞ÂØπÂ∫î TagÔºö  cd linuxgit checkout v2.6.34ÊàñËÄÖÁõ¥Êé•Âú®Ôºöhttps://github.com/torvalds/linux/releases/tag/v2.6.34 ‰∏ãËΩΩ
Linux Ê∫êÁ†ÅÊ†ëÊ†πÁõÆÂΩïËØ¥Êòé $ tree -L 1.‚îú‚îÄ‚îÄ arch # ÁâπÂÆö‰ΩìÁ≥ªÁªìÊûÑÁöÑÊ∫êÁ†Å‚îú‚îÄ‚îÄ block # ÂùóËÆæÂ§á I/O Â±Ç‚îú‚îÄ‚îÄ COPYING # ÂÜÖÊ†∏ËÆ∏ÂèØËØÅÔºàGNU GPL v2Ôºâ‚îú‚îÄ‚îÄ CREDITS # ÂÜÖÊ†∏‰ª£Á†ÅÂºÄÂèëËÄÖÂàóË°®‚îú‚îÄ‚îÄ crypto # Âä†ÂØÜ API‚îú‚îÄ‚îÄ Documentation # ÂÜÖÊ†∏Ê∫êÁ†ÅÊñáÊ°£‚îú‚îÄ‚îÄ drivers # ËÆæÂ§áÈ©±Âä®Á®ãÂ∫è‚îú‚îÄ‚îÄ firmware # ‰ΩøÁî®Êüê‰∫õÈ©±Âä®Á®ãÂ∫èËÄåÈúÄË¶ÅÁöÑËÆæÂ§áÂõ∫‰ª∂ ‚îú‚îÄ‚îÄ fs # VFS ÂíåÂêÑÁßçÊñá‰ª∂Á≥ªÁªü‚îú‚îÄ‚îÄ include # ÂÜÖÊ†∏Â§¥Êñá‰ª∂‚îú‚îÄ‚îÄ init # ÂÜÖÊ†∏ÂºïÂØºÂíåÂàùÂßãÂåñ‚îú‚îÄ‚îÄ ipc # ËøõÁ®ãÈó¥ÈÄö‰ø°‰ª£Á†Å‚îú‚îÄ‚îÄ Kbuild # Áî®‰∫éÁºñËØëLinuxÂÜÖÊ†∏Êñá‰ª∂ÔºåÂØπmakefileËøõË°å‰∫ÜÊâ©ÂÖÖ ‚îú‚îÄ‚îÄ kernel # ÂÉèË∞ÉÂ∫¶Á®ãÂ∫èËøôÊ†∑ÁöÑÊ†∏ÂøÉÂ≠êÁ≥ªÁªü‚îú‚îÄ‚îÄ lib # ÈÄöÁî®ÂÜÖÊ†∏ÂáΩÊï∞‚îú‚îÄ‚îÄ MAINTAINERS # Áª¥Êä§ËÄÖÂàóË°®‰ª•ÂèäÂ¶Ç‰ΩïÊèê‰∫§ÂÜÖÊ†∏Êõ¥ÊîπÁöÑËØ¥ÊòéÊñá‰ª∂‚îú‚îÄ‚îÄ Makefile # makefile‚îú‚îÄ‚îÄ mm # ÂÜÖÂ≠òÁÆ°ÁêÜÂ≠êÁ≥ªÁªüÂíåvm ‚îú‚îÄ‚îÄ net # ÁΩëÁªúÂ≠êÁ≥ªÁªü ‚îú‚îÄ‚îÄ README # README‚îú‚îÄ‚îÄ REPORTING-BUGS # LinuxÂÜÖÊ†∏Â∏∏ËßÅÈóÆÈ¢òËß£Á≠î ‚îú‚îÄ‚îÄ samples # Á§∫‰æã‚îú‚îÄ‚îÄ scripts # ÁºñËØëÂÜÖÊ†∏ÊâÄÁî®ÁöÑËÑöÊú¨ ‚îú‚îÄ‚îÄ security # LinuxÂÆâÂÖ®Ê®°Âùó‚îú‚îÄ‚îÄ sound # ËØ≠Èü≥Â≠êÁ≥ªÁªü‚îú‚îÄ‚îÄ tools # Âú®LinuxÂºÄÂèë‰∏≠ÊúâÁî®ÁöÑÂ∑•ÂÖ∑‚îú‚îÄ‚îÄ usr # Êó©ÊúüÁî®Êà∑Á©∫Èó¥‰ª£Á†ÅÔºàÊâÄË∞ìÁöÑ inittranfsÔºâ‚îî‚îÄ‚îÄ virt # ËôöÊãüÂåñÂü∫Á°ÄÁªìÊûÑ21 directories, 7 filesÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑÁÆÄ‰ªã ‰ªãÁªçÈÄöÁî®Êï∞ÊçÆÁªìÊûÑ‰∏≠ÊúÄÊúâÁî®ÁöÑÂá†‰∏™Ôºö" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://caixiongjiang.github.io/blog/2020/linux%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2020-08-28T01:49:53+08:00" />
<meta property="article:modified_time" content="2020-08-28T01:49:53+08:00" />











<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<script src="/vendor/js/vue.min.js" ></script>


  




<link rel="icon" href="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20210427152737.jpeg">



<link rel="stylesheet" href="https://caixiongjiang.github.io/scss/journal.min.3f72a5fc8f5b5dd732a4b476aced0eece2156958d9d414316494ddb10593ddf7.css" integrity="sha256-P3Kl/I9bXdcypLR2rO0O7OIVaVjZ1BQxZJTdsQWT3fc=" media="screen">



<link rel="stylesheet" href="https://caixiongjiang.github.io/scss/dark-mode.min.c0082f0b082177f6fb3768ff91439a097de49689bd26f4d49f76d94ebb81e02d.css" integrity="sha256-wAgvCwghd/b7N2j/kUOaCX3klom9JvTUn3bZTruB4C0=" media="screen">


<script src="/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>


  
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script type="text/javascript" id="MathJax-script"
async
src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
MathJax.Hub.Queue(function() {



var all = MathJax.Hub.getAllJax(), i;
for(i = 0; i < all.length; i += 1) {
all[i].SourceElement().parentNode.className += ' has-jax';
}
});
</script>

<style>
code.has-jax {
font: inherit;
font-size: 100%;
background: inherit;
border: inherit;
color: #515151;
}
</style>





  
    <script src="/js/toc.js"></script>
  











<script src="https://cdn.jsdelivr.net/npm/twikoo@1.3.1/dist/twikoo.all.min.js"></script>




</head>
<body>
    	<div id="app"><div ref="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://caixiongjiang.github.io/">
    
        <div class="nav-title">
            üåÄriba2534&#39;s Blog
        </div>
        
        <div class="nav-subtitle">
            Âá°‰∫ãÊúâ‰∫§‰ª£Ôºå‰ª∂‰ª∂ÊúâÁùÄËêΩÔºå‰∫ã‰∫ãÊúâÂõûÈü≥
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/blog">
                ÊñáÁ´†üìñ
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                ÂàÜÁ±ªüìå
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Ê†áÁ≠æüè∑Ô∏è
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/series">
                Á≥ªÂàóüìö
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/archive">
                ÂΩíÊ°£üìÉ
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about">
                ÂÖ≥‰∫éüëã
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/friends">
                ÂèãÈìæüîó
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSSüì¢
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
<a href="https://blog.csdn.net/riba2534">
    CSDN
</a>
<br>

<a href="https://github.com/riba2534">
    GitHub
</a>
<br>

<a href="https://www.zhihu.com/people/riba2534">
    Zhihu
</a>
<br>

<a href="mailto:riba2534@qq.com">
    Email
</a>
<br>

        <hr>
        
È≠îÊîπËá™ <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://blog.riba2534.cn">riba2534</a>
<br>

&copy;
	
	2021 üåÄriba2534&#39;s Blog
	
    </div>
    
</div><div ref="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- ÁõÆÂΩï -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#linux-%e5%86%85%e6%a0%b8%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84" onclick="onNavClick(`#linux-ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑ-nav`)" id="linux-ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑ-nav">
									Linux ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%8e%b7%e5%be%97%e6%ba%90%e7%a0%81" onclick="onNavClick(`#Ëé∑ÂæóÊ∫êÁ†Å-nav`)" id="Ëé∑ÂæóÊ∫êÁ†Å-nav">
									Ëé∑ÂæóÊ∫êÁ†Å
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#linux-%e6%ba%90%e7%a0%81%e6%a0%91%e6%a0%b9%e7%9b%ae%e5%bd%95%e8%af%b4%e6%98%8e" onclick="onNavClick(`#linux-Ê∫êÁ†ÅÊ†ëÊ†πÁõÆÂΩïËØ¥Êòé-nav`)" id="linux-Ê∫êÁ†ÅÊ†ëÊ†πÁõÆÂΩïËØ¥Êòé-nav">
									Linux Ê∫êÁ†ÅÊ†ëÊ†πÁõÆÂΩïËØ¥Êòé
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%86%85%e6%a0%b8%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e7%ae%80%e4%bb%8b" onclick="onNavClick(`#ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑÁÆÄ‰ªã-nav`)" id="ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑÁÆÄ‰ªã-nav">
									ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑÁÆÄ‰ªã
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%93%be%e8%a1%a8" onclick="onNavClick(`#ÈìæË°®-nav`)" id="ÈìæË°®-nav">
									ÈìæË°®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%ae%80%e5%8d%95%e5%ae%9a%e4%b9%89" onclick="onNavClick(`#ÁÆÄÂçïÂÆö‰πâ-nav`)" id="ÁÆÄÂçïÂÆö‰πâ-nav">
									ÁÆÄÂçïÂÆö‰πâ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#kernel%e4%b8%ad%e7%9a%84%e9%93%be%e8%a1%a8" onclick="onNavClick(`#kernel‰∏≠ÁöÑÈìæË°®-nav`)" id="kernel‰∏≠ÁöÑÈìæË°®-nav">
									kernel‰∏≠ÁöÑÈìæË°®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%8a%82%e7%82%b9%e5%ae%9a%e4%b9%89" onclick="onNavClick(`#ËäÇÁÇπÂÆö‰πâ-nav`)" id="ËäÇÁÇπÂÆö‰πâ-nav">
									ËäÇÁÇπÂÆö‰πâ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#container_of-%e5%ae%8f" onclick="onNavClick(`#container_of-ÂÆè-nav`)" id="container_of-ÂÆè-nav">
									container_of ÂÆè
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bb%8b%e7%bb%8d" onclick="onNavClick(`#‰ªãÁªç-nav`)" id="‰ªãÁªç-nav">
									‰ªãÁªç
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8a%9f%e8%83%bd%e5%8f%8a%e4%bd%bf%e7%94%a8%e6%96%b9%e6%b3%95" onclick="onNavClick(`#ÂäüËÉΩÂèä‰ΩøÁî®ÊñπÊ≥ï-nav`)" id="ÂäüËÉΩÂèä‰ΩøÁî®ÊñπÊ≥ï-nav">
									ÂäüËÉΩÂèä‰ΩøÁî®ÊñπÊ≥ï
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e9%93%be%e8%a1%a8%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#ÈìæË°®Êìç‰Ωú-nav`)" id="ÈìæË°®Êìç‰Ωú-nav">
									ÈìæË°®Êìç‰Ωú
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%8f%92%e5%85%a5%e8%8a%82%e7%82%b9" onclick="onNavClick(`#ÊèíÂÖ•ËäÇÁÇπ-nav`)" id="ÊèíÂÖ•ËäÇÁÇπ-nav">
									ÊèíÂÖ•ËäÇÁÇπ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8f%92%e5%85%a5%e5%88%b0%e9%93%be%e8%a1%a8%e5%b0%be%e9%83%a8" onclick="onNavClick(`#ÊèíÂÖ•Âà∞ÈìæË°®Â∞æÈÉ®-nav`)" id="ÊèíÂÖ•Âà∞ÈìæË°®Â∞æÈÉ®-nav">
									ÊèíÂÖ•Âà∞ÈìæË°®Â∞æÈÉ®Ôºö
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%a0%e9%99%a4%e8%8a%82%e7%82%b9" onclick="onNavClick(`#Âà†Èô§ËäÇÁÇπ-nav`)" id="Âà†Èô§ËäÇÁÇπ-nav">
									Âà†Èô§ËäÇÁÇπ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%a7%bb%e5%8a%a8%e5%92%8c%e5%90%88%e5%b9%b6%e8%8a%82%e7%82%b9" onclick="onNavClick(`#ÁßªÂä®ÂíåÂêàÂπ∂ËäÇÁÇπ-nav`)" id="ÁßªÂä®ÂíåÂêàÂπ∂ËäÇÁÇπ-nav">
									ÁßªÂä®ÂíåÂêàÂπ∂ËäÇÁÇπ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e9%81%8d%e5%8e%86%e9%93%be%e8%a1%a8" onclick="onNavClick(`#ÈÅçÂéÜÈìæË°®-nav`)" id="ÈÅçÂéÜÈìæË°®-nav">
									ÈÅçÂéÜÈìæË°®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%ad%a3%e5%90%91%e9%81%8d%e5%8e%86" onclick="onNavClick(`#Ê≠£ÂêëÈÅçÂéÜ-nav`)" id="Ê≠£ÂêëÈÅçÂéÜ-nav">
									Ê≠£ÂêëÈÅçÂéÜ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%8d%e5%90%91%e9%81%8d%e5%8e%86" onclick="onNavClick(`#ÂèçÂêëÈÅçÂéÜ-nav`)" id="ÂèçÂêëÈÅçÂéÜ-nav">
									ÂèçÂêëÈÅçÂéÜ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%81%8d%e5%8e%86%e5%90%8c%e6%97%b6%e5%88%a0%e9%99%a4" onclick="onNavClick(`#ÈÅçÂéÜÂêåÊó∂Âà†Èô§-nav`)" id="ÈÅçÂéÜÂêåÊó∂Âà†Èô§-nav">
									ÈÅçÂéÜÂêåÊó∂Âà†Èô§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e9%98%9f%e5%88%97" onclick="onNavClick(`#ÈòüÂàó-nav`)" id="ÈòüÂàó-nav">
									ÈòüÂàó
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#kfifo" onclick="onNavClick(`#kfifo-nav`)" id="kfifo-nav">
									Kfifo
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%9b%e5%bb%ba%e9%98%9f%e5%88%97" onclick="onNavClick(`#ÂàõÂª∫ÈòüÂàó-nav`)" id="ÂàõÂª∫ÈòüÂàó-nav">
									ÂàõÂª∫ÈòüÂàó
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%85%a5%e9%98%9f%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#ÂÖ•ÈòüÊìç‰Ωú-nav`)" id="ÂÖ•ÈòüÊìç‰Ωú-nav">
									ÂÖ•ÈòüÊìç‰Ωú
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%87%ba%e9%98%9f%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#Âá∫ÈòüÊìç‰Ωú-nav`)" id="Âá∫ÈòüÊìç‰Ωú-nav">
									Âá∫ÈòüÊìç‰Ωú
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%8e%b7%e5%8f%96%e9%98%9f%e5%88%97%e9%95%bf%e5%ba%a6" onclick="onNavClick(`#Ëé∑ÂèñÈòüÂàóÈïøÂ∫¶-nav`)" id="Ëé∑ÂèñÈòüÂàóÈïøÂ∫¶-nav">
									Ëé∑ÂèñÈòüÂàóÈïøÂ∫¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%87%8d%e7%bd%ae%e5%92%8c%e6%92%a4%e9%94%80%e9%98%9f%e5%88%97" onclick="onNavClick(`#ÈáçÁΩÆÂíåÊí§ÈîÄÈòüÂàó-nav`)" id="ÈáçÁΩÆÂíåÊí§ÈîÄÈòüÂàó-nav">
									ÈáçÁΩÆÂíåÊí§ÈîÄÈòüÂàó
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%98%a0%e5%b0%84" onclick="onNavClick(`#Êò†Â∞Ñ-nav`)" id="Êò†Â∞Ñ-nav">
									Êò†Â∞Ñ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e9%80%89%e5%9e%8b" onclick="onNavClick(`#Êï∞ÊçÆÁªìÊûÑÈÄâÂûã-nav`)" id="Êï∞ÊçÆÁªìÊûÑÈÄâÂûã-nav">
									Êï∞ÊçÆÁªìÊûÑÈÄâÂûã
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%9d%e5%a7%8b%e5%8c%96" onclick="onNavClick(`#ÂàùÂßãÂåñ-nav`)" id="ÂàùÂßãÂåñ-nav">
									ÂàùÂßãÂåñ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%86%e9%85%8duid" onclick="onNavClick(`#ÂàÜÈÖçuid-nav`)" id="ÂàÜÈÖçuid-nav">
									ÂàÜÈÖçUID
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%9f%a5%e6%89%beuid" onclick="onNavClick(`#Êü•Êâæuid-nav`)" id="Êü•Êâæuid-nav">
									Êü•ÊâæUID
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%a0%e9%99%a4uid" onclick="onNavClick(`#Âà†Èô§uid-nav`)" id="Âà†Èô§uid-nav">
									Âà†Èô§UID
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%92%a4%e9%94%80-idr" onclick="onNavClick(`#Êí§ÈîÄ-idr-nav`)" id="Êí§ÈîÄ-idr-nav">
									Êí§ÈîÄ idr
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%ba%8c%e5%8f%89%e6%a0%91" onclick="onNavClick(`#‰∫åÂèâÊ†ë-nav`)" id="‰∫åÂèâÊ†ë-nav">
									‰∫åÂèâÊ†ë
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%ba%8c%e5%8f%89%e6%a0%91%e6%90%9c%e7%b4%a2%e6%a0%91bst" onclick="onNavClick(`#‰∫åÂèâÊ†ëÊêúÁ¥¢Ê†ëbst-nav`)" id="‰∫åÂèâÊ†ëÊêúÁ¥¢Ê†ëbst-nav">
									‰∫åÂèâÊ†ëÊêúÁ¥¢Ê†ëÔºàBSTÔºâ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b9%b3%e8%a1%a1%e4%ba%8c%e5%8f%89%e6%a0%91" onclick="onNavClick(`#Âπ≥Ë°°‰∫åÂèâÊ†ë-nav`)" id="Âπ≥Ë°°‰∫åÂèâÊ†ë-nav">
									Âπ≥Ë°°‰∫åÂèâÊ†ë
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b9%b3%e8%a1%a1%e4%ba%8c%e5%8f%89%e6%90%9c%e7%b4%a2%e6%a0%91" onclick="onNavClick(`#Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë-nav`)" id="Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë-nav">
									Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%87%aa%e5%b9%b3%e8%a1%a1%e4%ba%8c%e5%8f%89%e6%90%9c%e7%b4%a2%e6%a0%91" onclick="onNavClick(`#Ëá™Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë-nav`)" id="Ëá™Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë-nav">
									Ëá™Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#avl%e6%a0%91" onclick="onNavClick(`#avlÊ†ë-nav`)" id="avlÊ†ë-nav">
									AVLÊ†ë
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%9f%ba%e6%9c%ac%e5%ae%9a%e4%b9%89" onclick="onNavClick(`#Âü∫Êú¨ÂÆö‰πâ-nav`)" id="Âü∫Êú¨ÂÆö‰πâ-nav">
									Âü∫Êú¨ÂÆö‰πâ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%85%b7%e4%bd%93%e5%ae%9e%e7%8e%b0" onclick="onNavClick(`#ÂÖ∑‰ΩìÂÆûÁé∞-nav`)" id="ÂÖ∑‰ΩìÂÆûÁé∞-nav">
									ÂÖ∑‰ΩìÂÆûÁé∞
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%b3%e6%97%8b%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#Âè≥ÊóãÊìç‰Ωú-nav`)" id="Âè≥ÊóãÊìç‰Ωú-nav">
									Âè≥ÊóãÊìç‰ΩúÔºö
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b7%a6%e6%97%8b%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#Â∑¶ÊóãÊìç‰Ωú-nav`)" id="Â∑¶ÊóãÊìç‰Ωú-nav">
									Â∑¶ÊóãÊìç‰Ωú
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%9c%80%e8%a6%81%e5%b9%b3%e8%a1%a1%e7%9a%84%e5%9b%9b%e7%a7%8d%e6%83%85%e5%86%b5" onclick="onNavClick(`#ÈúÄË¶ÅÂπ≥Ë°°ÁöÑÂõõÁßçÊÉÖÂÜµ-nav`)" id="ÈúÄË¶ÅÂπ≥Ë°°ÁöÑÂõõÁßçÊÉÖÂÜµ-nav">
									ÈúÄË¶ÅÂπ≥Ë°°ÁöÑÂõõÁßçÊÉÖÂÜµ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8f%92%e5%85%a5" onclick="onNavClick(`#ÊèíÂÖ•-nav`)" id="ÊèíÂÖ•-nav">
									ÊèíÂÖ•
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%a0%e9%99%a4" onclick="onNavClick(`#Âà†Èô§-nav`)" id="Âà†Èô§-nav">
									Âà†Èô§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e7%ba%a2%e9%bb%91%e6%a0%91" onclick="onNavClick(`#Á∫¢ÈªëÊ†ë-nav`)" id="Á∫¢ÈªëÊ†ë-nav">
									Á∫¢ÈªëÊ†ë
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%80%a7%e8%b4%a8" onclick="onNavClick(`#ÊÄßË¥®-nav`)" id="ÊÄßË¥®-nav">
									ÊÄßË¥®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%97%8b%e8%bd%ac" onclick="onNavClick(`#ÊóãËΩ¨-nav`)" id="ÊóãËΩ¨-nav">
									ÊóãËΩ¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8f%92%e5%85%a5-1" onclick="onNavClick(`#ÊèíÂÖ•-1-nav`)" id="ÊèíÂÖ•-1-nav">
									ÊèíÂÖ•
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%a0%e9%99%a4-1" onclick="onNavClick(`#Âà†Èô§-1-nav`)" id="Âà†Èô§-1-nav">
									Âà†Èô§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%af%94%e8%be%83" onclick="onNavClick(`#ÊØîËæÉ-nav`)" id="ÊØîËæÉ-nav">
									ÊØîËæÉ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%86%85%e6%a0%b8%e4%b8%ad%e7%9a%84%e5%ae%9e%e7%8e%b0" onclick="onNavClick(`#ÂÜÖÊ†∏‰∏≠ÁöÑÂÆûÁé∞-nav`)" id="ÂÜÖÊ†∏‰∏≠ÁöÑÂÆûÁé∞-nav">
									ÂÜÖÊ†∏‰∏≠ÁöÑÂÆûÁé∞
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e8%8a%82%e7%82%b9%e5%ae%9a%e4%b9%89-1" onclick="onNavClick(`#ËäÇÁÇπÂÆö‰πâ-1-nav`)" id="ËäÇÁÇπÂÆö‰πâ-1-nav">
									ËäÇÁÇπÂÆö‰πâ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#Êìç‰Ωú-nav`)" id="Êìç‰Ωú-nav">
									Êìç‰Ωú
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e7%9a%84%e9%80%89%e6%8b%a9" onclick="onNavClick(`#Êï∞ÊçÆÁªìÊûÑÁöÑÈÄâÊã©-nav`)" id="Êï∞ÊçÆÁªìÊûÑÁöÑÈÄâÊã©-nav">
									Êï∞ÊçÆÁªìÊûÑÁöÑÈÄâÊã©
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%80%9d%e8%80%83" onclick="onNavClick(`#ÊÄùËÄÉ-nav`)" id="ÊÄùËÄÉ-nav">
									ÊÄùËÄÉ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%85%b6%e4%bb%96" onclick="onNavClick(`#ÂÖ∂‰ªñ-nav`)" id="ÂÖ∂‰ªñ-nav">
									ÂÖ∂‰ªñ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99" onclick="onNavClick(`#ÂèÇËÄÉËµÑÊñô-nav`)" id="ÂèÇËÄÉËµÑÊñô-nav">
									ÂèÇËÄÉËµÑÊñô
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a class="pagination-action" v-on:click="toggleDarkMode">
            <i class="material-icons pagination-action-icon" v-if="isDarkMode">
                brightness_4
            </i>
            <i class="material-icons pagination-action-icon" v-else="isDarkMode">
                brightness_7
            </i>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/blog">
                    ÊñáÁ´†üìñ
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    ÂàÜÁ±ªüìå
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Ê†áÁ≠æüè∑Ô∏è
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/series">
                    Á≥ªÂàóüìö
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/archive">
                    ÂΩíÊ°£üìÉ
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about">
                    ÂÖ≥‰∫éüëã
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/friends">
                    ÂèãÈìæüîó
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSSüì¢
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- ÁõÆÂΩï -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#linux-%e5%86%85%e6%a0%b8%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84" onclick="onNavClick(`#linux-ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑ-nav`)" id="linux-ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑ-nav">
									Linux ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%8e%b7%e5%be%97%e6%ba%90%e7%a0%81" onclick="onNavClick(`#Ëé∑ÂæóÊ∫êÁ†Å-nav`)" id="Ëé∑ÂæóÊ∫êÁ†Å-nav">
									Ëé∑ÂæóÊ∫êÁ†Å
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#linux-%e6%ba%90%e7%a0%81%e6%a0%91%e6%a0%b9%e7%9b%ae%e5%bd%95%e8%af%b4%e6%98%8e" onclick="onNavClick(`#linux-Ê∫êÁ†ÅÊ†ëÊ†πÁõÆÂΩïËØ¥Êòé-nav`)" id="linux-Ê∫êÁ†ÅÊ†ëÊ†πÁõÆÂΩïËØ¥Êòé-nav">
									Linux Ê∫êÁ†ÅÊ†ëÊ†πÁõÆÂΩïËØ¥Êòé
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%86%85%e6%a0%b8%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e7%ae%80%e4%bb%8b" onclick="onNavClick(`#ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑÁÆÄ‰ªã-nav`)" id="ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑÁÆÄ‰ªã-nav">
									ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑÁÆÄ‰ªã
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%93%be%e8%a1%a8" onclick="onNavClick(`#ÈìæË°®-nav`)" id="ÈìæË°®-nav">
									ÈìæË°®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%ae%80%e5%8d%95%e5%ae%9a%e4%b9%89" onclick="onNavClick(`#ÁÆÄÂçïÂÆö‰πâ-nav`)" id="ÁÆÄÂçïÂÆö‰πâ-nav">
									ÁÆÄÂçïÂÆö‰πâ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#kernel%e4%b8%ad%e7%9a%84%e9%93%be%e8%a1%a8" onclick="onNavClick(`#kernel‰∏≠ÁöÑÈìæË°®-nav`)" id="kernel‰∏≠ÁöÑÈìæË°®-nav">
									kernel‰∏≠ÁöÑÈìæË°®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%8a%82%e7%82%b9%e5%ae%9a%e4%b9%89" onclick="onNavClick(`#ËäÇÁÇπÂÆö‰πâ-nav`)" id="ËäÇÁÇπÂÆö‰πâ-nav">
									ËäÇÁÇπÂÆö‰πâ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#container_of-%e5%ae%8f" onclick="onNavClick(`#container_of-ÂÆè-nav`)" id="container_of-ÂÆè-nav">
									container_of ÂÆè
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bb%8b%e7%bb%8d" onclick="onNavClick(`#‰ªãÁªç-nav`)" id="‰ªãÁªç-nav">
									‰ªãÁªç
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8a%9f%e8%83%bd%e5%8f%8a%e4%bd%bf%e7%94%a8%e6%96%b9%e6%b3%95" onclick="onNavClick(`#ÂäüËÉΩÂèä‰ΩøÁî®ÊñπÊ≥ï-nav`)" id="ÂäüËÉΩÂèä‰ΩøÁî®ÊñπÊ≥ï-nav">
									ÂäüËÉΩÂèä‰ΩøÁî®ÊñπÊ≥ï
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e9%93%be%e8%a1%a8%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#ÈìæË°®Êìç‰Ωú-nav`)" id="ÈìæË°®Êìç‰Ωú-nav">
									ÈìæË°®Êìç‰Ωú
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%8f%92%e5%85%a5%e8%8a%82%e7%82%b9" onclick="onNavClick(`#ÊèíÂÖ•ËäÇÁÇπ-nav`)" id="ÊèíÂÖ•ËäÇÁÇπ-nav">
									ÊèíÂÖ•ËäÇÁÇπ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8f%92%e5%85%a5%e5%88%b0%e9%93%be%e8%a1%a8%e5%b0%be%e9%83%a8" onclick="onNavClick(`#ÊèíÂÖ•Âà∞ÈìæË°®Â∞æÈÉ®-nav`)" id="ÊèíÂÖ•Âà∞ÈìæË°®Â∞æÈÉ®-nav">
									ÊèíÂÖ•Âà∞ÈìæË°®Â∞æÈÉ®Ôºö
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%a0%e9%99%a4%e8%8a%82%e7%82%b9" onclick="onNavClick(`#Âà†Èô§ËäÇÁÇπ-nav`)" id="Âà†Èô§ËäÇÁÇπ-nav">
									Âà†Èô§ËäÇÁÇπ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%a7%bb%e5%8a%a8%e5%92%8c%e5%90%88%e5%b9%b6%e8%8a%82%e7%82%b9" onclick="onNavClick(`#ÁßªÂä®ÂíåÂêàÂπ∂ËäÇÁÇπ-nav`)" id="ÁßªÂä®ÂíåÂêàÂπ∂ËäÇÁÇπ-nav">
									ÁßªÂä®ÂíåÂêàÂπ∂ËäÇÁÇπ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e9%81%8d%e5%8e%86%e9%93%be%e8%a1%a8" onclick="onNavClick(`#ÈÅçÂéÜÈìæË°®-nav`)" id="ÈÅçÂéÜÈìæË°®-nav">
									ÈÅçÂéÜÈìæË°®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%ad%a3%e5%90%91%e9%81%8d%e5%8e%86" onclick="onNavClick(`#Ê≠£ÂêëÈÅçÂéÜ-nav`)" id="Ê≠£ÂêëÈÅçÂéÜ-nav">
									Ê≠£ÂêëÈÅçÂéÜ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%8d%e5%90%91%e9%81%8d%e5%8e%86" onclick="onNavClick(`#ÂèçÂêëÈÅçÂéÜ-nav`)" id="ÂèçÂêëÈÅçÂéÜ-nav">
									ÂèçÂêëÈÅçÂéÜ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%81%8d%e5%8e%86%e5%90%8c%e6%97%b6%e5%88%a0%e9%99%a4" onclick="onNavClick(`#ÈÅçÂéÜÂêåÊó∂Âà†Èô§-nav`)" id="ÈÅçÂéÜÂêåÊó∂Âà†Èô§-nav">
									ÈÅçÂéÜÂêåÊó∂Âà†Èô§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e9%98%9f%e5%88%97" onclick="onNavClick(`#ÈòüÂàó-nav`)" id="ÈòüÂàó-nav">
									ÈòüÂàó
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#kfifo" onclick="onNavClick(`#kfifo-nav`)" id="kfifo-nav">
									Kfifo
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%9b%e5%bb%ba%e9%98%9f%e5%88%97" onclick="onNavClick(`#ÂàõÂª∫ÈòüÂàó-nav`)" id="ÂàõÂª∫ÈòüÂàó-nav">
									ÂàõÂª∫ÈòüÂàó
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%85%a5%e9%98%9f%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#ÂÖ•ÈòüÊìç‰Ωú-nav`)" id="ÂÖ•ÈòüÊìç‰Ωú-nav">
									ÂÖ•ÈòüÊìç‰Ωú
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%87%ba%e9%98%9f%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#Âá∫ÈòüÊìç‰Ωú-nav`)" id="Âá∫ÈòüÊìç‰Ωú-nav">
									Âá∫ÈòüÊìç‰Ωú
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%8e%b7%e5%8f%96%e9%98%9f%e5%88%97%e9%95%bf%e5%ba%a6" onclick="onNavClick(`#Ëé∑ÂèñÈòüÂàóÈïøÂ∫¶-nav`)" id="Ëé∑ÂèñÈòüÂàóÈïøÂ∫¶-nav">
									Ëé∑ÂèñÈòüÂàóÈïøÂ∫¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%87%8d%e7%bd%ae%e5%92%8c%e6%92%a4%e9%94%80%e9%98%9f%e5%88%97" onclick="onNavClick(`#ÈáçÁΩÆÂíåÊí§ÈîÄÈòüÂàó-nav`)" id="ÈáçÁΩÆÂíåÊí§ÈîÄÈòüÂàó-nav">
									ÈáçÁΩÆÂíåÊí§ÈîÄÈòüÂàó
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%98%a0%e5%b0%84" onclick="onNavClick(`#Êò†Â∞Ñ-nav`)" id="Êò†Â∞Ñ-nav">
									Êò†Â∞Ñ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e9%80%89%e5%9e%8b" onclick="onNavClick(`#Êï∞ÊçÆÁªìÊûÑÈÄâÂûã-nav`)" id="Êï∞ÊçÆÁªìÊûÑÈÄâÂûã-nav">
									Êï∞ÊçÆÁªìÊûÑÈÄâÂûã
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%9d%e5%a7%8b%e5%8c%96" onclick="onNavClick(`#ÂàùÂßãÂåñ-nav`)" id="ÂàùÂßãÂåñ-nav">
									ÂàùÂßãÂåñ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%86%e9%85%8duid" onclick="onNavClick(`#ÂàÜÈÖçuid-nav`)" id="ÂàÜÈÖçuid-nav">
									ÂàÜÈÖçUID
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%9f%a5%e6%89%beuid" onclick="onNavClick(`#Êü•Êâæuid-nav`)" id="Êü•Êâæuid-nav">
									Êü•ÊâæUID
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%a0%e9%99%a4uid" onclick="onNavClick(`#Âà†Èô§uid-nav`)" id="Âà†Èô§uid-nav">
									Âà†Èô§UID
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%92%a4%e9%94%80-idr" onclick="onNavClick(`#Êí§ÈîÄ-idr-nav`)" id="Êí§ÈîÄ-idr-nav">
									Êí§ÈîÄ idr
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%ba%8c%e5%8f%89%e6%a0%91" onclick="onNavClick(`#‰∫åÂèâÊ†ë-nav`)" id="‰∫åÂèâÊ†ë-nav">
									‰∫åÂèâÊ†ë
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%ba%8c%e5%8f%89%e6%a0%91%e6%90%9c%e7%b4%a2%e6%a0%91bst" onclick="onNavClick(`#‰∫åÂèâÊ†ëÊêúÁ¥¢Ê†ëbst-nav`)" id="‰∫åÂèâÊ†ëÊêúÁ¥¢Ê†ëbst-nav">
									‰∫åÂèâÊ†ëÊêúÁ¥¢Ê†ëÔºàBSTÔºâ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b9%b3%e8%a1%a1%e4%ba%8c%e5%8f%89%e6%a0%91" onclick="onNavClick(`#Âπ≥Ë°°‰∫åÂèâÊ†ë-nav`)" id="Âπ≥Ë°°‰∫åÂèâÊ†ë-nav">
									Âπ≥Ë°°‰∫åÂèâÊ†ë
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b9%b3%e8%a1%a1%e4%ba%8c%e5%8f%89%e6%90%9c%e7%b4%a2%e6%a0%91" onclick="onNavClick(`#Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë-nav`)" id="Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë-nav">
									Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%87%aa%e5%b9%b3%e8%a1%a1%e4%ba%8c%e5%8f%89%e6%90%9c%e7%b4%a2%e6%a0%91" onclick="onNavClick(`#Ëá™Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë-nav`)" id="Ëá™Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë-nav">
									Ëá™Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#avl%e6%a0%91" onclick="onNavClick(`#avlÊ†ë-nav`)" id="avlÊ†ë-nav">
									AVLÊ†ë
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%9f%ba%e6%9c%ac%e5%ae%9a%e4%b9%89" onclick="onNavClick(`#Âü∫Êú¨ÂÆö‰πâ-nav`)" id="Âü∫Êú¨ÂÆö‰πâ-nav">
									Âü∫Êú¨ÂÆö‰πâ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%85%b7%e4%bd%93%e5%ae%9e%e7%8e%b0" onclick="onNavClick(`#ÂÖ∑‰ΩìÂÆûÁé∞-nav`)" id="ÂÖ∑‰ΩìÂÆûÁé∞-nav">
									ÂÖ∑‰ΩìÂÆûÁé∞
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%b3%e6%97%8b%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#Âè≥ÊóãÊìç‰Ωú-nav`)" id="Âè≥ÊóãÊìç‰Ωú-nav">
									Âè≥ÊóãÊìç‰ΩúÔºö
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%b7%a6%e6%97%8b%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#Â∑¶ÊóãÊìç‰Ωú-nav`)" id="Â∑¶ÊóãÊìç‰Ωú-nav">
									Â∑¶ÊóãÊìç‰Ωú
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%9c%80%e8%a6%81%e5%b9%b3%e8%a1%a1%e7%9a%84%e5%9b%9b%e7%a7%8d%e6%83%85%e5%86%b5" onclick="onNavClick(`#ÈúÄË¶ÅÂπ≥Ë°°ÁöÑÂõõÁßçÊÉÖÂÜµ-nav`)" id="ÈúÄË¶ÅÂπ≥Ë°°ÁöÑÂõõÁßçÊÉÖÂÜµ-nav">
									ÈúÄË¶ÅÂπ≥Ë°°ÁöÑÂõõÁßçÊÉÖÂÜµ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8f%92%e5%85%a5" onclick="onNavClick(`#ÊèíÂÖ•-nav`)" id="ÊèíÂÖ•-nav">
									ÊèíÂÖ•
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%a0%e9%99%a4" onclick="onNavClick(`#Âà†Èô§-nav`)" id="Âà†Èô§-nav">
									Âà†Èô§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e7%ba%a2%e9%bb%91%e6%a0%91" onclick="onNavClick(`#Á∫¢ÈªëÊ†ë-nav`)" id="Á∫¢ÈªëÊ†ë-nav">
									Á∫¢ÈªëÊ†ë
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%80%a7%e8%b4%a8" onclick="onNavClick(`#ÊÄßË¥®-nav`)" id="ÊÄßË¥®-nav">
									ÊÄßË¥®
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%97%8b%e8%bd%ac" onclick="onNavClick(`#ÊóãËΩ¨-nav`)" id="ÊóãËΩ¨-nav">
									ÊóãËΩ¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%8f%92%e5%85%a5-1" onclick="onNavClick(`#ÊèíÂÖ•-1-nav`)" id="ÊèíÂÖ•-1-nav">
									ÊèíÂÖ•
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%a0%e9%99%a4-1" onclick="onNavClick(`#Âà†Èô§-1-nav`)" id="Âà†Èô§-1-nav">
									Âà†Èô§
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%af%94%e8%be%83" onclick="onNavClick(`#ÊØîËæÉ-nav`)" id="ÊØîËæÉ-nav">
									ÊØîËæÉ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%86%85%e6%a0%b8%e4%b8%ad%e7%9a%84%e5%ae%9e%e7%8e%b0" onclick="onNavClick(`#ÂÜÖÊ†∏‰∏≠ÁöÑÂÆûÁé∞-nav`)" id="ÂÜÖÊ†∏‰∏≠ÁöÑÂÆûÁé∞-nav">
									ÂÜÖÊ†∏‰∏≠ÁöÑÂÆûÁé∞
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e8%8a%82%e7%82%b9%e5%ae%9a%e4%b9%89-1" onclick="onNavClick(`#ËäÇÁÇπÂÆö‰πâ-1-nav`)" id="ËäÇÁÇπÂÆö‰πâ-1-nav">
									ËäÇÁÇπÂÆö‰πâ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#Êìç‰Ωú-nav`)" id="Êìç‰Ωú-nav">
									Êìç‰Ωú
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e7%9a%84%e9%80%89%e6%8b%a9" onclick="onNavClick(`#Êï∞ÊçÆÁªìÊûÑÁöÑÈÄâÊã©-nav`)" id="Êï∞ÊçÆÁªìÊûÑÁöÑÈÄâÊã©-nav">
									Êï∞ÊçÆÁªìÊûÑÁöÑÈÄâÊã©
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%80%9d%e8%80%83" onclick="onNavClick(`#ÊÄùËÄÉ-nav`)" id="ÊÄùËÄÉ-nav">
									ÊÄùËÄÉ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%85%b6%e4%bb%96" onclick="onNavClick(`#ÂÖ∂‰ªñ-nav`)" id="ÂÖ∂‰ªñ-nav">
									ÂÖ∂‰ªñ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99" onclick="onNavClick(`#ÂèÇËÄÉËµÑÊñô-nav`)" id="ÂèÇËÄÉËµÑÊñô-nav">
									ÂèÇËÄÉËµÑÊñô
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="https://caixiongjiang.github.io/">
            üåÄriba2534&#39;s Blog
        </a>
        
        <button type="button" class="nav-darkmode-toggle" v-on:click="toggleDarkMode">
            <i class="material-icons" v-if="isDarkMode">
                brightness_4
            </i>
            <i class="material-icons" v-else="isDarkMode">
                brightness_7
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://caixiongjiang.github.io/">
        <div class="single-column-header-title">üåÄriba2534&#39;s Blog</div>
        
        <div class="single-column-header-subtitle">Âá°‰∫ãÊúâ‰∫§‰ª£Ôºå‰ª∂‰ª∂ÊúâÁùÄËêΩÔºå‰∫ã‰∫ãÊúâÂõûÈü≥</div>
        

    </a>
</div>

            <div id="content">
<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://image.riba2534.cn/18-12-22/35474812.jpg')"
                    
                
            >
                <div class="post-title">
                    LinuxÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑ
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2020-08-28 01:49
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/linux">Linux</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/linux%E5%86%85%E6%A0%B8%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0">linuxÂÜÖÊ†∏ËÆæËÆ°‰∏éÂÆûÁé∞</a>
                                &nbsp;
                            
                                <a href="/tags/linux">Linux</a>
                                &nbsp;
                            
                        
                        
                            <i class="material-icons" style="">schedule</i>
                            

                            
                            

                            
                            61 min
                            
                            19 s.
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h1 id="linux-ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑ">Linux ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑ</h1>
<h1 id="Ëé∑ÂæóÊ∫êÁ†Å">Ëé∑ÂæóÊ∫êÁ†Å</h1>
<p>ÁõÆÂâçÔºåLinux ÂÜÖÊ†∏ÁöÑÊ∫êÁ†ÅÁª¥Êä§Âú® GitHub ‰∏äÔºåÂú∞ÂùÄ‰∏∫Ôºöhttps://github.com/torvalds/linux</p>
<ol>
<li>ÂÖãÈöÜÂà∞Êú¨Âú∞</li>
</ol>
<pre tabindex="0"><code>git clone https://github.com/torvalds/linux
</code></pre><ol>
<li>Êú¨‰π¶‰ΩøÁî®ÁöÑÊ∫êÁ†ÅÁâàÊú¨‰∏∫ 2.6.34 ÔºåÊâÄ‰ª•ÂàáÊç¢Âà∞ÂØπÂ∫î TagÔºö</li>
</ol>
<pre tabindex="0"><code>cd linux
git checkout v2.6.34
</code></pre><p>ÊàñËÄÖÁõ¥Êé•Âú®Ôºöhttps://github.com/torvalds/linux/releases/tag/v2.6.34 ‰∏ãËΩΩ</p>
<h1 id="linux-Ê∫êÁ†ÅÊ†ëÊ†πÁõÆÂΩïËØ¥Êòé">Linux Ê∫êÁ†ÅÊ†ëÊ†πÁõÆÂΩïËØ¥Êòé</h1>
<pre tabindex="0"><code>$ tree -L 1
.
‚îú‚îÄ‚îÄ arch       # ÁâπÂÆö‰ΩìÁ≥ªÁªìÊûÑÁöÑÊ∫êÁ†Å
‚îú‚îÄ‚îÄ block      # ÂùóËÆæÂ§á I/O Â±Ç
‚îú‚îÄ‚îÄ COPYING     # ÂÜÖÊ†∏ËÆ∏ÂèØËØÅÔºàGNU GPL v2Ôºâ
‚îú‚îÄ‚îÄ CREDITS     # ÂÜÖÊ†∏‰ª£Á†ÅÂºÄÂèëËÄÖÂàóË°®
‚îú‚îÄ‚îÄ crypto      # Âä†ÂØÜ API
‚îú‚îÄ‚îÄ Documentation  # ÂÜÖÊ†∏Ê∫êÁ†ÅÊñáÊ°£
‚îú‚îÄ‚îÄ drivers     # ËÆæÂ§áÈ©±Âä®Á®ãÂ∫è
‚îú‚îÄ‚îÄ firmware     # ‰ΩøÁî®Êüê‰∫õÈ©±Âä®Á®ãÂ∫èËÄåÈúÄË¶ÅÁöÑËÆæÂ§áÂõ∫‰ª∂ 
‚îú‚îÄ‚îÄ fs        # VFS ÂíåÂêÑÁßçÊñá‰ª∂Á≥ªÁªü
‚îú‚îÄ‚îÄ include     # ÂÜÖÊ†∏Â§¥Êñá‰ª∂
‚îú‚îÄ‚îÄ init       # ÂÜÖÊ†∏ÂºïÂØºÂíåÂàùÂßãÂåñ
‚îú‚îÄ‚îÄ ipc       # ËøõÁ®ãÈó¥ÈÄö‰ø°‰ª£Á†Å
‚îú‚îÄ‚îÄ Kbuild      # Áî®‰∫éÁºñËØëLinuxÂÜÖÊ†∏Êñá‰ª∂ÔºåÂØπmakefileËøõË°å‰∫ÜÊâ©ÂÖÖ 
‚îú‚îÄ‚îÄ kernel      # ÂÉèË∞ÉÂ∫¶Á®ãÂ∫èËøôÊ†∑ÁöÑÊ†∏ÂøÉÂ≠êÁ≥ªÁªü
‚îú‚îÄ‚îÄ lib       # ÈÄöÁî®ÂÜÖÊ†∏ÂáΩÊï∞
‚îú‚îÄ‚îÄ MAINTAINERS   # Áª¥Êä§ËÄÖÂàóË°®‰ª•ÂèäÂ¶Ç‰ΩïÊèê‰∫§ÂÜÖÊ†∏Êõ¥ÊîπÁöÑËØ¥ÊòéÊñá‰ª∂
‚îú‚îÄ‚îÄ Makefile     # makefile
‚îú‚îÄ‚îÄ mm        # ÂÜÖÂ≠òÁÆ°ÁêÜÂ≠êÁ≥ªÁªüÂíåvm   
‚îú‚îÄ‚îÄ net       # ÁΩëÁªúÂ≠êÁ≥ªÁªü 
‚îú‚îÄ‚îÄ README      # README
‚îú‚îÄ‚îÄ REPORTING-BUGS  # LinuxÂÜÖÊ†∏Â∏∏ËßÅÈóÆÈ¢òËß£Á≠î  
‚îú‚îÄ‚îÄ samples     # Á§∫‰æã
‚îú‚îÄ‚îÄ scripts     # ÁºñËØëÂÜÖÊ†∏ÊâÄÁî®ÁöÑËÑöÊú¨ 
‚îú‚îÄ‚îÄ security     # LinuxÂÆâÂÖ®Ê®°Âùó
‚îú‚îÄ‚îÄ sound      # ËØ≠Èü≥Â≠êÁ≥ªÁªü
‚îú‚îÄ‚îÄ tools      # Âú®LinuxÂºÄÂèë‰∏≠ÊúâÁî®ÁöÑÂ∑•ÂÖ∑
‚îú‚îÄ‚îÄ usr       # Êó©ÊúüÁî®Êà∑Á©∫Èó¥‰ª£Á†ÅÔºàÊâÄË∞ìÁöÑ inittranfsÔºâ
‚îî‚îÄ‚îÄ virt       # ËôöÊãüÂåñÂü∫Á°ÄÁªìÊûÑ
21 directories, 7 files
</code></pre><h1 id="ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑÁÆÄ‰ªã">ÂÜÖÊ†∏Êï∞ÊçÆÁªìÊûÑÁÆÄ‰ªã</h1>
<p>‰ªãÁªçÈÄöÁî®Êï∞ÊçÆÁªìÊûÑ‰∏≠ÊúÄÊúâÁî®ÁöÑÂá†‰∏™Ôºö</p>
<ul>
<li>
<p>ÈìæË°®</p>
</li>
<li>
<p>ÈòüÂàó</p>
</li>
<li>
<p>Êò†Â∞Ñ</p>
</li>
<li>
<p>‰∫åÂèâÊ†ë</p>
</li>
</ul>
<h1 id="ÈìæË°®">ÈìæË°®</h1>
<p>include/linux/list.h</p>
<h2 id="ÁÆÄÂçïÂÆö‰πâ">ÁÆÄÂçïÂÆö‰πâ</h2>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#228b22">// ÂçïÂêëÈìæË°®
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">struct</span> list_element
{
  <span style="color:#00688b;font-weight:bold">void</span> *data;
  <span style="color:#8b008b;font-weight:bold">struct</span> list_element *next; <span style="color:#a61717;background-color:#e3d2d2">*/</span>/ <span style="color:#a61717;background-color:#e3d2d2">ÊåáÂêë‰∏ã‰∏Ä‰∏™</span>*
};
<span style="color:#228b22">// ÂèåÂêëÈìæË°®
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">struct</span> list_element
{
  <span style="color:#00688b;font-weight:bold">void</span> *data;
  <span style="color:#8b008b;font-weight:bold">struct</span> list_element *next; <span style="color:#a61717;background-color:#e3d2d2">*/</span>/ <span style="color:#a61717;background-color:#e3d2d2">ÊåáÂêë‰∏ã‰∏Ä‰∏™</span>*
  <span style="color:#8b008b;font-weight:bold">struct</span> list_element *prev; <span style="color:#a61717;background-color:#e3d2d2">*/</span>/ <span style="color:#a61717;background-color:#e3d2d2">ÊåáÂêëÂâç‰∏Ä‰∏™</span>*
};
</code></pre></td></tr></table>
</div>
</div><p>ÁéØÂΩ¢ÈìæË°®Âç≥ÊääÈìæË°®ÁöÑÂ∞æÂÖÉÁ¥†ÁöÑ‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†Âèò‰∏∫ÈìæË°®ÁöÑÂ§¥ÈÉ®„ÄÇ</p>
<h2 id="kernel‰∏≠ÁöÑÈìæË°®">kernel‰∏≠ÁöÑÈìæË°®</h2>
<ul>
<li>
<p>kernel‰∏≠ÂØπÈìæË°®ÁöÑÂÆö‰πâÂú®Ôºöinclude/linux/list.h ‰∏ã„ÄÇ</p>
</li>
<li>
<p>Áî±‰∫éÂèåÂêëÈìæË°®ÊúâÊØîËæÉÂº∫Â§ßÁöÑÁÅµÊ¥ªÊÄßÔºåÊâÄ‰ª•linux‰∏≠ÁöÑÈìæË°®ÈááÁî®<strong>ÁéØÂΩ¢ÂèåÂêëÈìæË°®</strong>Êù•ÂÆåÊàê„ÄÇ</p>
</li>
<li>
<p>Linux‰∏é‰º†ÁªüÁöÑÊñπÂºè‰∏é‰ºó‰∏çÂêåÔºåÂÆÉ<strong>‰∏çÊòØÂ∞ÜÊï∞ÊçÆÁªìÊûÑÂ°ûÂÖ•ÈìæË°®ÔºåËÄåÊòØÊääÈìæË°®ËäÇÁÇπÂ°ûÂÖ•Êï∞ÊçÆÁªìÊûÑ</strong>„ÄÇ</p>
</li>
</ul>
<p><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828012504.png" alt="8266c5d8-4ad4-4d93-a727-b16804b5fc10"></p>
<h2 id="ËäÇÁÇπÂÆö‰πâ">ËäÇÁÇπÂÆö‰πâ</h2>
<p>ÈìæË°®ËäÇÁÇπÂÆö‰πâ‰∏∫Ôºö</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#228b22">// include/linux/list.h  19
</span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">struct</span> list_head {
  <span style="color:#8b008b;font-weight:bold">struct</span> list_head *next, *prev;
};
</code></pre></td></tr></table>
</div>
</div><p>ËäÇÁÇπÊú¨Ë∫´Âπ∂Ê≤°ÊúâÊÑè‰πâÔºåÂÆÉÈúÄË¶ÅË¢´ÂµåÂÖ•Ëá™Â∑±ÁöÑÊï∞ÊçÆÁªìÊûÑ‰∏≠ÊâçËÉΩÁîüÊïàÔºåÈìæË°®ÈúÄË¶ÅÂú®‰ΩøÁî®ÂâçËøõË°åÂàùÂßãÂåñÔºåÂõ†‰∏∫Â§öÊï∞ÂÖÉÁ¥†ÊòØÂä®ÊÄÅÂàõÂª∫ÁöÑ„ÄÇ</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#228b22">// include/linux/list.h  23Ë°å
</span><span style="color:#228b22"></span><span style="color:#1e889b">#define LIST_HEAD_INIT(*name*) { &amp;(name), &amp;(name) }
</span></code></pre></td></tr></table>
</div>
</div><p>ÁúãËµ∑ÊØîËæÉÁÆÄÂçïÔºåÈÇ£Â¶Ç‰Ωï‰ΩøÁî®Ëøô‰∏™ÈìæË°®ËäÇÁÇπÂë¢Ôºå‰π¶‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∏™‰æãÂ≠êÔºö</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8b008b;font-weight:bold">struct</span> fox
{
  <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">long</span> tail_length;
  <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">long</span> weight;
  <span style="color:#00688b;font-weight:bold">bool</span> is_fantastic;
  <span style="color:#8b008b;font-weight:bold">struct</span> list_head list; <span style="color:#a61717;background-color:#e3d2d2">*/</span>/ <span style="color:#a61717;background-color:#e3d2d2">ÊâÄÊúâ</span> fox <span style="color:#a61717;background-color:#e3d2d2">ÁªìÊûÑÂΩ¢ÊàêÈìæË°®</span>*
};
</code></pre></td></tr></table>
</div>
</div><h2 id="container_of-ÂÆè">container_of ÂÆè</h2>
<h3 id="‰ªãÁªç">‰ªãÁªç</h3>
<p>ÂéüÂûãÂÆö‰πâÂ¶Ç‰∏ãÔºö</p>
<p>include/linux/kernel.h 709Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#1e889b">#define container_of(*ptr*, *type*, *member*) ({      \
</span><span style="color:#1e889b">  const typeof( ((type *)0)-&gt;member ) *__mptr = (ptr);   \ </span><span style="color:#228b22">// 1
</span><span style="color:#228b22"></span>  (type *)( (<span style="color:#00688b;font-weight:bold">char</span> *)__mptr - offsetof(type,member) );})   <span style="color:#228b22">// 2
</span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂‰∏≠ offsetof ÁöÑÂÆö‰πâ‰∏∫Ôºö</p>
<p>include/linux/stddef.h 24Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#1e889b">#define offsetof(*TYPE*, *MEMBER*) ((size_t) &amp;((TYPE *)0)-&gt;MEMBER)
</span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂‰∏≠Ôºö</p>
<ul>
<li>
<p>‰∏äÈù¢ typeof ‰∏∫ GNU gcc Êâ©Â±ïËØ≠Ê≥ïÔºåÂèØÁî®Êù•Ëé∑Âèñ‰∏Ä‰∏™ÂèòÈáèÁöÑÁ±ªÂûã</p>
</li>
<li>
<p>‰ª•‰∏ä1‰ª£Á†ÅÂéªÊéâÂêéÔºåÂ∞Ü2‰∏≠ÁöÑ __mptrÊõøÊç¢‰∏∫ptr‰πüÂèØÊ≠£Â∏∏Â∑•‰Ωú„ÄÇÁúã‰ººÊó†Áî®ÔºåÂÆûÂàôÁî®‰∫éÁºñËØëÊúüÈó¥Á±ªÂûãÊ£ÄÊü•</p>
</li>
</ul>
<p>Âú®ÈìæË°®ÁªìÊûÑ‰∏≠Ôºå‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ list_entry ÁöÑÂÆèÔºå‰∏∫Ôºö</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#1e889b">#define list_entry(*ptr*, *type*, *member*) \
</span><span style="color:#1e889b">  container_of(ptr, type, member)
</span></code></pre></td></tr></table>
</div>
</div><p>ÂÆûË¥®‰∏äÂ∞±ÊòØË∞ÉÁî®‰∫Ü‰∏Ä‰∏ã container_of</p>
<h3 id="ÂäüËÉΩÂèä‰ΩøÁî®ÊñπÊ≥ï">ÂäüËÉΩÂèä‰ΩøÁî®ÊñπÊ≥ï</h3>
<p>ÂäüËÉΩÔºö<em>ÈÄöËøáÊàêÂëòÂèòÈáèÁöÑÂú∞ÂùÄÂæóÂà∞ÂÆÉÊâÄÂú®ÁªìÊûÑÁöÑÈ¶ñÂú∞ÂùÄ</em></p>
<p>ÂèÇÊï∞Ôºö</p>
<ul>
<li>
<p>type ÈúÄË¶ÅÊìç‰ΩúÁöÑÊï∞ÊçÆÁ±ªÂûã</p>
</li>
<li>
<p>member typeÁªìÊûÑÁöÑÊàêÂëòÂêçÁß∞</p>
</li>
<li>
<p>ptr memberÁ±ªÂûãÂÆö‰πâÁöÑÊåáÈíàÂèòÈáè</p>
</li>
</ul>
<p>‰ΩøÁî®ÊñπÊ≥ï‰æãÂ¶ÇÔºö</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#1e889b">#include</span> <span style="color:#1e889b">&lt;stdio.h&gt;</span><span style="color:#1e889b">
</span><span style="color:#1e889b">#define container_of(*ptr*, *type*, *member*) ({      \
</span><span style="color:#1e889b">  const typeof( ((type *)0)-&gt;member ) *__mptr = (ptr);   \
</span><span style="color:#1e889b">  (type *)( (char *)__mptr - offsetof(type,member) ); })
</span><span style="color:#1e889b">#define offsetof(*TYPE*, *MEMBER*) ((size_t) &amp; ((TYPE *)0)-&gt;MEMBER)
</span><span style="color:#1e889b"></span><span style="color:#8b008b;font-weight:bold">struct</span> typeabc
{
  <span style="color:#00688b;font-weight:bold">int</span> mem0;
  <span style="color:#00688b;font-weight:bold">float</span> mem2;
  <span style="color:#00688b;font-weight:bold">double</span> mem4;
  <span style="color:#00688b;font-weight:bold">char</span> mem6;
};
<span style="color:#00688b;font-weight:bold">int</span> <span style="color:#008b45">main</span>()
{
  <span style="color:#8b008b;font-weight:bold">struct</span> typeabc abc, *pabc;
  abc.mem2 = <span style="color:#b452cd">0.0</span>;
  <span style="color:#00688b;font-weight:bold">float</span> *pmem2 = &amp;abc.mem2;
  <span style="color:#a61717;background-color:#e3d2d2">*/</span>/<span style="color:#a61717;background-color:#e3d2d2">ÈÄöËøáÊàêÂëòÂèòÈáèÁöÑÂú∞ÂùÄÂæóÂà∞ÂÆÉÊâÄÂú®ÁªìÊûÑÁöÑÈ¶ñÂú∞ÂùÄ</span>*
  pabc = container_of(pmem2, <span style="color:#8b008b;font-weight:bold">struct</span> typeabc, mem2);
  printf(<span style="color:#cd5555">&#34;%p</span><span style="color:#cd5555">\n</span><span style="color:#cd5555">&#34;</span>, pabc);
  <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#b452cd">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><p>ÊîæÂú®ÂÜÖÊ†∏‰∏≠Ôºå‰ΩøÁî® container_of ÂèØ‰ª•Êñπ‰æøÁöÑ‰ªéÈìæË°®ÊåáÈíàÊâæÂà∞ÂÖ∂Áà∂ÁªìÊûÑ‰∏≠ÂåÖÂê´ÁöÑ‰ªª‰ΩïÂèòÈáèÔºåÂõ†‰∏∫Âú®CËØ≠Ë®Ä‰∏≠Ôºå‰∏Ä‰∏™ÁªôÂÆöÁªìÊûÑÁöÑÂèòÈáèÂÅèÁßªÂú®ÁºñËØëÁöÑÊó∂ÂÄôÂú∞ÂùÄÂ∞±Ë¢´Âõ∫ÂÆö‰∫Ü‰∏ãÊù•„ÄÇ</p>
<h2 id="ÈìæË°®Êìç‰Ωú">ÈìæË°®Êìç‰Ωú</h2>
<p>ÊâÄÊúâÊìç‰ΩúÁöÑÂ§çÊùÇÂ∫¶ÈÉΩÊòØ O(1)</p>
<h3 id="ÊèíÂÖ•ËäÇÁÇπ">ÊèíÂÖ•ËäÇÁÇπ</h3>
<p>ÂÜÖÊ†∏Êèê‰æõ‰∫Ü‰∏ÄÁªÑÈìæË°®Êìç‰ΩúÊµÅÁ®ãÔºå‰ΩøÁî® list_add() ÊñπÊ≥ïÂä†ÂÖ•‰∏Ä‰∏™Êñ∞ËäÇÁÇπÂà∞ÈìæË°®‰∏≠Ôºö</p>
<p>‰ªé‰ª•‰∏ã‰ª£Á†Å‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåÊèíÂÖ•‰∏Ä‰∏™Êñ∞ËäÇÁÇπÊó∂ÔºåÊòØÊääÊñ∞ËäÇÁÇπÊèíÂÖ•Âà∞‰∫ÜÂ§¥ÁªìÁÇπÂíåÂÖ∂‰∏ã‰∏Ä‰∏™ÁÇπÁöÑ‰∏≠Èó¥„ÄÇ</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#228b22">// include/linux/list.h  34Ë°å
</span><span style="color:#228b22"></span><span style="color:#a61717;background-color:#e3d2d2">*/</span>**
 ** Insert a* *new* *entry between two known consecutive entries.*
 ***
 ** This is only* *<span style="color:#8b008b;font-weight:bold">for</span>* *internal* *list* *manipulation where we know*
 ** the prev/next entries already!*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#1e889b">#ifndef CONFIG_DEBUG_LIST
</span><span style="color:#1e889b"></span><span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">inline</span> <span style="color:#00688b;font-weight:bold">void</span> __list_add(<span style="color:#8b008b;font-weight:bold">struct</span> list_head *new,
         <span style="color:#8b008b;font-weight:bold">struct</span> list_head **prev*,
         <span style="color:#8b008b;font-weight:bold">struct</span> list_head **next*)
{
  next-&gt;prev = new;
  new-&gt;next = next;
  new-&gt;prev = prev;
  prev-&gt;next = new;
}
<span style="color:#1e889b">#else
</span><span style="color:#1e889b"></span><span style="color:#8b008b;font-weight:bold">extern</span> <span style="color:#00688b;font-weight:bold">void</span> __list_add(<span style="color:#8b008b;font-weight:bold">struct</span> list_head *new,
         <span style="color:#8b008b;font-weight:bold">struct</span> list_head **prev*,
         <span style="color:#8b008b;font-weight:bold">struct</span> list_head **next*);
<span style="color:#1e889b">#endif
</span><span style="color:#1e889b"></span><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** list_add - add a* *new* *entry*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>**new**:* *new* *entry to be added*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>head:* *list* *head to add it after*
 ***
 ** Insert a* *new* *entry after the specified head.*
 ** This is good* *<span style="color:#8b008b;font-weight:bold">for</span>* *implementing stacks.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">inline</span> <span style="color:#00688b;font-weight:bold">void</span> list_add(<span style="color:#8b008b;font-weight:bold">struct</span> list_head *new, <span style="color:#8b008b;font-weight:bold">struct</span> list_head **head*)
{
  __list_add(new, head, head-&gt;next);
}
</code></pre></td></tr></table>
</div>
</div><h3 id="ÊèíÂÖ•Âà∞ÈìæË°®Â∞æÈÉ®">ÊèíÂÖ•Âà∞ÈìæË°®Â∞æÈÉ®Ôºö</h3>
<p>ÂÆûË¥®‰∏äÊòØË∞ÉÁî®‰∫Ü __list_add() ÊñπÊ≥ï„ÄÇÊääÂÖÉÁ¥†ÊèíÂú®‰∫ÜÊäïÊú∫ÂâçÁöÑÂâç‰∏Ä‰∏™Âà∞Â§¥ÁªìÁÇπ‰∏≠Èó¥</p>
<p>include/linux/list.h 70Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** list_add_tail - add a* *new* *entry*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>**new**:* *new* *entry to be added*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>head:* *list* *head to add it before*
 ***
 ** Insert a* *new* *entry before the specified head.*
 ** This is useful* *<span style="color:#8b008b;font-weight:bold">for</span>* *implementing queues.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">inline</span> <span style="color:#00688b;font-weight:bold">void</span> list_add_tail(<span style="color:#8b008b;font-weight:bold">struct</span> list_head *new, <span style="color:#8b008b;font-weight:bold">struct</span> list_head **head*)
{
  __list_add(new, head-&gt;prev, head);
}
</code></pre></td></tr></table>
</div>
</div><h3 id="Âà†Èô§ËäÇÁÇπ">Âà†Èô§ËäÇÁÇπ</h3>
<p>‰ª£Á†ÅÂæàÂÆπÊòìÁúãÊáÇ</p>
<p>include/linux/list.h 83Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>**
 ** Delete a* *list* *entry by making the prev/next entries*
 ** point to each other.*
 ***
 ** This is only* *<span style="color:#8b008b;font-weight:bold">for</span>* *internal* *list* *manipulation where we know*
 ** the prev/next entries already!*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">inline</span> <span style="color:#00688b;font-weight:bold">void</span> __list_del(<span style="color:#8b008b;font-weight:bold">struct</span> list_head * *prev*, <span style="color:#8b008b;font-weight:bold">struct</span> list_head * *next*)
{
  next-&gt;prev = prev;
  prev-&gt;next = next;
}
<span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** list_del - deletes entry from* *list**.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>entry: the element to* *delete* *from the* *list**.*
 ** Note: list_empty() on entry does* *not* *<span style="color:#8b008b;font-weight:bold">return</span>* *<span style="color:#658b00">true</span>* *after* *this**, the entry is*
 ** in an undefined state.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#1e889b">#ifndef CONFIG_DEBUG_LIST
</span><span style="color:#1e889b"></span><span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">inline</span> <span style="color:#00688b;font-weight:bold">void</span> list_del(<span style="color:#8b008b;font-weight:bold">struct</span> list_head **entry*)
{
  __list_del(entry-&gt;prev, entry-&gt;next);
  entry-&gt;next = LIST_POISON1;
  entry-&gt;prev = LIST_POISON2;
}
<span style="color:#1e889b">#else
</span><span style="color:#1e889b"></span><span style="color:#8b008b;font-weight:bold">extern</span> <span style="color:#00688b;font-weight:bold">void</span> list_del(<span style="color:#8b008b;font-weight:bold">struct</span> list_head **entry*);
<span style="color:#1e889b">#endif
</span></code></pre></td></tr></table>
</div>
</div><p>include/linux/list.h 136Ë°å ‰ªéÈìæË°®‰∏≠Âà†Èô§‰∏Ä‰∏™ËäÇÁÇπÔºåÂπ∂ÂØπÂÖ∂ÈáçÊñ∞ÂàùÂßãÂåñ</p>
<pre tabindex="0"><code>*/***
 ** list_del_init - deletes entry from* *list* *and* *reinitialize it.*
 ** @entry: the element to* *delete* *from the* *list**.*
 **/*
static inline void list_del_init(struct list_head **entry*)
{
  __list_del(entry-&gt;prev, entry-&gt;next);
  INIT_LIST_HEAD(entry);
}
// ÈáçÊñ∞ÂàùÂßãÂåñÁöÑÊñπÊ≥ïÔºåÊää‰∏ã‰∏Ä‰∏™ÂíåÂâç‰∏Ä‰∏™ËäÇÁÇπÂèòÊàêËá™Â∑±
static inline void INIT_LIST_HEAD(struct list_head **list*)
{
  list-&gt;next = list;
  list-&gt;prev = list;
}
</code></pre><h3 id="ÁßªÂä®ÂíåÂêàÂπ∂ËäÇÁÇπ">ÁßªÂä®ÂíåÂêàÂπ∂ËäÇÁÇπ</h3>
<p>Áõ¥Êé•ÊääË¶ÅÁßªÂä®ÁöÑËäÇÁÇπËøô‰∏ÄÊÆµÁöÑÂ§¥Â∞æÁªôÊé•Ëµ∑Êù•ÔºåÁÑ∂ÂêéÂÜçÊèíÂÖ•Âà∞Êñ∞ÁöÑÂú∞Êñπ</p>
<p>ÁßªÂä®ËäÇÁÇπ 90Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** list_move - delete from one* *list* *and* *add* *as* *another**<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>s head*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>**list**: the entry to move*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>head: the head that will precede our entry*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">inline</span> <span style="color:#00688b;font-weight:bold">void</span> list_move(<span style="color:#8b008b;font-weight:bold">struct</span> list_head **list*, <span style="color:#8b008b;font-weight:bold">struct</span> list_head **head*)
{
  __list_del(list-&gt;prev, list-&gt;next);
  list_add(list, head);
}
</code></pre></td></tr></table>
</div>
</div><p>ÂêàÂπ∂ËäÇÁÇπ 271Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">inline</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">__list_splice</span>(<span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">struct</span> list_head **list*,
         <span style="color:#8b008b;font-weight:bold">struct</span> list_head **prev*,
         <span style="color:#8b008b;font-weight:bold">struct</span> list_head **next*)
{
  <span style="color:#8b008b;font-weight:bold">struct</span> list_head *first = list-&gt;next;
  <span style="color:#8b008b;font-weight:bold">struct</span> list_head *last = list-&gt;prev;
  first-&gt;prev = prev;
  prev-&gt;next = first;
  last-&gt;next = next;
  next-&gt;prev = last;
}
<span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** list_splice - join two lists, this is designed* *<span style="color:#8b008b;font-weight:bold">for</span>* *stacks*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>**list**: the* *new* *list* *to add.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>head: the place to add it in the first* *list**.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">inline</span> <span style="color:#00688b;font-weight:bold">void</span> list_splice(<span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#8b008b;font-weight:bold">struct</span> list_head **list*,
        <span style="color:#8b008b;font-weight:bold">struct</span> list_head **head*)
{
  <span style="color:#8b008b;font-weight:bold">if</span> (!list_empty(list))
    __list_splice(list, head, head-&gt;next);
}
</code></pre></td></tr></table>
</div>
</div><h2 id="ÈÅçÂéÜÈìæË°®">ÈÅçÂéÜÈìæË°®</h2>
<h3 id="Ê≠£ÂêëÈÅçÂéÜ">Ê≠£ÂêëÈÅçÂéÜ</h3>
<p>include/linux/list.h  367Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** list_for_each   -  iterate over a* *list*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>pos:   the &amp;<span style="color:#8b008b;font-weight:bold">struct</span> list_head to* *use* *as* *a* *loop* *cursor**.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>head:  the head* *<span style="color:#8b008b;font-weight:bold">for</span>* *your* *list**.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#1e889b">#define list_for_each(*pos*, *head*) \
</span><span style="color:#1e889b">  for (pos = (head)-&gt;next; prefetch(pos-&gt;next), pos != (head); \
</span><span style="color:#1e889b">      pos = pos-&gt;next)
</span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂‰∏≠Ôºå‰ΩøÁî®‰∫Ü prefetch() ÂÆèÔºåÂÖ∂ÂäüËÉΩÊòØÊï∞ÊçÆÁöÑÈ¢ÑÂÖàËØªÂèñ„ÄÇÂΩì‰Ω†Á°ÆËÆ§ÂêéÁªßÁª≠Ë¶ÅËØªÂèñÊüêÂÜÖÂ≠òÁöÑ‰ø°ÊÅØÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•ÈááÁî®prefetchÂ∞ÜËøô‰∏ÄÂùóÊï∞ÊçÆËØª ÂèñÂà∞cache‰πã‰∏≠Ôºå‰ª•‰æøÂêéÁªßÂø´ÈÄüËÆøÈóÆ„ÄÇ</p>
<p>Âà©Áî®‰∏äÈù¢ÊèêÂà∞ÁöÑ list_entry() ÔºåÂèØ‰ª•ÂÆûÁé∞‰ºòÁæéÁöÑÈÅçÂéÜÔºåÊääÂΩìÂâçÈìæË°®ËäÇÁÇπÊâÄÂú®ÁöÑÁªìÊûÑ‰ΩìÁöÑÁªìÊûÑÂú∞ÂùÄÊãøÂá∫Êù•„ÄÇ</p>
<p>418Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** list_for_each_entry  -  iterate over* *list* *of given type*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>pos:   the type <span style="color:#a61717;background-color:#e3d2d2">\</span>* to* *use* *as* *a* *loop* *cursor**.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>head:  the head* *<span style="color:#8b008b;font-weight:bold">for</span>* *your* *list**.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>member: the name of the list_struct within the <span style="color:#8b008b;font-weight:bold">struct</span>.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#1e889b">#define list_for_each_entry(*pos*, *head*, *member*)        \
</span><span style="color:#1e889b">  for (pos = list_entry((head)-&gt;next, typeof(*pos), member);  \
</span><span style="color:#1e889b">     &amp;pos-&gt;member != (head);   \
</span><span style="color:#1e889b">     pos = list_entry(pos-&gt;member.next, typeof(*pos), member))
</span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•Áúã‰∏Ä‰∏™ÂÆûÈôÖÁöÑ‰æãÂ≠êÔºö</p>
<p>fs/notify/inotify/inotify.c 213Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>**
 ** inotify_find_handle - find the watch associated with the given inode* *and*
 ** handle*
 ***
 ** Callers must hold inode-&gt;inotify_mutex.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">struct</span> inotify_watch *inode_find_handle(<span style="color:#8b008b;font-weight:bold">struct</span> inode **inode*,
              <span style="color:#8b008b;font-weight:bold">struct</span> inotify_handle **ih*)
{
  <span style="color:#8b008b;font-weight:bold">struct</span> inotify_watch *watch;
  list_for_each_entry(watch, &amp;inode-&gt;inotify_watches, i_list) {
    <span style="color:#8b008b;font-weight:bold">if</span> (watch-&gt;ih == ih)
      <span style="color:#8b008b;font-weight:bold">return</span> watch;
  }
  <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#658b00">NULL</span>;
}
</code></pre></td></tr></table>
</div>
</div><p>ËøôÊòØlinux‰∏≠ÂÜÖÊ†∏Êñá‰ª∂Á≥ªÁªüÁöÑÊõ¥Êñ∞ÈÄöÁü•Êú∫Âà∂ÔºåÂáΩÊï∞ÈÅçÂéÜ‰∫Ü inode-&gt;inotify_watchs‰∏≠ÁöÑÊâÄÊúâÈ°π</p>
<h3 id="ÂèçÂêëÈÅçÂéÜ">ÂèçÂêëÈÅçÂéÜ</h3>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#228b22">// 425Ë°å
</span><span style="color:#228b22"></span><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** list_for_each_entry_reverse - iterate backwards over* *list* *of given type.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>pos:   the type <span style="color:#a61717;background-color:#e3d2d2">\</span>* to* *use* *as* *a* *loop* *cursor**.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>head:  the head* *<span style="color:#8b008b;font-weight:bold">for</span>* *your* *list**.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>member: the name of the list_struct within the <span style="color:#8b008b;font-weight:bold">struct</span>.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#1e889b">#define list_for_each_entry_reverse(*pos*, *head*, *member*)      \
</span><span style="color:#1e889b">  for (pos = list_entry((head)-&gt;prev, typeof(*pos), member);  \
</span><span style="color:#1e889b">     prefetch(pos-&gt;member.prev), &amp;pos-&gt;member != (head);   \
</span><span style="color:#1e889b">     pos = list_entry(pos-&gt;member.prev, typeof(*pos), member))
</span></code></pre></td></tr></table>
</div>
</div><p>Âíå‰∏äÈù¢‰∏ÄÊ†∑ÔºåÊó†ÈùûÊòØÊ≤øÁùÄÂâçÈ©±ÈÅçÂéÜ„ÄÇ</p>
<h3 id="ÈÅçÂéÜÂêåÊó∂Âà†Èô§">ÈÅçÂéÜÂêåÊó∂Âà†Èô§</h3>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#228b22">// 487Ë°å
</span><span style="color:#228b22"></span><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** list_for_each_entry_safe - iterate over* *list* *of given type safe against removal of* *list* *entry*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>pos:   the type <span style="color:#a61717;background-color:#e3d2d2">\</span>* to* *use* *as* *a* *loop* *cursor**.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>n:    another type <span style="color:#a61717;background-color:#e3d2d2">\</span>* to* *use* *as* *temporary* *storage*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>head:  the head* *<span style="color:#8b008b;font-weight:bold">for</span>* *your* *list**.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>member: the name of the list_struct within the <span style="color:#8b008b;font-weight:bold">struct</span>.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#1e889b">#define list_for_each_entry_safe(*pos*, *n*, *head*, *member*)      \
</span><span style="color:#1e889b">  for (pos = list_entry((head)-&gt;next, typeof(*pos), member),  \
</span><span style="color:#1e889b">    n = list_entry(pos-&gt;member.next, typeof(*pos), member); \
</span><span style="color:#1e889b">     &amp;pos-&gt;member != (head);           \
</span><span style="color:#1e889b">     pos = n, n = list_entry(n-&gt;member.next, typeof(*n), member))
</span></code></pre></td></tr></table>
</div>
</div><p>Âà†Èô§ÁöÑÂéüÁêÜÊòØÔºåÂú®Âà†Èô§‰πãÂâçÂ≠òÂÇ® next ÊåáÈíàÂà∞‰∏Ä‰∏™‰∏¥Êó∂ÂèòÈáèÔºå‰ª•‰æøËÉΩÊâßË°åÂà†Èô§Êìç‰Ωú„ÄÇ</p>
<p>ÊØîÂ¶ÇÂú® fs/notify/inotify/inotify.c 452Ë°å‰∏≠Ôºö</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** inotify_inode_is_dead - an inode has been deleted, cleanup any watches*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>inode: inode that is about to be removed*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#00688b;font-weight:bold">void</span> inotify_inode_is_dead(<span style="color:#8b008b;font-weight:bold">struct</span> inode **inode*)
{
  <span style="color:#8b008b;font-weight:bold">struct</span> inotify_watch *watch, *next;
  mutex_lock(&amp;inode-&gt;inotify_mutex);
  list_for_each_entry_safe(watch, next, &amp;inode-&gt;inotify_watches, i_list) {
    <span style="color:#8b008b;font-weight:bold">struct</span> inotify_handle *ih = watch-&gt;ih;
    mutex_lock(&amp;ih-&gt;mutex);
    inotify_remove_watch_locked(ih, watch);
    mutex_unlock(&amp;ih-&gt;mutex);
  }
  mutex_unlock(&amp;inode-&gt;inotify_mutex);
}
</code></pre></td></tr></table>
</div>
</div><p>Ê≠§ÂáΩÊï∞ÈÅçÂéÜ inotify_watches ÈìæË°®‰∏≠ÊâÄÊúâÈ°π</p>
<p>ÂÖ∂‰ΩôÈìæË°®ËøòÊúâÂæàÂ§öÊìç‰ΩúÔºåÈÉΩÂèØ‰ª•Âú®ËØ•Â§¥Êñá‰ª∂‰∏≠ÊâæÂà∞„ÄÇ</p>
<h1 id="ÈòüÂàó">ÈòüÂàó</h1>
<p>Êìç‰ΩúÁ≥ªÁªüÁöÑÁºñÁ®ãÊ®°ÂûãÊúâÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÔºåÁîü‰∫ßËÄÖÁîü‰∫ßÊï∞ÊçÆÔºåÊ∂àË¥πËÄÖÊ∂àË¥πÊï∞ÊçÆÔºåÈúÄË¶Å‰∏Ä‰∏™ÈòüÂàóÊù•ÂΩì‰∏≠Èó¥‰∫∫„ÄÇ</p>
<p>ÂéüÁêÜÊó†ÈùûÊòØÂÖàÂÖ•ÂÖàÂá∫ÔºàFIFOÔºâ„ÄÇ</p>
<p><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828012915.png" alt="img"></p>
<p>LinuxÂÜÖÊ†∏‰∏≠ÁöÑÈòüÂÆûÁé∞Âú® <code>kernel/kfifo.c</code> ‰∏≠ÔºåËÄåÂ£∞ÊòéÂú® <code>include/linux/kfifo.h</code> ‰∏≠„ÄÇ</p>
<h2 id="kfifo">Kfifo</h2>
<p>include/linux/kfifo.h 47Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8b008b;font-weight:bold">struct</span> kfifo {
  <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">char</span> *buffer;  <span style="color:#a61717;background-color:#e3d2d2">*/\</span>* the buffer holding the data <span style="color:#a61717;background-color:#e3d2d2">\*/</span>*
  <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> size;  <span style="color:#a61717;background-color:#e3d2d2">*/\</span>* the size of the allocated buffer <span style="color:#a61717;background-color:#e3d2d2">\*/</span>*
  <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> in;   <span style="color:#a61717;background-color:#e3d2d2">*/\</span>* data is added at offset (in % size) <span style="color:#a61717;background-color:#e3d2d2">\*/</span>*
  <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> out;  <span style="color:#a61717;background-color:#e3d2d2">*/\</span>* data is extracted from off. (out % size) <span style="color:#a61717;background-color:#e3d2d2">\*/</span>*
};
</code></pre></td></tr></table>
</div>
</div><p>LinuxÁöÑkfifoÊèê‰æõ‰∫Ü‰∏§‰∏™Êìç‰ΩúÔºö</p>
<ul>
<li>
<p>enqueue ÂÖ•Èòü</p>
</li>
<li>
<p>dequeue Âá∫Èòü</p>
</li>
</ul>
<p>kfifoÂØπË±°Áª¥Êä§‰∫Ü‰∏§‰∏™ÂØπË±°Ôºö</p>
<ul>
<li>
<p>ÂÖ•Âè£ÂÅèÁßªÈáèÔºö‰∏ã‰∏ÄÊ¨°ÂÖ•ÈòüÂàóÊó∂ÂÄôÁöÑ‰ΩçÁΩÆ</p>
</li>
<li>
<p>Âá∫Âè£ÂÅèÁßªÈáèÔºö‰∏ã‰∏ÄÊ¨°Âá∫ÈòüÂàóÊó∂ÁöÑ‰ΩçÁΩÆ</p>
</li>
</ul>
<blockquote>
<p>Âá∫Âè£ÂÅèÁßªÈáèÊÄªÊòØÂ∞è‰∫éÂÖ•Âè£ÂÅèÁßªÈáèÔºåÂê¶ÂàôÊó†ÊÑè‰πâÔºåÂõ†‰∏∫ÈÇ£Ê†∑ËØ¥ÊòéË¶ÅÂá∫ÈòüÂàóÁöÑÂÖÉÁ¥†Ê†πÊú¨ËøòÊ≤°ÊúâÂÖ•ÈòüÂàó</p>
</blockquote>
<ul>
<li>
<p>ÂÖ•ÈòüÊòØÊã∑Ë¥ùÊï∞ÊçÆÂà∞ÈòüÂàóÁöÑÂÖ•Âè£ÂÅèÁßªÈáè„ÄÇ‰πãÂêéÂÖ•Âè£ÂÅèÁßªÈáèÂ¢ûÂä†Êé®ÂÖ•ÁöÑÂÖÉÁ¥†Êï∞ÁõÆ„ÄÇ</p>
</li>
<li>
<p>Âá∫ÈòüÊìç‰ΩúÊòØ‰ªéÈòüÂàóÁöÑÂá∫Âè£ÂÅèÁßªÈáèÂ§ÑÊã∑Ë¥ùÊï∞ÊçÆ„ÄÇ‰πãÂêéÂá∫Âè£ÂÅèÁßªÈáèÂáèÂéªÊëòÂèñÂÖÉÁ¥†ÁöÑÊï∞ÁõÆ„ÄÇ</p>
</li>
<li>
<p>In == out Êó∂ËØ¥ÊòéÈòüÂàóÁ©∫‰∫ÜÔºåÂú®Êñ∞ÁöÑÊï∞ÊçÆË¢´Êé®ÂÖ•ÂâçÔºå‰∏çÂèØ‰ª•Âú®ÊëòÂèñ‰ªª‰ΩïÊï∞ÊçÆ‰∫Ü„ÄÇ</p>
</li>
<li>
<p>ÂÖ•Âè£ÂÅèÁßªÈáèÁ≠â‰∫éÈòüÂàóÈïøÂ∫¶Êó∂ÔºåËØ¥ÊòéÂú®ÈòüÂàó resize ÂâçÔºå‰∏çÂèØ‰ª•ÂÜçÂä†ÂÖ•Êñ∞Êï∞ÊçÆ</p>
</li>
</ul>
<h2 id="ÂàõÂª∫ÈòüÂàó">ÂàõÂª∫ÈòüÂàó</h2>
<p>kernel/kfifo.c 56Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** kfifo_alloc - allocates a* *new* *FIFO internal buffer*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>fifo: the fifo to assign then* *new* *buffer*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>size: the size of the buffer to be allocated,* *this* *have to be a power of* *<span style="color:#b452cd">2.</span>*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>gfp_mask: get_free_pages mask,* *passed to* *kmalloc**()*
 ***
 ** This function dynamically allocates a* *new* *fifo internal buffer*
 ***
 ** The size will be rounded-up to a power of* *<span style="color:#b452cd">2.</span>*
 *** *The buffer will be release with* *kfifo_free**()**.*
 ** Return* *<span style="color:#b452cd">0</span>* *<span style="color:#8b008b;font-weight:bold">if</span>* *no error, otherwise the an error code*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#00688b;font-weight:bold">int</span> kfifo_alloc(<span style="color:#8b008b;font-weight:bold">struct</span> kfifo **fifo*, <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> *size*, gfp_t *gfp_mask*)
{
  <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">char</span> *buffer;
  <span style="color:#a61717;background-color:#e3d2d2">*/</span>**
   ** round up to the next power of* *<span style="color:#b452cd">2</span>**, since our* *<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>let the indices*
   ** wrap<span style="color:#a61717;background-color:#e3d2d2">&#39;</span> technique works only in* *this* *<span style="color:#8b008b;font-weight:bold">case</span>**.*
   *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
  <span style="color:#8b008b;font-weight:bold">if</span> (!is_power_of_2(size)) {
    BUG_ON(size &gt; <span style="color:#b452cd">0x80000000</span>);
    size = roundup_pow_of_two(size);
  }
  buffer = kmalloc(size, gfp_mask);
  <span style="color:#8b008b;font-weight:bold">if</span> (!buffer) {
    _kfifo_init(fifo, <span style="color:#658b00">NULL</span>, <span style="color:#b452cd">0</span>);
    <span style="color:#8b008b;font-weight:bold">return</span> -ENOMEM;
  }
  _kfifo_init(fifo, buffer, size);
  <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#b452cd">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>Ê≠§ÂáΩÊï∞ÂàùÂßãÂåñ‰∫Ü‰∏Ä‰∏™Â§ßÂ∞è‰∏∫ size ÁöÑkfifo</p>
</li>
<li>
<p>‰ΩøÁî® gfp_mask Ê†áËØÜÂàÜÈÖçÈòüÂàó</p>
</li>
<li>
<p>Â¶ÇÊûúÊàêÂäü‰ºöËøîÂõû0ÔºåÂ¶ÇÊûúÈîôËØØ‰ºöËøîÂõû‰∏Ä‰∏™ÈîôËØØÁ†Å„ÄÇ</p>
</li>
<li>
<p>sizeÂøÖÈ°ªÊòØ2ÁöÑÊ¨°ÂπÇ</p>
</li>
</ul>
<blockquote>
<p>kfifoÁöÑsizeÊòØ2^n„ÄÇÊâÄ‰ª•ÂΩìin &gt; 2^nÁöÑÊó∂ÂÄôÔºå(in &amp; 2^n - 1) == (in % 2^n)ÔºåÊâÄ‰ª•ËøôÈáåÂèØ‰ª•Áî®‰∏éÊìç‰ΩúÊõø‰ª£Ê±Ç‰ΩôÊù•Ëé∑ÂèñinÂú®ÈòüÂàó‰∏≠ÂÆûÈôÖÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
</blockquote>
<p>ÂÖ∂‰∏≠</p>
<p>kernel/kfifo.c 31Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">_kfifo_init</span>(<span style="color:#8b008b;font-weight:bold">struct</span> kfifo **fifo*, <span style="color:#00688b;font-weight:bold">void</span> **buffer*,
    <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> *size*)
{
  fifo-&gt;buffer = buffer;
  fifo-&gt;size = size;
  kfifo_reset(fifo);
}
</code></pre></td></tr></table>
</div>
</div><ul>
<li>Ê≠§ÂáΩÊï∞ÂàõÂª∫Âπ∂ÂàùÂßãÂåñ‰∏Ä‰∏™ kfifo ÂØπË±°Ôºå‰ΩøÁî® bufferÊåáÂêëÁöÑ size Â≠óËäÇÂ§ßÂ∞èÁöÑÂÜÖÂ≠ò„ÄÇ</li>
</ul>
<p>ÈùôÊÄÅÂ£∞ÊòéÊñπÊ≥ïÔºö</p>
<p>include/linux/kfifo.h 67Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** DECLARE_KFIFO - macro to* *declare* *a kfifo* *and* *the associated buffer*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>name: name of the declared kfifo datatype*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>size: size of the fifo buffer. Must be a power of two.*
 ***
 ** Note1: the macro can be used inside <span style="color:#8b008b;font-weight:bold">struct</span>* *or* *<span style="color:#8b008b;font-weight:bold">union</span> declaration*
 ** Note2: the macro creates two objects:*
 **  A kfifo object with the given name* *and* *a buffer* *<span style="color:#8b008b;font-weight:bold">for</span>* *the kfifo*
 **  object named name**<span style="color:#a61717;background-color:#e3d2d2">##</span>kfifo_buffer*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#1e889b">#define DECLARE_KFIFO(*name*, *size*) \
</span><span style="color:#1e889b">union { \
</span><span style="color:#1e889b">  struct kfifo name; \
</span><span style="color:#1e889b">  unsigned char name##kfifo_buffer[size + sizeof(struct kfifo)]; \
</span><span style="color:#1e889b">}
</span></code></pre></td></tr></table>
</div>
</div><p>Âíå</p>
<p>include/linux/kfifo.h 83Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** INIT_KFIFO - Initialize a kfifo declared by DECLARE_KFIFO*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>name: name of the declared kfifo datatype*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#1e889b">#define INIT_KFIFO(*name*) \
</span><span style="color:#1e889b">  name = __kfifo_initializer(sizeof(name##kfifo_buffer) - \
</span><span style="color:#1e889b">        sizeof(struct kfifo), \
</span><span style="color:#1e889b">        name##kfifo_buffer + sizeof(struct kfifo))
</span></code></pre></td></tr></table>
</div>
</div><ul>
<li>‰∏äÈù¢‰∏§‰∏™ÊñπÊ≥ï‰ºöÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ name ÔºåÂ§ßÂ∞è‰∏∫ size ÁöÑ kfifo ÂØπË±°ÔºåÂíåÂâçÈù¢‰∏ÄÊ†∑Ôºåsize ÂøÖÈ°ªÊòØ2ÁöÑÂπÇ„ÄÇ</li>
</ul>
<h2 id="ÂÖ•ÈòüÊìç‰Ωú">ÂÖ•ÈòüÊìç‰Ωú</h2>
<p>kernel/kfifo.c 240Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** kfifo_in - puts some data into the FIFO*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>fifo: the fifo to be used.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>from: the data to be added.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>**len**: the length of the data to be added.*
 ***
 ** This function copies at most <span style="color:#a61717;background-color:#e3d2d2">@</span>**len* *bytes from the <span style="color:#a61717;background-color:#e3d2d2">@</span>from buffer into*
 ** the FIFO depending on the free space, and returns the number of*
 ** bytes copied.*
 ***
 ** Note that with only one concurrent reader and one concurrent*
 ** writer, you don**<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>t need extra locking to use these functions.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> kfifo_in(<span style="color:#8b008b;font-weight:bold">struct</span> kfifo **fifo*, <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#00688b;font-weight:bold">void</span> **from*,
        <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> *len*)
{
  len = min(kfifo_avail(fifo), len);
  __kfifo_in_data(fifo, from, len, <span style="color:#b452cd">0</span>);
  __kfifo_add_in(fifo, len);
  <span style="color:#8b008b;font-weight:bold">return</span> len;
}
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>Êää from ÊåáÈíàÊåáÂêëÁöÑ len  Â≠óËäÇÊï∞ÊçÆÊã∑Ë¥ùÂà∞ fifo ÊâÄÊåáÁöÑÈòüÂàó‰∏≠ÔºåÂ¶ÇÊûúÊàêÂäüÔºåÂàôËøîÂõûÊé®ÂÖ•Â≠óËäÇÁöÑÂ§ßÂ∞è„ÄÇ</p>
</li>
<li>
<p>Â¶ÇÊûúÈòüÂàó‰∏≠ÁöÑÁ©∫Èó≤Â≠óËäÇ &lt; lenÔºåÂàôËØ•ÂáΩÊï∞ÂÄºÊúÄÂ§öÂèØÊã∑Ë¥ùÈòüÂàóÂèØÁî®Á©∫Èó¥ÈÇ£‰πàÂ§öÁöÑÊï∞ÊçÆ„ÄÇ</p>
</li>
</ul>
<p>‰ªé  kernel/kfifo.c 119Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">inline</span> <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">__kfifo_in_data</span>(<span style="color:#8b008b;font-weight:bold">struct</span> kfifo **fifo*,
    <span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#00688b;font-weight:bold">void</span> **from*, <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> *len*, <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> *off*)
{
  <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> l;
  <span style="color:#a61717;background-color:#e3d2d2">*/</span>**
   ** Ensure that we sample the fifo-&gt;out index -before- we*
   ** start putting bytes into the kfifo.*
   *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
  smp_mb();
  off = __kfifo_off(fifo, fifo-&gt;in + off);
  <span style="color:#a61717;background-color:#e3d2d2">*/\</span>* first put the data starting from fifo-&gt;in to buffer end <span style="color:#a61717;background-color:#e3d2d2">\*/</span>*
  l = min(len, fifo-&gt;size - off);
  memcpy(fifo-&gt;buffer + off, from, l);
  <span style="color:#a61717;background-color:#e3d2d2">*/\</span>* then put the rest (<span style="color:#8b008b;font-weight:bold">if</span> any) at the beginning of the buffer <span style="color:#a61717;background-color:#e3d2d2">\*/</span>*
  memcpy(fifo-&gt;buffer, from + l, len - l);
}
</code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•ÁúãÂá∫ÔºåÊã∑Ë¥ùÊï∞ÊçÆÁöÑÊó∂ÂÄô‰ΩøÁî®ÁöÑÊòØÂáΩÊï∞ memcpy</p>
<h2 id="Âá∫ÈòüÊìç‰Ωú">Âá∫ÈòüÊìç‰Ωú</h2>
<p>kernel/kfifo.c 283Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** kfifo_out - gets some data from the FIFO*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>fifo: the fifo to be used.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>to: where the data must be copied.*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>**len**: the size of the destination buffer.*
 ***
 ** This function copies at most <span style="color:#a61717;background-color:#e3d2d2">@</span>**len* *bytes from the FIFO into the*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>to buffer and returns the number of copied bytes.*
 ***
 ** Note that with only one concurrent reader and one concurrent*
 ** writer, you don**<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>t need extra locking to use these functions.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> kfifo_out(<span style="color:#8b008b;font-weight:bold">struct</span> kfifo **fifo*, <span style="color:#00688b;font-weight:bold">void</span> **to*, <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> *len*)
{
  len = min(kfifo_len(fifo), len);
  __kfifo_out_data(fifo, to, len, <span style="color:#b452cd">0</span>);
  __kfifo_add_out(fifo, len);
  <span style="color:#8b008b;font-weight:bold">return</span> len;
}
</code></pre></td></tr></table>
</div>
</div><ul>
<li>ËØ•ÂáΩÊï∞‰ªé fifo ÊåáÂêëÁöÑÈòüÂàó‰∏≠Êã∑Ë¥ùÂá∫ÈïøÂ∫¶‰∏∫lenÁöÑÂ≠óËäÇÂà∞toÊâÄÊåáÁöÑÁºìÂÜ≤‰∏≠„ÄÇÂ¶ÇÊûúÊàêÂäüÔºåÂàôËøîÂõûÊã∑Ë¥ùÊï∞ÊçÆÁöÑÈïøÂ∫¶„ÄÇÂ¶ÇÊûúÈòüÂàó‰∏≠Êï∞ÊçÆÂ§ßÂ∞èÂ∞è‰∫élenÔºåÂàôËØ•ÂáΩÊï∞Êã∑Ë¥ùÂá∫ÁöÑÊï∞ÊçÆÂøÖÁÑ∂Â∞è‰∫éÈúÄË¶ÅÁöÑÊï∞ÊçÆÂ§ßÂ∞è</li>
</ul>
<p>ÂΩìÊï∞ÊçÆË¢´ÊëòÂèñÂêéÔºåÊï∞ÊçÆÂ∞±‰ºöË¢´Âà†Èô§ÊéâÔºåÂ¶ÇÊûúÂè™ÊòØÊÉ≥Áúã‰∏Ä‰∏ãÈòüÂàóÁöÑÊï∞ÊçÆÔºåËÄå‰∏çÂÉèË¢´Âà†Èô§ÔºåÂèØ‰ª•‰ΩøÁî® kernel/kfifo.c 306Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** kfifo_out_peek - copy some data from the FIFO, but* *<span style="color:#8b008b;font-weight:bold">do</span>* *not remove it*
 *** *<span style="color:#a61717;background-color:#e3d2d2">@</span>fifo**: the fifo to be used.*
 *** *<span style="color:#a61717;background-color:#e3d2d2">@</span>to**: where the data must be copied.*
 *** *<span style="color:#a61717;background-color:#e3d2d2">@</span>len**: the size of the destination buffer.*
 *** *<span style="color:#a61717;background-color:#e3d2d2">@</span>offset**: offset into the fifo*
 ***
 ** This function copies at most* *<span style="color:#a61717;background-color:#e3d2d2">@</span>len* *bytes at* *<span style="color:#a61717;background-color:#e3d2d2">@</span>offset* *from the FIFO*
 ** into the* *<span style="color:#a61717;background-color:#e3d2d2">@</span>to* *buffer and returns the number of copied bytes.*
 ** The data is not removed from the FIFO.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> kfifo_out_peek(<span style="color:#8b008b;font-weight:bold">struct</span> kfifo **fifo*, <span style="color:#00688b;font-weight:bold">void</span> **to*, <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> *len*,
        <span style="color:#00688b;font-weight:bold">unsigned</span> *offset*)
{
  len = min(kfifo_len(fifo), len + offset);
  __kfifo_out_data(fifo, to, len, offset);
  <span style="color:#8b008b;font-weight:bold">return</span> len;
}
</code></pre></td></tr></table>
</div>
</div><p>ËøõË°åÂè™ËØªÊï∞ÊçÆ„ÄÇ</p>
<h2 id="Ëé∑ÂèñÈòüÂàóÈïøÂ∫¶">Ëé∑ÂèñÈòüÂàóÈïøÂ∫¶</h2>
<p>include/linux/kfifo.h 148Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** kfifo_size - returns the size of the fifo in bytes*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>fifo: the fifo to be used.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">inline</span> __must_check <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> kfifo_size(<span style="color:#8b008b;font-weight:bold">struct</span> kfifo *fifo)
{
  <span style="color:#8b008b;font-weight:bold">return</span> fifo-&gt;size;
}
</code></pre></td></tr></table>
</div>
</div><ul>
<li>Ê≠§ÂáΩÊï∞Ëé∑ÂæóÂ≠òÂÇ® kfifo ÈòüÂàóÁöÑÊÄª‰ΩìÁ©∫Èó¥Â§ßÂ∞èÔºàÂ≠óËäÇ‰∏∫Âçï‰ΩçÔºâ</li>
</ul>
<p>include/linux/kfifo.h 157Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** kfifo_len - returns the number of used bytes in the FIFO*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>fifo: the fifo to be used.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">inline</span> <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span> kfifo_len(<span style="color:#8b008b;font-weight:bold">struct</span> kfifo **fifo*)
{
  <span style="color:#8b008b;font-weight:bold">register</span> <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">int</span>  out;
  out = fifo-&gt;out;
  smp_rmb();
  <span style="color:#8b008b;font-weight:bold">return</span> fifo-&gt;in - out;
}
</code></pre></td></tr></table>
</div>
</div><ul>
<li>Ê≠§ÂáΩÊï∞Ë°®Á§∫ÂΩìÂâçÈòüÂàó‰∏≠ÁöÑÂÖÉÁ¥†Êï∞ÈáèÔºå‰ªéÊ∫êÁ†ÅÂèØ‰ª•ÁúãÂá∫Êù•ÔºåÊòØÂÅö‰∫Ü‰∏ÄÊ¨°ÂáèÊ≥ïËøêÁÆó„ÄÇ</li>
</ul>
<h2 id="ÈáçÁΩÆÂíåÊí§ÈîÄÈòüÂàó">ÈáçÁΩÆÂíåÊí§ÈîÄÈòüÂàó</h2>
<p>ÈáçÁΩÆÈòüÂàóÔºöinclude/linux/kfifo.h 129Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** kfifo_reset - removes the entire FIFO contents*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>fifo: the fifo to be emptied.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#8b008b;font-weight:bold">static</span> <span style="color:#8b008b;font-weight:bold">inline</span> <span style="color:#00688b;font-weight:bold">void</span> kfifo_reset(<span style="color:#8b008b;font-weight:bold">struct</span> kfifo **fifo*)
{
  fifo-&gt;in = fifo-&gt;out = <span style="color:#b452cd">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><p>‰ªéÊ∫êÁ†ÅÂèØ‰ª•ÁúãÂá∫ÔºåÂÆûË¥®‰∏äÊòØÁõ¥Êé•ÊääÂÖ•Âè£ÂíåÂá∫Âè£ÂÅèÁßªÈáèÂèòÊàê‰∫Ü0</p>
<p>Êí§ÈîÄÈòüÂàóÔºökernel/kfifo.c 93Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** kfifo_free - frees the FIFO internal buffer*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>fifo: the fifo to be freed.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#00688b;font-weight:bold">void</span> kfifo_free(<span style="color:#8b008b;font-weight:bold">struct</span> kfifo **fifo*)
{
  kfree(fifo-&gt;buffer);
  _kfifo_init(fifo, <span style="color:#658b00">NULL</span>, <span style="color:#b452cd">0</span>);
}
</code></pre></td></tr></table>
</div>
</div><p>‰ªéÊ∫êÁ†ÅÂèØ‰ª•ÁúãÂá∫ÔºåÈ¶ñÂÖàË∞ÉÁî®‰∫Ü kfee ÈáäÊîæ‰∫ÜÂÜÖÂ≠òÔºåÁÑ∂ÂêéÂàùÂßãÂåñ‰∫Ü‰∏Ä‰∏™ NULL ÁöÑkfifoÂØπË±°</p>
<h1 id="Êò†Â∞Ñ">Êò†Â∞Ñ</h1>
<p>Êò†Â∞ÑÂ∞±ÊòØÊàë‰ª¨Â∏∏ËßÅÁöÑ k-v ÈîÆÂÄºÂØπ„ÄÇÊòØÁî±ÂîØ‰∏ÄÈîÆÁªÑÊàêÁöÑÈõÜÂêàÔºåËÄåÊØè‰∏™ÈîÆÂøÖÁÑ∂ÂÖ≥ËÅî‰∏Ä‰∏™ÁâπÂÆöÁöÑÂÄº„ÄÇËøôÁßçÈîÆÂà∞ÂÄºÁöÑÂÖ≥Á≥ªÁß∞‰∏∫Êò†Â∞ÑÔºåÊò†Â∞ÑËá≥Â∞ëË¶ÅÊîØÊåÅ‰∏â‰∏™Êìç‰ΩúÔºö</p>
<ul>
<li>
<p>ADD(k,v)</p>
</li>
<li>
<p>RemoveÔºàkeyÔºâ</p>
</li>
<li>
<p>Value = Lookup (key)</p>
</li>
</ul>
<p>Linux ÂÜÖÊ†∏Êèê‰æõ‰∫ÜÁÆÄÂçïÁöÑ„ÄÅÊúâÊïàÁöÑÊò†Â∞ÑÊï∞ÊçÆÁªìÊûÑ„ÄÇ‰ΩÜÊòØ‰ªñÂπ∂ÈùûÊòØ‰∏Ä‰∏™ÈÄöÁî®ÁöÑÊò†Â∞ÑÔºå‰ªñÁöÑÁõÆÊ†áÊòØÔºöÊò†Â∞Ñ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑÊ†áËØÜÊï∞ÔºàUIDÔºâÂà∞‰∏Ä‰∏™ÊåáÈíà</p>
<h2 id="Êï∞ÊçÆÁªìÊûÑÈÄâÂûã">Êï∞ÊçÆÁªìÊûÑÈÄâÂûã</h2>
<p>Êàë‰ª¨Áü•ÈÅìÔºåÊï£ÂàóË°®ÔºàHashÔºâ‰πüÊòØ‰∏ÄÁßçÂ∏∏Áî®ÁöÑÂÆûÁé∞ k,v ÁöÑÊñπÊ≥ïÔºå‰∏∫‰ªÄ‰πàÂú® linux ‰∏≠ÈÄâÁî®‰∫ÜÁ∫¢ÈªëÊ†ëÂë¢Ôºü</p>
<ol>
<li>
<p>Áî®Êï£ÂàóË°®ÈúÄË¶ÅËÆæÂÆöÂÖ∑‰ΩìÂ§ßÂ∞èÂíåÊï£ÂàóÂáΩÊï∞ÔºåËÄåÁ∫¢ÈªëÊ†ë‰ºòÈõÖÁöÑÊâ©Â±ïÂ≠òÂÇ®‰ªªÊÑèÈîÆ</p>
</li>
<li>
<p>Êï£ÂàóË°®Â¶ÇÊûúÈÅáÂà∞ÂìàÂ∏åÂÜ≤Á™ÅÔºåÈÇ£‰πàÊúÄÂùèÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(n)ÔºåËÄåÁ∫¢ÈªëÊ†ëÊúÄÂùèÊÉÖÂÜµ‰∏ãÊòØ O(logn)ÔºåÊâÄ‰ª•Á∫¢ÈªëÊ†ëÂú®ÊúÄÂùèÁöÑÂ§çÊùÇÂ∫¶‰∏ãÊúâÊõ¥Â•ΩÁöÑË°®Áé∞</p>
</li>
<li>
<p>‰∫åÂèâÊêúÁ¥¢Ê†ëÊòØÊúâÂ∫èÁöÑÔºåÂèØ‰ª•ÁªôÁî®Êà∑ÁöÑÊåâÂ∫èÈÅçÂéÜÂ∏¶Êù•ËâØÂ•ΩÁöÑÊÄßËÉΩ</p>
</li>
<li>
<p>‰∫åÂèâÊêúÁ¥¢Ê†ë‰∏çÈúÄË¶ÅÊï£ÂàóÂáΩÊï∞</p>
</li>
</ol>
<h2 id="ÂàùÂßãÂåñ">ÂàùÂßãÂåñ</h2>
<p>idrÁöÑÂÆö‰πâÔºöinclude/linux/idr.h 59Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8b008b;font-weight:bold">struct</span> idr {
  <span style="color:#8b008b;font-weight:bold">struct</span> idr_layer *top;
  <span style="color:#8b008b;font-weight:bold">struct</span> idr_layer *id_free;
  <span style="color:#00688b;font-weight:bold">int</span>    layers; <span style="color:#a61717;background-color:#e3d2d2">*/\</span>* only valid without concurrent changes <span style="color:#a61717;background-color:#e3d2d2">\*/</span>*
  <span style="color:#00688b;font-weight:bold">int</span>    id_free_cnt;
  spinlock_t   lock;
};
</code></pre></td></tr></table>
</div>
</div><p>ÂàùÂßãÂåñÂáΩÊï∞Ôºölib/idr.c 680Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** idr_init - initialize idr handle*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>idp:   idr handle*
 ***
 *** *This function is use to* *set* *up the* *handle* *(<span style="color:#a61717;background-color:#e3d2d2">@</span>idp)* *that you will pass*
 ** to the rest of the functions.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#00688b;font-weight:bold">void</span> idr_init(<span style="color:#8b008b;font-weight:bold">struct</span> idr **idp*)
{
  memset(idp, <span style="color:#b452cd">0</span>, <span style="color:#8b008b;font-weight:bold">sizeof</span>(<span style="color:#8b008b;font-weight:bold">struct</span> idr));
  spin_lock_init(&amp;idp-&gt;lock);
}
</code></pre></td></tr></table>
</div>
</div><p>Ë∞ÉÁî®‰∫Ü‰∏Ä‰∏ã memsetÂáΩÊï∞ÔºåÊääÂØπÂ∫îÁ©∫Èó¥ÁΩÆÈõ∂ÔºåÁÑ∂ÂêéÂàùÂßãÂåñ‰∫ÜÂÖ∂‰∏≠ÁöÑ lock .</p>
<h2 id="ÂàÜÈÖçuid">ÂàÜÈÖçUID</h2>
<p>Âª∫Á´ã idr ÂêéÔºåÂ∞±ÂèØ‰ª•ÂàÜÈÖçÊñ∞ÁöÑ UID ‰∫Ü.</p>
<ol>
<li>
<p>ÂëäËØâidrÈúÄË¶ÅÂàÜÈÖçÊñ∞ÁöÑUIDÔºåÂÖÅËÆ∏ÂÖ∂Âú®ÂøÖË¶ÅÊó∂Ë∞ÉÊï¥ÂêéÂ§áÊ†ëÂ§ßÂ∞è</p>
</li>
<li>
<p>ËØ∑Ê±ÇÁúüÊ≠£ÁöÑÊñ∞ÁöÑUID</p>
</li>
</ol>
<p>lib/idr.c 108Ë°å  Ë∞ÉÊï¥ÂêéÂ§áÊ†ëÁöÑÂ§ßÂ∞è</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** idr_pre_get - reserver resources* *<span style="color:#8b008b;font-weight:bold">for</span>* *idr allocation*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>idp:   idr handle*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>gfp_mask:  memory allocation flags*
 ***
 ** This function should be called prior to locking* *and* *calling the*
 ** idr_get_new<span style="color:#a61717;background-color:#e3d2d2">\</span>* functions. It preallocates enough memory to satisfy*
 ** the worst possible allocation.*
 ***
 ** If the system is REALLY out of memory* *this* *function returns* *<span style="color:#b452cd">0</span>**,*
 ** otherwise* *<span style="color:#b452cd">1.</span>*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#00688b;font-weight:bold">int</span> idr_pre_get(<span style="color:#8b008b;font-weight:bold">struct</span> idr **idp*, gfp_t *gfp_mask*)
{
  <span style="color:#8b008b;font-weight:bold">while</span> (idp-&gt;id_free_cnt &lt; IDR_FREE_MAX) {
    <span style="color:#8b008b;font-weight:bold">struct</span> idr_layer *new;
    new = kmem_cache_zalloc(idr_layer_cache, gfp_mask);
    <span style="color:#8b008b;font-weight:bold">if</span> (new == <span style="color:#658b00">NULL</span>)
      <span style="color:#8b008b;font-weight:bold">return</span> (<span style="color:#b452cd">0</span>);
    move_to_free_list(idp, new);
  }
  <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#b452cd">1</span>;
}
</code></pre></td></tr></table>
</div>
</div><p>‰ªéÊ∫êÁ†ÅÂèØ‰ª•ÁúãÂá∫ÔºåË∞ÉÊï¥Áî± idp ÊåáÂêë idr ÁöÑÂ§ßÂ∞èÔºåÂ¶ÇÊûúÁúüÁöÑÈúÄË¶ÅË∞ÉÊï¥Â§ßÂ∞èÔºåÂÜÖÂ≠òÂàÜÈÖç‰æãÁ®ã‰ΩøÁî® gfp Ê†áËØÜÔºögfp_mask</p>
<p>lib/idr.c 315Ë°å  ÂÆûÈôÖÊâßË°åËé∑ÂèñÊñ∞ÁöÑUID</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** idr_get_new - allocate* *new* *idr entry*
 *** *<span style="color:#a61717;background-color:#e3d2d2">@</span>idp**: idr handle*
 *** *<span style="color:#a61717;background-color:#e3d2d2">@</span>ptr**: pointer you want associated with the id*
 *** *<span style="color:#a61717;background-color:#e3d2d2">@</span>id**: pointer to the allocated handle*
 ***
 ** This is the allocate id function.  It should be called with any*
 ** required locks.*
 ***
 ** If memory is required, it will* *<span style="color:#8b008b;font-weight:bold">return</span>* *-EAGAIN, you should unlock*
 *** *and go back to the* *idr_pre_get**()* *call.  If the idr is full, it will*
 *** *<span style="color:#8b008b;font-weight:bold">return</span>* *-ENOSPC.*
 ***
 *** *<span style="color:#a61717;background-color:#e3d2d2">@</span>id* *returns a value in the range* *<span style="color:#b452cd">0</span>* *...* *<span style="color:#b452cd">0x7fffffff</span>*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#00688b;font-weight:bold">int</span> idr_get_new(<span style="color:#8b008b;font-weight:bold">struct</span> idr **idp*, <span style="color:#00688b;font-weight:bold">void</span> **ptr*, <span style="color:#00688b;font-weight:bold">int</span> **id*)
{
  <span style="color:#00688b;font-weight:bold">int</span> rv;
  rv = idr_get_new_above_int(idp, ptr, <span style="color:#b452cd">0</span>);
  <span style="color:#a61717;background-color:#e3d2d2">*/</span>**
   ** This is a cheap hack until the IDR code can be fixed to*
   *** *<span style="color:#8b008b;font-weight:bold">return</span>* *proper error values.*
   *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
  <span style="color:#8b008b;font-weight:bold">if</span> (rv &lt; <span style="color:#b452cd">0</span>)
    <span style="color:#8b008b;font-weight:bold">return</span> _idr_rc_to_errno(rv);
  *id = rv;
  <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#b452cd">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><p>ËØ•ÊñπÊ≥ï‰ΩøÁî® idp ÊåáÂêëÁöÑ idr ÂàÜÈÖç‰∏Ä‰∏™Êñ∞ÁöÑ UID ÔºåÂπ∂‰∏îÂ∞ÜÂÖ∂ÂÖ≥ËÅîÂà∞ÊåáÈíà ptr ‰∏ä„ÄÇÊàêÂäüÊó∂ÔºåËØ•ÊñπÊ≥ïËøîÂõû0ÔºåÂπ∂‰∏îÂ∞ÜÊñ∞ÁöÑ UID Â≠ò‰∫é id.</p>
<h2 id="Êü•Êâæuid">Êü•ÊâæUID</h2>
<p>lib/idr.c 490Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** idr_find -* *<span style="color:#8b008b;font-weight:bold">return</span>* *pointer* *<span style="color:#8b008b;font-weight:bold">for</span>* *given id*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>idp: idr handle*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>id: lookup key*
 ***
 ** Return the pointer given the id it has been registered with.  A %**<span style="color:#658b00">NULL</span>*
 *** *<span style="color:#8b008b;font-weight:bold">return</span>* *indicates that <span style="color:#a61717;background-color:#e3d2d2">@</span>id is* *not* *valid* *or* *you passed %**<span style="color:#658b00">NULL</span>* *in*
 ** idr_get_new().*
 ***
 *** *This function can be called under* *rcu_read_lock**()**, given that the leaf*
 ** pointers lifetimes are correctly managed.*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#00688b;font-weight:bold">void</span> *idr_find(<span style="color:#8b008b;font-weight:bold">struct</span> idr **idp*, <span style="color:#00688b;font-weight:bold">int</span> *id*)
{
  <span style="color:#00688b;font-weight:bold">int</span> n;
  <span style="color:#8b008b;font-weight:bold">struct</span> idr_layer *p;
  p = rcu_dereference_raw(idp-&gt;top);
  <span style="color:#8b008b;font-weight:bold">if</span> (!p)
    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#658b00">NULL</span>;
  n = (p-&gt;layer+<span style="color:#b452cd">1</span>) * IDR_BITS;
  <span style="color:#a61717;background-color:#e3d2d2">*/\</span>* Mask off upper bits we don<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>t use <span style="color:#8b008b;font-weight:bold">for</span> the search. <span style="color:#a61717;background-color:#e3d2d2">\*/</span>*
  id &amp;= MAX_ID_MASK;
  <span style="color:#8b008b;font-weight:bold">if</span> (id &gt;= (<span style="color:#b452cd">1</span> &lt;&lt; n))
    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#658b00">NULL</span>;
  BUG_ON(n == <span style="color:#b452cd">0</span>);
  <span style="color:#8b008b;font-weight:bold">while</span> (n &gt; <span style="color:#b452cd">0</span> &amp;&amp; p) {
    n -= IDR_BITS;
    BUG_ON(n != p-&gt;layer*IDR_BITS);
    p = rcu_dereference_raw(p-&gt;ary[(id &gt;&gt; n) &amp; IDR_MASK]);
  }
  <span style="color:#8b008b;font-weight:bold">return</span>((<span style="color:#00688b;font-weight:bold">void</span> *)p);
}
</code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúË∞ÉÁî®ÊàêÂäüÔºåÂàôËøîÂõûidÂÖ≥ËÅîÁöÑÊåáÈíàÔºåÂ¶ÇÊûúÈîôËØØÂàôËøîÂõûÁ©∫ÊåáÈíà</p>
<h2 id="Âà†Èô§uid">Âà†Èô§UID</h2>
<p>lib/idr.c 390Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** idr_remove - remove the given id* *and* *free it**<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>s slot*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>idp: idr handle*
 ** <span style="color:#a61717;background-color:#e3d2d2">@</span>id: unique key*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#00688b;font-weight:bold">void</span> idr_remove(<span style="color:#8b008b;font-weight:bold">struct</span> idr **idp*, <span style="color:#00688b;font-weight:bold">int</span> *id*)
{
  <span style="color:#8b008b;font-weight:bold">struct</span> idr_layer *p;
  <span style="color:#8b008b;font-weight:bold">struct</span> idr_layer *to_free;
  <span style="color:#a61717;background-color:#e3d2d2">*/\</span>* Mask off upper bits we don<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>t use <span style="color:#8b008b;font-weight:bold">for</span> the search. <span style="color:#a61717;background-color:#e3d2d2">\*/</span>*
  id &amp;= MAX_ID_MASK;
  sub_remove(idp, (idp-&gt;layers - <span style="color:#b452cd">1</span>) * IDR_BITS, id);
  <span style="color:#8b008b;font-weight:bold">if</span> (idp-&gt;top &amp;&amp; idp-&gt;top-&gt;count == <span style="color:#b452cd">1</span> &amp;&amp; (idp-&gt;layers &gt; <span style="color:#b452cd">1</span>) &amp;&amp;
    idp-&gt;top-&gt;ary[<span style="color:#b452cd">0</span>]) {
    <span style="color:#a61717;background-color:#e3d2d2">*/</span>**
     ** Single child at leftmost slot: we can shrink the tree.*
     ** This level is not needed anymore since when layers are*
     ** inserted, they are inserted at the top of the existing*
     ** tree.*
     *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
    to_free = idp-&gt;top;
    p = idp-&gt;top-&gt;ary[<span style="color:#b452cd">0</span>];
    rcu_assign_pointer(idp-&gt;top, p);
    --idp-&gt;layers;
    to_free-&gt;bitmap = to_free-&gt;count = <span style="color:#b452cd">0</span>;
    free_layer(to_free);
  }
  <span style="color:#8b008b;font-weight:bold">while</span> (idp-&gt;id_free_cnt &gt;= IDR_FREE_MAX) {
    p = get_from_free_list(idp);
    <span style="color:#a61717;background-color:#e3d2d2">*/</span>**
     ** Note: we don**<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>t call the rcu callback here, since the only*
     ** layers that fall into the freelist are those that have been*
     ** preallocated.*
     *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
    kmem_cache_free(idr_layer_cache, p);
  }
  <span style="color:#8b008b;font-weight:bold">return</span>;
}
</code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúÂà†Èô§ÊàêÂäüÔºå‰ºöÂ∞ÜidÂÖ≥ËÅîÁöÑÊåáÈíà‰∏ÄËµ∑‰ªéÊò†Â∞Ñ‰∏≠Âà†Èô§„ÄÇ‰ΩÜÊòØÔºåËøô‰∏™ÂáΩÊï∞Ê≤°ÊúâÂäûÊ≥ïÊèêÁ§∫‰ªª‰ΩïÈîôËØØ„ÄÇ</p>
<h2 id="Êí§ÈîÄ-idr">Êí§ÈîÄ idr</h2>
<p>lib/idr.c 477Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#a61717;background-color:#e3d2d2">*/</span>***
 ** idr_destroy - release all cached layers within an idr tree*
 ** idp: idr handle*
 *<span style="color:#a61717;background-color:#e3d2d2">*/</span>*
<span style="color:#00688b;font-weight:bold">void</span> idr_destroy(<span style="color:#8b008b;font-weight:bold">struct</span> idr **idp*)
{
  <span style="color:#8b008b;font-weight:bold">while</span> (idp-&gt;id_free_cnt) {
    <span style="color:#8b008b;font-weight:bold">struct</span> idr_layer *p = get_from_free_list(idp);
    kmem_cache_free(idr_layer_cache, p);
  }
}
</code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™Ê∫êÁ†ÅÂæàÂ•ΩÊáÇÔºåÈÄöËøáÂæ™ÁéØÔºåÁõ¥Êé•ÈáäÊîæidr‰∏≠Êú™‰ΩøÁî®ÁöÑÂÜÖÂ≠ò„ÄÇ‰ΩÜÊòØÂÆÉÂπ∂‰∏çÈáäÊîæÂΩìÂâçÂàÜÈÖçÁªôUID‰ΩøÁî®ÁöÑ‰ªª‰ΩïÂÜÖÂ≠ò„ÄÇÈÄöÂ∏∏Êù•ËØ¥ÔºåÂÜÖÊ†∏‰ª£Á†Å‰∏ç‰ºöÊí§ÈîÄ idr</p>
<h1 id="‰∫åÂèâÊ†ë">‰∫åÂèâÊ†ë</h1>
<p>Ê†ëÊòØ‰∏Ä‰∏™ÊúâÂêëÊó†ÁéØÂõæÔºàDAGÔºâÂõæÔºå‰∫åÂèâÊ†ëÊòØÊØè‰∏™ËäÇÁÇπÊúÄÂ§öÂè™Êúâ‰∏§‰∏™Âá∫Ëæπ‰ª•Âèä0Êàñ1‰∏™ÂÖ•ËæπÁöÑÊ†ë„ÄÇ</p>
<p><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013724.png" alt="img"></p>
<h2 id="‰∫åÂèâÊ†ëÊêúÁ¥¢Ê†ëbst">‰∫åÂèâÊ†ëÊêúÁ¥¢Ê†ëÔºàBSTÔºâ</h2>
<p>ÈÅµÂæ™‰ª•‰∏ãËßÑÂàôÔºö</p>
<ol>
<li>
<p>‰∏Ä‰∏™ËäÇÁÇπÁöÑÂ∑¶ÂÑøÂ≠êÂ∞è‰∫éËøô‰∏™ËäÇÁÇπÁöÑÂÄº</p>
</li>
<li>
<p>Ëøô‰∏™ËäÇÁÇπÁöÑÂè≥ÂÑøÂ≠êÂ§ß‰∫éËøô‰∏™ËäÇÁÇπÁöÑÂÄº</p>
</li>
<li>
<p>ÂÖ∂ÊâÄÊúâÁöÑÂ≠êÊ†ë‰πüÊòØ‰∫åÂèâÊêúÁ¥¢Ê†ë</p>
</li>
</ol>
<p><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013747.png" alt="img"></p>
<h2 id="Âπ≥Ë°°‰∫åÂèâÊ†ë">Âπ≥Ë°°‰∫åÂèâÊ†ë</h2>
<p>Âπ≥Ë°°‰∫åÂèâÊ†ëÈÄíÂΩíÂÆö‰πâÂ¶Ç‰∏ãÔºö</p>
<ol>
<li>
<p>Â∑¶Âè≥Â≠êÊ†ëÁöÑÈ´òÂ∫¶Â∑ÆÂ∞è‰∫éÁ≠â‰∫é 1„ÄÇ</p>
</li>
<li>
<p>ÂÖ∂ÊØè‰∏Ä‰∏™Â≠êÊ†ëÂùá‰∏∫Âπ≥Ë°°‰∫åÂèâÊ†ë„ÄÇ</p>
</li>
</ol>
<h2 id="Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë">Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë</h2>
<ol>
<li>
<p>ÂøÖÈ°ªÊòØ‰∏ÄÊ£µ‰∫åÂèâÊ†ë</p>
</li>
<li>
<p>ÂøÖÈ°ªÊòØ‰∏ÄÊ£µ‰∫åÂèâÊêúÁ¥¢Ê†ë</p>
</li>
<li>
<p>Ë¶ÅÊª°Ë∂≥Âπ≥Ë°°ÁöÑÁâπÊÄß</p>
</li>
</ol>
<p>ÂÆö‰πâÔºö</p>
<ul>
<li>
<p>Ê∑±Â∫¶Ôºö‰ªéÊ†πËäÇÁÇπËµ∑ÔºåÂà∞Ëææ‰ªñ‰∏ÄÂÖ±ÁªèËøáÁöÑÁà∂ËäÇÁÇπÊï∞ÁõÆ„ÄÇ</p>
</li>
<li>
<p>Âè∂Â≠êËäÇÁÇπÔºöÊ†ëÁöÑÊúÄÂ∫ïÂ±ÇËäÇÁÇπÔºàÊ≤°ÊúâÂÑøÂ≠êÔºâ</p>
</li>
<li>
<p>Ê†ëÁöÑÈ´òÂ∫¶ÔºöÊ†ë‰∏≠Â§Ñ‰∫éÊúÄÂ∫ïÂ±ÇËäÇÁÇπÁöÑÊï∞ÁõÆ</p>
</li>
</ul>
<p>Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ëÔºàËã±ËØ≠ÔºöBalanced Binary Search TreeÔºâÊòØ‰∏ÄÁßçÁªìÊûÑÂπ≥Ë°°ÁöÑ‰∫åÂèâÊêúÁ¥¢Ê†ëÔºåÂÆÉÊòØ‰∏ÄÁßçÊØè‰∏™ËäÇÁÇπÁöÑÂ∑¶Âè≥‰∏§Â≠êÊ†ëÈ´òÂ∫¶Â∑ÆÈÉΩ‰∏çË∂ÖËøá‰∏ÄÁöÑ‰∫åÂèâÊ†ë„ÄÇÂÆÉËÉΩÂú®O(logn)ÂÜÖÂÆåÊàêÊèíÂÖ•„ÄÅÊü•ÊâæÂíåÂà†Èô§Êìç‰ΩúÔºåÊúÄÊó©Ë¢´ÂèëÊòéÁöÑÂπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë‰∏∫AVLÊ†ë„ÄÇ</p>
<p><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013835.png" alt="img"></p>
<h2 id="Ëá™Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë">Ëá™Âπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ë</h2>
<p>ÂÆö‰πâÔºöÂú®‰øùËØÅÊòØ‰∏ÄÊ£µ‰∫åÂèâÊêúÁ¥¢Ê†ëÁöÑÂâçÊèê‰∏ãÔºåË¶Å‰øùËØÅËá™Âπ≥Ë°°</p>
<h3 id="avlÊ†ë">AVLÊ†ë</h3>
<p>ËôΩÁÑ∂‰π¶‰∏äÊ≤°ÊúâAVLÔºå‰ΩÜÊòØËøòÊòØÊãøÂá∫Êù•ËØ¥‰∏Ä‰∏ã„ÄÇ</p>
<h4 id="Âü∫Êú¨ÂÆö‰πâ">Âü∫Êú¨ÂÆö‰πâ</h4>
<p>‰∏∫‰∫Ü‰øùËØÅÂπ≥Ë°°ÁöÑÁâπÊÄßÔºåAVL Ê†ëÂºïÂÖ•‰∫ÜÊâÄË∞ìÁõëÁù£Êú∫Âà∂ÔºåÂ∞±ÊòØÂú®Ê†ëÁöÑÊüê‰∏ÄÈÉ®ÂàÜÁöÑ‰∏çÂπ≥Ë°°Â∫¶Ë∂ÖËøá‰∏Ä‰∏™ÈòàÂÄºÂêéËß¶ÂèëÁõ∏Â∫îÁöÑÂπ≥Ë°°Êìç‰Ωú„ÄÇ‰øùËØÅÊ†ëÁöÑÂπ≥Ë°°Â∫¶Âú®ÂèØ‰ª•Êé•ÂèóÁöÑËåÉÂõ¥ÂÜÖ„ÄÇ</p>
<p>ÂÆö‰πâÔºö</p>
<ul>
<li>
<p>Âπ≥Ë°°Âõ†Â≠êÔºöÊüê‰∏™ËäÇÁÇπÁöÑÂ∑¶Â≠êÊ†ëÈ´òÂ∫¶ÂáèÂéªÂè≥Â≠êÊ†ëÈ´òÂ∫¶ÁöÑÂ∑ÆÂÄº„ÄÇ</p>
</li>
<li>
<p>AVL Ê†ëÔºö ÊâÄÊúâÁªìÁÇπÁöÑÂπ≥Ë°°Âõ†Â≠êÁöÑÁªùÂØπÂÄºÈÉΩ‰∏çË∂ÖËøá 1 ÁöÑ‰∫åÂèâÊ†ë„ÄÇ</p>
</li>
</ul>
<p>ÊâÄ‰ª•ÂΩìÊèíÂÖ•Êñ∞ËäÇÁÇπÊó∂ÔºåÂ±ÇÊï∞‰ºöÂ¢ûÂä†ÂØºËá¥AVLÁöÑÊÄßË¥®Ë¢´Á†¥ÂùèÔºåËøôÊó∂Â∞±ÈúÄË¶ÅËøõË°å‰∏Ä‰∫õÊìç‰ΩúÔºåÊù•‰ΩøÊ†ëÂÖ∑ÊúâAVLÊÄßË¥®„ÄÇÊúÄÂ§öÊóãËΩ¨ÁöÑÊ¨°Êï∞ÊòØ‰∫åÂèâÊ†ëÁöÑÂ±ÇÊï∞ÔºåÊâÄ‰ª•Êó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(nlogn)</p>
<h4 id="ÂÖ∑‰ΩìÂÆûÁé∞">ÂÖ∑‰ΩìÂÆûÁé∞</h4>
<p>‰∫åÂèâÊ†ëÁöÑÂπ≥Ë°°ÂåñÊúâ‰∏§Â§ßÂü∫Á°ÄÊìç‰ΩúÔºö Â∑¶ÊóãÂíåÂè≥Êóã„ÄÇÂ∑¶ÊóãÔºåÂç≥ÊòØÈÄÜÊó∂ÈíàÊóãËΩ¨ÔºõÂè≥ÊóãÔºåÂç≥ÊòØÈ°∫Êó∂ÈíàÊóãËΩ¨„ÄÇËøôÁßçÊóãËΩ¨Âú®Êï¥‰∏™Âπ≥Ë°°ÂåñËøáÁ®ã‰∏≠ÂèØËÉΩËøõË°å‰∏ÄÊ¨°ÊàñÂ§öÊ¨°ÔºåËøô‰∏§ÁßçÊìç‰ΩúÈÉΩÊòØ‰ªéÂ§±ÂéªÂπ≥Ë°°ÁöÑÊúÄÂ∞èÂ≠êÊ†ëÊ†πÁªìÁÇπÂºÄÂßãÁöÑ(Âç≥Á¶ªÊèíÂÖ•ÁªìÁÇπÊúÄËøë‰∏îÂπ≥Ë°°Âõ†Â≠êË∂ÖËøá1ÁöÑÁ•ñÁªìÁÇπ)„ÄÇ</p>
<h4 id="Âè≥ÊóãÊìç‰Ωú">Âè≥ÊóãÊìç‰ΩúÔºö</h4>
<p><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013905.png" alt="img"></p>
<p>ÊâÄË∞ìÂè≥ÊóãÊìç‰ΩúÔºåÂ∞±ÊòØÊää‰∏äÂõæ‰∏≠ÁöÑ B ËäÇÁÇπÂíå C ËäÇÁÇπËøõË°åÊâÄË∞ì‚ÄúÁà∂Â≠ê‰∫§Êç¢‚Äù„ÄÇÂú®‰ªÖÊúâËøô‰∏â‰∏™ËäÇÁÇπÊó∂ÂÄôÔºåÊòØÂçÅÂàÜÁÆÄÂçïÁöÑ„ÄÇ‰ΩÜÊòØÂΩì B ËäÇÁÇπÂ§ÑÂ≠òÂú®Âè≥Â≠©Â≠êÊó∂Ôºå‰∫ãÊÉÖÂ∞±ÂèòÂæóÊúâÁÇπÂ§çÊùÇ‰∫Ü„ÄÇÊàë‰ª¨ÈÄöÂ∏∏ÁöÑÊìç‰ΩúÊòØÔºö<strong>ÊäõÂºÉÂè≥Â≠©Â≠êÔºåÂ∞Ü‰πãÂíåÊóãËΩ¨ÂêéÁöÑËäÇÁÇπ C Áõ∏ËøûÔºåÊàê‰∏∫ËäÇÁÇπ C ÁöÑÂ∑¶Â≠©Â≠ê</strong>„ÄÇ</p>
<h4 id="Â∑¶ÊóãÊìç‰Ωú">Â∑¶ÊóãÊìç‰Ωú</h4>
<p><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013918.png" alt="img"></p>
<p>Â∑¶ÊóãÊìç‰ΩúÂíåÂè≥ÊóãÊìç‰ΩúÂçÅÂàÜÁ±ª‰ººÔºåÂîØ‰∏Ä‰∏çÂêåÁöÑÂ∞±ÊòØÈúÄË¶ÅÂ∞ÜÂ∑¶Âè≥ÂëºÂî§‰∏ã„ÄÇÊàë‰ª¨ÂèØ‰ª•ËÆ§‰∏∫Ëøô‰∏§ÁßçÊìç‰ΩúÊòØÂØπÁß∞ÁöÑ</p>
<h4 id="ÈúÄË¶ÅÂπ≥Ë°°ÁöÑÂõõÁßçÊÉÖÂÜµ">ÈúÄË¶ÅÂπ≥Ë°°ÁöÑÂõõÁßçÊÉÖÂÜµ</h4>
<h5 id="llÂûã">LLÂûã</h5>
<p><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013938.png" alt="img"></p>
<p>ÊâÄË∞ì LL ÂûãÂ∞±ÊòØ‰∏äÂõæÂ∑¶ËæπÈÇ£ÁßçÊÉÖÂÜµÔºåÂç≥Âõ†‰∏∫Âú®Ê†πËäÇÁÇπÁöÑÂ∑¶Â≠©Â≠êÁöÑÂ∑¶Â≠êÊ†ëÊ∑ªÂä†‰∫ÜÊñ∞ËäÇÁÇπÔºåÂØºËá¥Ê†πËäÇÁÇπÁöÑÂπ≥Ë°°Âõ†Â≠êÂèò‰∏∫ +2Ôºå‰∫åÂèâÊ†ëÂ§±ÂéªÂπ≥Ë°°„ÄÇÂØπ‰∫éËøôÁßçÊÉÖÂÜµÔºåÂØπËäÇÁÇπ n Âè≥Êóã‰∏ÄÊ¨°Âç≥ÂèØ„ÄÇ</p>
<h5 id="rrÂûã">RRÂûã</h5>
<p><em>|</em><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013959.png" alt="img"></p>
<p>RR ÂûãÁöÑÊÉÖÂÜµÂíå LL ÂûãÂÆåÂÖ®ÂØπÁß∞„ÄÇÂè™ÈúÄË¶ÅÂØπËäÇÁÇπ n ËøõË°å‰∏ÄÊ¨°Â∑¶ÊóãÂç≥ÂèØ‰øÆÊ≠£„ÄÇ</p>
<h5 id="lrÂûã">LRÂûã</h5>
<p><em>|</em><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014003.png" alt="img"></p>
<p>LR Â∞±ÊòØÂ∞ÜÊñ∞ÁöÑËäÇÁÇπÊèíÂÖ•Âà∞‰∫Ü n ÁöÑÂ∑¶Â≠©Â≠êÁöÑÂè≥Â≠êÊ†ë‰∏äÂØºËá¥ÁöÑ‰∏çÂπ≥Ë°°ÁöÑÊÉÖÂÜµ„ÄÇËøôÊó∂Êàë‰ª¨ÈúÄË¶ÅÁöÑÊòØÂÖàÂØπ i ËøõË°å‰∏ÄÊ¨°Â∑¶ÊóãÂÜçÂØπ n ËøõË°å‰∏ÄÊ¨°Âè≥Êóã„ÄÇ</p>
<h5 id="rlÂûã">RLÂûã</h5>
<p>RL Â∞±ÊòØÂ∞ÜÊñ∞ÁöÑËäÇÁÇπÊèíÂÖ•Âà∞‰∫Ü n ÁöÑÂè≥Â≠©Â≠êÁöÑÂ∑¶Â≠êÊ†ë‰∏äÂØºËá¥ÁöÑ‰∏çÂπ≥Ë°°ÁöÑÊÉÖÂÜµ„ÄÇËøôÊó∂Êàë‰ª¨ÈúÄË¶ÅÁöÑÊòØÂÖàÂØπ i ËøõË°å‰∏ÄÊ¨°Âè≥ÊóãÂÜçÂØπ n ËøõË°å‰∏ÄÊ¨°Â∑¶Êóã„ÄÇ</p>
<p>ËøôÂõõÁßçÊÉÖÂÜµÁöÑÂà§Êñ≠ÂæàÁÆÄÂçï„ÄÇÊàë‰ª¨Ê†πÊçÆÁ†¥ÂùèÊ†ëÁöÑÂπ≥Ë°°ÊÄßÔºàÂπ≥Ë°°Âõ†Â≠êÁöÑÁªùÂØπÂÄºÂ§ß‰∫é 1ÔºâÁöÑËäÇÁÇπ‰ª•ÂèäÂÖ∂Â≠êËäÇÁÇπÁöÑÂπ≥Ë°°Âõ†Â≠êÊù•Âà§Êñ≠Âπ≥Ë°°ÂåñÁ±ªÂûã„ÄÇ</p>
<h4 id="ÊèíÂÖ•">ÊèíÂÖ•</h4>
<p>ÊèíÂÖ•ÊàêÂäüÂêéÔºåÂú®ÈÄíÂΩíÂõûÊ∫ØÊó∂‰æùÊ¨°ÂØπÁªèËøáÁöÑÁªìÁÇπÂà§Êñ≠ÊòØÂê¶Â§±Ë°°ÔºåËã•Â§±Ë°°Â∞±ÈúÄË¶ÅÂØπÂÖ∂ËøõË°åÂØπÂ∫îÁöÑÊóãËΩ¨Êìç‰Ωú‰ΩøÂÖ∂ÊÅ¢Â§çÂπ≥Ë°°ÔºåÂú®ËøôÊúüÈó¥ÔºåÂéüÂÖà‰Ωú‰∏∫‰∏ÄÊ£µÂ≠êÊ†ëÁöÑÊ†πÁªìÁÇπÂ∞±‰ºöÂõ†‰∏∫ÊóãËΩ¨Ë¢´ÊõøÊç¢</p>
<h4 id="Âà†Èô§">Âà†Èô§</h4>
<p>Âà†Èô§Êìç‰ΩúÁöÑÂõõÁßçÂ§±Ë°°ÊÉÖÂÜµÂíåÊèíÂÖ•Êìç‰Ωú‰∏ÄÊ†∑</p>
<h3 id="Á∫¢ÈªëÊ†ë">Á∫¢ÈªëÊ†ë</h3>
<p>Á∫¢ÈªëÊ†ëÔºàËã±ËØ≠ÔºöRed‚Äìblack treeÔºâÊòØ‰∏ÄÁßçËá™Âπ≥Ë°°‰∫åÂèâÊü•ÊâæÊ†ëÔºåÊòØÂú®ËÆ°ÁÆóÊú∫ÁßëÂ≠¶‰∏≠Áî®Âà∞ÁöÑ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÔºåÂÖ∏ÂûãÁöÑÁî®ÈÄîÊòØÂÆûÁé∞ÂÖ≥ËÅîÊï∞ÁªÑ„ÄÇÂÆÉÂú®1972Âπ¥Áî±È≤ÅÈÅìÂ§´¬∑Ë¥ùÂ∞îÂèëÊòéÔºåË¢´Áß∞‰∏∫&quot;ÂØπÁß∞‰∫åÂèâBÊ†ë&quot;ÔºåÂÆÉÁé∞‰ª£ÁöÑÂêçÂ≠óÊ∫ê‰∫éLeo J. GuibasÂíåRobert Sedgewick‰∫é1978Âπ¥ÂÜôÁöÑ‰∏ÄÁØáËÆ∫Êñá„ÄÇÁ∫¢ÈªëÊ†ëÁöÑÁªìÊûÑÂ§çÊùÇÔºå‰ΩÜÂÆÉÁöÑÊìç‰ΩúÊúâÁùÄËâØÂ•ΩÁöÑÊúÄÂùèÊÉÖÂÜµËøêË°åÊó∂Èó¥ÔºåÂπ∂‰∏îÂú®ÂÆûË∑µ‰∏≠È´òÊïàÔºöÂÆÉÂèØ‰ª•Âú®O(logn)Êó∂Èó¥ÂÜÖÂÆåÊàêÊü•Êâæ„ÄÅÊèíÂÖ•ÂíåÂà†Èô§ÔºåËøôÈáåÁöÑnÊòØÊ†ë‰∏≠ÂÖÉÁ¥†ÁöÑÊï∞ÁõÆ</p>
<h4 id="ÊÄßË¥®">ÊÄßË¥®</h4>
<ol>
<li>
<p>ÊØè‰∏™ËäÇÁÇπË¶Å‰πàÊòØÁ∫¢ÁöÑÔºåË¶Å‰πàÊòØÈªëÁöÑ</p>
</li>
<li>
<p>Ê†πËäÇÁÇπÊó∂ÈªëËâ≤ÁöÑ</p>
</li>
<li>
<p>ÊâÄÊúâÁöÑÂè∂Â≠êËäÇÁÇπÈÉΩÊòØÈªëËâ≤ÁöÑÔºàÂè∂Â≠êËäÇÁÇπÊòØNILËäÇÁÇπÔºâ</p>
</li>
<li>
<p>Â¶ÇÊûú‰∏Ä‰∏™ËäÇÁÇπÊòØÁ∫¢Ëâ≤ÁöÑÔºåÂàôÂÆÉÁöÑ‰∏§‰∏™ÂÑøÂ≠êÈÉΩÊòØÈªëËâ≤ÁöÑÔºà‰ªéÊØè‰∏™Âè∂Â≠êÂà∞Ê†πÁöÑÊâÄÊúâË∑ØÂæÑ‰∏ä‰∏çËÉΩÊúâ‰∏§‰∏™ËøûÁª≠ÁöÑÁ∫¢Ëâ≤ËäÇÁÇπ„ÄÇÔºâ</p>
</li>
<li>
<p>‰ªé‰ªª‰∏ÄËäÇÁÇπÂà∞ÂÖ∂ÊØè‰∏™Âè∂Â≠êÁöÑÊâÄÊúâÁÆÄÂçïË∑ØÂæÑÈÉΩÂåÖÂê´Áõ∏ÂêåÊï∞ÁõÆÁöÑÈªëËâ≤ËäÇÁÇπ„ÄÇ</p>
</li>
</ol>
<p><em>|</em><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014137.png" alt="img"></p>
<p>Ëøô‰∫õÁ∫¶ÊùüÁ°Æ‰øù‰∫ÜÁ∫¢ÈªëÊ†ëÁöÑÂÖ≥ÈîÆÁâπÊÄßÔºö</p>
<p><strong>‰ªéÊ†πÂà∞Âè∂Â≠êÁöÑÊúÄÈïøÁöÑÂèØËÉΩË∑ØÂæÑ‰∏çÂ§ö‰∫éÊúÄÁü≠ÁöÑÂèØËÉΩË∑ØÂæÑÁöÑ‰∏§ÂÄçÈïø„ÄÇÁªìÊûúÊòØËøô‰∏™Ê†ëÂ§ßËá¥‰∏äÊòØÂπ≥Ë°°ÁöÑ</strong>„ÄÇ</p>
<p>Âõ†‰∏∫Êìç‰ΩúÊØîÂ¶ÇÊèíÂÖ•„ÄÅÂà†Èô§ÂíåÊü•ÊâæÊüê‰∏™ÂÄºÁöÑÊúÄÂùèÊÉÖÂÜµÊó∂Èó¥ÈÉΩË¶ÅÊ±Ç‰∏éÊ†ëÁöÑÈ´òÂ∫¶ÊàêÊØî‰æãÔºåËøô‰∏™Âú®È´òÂ∫¶‰∏äÁöÑÁêÜËÆ∫‰∏äÈôêÂÖÅËÆ∏Á∫¢ÈªëÊ†ëÂú®ÊúÄÂùèÊÉÖÂÜµ‰∏ãÈÉΩÊòØÈ´òÊïàÁöÑÔºåËÄå‰∏çÂêå‰∫éÊôÆÈÄöÁöÑ‰∫åÂèâÊü•ÊâæÊ†ë„ÄÇ</p>
<p>Ë¶ÅÁü•ÈÅì‰∏∫‰ªÄ‰πàËøô‰∫õÊÄßË¥®Á°Æ‰øù‰∫ÜËøô‰∏™ÁªìÊûúÔºåÊ≥®ÊÑèÂà∞ÊÄßË¥®4ÂØºËá¥‰∫ÜË∑ØÂæÑ‰∏çËÉΩÊúâ‰∏§‰∏™Áõ∏ËøûÁöÑÁ∫¢Ëâ≤ËäÇÁÇπÂ∞±Ë∂≥Â§ü‰∫Ü„ÄÇÊúÄÁü≠ÁöÑÂèØËÉΩË∑ØÂæÑÈÉΩÊòØÈªëËâ≤ËäÇÁÇπÔºåÊúÄÈïøÁöÑÂèØËÉΩË∑ØÂæÑÊúâ‰∫§ÊõøÁöÑÁ∫¢Ëâ≤ÂíåÈªëËâ≤ËäÇÁÇπ„ÄÇÂõ†‰∏∫Ê†πÊçÆÊÄßË¥®5ÊâÄÊúâÊúÄÈïøÁöÑË∑ØÂæÑÈÉΩÊúâÁõ∏ÂêåÊï∞ÁõÆÁöÑÈªëËâ≤ËäÇÁÇπÔºåËøôÂ∞±Ë°®Êòé‰∫ÜÊ≤°ÊúâË∑ØÂæÑËÉΩÂ§ö‰∫é‰ªª‰ΩïÂÖ∂‰ªñË∑ØÂæÑÁöÑ‰∏§ÂÄçÈïø„ÄÇ</p>
<p>Âú®ÂæàÂ§öÊ†ëÊï∞ÊçÆÁªìÊûÑÁöÑË°®Á§∫‰∏≠Ôºå‰∏Ä‰∏™ËäÇÁÇπÊúâÂèØËÉΩÂè™Êúâ‰∏Ä‰∏™Â≠êËäÇÁÇπÔºåËÄåÂè∂Â≠êËäÇÁÇπÂåÖÂê´Êï∞ÊçÆ„ÄÇÁî®ËøôÁßçËåÉ‰æãË°®Á§∫Á∫¢ÈªëÊ†ëÊòØÂèØËÉΩÁöÑÔºå‰ΩÜÊòØËøô‰ºöÊîπÂèò‰∏Ä‰∫õÊÄßË¥®Âπ∂‰ΩøÁÆóÊ≥ïÂ§çÊùÇ„ÄÇ‰∏∫Ê≠§ÔºåÊú¨Êñá‰∏≠Êàë‰ª¨‰ΩøÁî®&quot;nilÂè∂Â≠ê&quot;Êàñ&quot;Á©∫ÔºànullÔºâÂè∂Â≠ê&quot;ÔºåÂ¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåÂÆÉ‰∏çÂåÖÂê´Êï∞ÊçÆËÄåÂè™ÂÖÖÂΩìÊ†ëÂú®Ê≠§ÁªìÊùüÁöÑÊåáÁ§∫„ÄÇËøô‰∫õËäÇÁÇπÂú®ÁªòÂõæ‰∏≠ÁªèÂ∏∏Ë¢´ÁúÅÁï•ÔºåÂØºËá¥‰∫ÜËøô‰∫õÊ†ëÂ•ΩÂÉèÂêå‰∏äËø∞ÂéüÂàôÁõ∏ÁüõÁõæÔºåËÄåÂÆûÈôÖ‰∏ä‰∏çÊòØËøôÊ†∑„ÄÇ‰∏éÊ≠§ÊúâÂÖ≥ÁöÑÁªìËÆ∫ÊòØÊâÄÊúâËäÇÁÇπÈÉΩÊúâ‰∏§‰∏™Â≠êËäÇÁÇπÔºåÂ∞ΩÁÆ°ÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™Êàñ‰∏§‰∏™ÂèØËÉΩÊòØÁ©∫Âè∂Â≠ê„ÄÇ</p>
<h4 id="ÊóãËΩ¨">ÊóãËΩ¨</h4>
<p>Á∫¢ÈªëÊ†ë‰πüÊòØ‰∏Ä‰∏™ÁâπÂåñÁöÑ‰∫åÂèâÊü•ÊâæÊ†ëÔºåÊâÄ‰ª•Âè™ËØªÊìç‰ΩúÂíåÊôÆÈÄöËÄå‰∫åÂèâÊü•ÊâæÊ†ëÁõ∏Âêå„ÄÇ</p>
<p>‰ΩÜÊòØÊèíÂÖ•ÊàñÂà†Èô§‰ºöÂØºËá¥‰∏çÁ¨¶ÂêàÁ∫¢ÈªëÊ†ëÊÄßË¥®ÔºåÊâÄ‰ª•ÈúÄË¶ÅO(logn)ÁöÑÈ¢úËâ≤ÂèòÊõ¥ÔºàÊØè‰∏™ËäÇÁÇπ‰∏çË∂ÖËøá‰∏âÊ¨°ÊóãËΩ¨Ôºâ</p>
<p>ÂØπ‰∫éÈáçÊñ∞ÁùÄËâ≤ÔºåÂπ∂‰∏çÂõ∞Èöæ„ÄÇÂèØ‰ª•Áúã‰∏Ä‰∏ã„ÄåÊóãËΩ¨„ÄçÊñπÂºèÔºö</p>
<h5 id="Â∑¶Êóã">Â∑¶Êóã</h5>
<p><em>|</em><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014201.png" alt="img"></p>
<p>xÂèòÊàêyÁöÑÂ∑¶ÂÑøÂ≠êÔºåxÁöÑÂè≥ÂÑøÂ≠êÂèòÊàêyÁöÑÂ∑¶ÂÑøÂ≠ê</p>
<h5 id="Âè≥Êóã">Âè≥Êóã</h5>
<p><em>|</em><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014205.png" alt="img"></p>
<p>xÂèòÊàêyÁöÑÂè≥ÂÑøÂ≠ê,xÁöÑÂ∑¶ÂÑøÂ≠êÂèòÊàêyÁöÑÂè≥ÂÑøÂ≠ê</p>
<h4 id="ÊèíÂÖ•-1">ÊèíÂÖ•</h4>
<p>Â∞ÜÁ∫¢ÈªëÊ†ëÂΩì‰Ωú‰∏ÄÈ¢ó‰∫åÂèâÊü•ÊâæÊ†ëÔºåÂ∞ÜÁªìÁÇπÊèíÂÖ•ÔºåÊèíÂÖ•ÂêéÔºåËØ•Ê†ë‰ªçÁÑ∂ÊòØ‰∏ÄÊ£µ‰∫åÂèâÊü•ÊâæÊ†ëÔºå‰ΩÜÊòØÂÆÉÂèØËÉΩÂ∑≤Áªè‰∏çÊòØÁ∫¢ÈªëÊ†ë‰∫ÜÔºåÊâÄ‰ª•Êé•‰∏ãÊù•Â∞±Ë¶ÅÈÄöËøá &ldquo;ÊóãËΩ¨&rdquo; Âíå &ldquo;ÈáçÊñ∞ÁùÄËâ≤&rdquo; Êù•‰ΩøÂÆÉÈáçÊñ∞Êàê‰∏∫Á∫¢ÈªëÊ†ë„ÄÇ</p>
<ol>
<li>ÊääÊèíÂÖ•ÁöÑÊñ∞ËäÇÁÇπÁöÑÈ¢úËâ≤ÂèòÊàêÁ∫¢Ëâ≤</li>
</ol>
<blockquote>
<p>Â¶ÇÊûúËÆæ‰∏∫ÈªëËâ≤ÔºåÂ∞±‰ºöÂØºËá¥Ê†πÂà∞Âè∂Â≠êÁöÑË∑ØÂæÑ‰∏äÊúâ‰∏ÄÊù°Ë∑Ø‰∏äÔºåÂ§ö‰∏Ä‰∏™È¢ùÂ§ñÁöÑÈªëËäÇÁÇπÔºåËøô‰∏™ÊòØÂæàÈöæË∞ÉÊï¥ÁöÑ„ÄÇ‰ΩÜÊòØËÆæ‰∏∫Á∫¢Ëâ≤ËäÇÁÇπÂêéÔºåÂèØËÉΩ‰ºöÂØºËá¥Âá∫Áé∞‰∏§‰∏™ËøûÁª≠Á∫¢Ëâ≤ËäÇÁÇπÁöÑÂÜ≤Á™ÅÔºåÈÇ£‰πàÂèØ‰ª•ÈÄöËøáÈ¢úËâ≤Ë∞ÉÊç¢ÂíåÊ†ëÊóãËΩ¨Êù•Ë∞ÉÊï¥„ÄÇ</p>
</blockquote>
<ol>
<li>
<p>ÊèíÂÖ•ÁöÑËäÇÁÇπ‰∏ÄÂÖ±‰ºöÊúâ‰ª•‰∏ã‰∏âÁßçÊÉÖÂÜµÔºö</p>
</li>
<li>
<ol>
<li>Ë¢´ÊèíÂÖ•ÁªìÁÇπÊòØÊ†πÁªìÁÇπÔºåÈÇ£Êàë‰ª¨ÊääÊ≠§ÁªìÁÇπÊ∂Ç‰∏∫ÈªëËâ≤Â∞±Ë°å‰∫ÜÔºõ</li>
</ol>
</li>
<li>
<ol>
<li>Ë¢´ÊèíÂÖ•ÁªìÁÇπÁöÑÁà∂‰∫≤ÁªìÁÇπÊòØÈªëËâ≤ÁöÑÔºåÈÇ£‰πà‰ªÄ‰πà‰πü‰∏çÈúÄË¶ÅÂÅöÔºåÁªìÁÇπË¢´ÊèíÂÖ•ÂêéÔºå‰ªçÁÑ∂ÊòØÁ∫¢ÈªëÊ†ë„ÄÇ</li>
</ol>
</li>
<li>
<ol>
<li>Ë¢´ÊèíÂÖ•ÁªìÁÇπÁöÑÁà∂‰∫≤ÁªìÁÇπÊòØÁ∫¢Ëâ≤ÁöÑÔºåÈÇ£‰πàÊ≠§Êó∂ÊòØËøùËÉå &ldquo;ÊÄßË¥® 3&rdquo; ÁöÑÔºåÈúÄË¶ÅË∞ÉÊï¥„ÄÇ</li>
</ol>
</li>
</ol>
<p>Ë∞ÉÊï¥ÊñπÊ°àÔºö</p>
<p>Ê≠§ÁßçÊÉÖÂÜµÔºåË¢´ÊèíÂÖ•ÁöÑËäÇÁÇπ‰∏ÄÂÆöÂ≠òÂú®Á•ñÁà∂ËäÇÁÇπÔºàÁà∏Áà∏ÁöÑÁà∏Áà∏ÔºâÔºåÂèØ‰ª•ÂàíÂàÜ‰∏∫ÂÖ≠ÁßçÊÉÖÂÜµÔºåÁî±‰∫éÊ∂âÂèäÈïúÂÉèÊìç‰ΩúÔºåÂèØ‰ª•ÂàÜÊàê‰∏âÁßçÔºö</p>
<ul>
<li><strong>Case 1 ÔºöÂΩìÂâçÁªìÁÇπÁöÑÁà∂‰∫≤ÊòØÁ∫¢Ëâ≤ÔºåÂèîÂèîÂ≠òÂú®‰∏î‰πüÊòØÁ∫¢Ëâ≤</strong></li>
</ul>
<p><em>|</em><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014224.png" alt="img"></p>
<ul>
<li>
<p>Âõæ‰∏≠Ôºå&ldquo;ÁªìÁÇπ 1&rdquo; ‰∏∫ &ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo;„ÄÇÈÇ£‰πàÊàë‰ª¨ÁöÑÂ§ÑÁêÜÁ≠ñÁï•Â∞±ÊòØÔºö</p>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;Áà∂‰∫≤ÁªìÁÇπ&rdquo; Êîπ‰∏∫ÈªëËâ≤Ôºõ</li>
</ul>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;ÂèîÂèîÁªìÁÇπ&rdquo; Êîπ‰∏∫ÈªëËâ≤Ôºõ</li>
</ul>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;Á•ñÁà∂ÁªìÁÇπ&rdquo; Êîπ‰∏∫Á∫¢Ëâ≤Ôºõ</li>
</ul>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;Á•ñÁà∂ÁªìÁÇπ&rdquo; ËÆæ‰∏∫ &ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo;ÔºåÁªßÁª≠ËøõË°åÊìç‰Ωú„ÄÇ</li>
</ul>
</li>
</ul>
<p>Â§ÑÁêÜÂÆåÂêéÔºåÂõæ‰∏≠ÊòæÁ§∫ÁöÑ‰∏§Êù°Ë∑ØÂæÑ‰∏äÔºåÈªëËâ≤ÁªìÁÇπÊï∞Áõ∏Âêå‰∏îÂíåÂéüÂõæÊï∞ÁõÆ‰∏ÄËá¥„ÄÇ</p>
<ul>
<li><strong>Case 2ÔºöÂΩìÂâçÁªìÁÇπÁöÑÁà∂‰∫≤ÊòØÁ∫¢Ëâ≤ÔºåÂèîÂèî‰∏çÂ≠òÂú®ÊàñÊòØÈªëËâ≤Ôºå‰∏îÂΩìÂâçÁªìÁÇπÊòØÂÖ∂Áà∂‰∫≤ÁöÑÂè≥Â≠©Â≠ê</strong></li>
</ul>
<p><em>|</em><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014231.png" alt="img"></p>
<ul>
<li>
<p>Âõæ‰∏≠Ôºå&ldquo;ÁªìÁÇπ 2&rdquo; ‰∏∫ &ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo;„ÄÇÈÇ£‰πàÊàë‰ª¨ÁöÑÂ§ÑÁêÜÁ≠ñÁï•Â∞±ÊòØÔºö</p>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;Áà∂‰∫≤ÁªìÁÇπ&rdquo; ËÆæ‰∏∫ &ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo;Ôºõ</li>
</ul>
</li>
<li>
<ul>
<li>‰ª•Êñ∞ÁöÑ &ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo; ‰∏∫ÊîØÁÇπËøõË°åÂ∑¶Êóã„ÄÇ</li>
</ul>
</li>
</ul>
<p>Â§ÑÁêÜÂÆå‰∏äËø∞Êìç‰Ωú‰πãÂêéÔºå‰ªçÁÑ∂ÂèëÁé∞‰∏çÊª°Ë∂≥Á∫¢ÈªëÊ†ëÁöÑÊÄßË¥®ÔºåËøôÂ∞±ÊòØ‰∏ã‰∏ÄÊù° Case</p>
<ul>
<li><strong>Case 3ÔºöÂΩìÂâçÁªìÁÇπÁöÑÁà∂‰∫≤ÊòØÁ∫¢Ëâ≤ÔºåÂèîÂèî‰∏çÂ≠òÂú®ÊàñÊòØÈªëËâ≤Ôºå‰∏îÂΩìÂâçÁªìÁÇπÊòØÂÖ∂Áà∂‰∫≤ÁöÑÂ∑¶Â≠©Â≠ê</strong></li>
</ul>
<p><em>|</em><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014236.png" alt="img"></p>
<ul>
<li>
<p>Âõæ‰∏≠Ôºå&ldquo;ÁªìÁÇπ 1&rdquo; ‰∏∫ &ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo;„ÄÇÈÇ£‰πàÊàë‰ª¨ÁöÑÂ§ÑÁêÜÁ≠ñÁï•Â∞±ÊòØÔºö</p>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;Áà∂‰∫≤ÁªìÁÇπ&rdquo; Êîπ‰∏∫ÈªëËâ≤Ôºõ</li>
</ul>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;Á•ñÁà∂ÁªìÁÇπ&rdquo; Êîπ‰∏∫Á∫¢Ëâ≤Ôºõ</li>
</ul>
</li>
<li>
<ul>
<li>‰ª• &ldquo;Á•ñÁà∂ÁªìÁÇπ&rdquo; ‰∏∫ÊîØÁÇπËøõË°åÂè≥Êóã„ÄÇ</li>
</ul>
</li>
</ul>
<p>Â§ÑÁêÜÂÆåÂêéÔºåÂõæ‰∏≠ÊòæÁ§∫ÁöÑ‰∏§Êù°Ë∑ØÂæÑ‰∏äÔºåÈªëËâ≤ÁªìÁÇπÊï∞Áõ∏Âêå‰∏îÂíåÂéüÂõæÊï∞ÁõÆ‰∏ÄËá¥„ÄÇ</p>
<h4 id="Âà†Èô§-1">Âà†Èô§</h4>
<p><strong>È¶ñÂÖà</strong>ÔºåÂíåÂà†Èô§‰∏ÄÊ£µÊôÆÈÄö‰∫åÂèâÊü•ÊâæÊ†ëÁöÑÁªìÁÇπÁõ∏ÂêåÔºåÊàë‰ª¨‰ºöÈÅáÂà∞‰∏âÁßçÊÉÖÂÜµÔºö</p>
<ol>
<li>
<p>&ldquo;Ë¢´Âà†ÁªìÁÇπ&rdquo; Ê≤°ÊúâÂ≠©Â≠êÔºåÂ¶ÇÊûúÂÆÉÊòØÁ∫¢Ëâ≤ÁöÑÔºåÈÇ£‰πàÂèØ‰ª•Áõ¥Êé•Âà†Èô§Ôºõ</p>
</li>
<li>
<p>&ldquo;Ë¢´Âà†ÁªìÁÇπ&rdquo; Âè™Êúâ‰∏Ä‰∏™Â≠©Â≠êÔºåÈÇ£‰πàÂà†Èô§ËØ•ÁªìÁÇπÂêéÔºåÁî®Ëøô‰∏™Â≠©Â≠êÂéªÊõøÊç¢ÂÆÉÂç≥ÂèØÔºõ</p>
</li>
<li>
<p>&ldquo;Ë¢´Âà†ÁªìÁÇπ&rdquo; Êúâ‰∏§‰∏™Â≠©Â≠êÔºåÈÇ£‰πàÂÖàÊâæÂá∫ÂÆÉÁöÑ &ldquo;ÂêéÁªßÁªìÁÇπ&rdquo;ÔºåÁÑ∂ÂêéÁî® &ldquo;ÂêéÁªßÁªìÁÇπ&rdquo; ÂéªÊõøÊç¢ &ldquo;Ë¢´Âà†ÁªìÁÇπ&rdquo;ÔºåÊääÈóÆÈ¢òËΩ¨Âåñ‰∏∫Âà†Èô§ &ldquo;ÂêéÁªßÁªìÁÇπ&rdquo; Ôºå‰πüÂ∞±ÊòØËØ¥Ôºå &ldquo;ÂêéÁªßÁªìÁÇπ&rdquo; ÊâçÊòØÁúüÊ≠£ÁöÑ &ldquo;Ë¢´Âà†ÁªìÁÇπ&rdquo;„ÄÇ</p>
</li>
</ol>
<p><strong>Êé•ÁùÄ</strong>ÔºåÊàë‰ª¨Êù•ÁúãÁúã &ldquo;ÂéüÂÖàÁªìÁÇπ&rdquo; Ë¢´Âà†ÊéâÂêéÔºå‰ºöÈÅáÂà∞Âì™Âá†ÁßçÊÉÖÂÜµÔºåÂàÜÊûêÂèëÁé∞Ôºå‰∏ÄÂÖ±ÊúâÂõõÁßçÔºö</p>
<ol>
<li>
<p>&ldquo;ÂéüÂÖàÁªìÁÇπ&rdquo; ‰∏∫ÈªëËâ≤Ôºå&ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo; ‰∏∫Á∫¢Ëâ≤ÔºåÈÇ£‰πàÊàë‰ª¨Êää &ldquo;ÂéüÂÖàÁªìÁÇπ&rdquo; Âà†ÊéâÂêéÔºåÊãø &ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo; ÂéªÊõøÊç¢ÂÆÉÔºåÂπ∂‰øÆÊîπÈ¢úËâ≤‰∏∫ÈªëËâ≤Âç≥ÂèØÔºõ</p>
</li>
<li>
<p>&ldquo;ÂéüÂÖàÁªìÁÇπ&rdquo; ‰∏∫ÈªëËâ≤Ôºå&ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo; ‰∏∫ÈªëËâ≤ÔºåËøôÁßçÊÉÖÂÜµÊØîËæÉÂ§çÊùÇ</p>
</li>
<li>
<p>&ldquo;ÂéüÂÖàÁªìÁÇπ&rdquo; ‰∏∫Á∫¢Ëâ≤Ôºå&ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo; ‰∏∫Á∫¢Ëâ≤ÔºåÈÇ£‰πàÊàë‰ª¨Êää &ldquo;ÂéüÂÖàÁªìÁÇπ&rdquo; Âà†ÊéâÂêéÔºåÁõ¥Êé•Êãø&quot;ÂΩìÂâçÁªìÁÇπ&quot; ÂéªÊõøÊç¢ÂÆÉÂç≥ÂèØÔºõ</p>
</li>
<li>
<p>&ldquo;ÂéüÂÖàÁªìÁÇπ&rdquo; ‰∏∫Á∫¢Ëâ≤Ôºå&ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo; ‰∏∫ÈªëËâ≤ÔºåËøôÂíå &ldquo;ÊÉÖÂÜµ 3&rdquo; ‰∏ÄÊ†∑ÔºåÁõ¥Êé•Êãø&quot;ÂΩìÂâçÁªìÁÇπ&quot; ÂéªÊõøÊç¢ÂÆÉÂç≥ÂèØ„ÄÇ</p>
</li>
</ol>
<p><strong>ÊúÄÂêé</strong>ÔºåÂØπ‰∫é‰∏äËø∞ÁöÑ &ldquo;ÊÉÖÂÜµ 2&rdquo;„ÄÇËøôÁßçÊÉÖÂÜµÂèØ‰ª•Ëøõ‰∏ÄÊ≠•ÂÜçÂàíÂàÜ‰∏∫ 8 ÁßçÊÉÖÂÜµÔºåÂõ†‰∏∫Ê∂âÂèäÂà∞ÈïúÂÉèÊìç‰ΩúÔºåÊâÄ‰ª•Êàë‰ª¨Âè™ÈúÄÁêÜËß£ÂÖ∂‰∏≠‰∏ÄËæπÈïúÂÉèÁöÑ 4 ÁßçÊÉÖÂÜµÂç≥ÂèØÔºàÊ≥®ÊÑèÔºå‰∏ãÈù¢ÁöÑÂõæÁâá‰∏äÔºå&ldquo;ÂéüÂÖàÁªìÁÇπ&rdquo; Â∑≤Ë¢´Âà†Èô§ÔºåÊïÖÊú™ÁîªÂá∫ÔºåÂè™ÁîªÂá∫‰∫Ü &ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo; ÔºâÔºö</p>
<p><strong>Case 1ÔºöÂΩìÂâçÁªìÁÇπÊòØÈªëËâ≤ÔºåÂÖÑÂºüÁªìÁÇπÊòØÁ∫¢Ëâ≤</strong></p>
<p><em>|</em><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014252.png" alt="img"></p>
<ul>
<li>
<p>&ldquo;ÁªìÁÇπ 1&rdquo; ‰∏∫ &ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo;„ÄÇËßÇÂØü‰∏äÂõæÔºåÂõ† &ldquo;ÂéüÂÖàÁªìÁÇπ&rdquo; Â∑≤Ë¢´Âà†Èô§ÔºåÊïÖË∑ØÂæÑ2-&gt;1‰∏äÂ∞ë‰∫Ü‰∏Ä‰∏™ÈªëËâ≤ÁªìÁÇπÔºàÂè≥‰æßË∑ØÂæÑÁöÑÈªëËâ≤ÁªìÁÇπÊú™ÁîªÂÆåÂÖ®ÔºâÔºåÈÇ£‰πàÊàë‰ª¨ÁöÑÂ§ÑÁêÜÁ≠ñÁï•Â∞±ÊòØÔºö</p>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;ÂÖÑÂºüÁªìÁÇπ&rdquo; Êîπ‰∏∫ÈªëËâ≤Ôºõ‰πüÂ∞±ÊòØÊää‰∏äÂõæ‰∏≠ 4 ÂèòÈªë</li>
</ul>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;Áà∂‰∫≤ÁªìÁÇπ&rdquo; Êîπ‰∏∫Á∫¢Ëâ≤Ôºõ‰πüÂ∞±ÊòØÊää 2 ÂèòÁ∫¢</li>
</ul>
</li>
<li>
<ul>
<li>‰ª• &ldquo;Áà∂‰∫≤ÁªìÁÇπ&rdquo; ‰∏∫ÊîØÁÇπËøõË°åÂ∑¶ÊóãÔºõ‰ª• 2 ‰∏∫ÊîØÁÇπËøõË°åÂ∑¶Êóã</li>
</ul>
</li>
<li>
<ul>
<li>Â∑¶ÊóãÂêéÔºåÈáçÊñ∞ËÆæÁΩÆ &ldquo;ÂÖÑÂºüÁªìÁÇπ&rdquo;„ÄÇ</li>
</ul>
</li>
</ul>
<p>Â§ÑÁêÜÂÆåÂêéÔºåÊàë‰ª¨ÂèëÁé∞‰æùÊóßÊúâ 2 ‰∏™ÈªëËâ≤ÁªìÁÇπÔºåËØ¥ÊòéÂΩìÂâçÁä∂ÊÄÅÂπ∂‰∏çÊª°Ë∂≥Á∫¢ÈªëÊ†ëÊÄßË¥®„ÄÇÂÖ∂ÂÆûÔºåËøôÊòØËøõÂÖ•‰∫Ü‰∏ãÈù¢ÁöÑ Case 2ÔºåCase 3ÔºåÂíå Case 4 Èò∂ÊÆµ‰∫Ü„ÄÇ</p>
<p><strong>Case 2ÔºöÂΩìÂâçÁªìÁÇπÊòØÈªëËâ≤ÔºåÂÖÑÂºüÁªìÁÇπÊòØÈªëËâ≤Ôºå‰∏§‰∏™Â≠©Â≠ê‰∏∫Á©∫ÊàñÊòØÈªëËâ≤</strong></p>
<p><em>|</em><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014255.png" alt="img"></p>
<ul>
<li>
<p>&ldquo;ÁªìÁÇπ 1&rdquo; ‰∏∫ &ldquo;ÂΩìÂâçËäÇÁÇπ&rdquo;„ÄÇÂ¶Ç‰∏äÂõæÔºåÂõ† &ldquo;ÂéüÂÖàÁªìÁÇπ&rdquo; Â∑≤Ë¢´Âà†Èô§ÔºåÊïÖË∑ØÂæÑ2-&gt;1‰∏äÂ∞ë‰∫Ü‰∏Ä‰∏™ÈªëËâ≤ÁªìÁÇπÔºåÈÇ£‰πàÊàë‰ª¨ÁöÑÂ§ÑÁêÜÁ≠ñÁï•Â∞±ÊòØÔºö</p>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;ÂÖÑÂºüÁªìÁÇπ&rdquo; Êîπ‰∏∫Á∫¢Ëâ≤ÔºõÂ∞±ÊòØÊää 4 ÂèòÁ∫¢</li>
</ul>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;Áà∂‰∫≤ÁªìÁÇπ&rdquo; ËÆæÁΩÆ‰∏∫Êñ∞ÁöÑ &ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo;ÔºåÁªßÁª≠ËøõË°åÊìç‰Ωú„ÄÇ</li>
</ul>
</li>
</ul>
<p>Â§ÑÁêÜÂÆåÂêéÔºåÊàë‰ª¨ÂèëÁé∞ÂΩìÂâçÁä∂ÊÄÅ‰∏çÊª°Ë∂≥Á∫¢ÈªëÊ†ëÊÄßË¥®Ôºå‰ΩÜÊòØÊàë‰ª¨ÂèëÁé∞Âè™Ë¶ÅÊää &ldquo;ÁªìÁÇπ 2&rdquo; ÁùÄËâ≤‰∏∫ÈªëËâ≤‰∏çÂ∞±Ë°å‰∫Ü‰πà„ÄÇ</p>
<p><strong>Case 3ÔºöÂΩìÂâçÁªìÁÇπÊòØÈªëËâ≤ÔºåÂÖÑÂºüÁªìÁÇπÊòØÈªëËâ≤ÔºåÂÖÑÂºüÁªìÁÇπÁöÑÂ∑¶Â≠©Â≠êÊòØÁ∫¢Ëâ≤ÔºåÂè≥Â≠©Â≠ê‰∏∫Á©∫ÊàñÊòØÈªëËâ≤</strong></p>
<p><em>|</em><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014300.png" alt="img"></p>
<ul>
<li>
<p>&ldquo;ÁªìÁÇπ 1&rdquo; ‰∏∫ &ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo;„ÄÇËßÇÂØü‰∏äÂõæÔºåÂõ† &ldquo;ÂéüÂÖàÁªìÁÇπ&rdquo; Â∑≤Ë¢´Âà†Èô§ÔºåÊïÖË∑ØÂæÑ2-&gt;1‰∏äÂ∞ë‰∫Ü‰∏Ä‰∏™ÈªëËâ≤ÁªìÁÇπÔºåÈÇ£‰πàÊàë‰ª¨ÁöÑÂ§ÑÁêÜÁ≠ñÁï•Â∞±ÊòØÔºö</p>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;ÂÖÑÂºüÁªìÁÇπ&rdquo; ÁöÑÂ∑¶Â≠©Â≠êÊîπ‰∏∫ÈªëËâ≤ÔºõÂ∞±ÊòØÂ∞Ü 3 ÂèòÈªë</li>
</ul>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;ÂÖÑÂºüÁªìÁÇπ&rdquo; Êîπ‰∏∫Á∫¢Ëâ≤Ôºõ Â∞Ü 4 ÂèòÁ∫¢</li>
</ul>
</li>
<li>
<ul>
<li>‰ª• &ldquo;ÂÖÑÂºüÁªìÁÇπ&rdquo; ‰∏∫ÊîØÁÇπËøõË°åÂè≥ÊóãÔºõ ‰ª• 4 ‰∏∫ÊîØÁÇπÂè≥Êóã</li>
</ul>
</li>
<li>
<ul>
<li>Âè≥ÊóãÂêéÔºåÈáçÊñ∞ËÆæÁΩÆ &ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo; ÁöÑ &ldquo;ÂÖÑÂºüÁªìÁÇπ&rdquo;„ÄÇ 3 ÂèòÊàê‰∫ÜÊñ∞ÁöÑÂÖÑÂºüËäÇÁÇπ</li>
</ul>
</li>
</ul>
<p>Â§ÑÁêÜÂÆåÂêéÔºåÊàë‰ª¨ÂèëÁé∞Âõæ‰∏≠2-&gt;1‰∏äËøòÊòØÂè™Êúâ 1 ‰∏™ÈªëËâ≤ÁªìÁÇπÔºåËØ¥ÊòéÂΩìÂâçÁä∂ÊÄÅ‰∏çÊª°Ë∂≥Á∫¢ÈªëÊ†ëÊÄßË¥®„ÄÇÂÖ∂ÂÆûËøôÊòØËøõÂÖ•‰∫ÜCase 4</p>
<p><strong>Case 4ÔºöÂΩìÂâçÁªìÁÇπÊòØÈªëËâ≤ÔºåÂÖÑÂºüÁªìÁÇπÊòØÈªëËâ≤ÔºåÂÖÑÂºüÁªìÁÇπÁöÑÂè≥Â≠©Â≠êÊòØÁ∫¢Ëâ≤ÔºåÂ∑¶Â≠©Â≠ê‰∏∫Á©∫ÊàñÁ∫¢ÈªëÁöÜÂèØ</strong></p>
<p><em>|</em><img src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014306.png" alt="img"></p>
<ul>
<li>
<p>&ldquo;ÁªìÁÇπ 1&rdquo; ‰∏∫ &ldquo;ÂΩìÂâçÁªìÁÇπ&rdquo;„ÄÇËßÇÂØü‰∏äÂõæÔºåÂõ† &ldquo;ÂéüÂÖàÁªìÁÇπ&rdquo; Â∑≤Ë¢´Âà†Èô§ÔºåÊïÖË∑ØÂæÑ 2-&gt;1 ‰∏äÂ∞ë‰∫Ü‰∏Ä‰∏™ÈªëËâ≤ÁªìÁÇπÔºåÈÇ£‰πàÊàë‰ª¨ÁöÑÂ§ÑÁêÜÁ≠ñÁï•Â∞±ÊòØÔºö</p>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;Áà∂‰∫≤ÁªìÁÇπ&rdquo; ÁöÑÈ¢úËâ≤ËµãÁªô &ldquo;ÂÖÑÂºüÁªìÁÇπ&rdquo;ÔºõÊää 2 ÁöÑÈ¢úËâ≤Áªô 4 ÔºåÁõ∏ÂΩì‰∫éÊää 4 ÂèòÁ∫¢</li>
</ul>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;Áà∂‰∫≤ÁªìÁÇπ&rdquo; Êîπ‰∏∫ÈªëËâ≤Ôºõ Êää 2 ÂèòÈªë</li>
</ul>
</li>
<li>
<ul>
<li>Â∞Ü &ldquo;ÂÖÑÂºüÁªìÁÇπ&rdquo; ÁöÑÂè≥Â≠©Â≠êÊîπ‰∏∫ÈªëËâ≤Ôºõ Êää 5 ÂèòÈªë</li>
</ul>
</li>
<li>
<ul>
<li>‰ª• &ldquo;Áà∂‰∫≤ÁªìÁÇπ&rdquo; ‰∏∫ÊîØÁÇπËøõË°åÂ∑¶ÊóãÔºõ ‰ª• 2 ‰∏∫ÊîØÁÇπËøõË°åÂ∑¶Êóã</li>
</ul>
</li>
</ul>
<h3 id="ÊØîËæÉ">ÊØîËæÉ</h3>
<ol>
<li>
<p>ÂØπ‰∫é AVL Ê†ëÔºåÂú®ÊèíÂÖ•ÊàñÂà†Èô§Êìç‰ΩúÂêéÔºåÈÉΩË¶ÅÂà©Áî®ÈÄíÂΩíÁöÑÂõûÊ∫ØÔºåÂéªÁª¥Êä§‰ªéË¢´Âà†ÁªìÁÇπÂà∞Ê†πÁªìÁÇπËøôÊù°Ë∑ØÂæÑ‰∏äÁöÑÊâÄÊúâÁªìÁÇπÁöÑÂπ≥Ë°°ÊÄßÔºåÂõûÊ∫ØÁöÑÈáèÁ∫ßÊòØÈúÄË¶Å O(logn) ÁöÑÔºåÂÖ∂‰∏≠ÊèíÂÖ•Êìç‰ΩúÊúÄÂ§öÈúÄË¶Å‰∏§Ê¨°ÊóãËΩ¨ÔºåÂà†Èô§Êìç‰ΩúÂèØËÉΩÊòØ 1 Ê¨°„ÄÅ2 Ê¨°Êàñ 2 Ê¨°‰ª•‰∏ä„ÄÇËÄåÁ∫¢ÈªëÊ†ëÂú® ÊèíÂÖ•ÁöÑÊó∂ÂÄôÊúÄÂ§öÈúÄË¶Å 2 Ê¨°ÊóãËΩ¨ÔºåÂú® rebalance ÁöÑÊó∂ÂÄôÊúÄÂ§ö‰πüÂè™ÈúÄË¶Å 3 Ê¨°ÊóãËΩ¨„ÄÇ</p>
</li>
<li>
<p>ÂÖ∂Ê¨°ÔºåAVL Ê†ëÁöÑÁªìÊûÑÁõ∏ËæÉÁ∫¢ÈªëÊ†ëÊù•ËØ¥Êõ¥‰∏∫Âπ≥Ë°°ÔºåÊïÖÂú®ÊèíÂÖ•ÂíåÂà†Èô§ÁªìÁÇπÊó∂Êõ¥ÂÆπÊòìÂºïËµ∑‰∏çÂπ≥Ë°°„ÄÇÂõ†Ê≠§Âú®Â§ßÈáèÊï∞ÊçÆÈúÄË¶ÅÊèíÂÖ•ÊàñËÄÖÂà†Èô§Êó∂ÔºåAVL Ê†ëÈúÄË¶Å rebalance ÁöÑÈ¢ëÁéá‰ºöÊõ¥È´òÔºåÁõ∏ÊØî‰πã‰∏ãÔºåÁ∫¢ÈªëÊ†ëÁöÑÊïàÁéá‰ºöÊõ¥È´ò„ÄÇ</p>
</li>
</ol>
<h2 id="ÂÜÖÊ†∏‰∏≠ÁöÑÂÆûÁé∞">ÂÜÖÊ†∏‰∏≠ÁöÑÂÆûÁé∞</h2>
<p>ÂÜÖÊ†∏‰∏≠ÁöÑÂÆûÁé∞ÔºåÂÆö‰πâÂú® include/linux/rbtree.h ‰∏≠ÔºåÂÆûÁé∞Âú® lib/rbtree.c „ÄÇ</p>
<h3 id="ËäÇÁÇπÂÆö‰πâ-1">ËäÇÁÇπÂÆö‰πâ</h3>
<p>include/linux/rbtree.h 100Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8b008b;font-weight:bold">struct</span> rb_node
{
  <span style="color:#00688b;font-weight:bold">unsigned</span> <span style="color:#00688b;font-weight:bold">long</span>  rb_parent_color;
<span style="color:#1e889b">#define RB_RED    0
</span><span style="color:#1e889b">#define RB_BLACK   1
</span><span style="color:#1e889b"></span>  <span style="color:#8b008b;font-weight:bold">struct</span> rb_node *rb_right;
  <span style="color:#8b008b;font-weight:bold">struct</span> rb_node *rb_left;
} __attribute__((aligned(<span style="color:#8b008b;font-weight:bold">sizeof</span>(<span style="color:#00688b;font-weight:bold">long</span>))));
  <span style="color:#a61717;background-color:#e3d2d2">*/\</span>* The alignment might seem pointless, but allegedly CRIS needs it <span style="color:#a61717;background-color:#e3d2d2">\*/</span>*
<span style="color:#8b008b;font-weight:bold">struct</span> rb_root
{
  <span style="color:#8b008b;font-weight:bold">struct</span> rb_node *rb_node;
};
</code></pre></td></tr></table>
</div>
</div><p>Ê†πËäÇÁÇπÁî± rb_root ÂÆö‰πâÔºåÁªôÂÆö‰∏Ä‰∏™ rb_node „ÄÇÂèØ‰ª•ÈÄöËøáË∑üË∏™ÂêåÂêçËäÇÁÇπÊåáÈíàÊù•ÊâæÂà∞‰ªñÁöÑÂ∑¶Âè≥Â≠êËäÇÁÇπ„ÄÇ</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#228b22">// include/linux/rbtree.h 133Ë°å ÈÄöËøáÊåáÈíàÂØªÊâæËøô‰∏™ÁªìÊûÑÁöÑÂú∞ÂùÄ
</span><span style="color:#228b22"></span><span style="color:#1e889b">#define rb_entry(*ptr*, *type*, *member*) container_of(ptr, type, member)
</span></code></pre></td></tr></table>
</div>
</div><h3 id="Êìç‰Ωú">Êìç‰Ωú</h3>
<p>ÂºïÁî®‰∏ÄÊÆµ‰ª£Á†ÅÊ≥®ÈáäÔºö</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"> *linux/include/linux/rbtree.h*
 *To* *use* *rbtrees you**<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>ll have to implement your own insert and search cores.*
 *This will avoid us to* *use* *callbacks* *and* *to* *drop* *drammatically performances.*
 *I know it<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>s not the cleaner way,  but in C (not in C++) to get*
 *performances and genericity...*
 *Some example of* *insert* *and* *search* *follows* *here. The* *search* *is* *a plain*
 *normal search over an ordered tree. The* *insert* *instead must be implemented*
 *in two steps: First, the code must* *insert* *the* *element* *in* *order* *as* *a red leaf*
 *in the tree, and then the support library function rb_insert_color() must*
 *be called. Such function will* *<span style="color:#8b008b;font-weight:bold">do</span>* *the* *not* *trivial* *work* *to* *rebalance the*
 *rbtree, <span style="color:#8b008b;font-weight:bold">if</span> necessary.*
</code></pre></td></tr></table>
</div>
</div><p>Rbtree ‰∏≠Âπ∂Ê≤°ÊúâÊèê‰æõÊêúÁ¥¢ÂíåÊèíÂÖ•‰æãÁ®ãÔºåËøô‰∫õÂéÜÁ®ãÂ∏åÊúõÁî± rbtree ÁöÑÁî®Êà∑Ëá™Â∑±ÂÆö‰πâ„ÄÇËøôÊòØÂõ†‰∏∫CËØ≠Ë®Ä‰∏çÂ§™ÂÆπÊòìËøõË°åÊ≥õÂûãÁºñÁ®ã„ÄÇ</p>
<p>Ê∫êÁ†Å‰∏≠‰πüÊèê‰æõ‰∫Ü‰ΩøÁî®ÂÜÖÊ†∏‰∏≠Á∫¢ÈªëÊ†ëÁöÑ‰æãÁ®ãÔºö</p>
<p>include/linux/rbtree.h 34Ë°å</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">*<span style="color:#8b008b;font-weight:bold">static</span>* *<span style="color:#8b008b;font-weight:bold">inline</span>* *<span style="color:#8b008b;font-weight:bold">struct</span> page ** *rb_search_page_cache**(<span style="color:#8b008b;font-weight:bold">struct</span> inode <span style="color:#a61717;background-color:#e3d2d2">\</span>* inode,*
             *<span style="color:#00688b;font-weight:bold">unsigned</span>* *<span style="color:#00688b;font-weight:bold">long</span>* *offset)*
*{*
  *<span style="color:#8b008b;font-weight:bold">struct</span>* *rb_node* *** *n* *=* *inode**-&gt;**i_rb_page_cache**.**rb_node**;*
  *<span style="color:#8b008b;font-weight:bold">struct</span>* *page* *** *page**;*
  *<span style="color:#8b008b;font-weight:bold">while</span>* *(n)*
  *{*
    *page = rb_entry(n, <span style="color:#8b008b;font-weight:bold">struct</span> page, rb_page_cache);*
    *<span style="color:#8b008b;font-weight:bold">if</span>* *(offset &lt; page-&gt;offset)*
      *n = n-&gt;rb_left;*
    *<span style="color:#8b008b;font-weight:bold">else</span>* *<span style="color:#8b008b;font-weight:bold">if</span>* *(offset &gt; page-&gt;offset)*
      *n = n-&gt;rb_right;*
    *<span style="color:#8b008b;font-weight:bold">else</span>*
      *<span style="color:#8b008b;font-weight:bold">return</span>* *page;*
  *}*
  *<span style="color:#8b008b;font-weight:bold">return</span>* *<span style="color:#658b00">NULL</span>**;*
*}*
</code></pre></td></tr></table>
</div>
</div><p>‰∏äÈù¢ÁöÑ‰æãÂ≠êÂÆûÁé∞‰∫ÜÔºåÂú®È°µÈ´òÈÄüÁºìÂ≠ò‰∏≠ÊêúÁ¥¢‰∏Ä‰∏™Êñá‰ª∂Âå∫ÔºàÁî±‰∏Ä‰∏™iËäÇÁÇπÂíå‰∏Ä‰∏™ÂÅèÁßªÈáèÂÖ±ÂêåÊèèËø∞Ôºâ„ÄÇÊØè‰∏™ËäÇÁÇπÈÉΩÊúâËá™Â∑±ÁöÑ rbtree ÔºåËØ•ÂáΩÊï∞Â∞ÜÊêúÁ¥¢ÁªôÂÆöËäÇÁÇπiÁöÑrbtreeÔºå‰ª•ÂØªÊâæÂåπÈÖçÁöÑÂÅèÁßªÂÄº</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">*<span style="color:#8b008b;font-weight:bold">static</span>* *<span style="color:#8b008b;font-weight:bold">inline</span>* *<span style="color:#8b008b;font-weight:bold">struct</span>* *page* ** __**rb_insert_page_cache**(**<span style="color:#8b008b;font-weight:bold">struct</span>* *inode* *** *inode**,*
              *<span style="color:#00688b;font-weight:bold">unsigned</span>* *<span style="color:#00688b;font-weight:bold">long</span>* *offset,*
              *<span style="color:#8b008b;font-weight:bold">struct</span>* *rb_node* *** *node**)*
*{*
  *<span style="color:#8b008b;font-weight:bold">struct</span>* *rb_node* **** *p* *= &amp;**inode**-&gt;**i_rb_page_cache**.**rb_node**;*
  *<span style="color:#8b008b;font-weight:bold">struct</span>* *rb_node* *** *parent* *=* *<span style="color:#658b00">NULL</span>**;*
  *<span style="color:#8b008b;font-weight:bold">struct</span>* *page* *** *page**;*
  *<span style="color:#8b008b;font-weight:bold">while</span>* *(<span style="color:#a61717;background-color:#e3d2d2">\</span>*p)*
  *{*
    *parent = <span style="color:#a61717;background-color:#e3d2d2">\</span>*p;*
    *page = rb_entry(parent, <span style="color:#8b008b;font-weight:bold">struct</span> page, rb_page_cache);*
    *<span style="color:#8b008b;font-weight:bold">if</span>* *(offset &lt; page-&gt;offset)*
      *p = &amp;(<span style="color:#a61717;background-color:#e3d2d2">\</span>*p)-&gt;rb_left;*
    *<span style="color:#8b008b;font-weight:bold">else</span>* *<span style="color:#8b008b;font-weight:bold">if</span>* *(offset &gt; page-&gt;offset)*
      *p = &amp;(<span style="color:#a61717;background-color:#e3d2d2">\</span>*p)-&gt;rb_right;*
    *<span style="color:#8b008b;font-weight:bold">else</span>*
      *<span style="color:#8b008b;font-weight:bold">return</span>* *page;*
  *}*
  *rb_link_node(node, parent, p);*
  *<span style="color:#8b008b;font-weight:bold">return</span>* *<span style="color:#658b00">NULL</span>**;*
*}*
*<span style="color:#8b008b;font-weight:bold">static</span>* *<span style="color:#8b008b;font-weight:bold">inline</span>* *<span style="color:#8b008b;font-weight:bold">struct</span> page ** *rb_insert_page_cache**(<span style="color:#8b008b;font-weight:bold">struct</span> inode <span style="color:#a61717;background-color:#e3d2d2">\</span>* inode,*
             *<span style="color:#00688b;font-weight:bold">unsigned</span>* *<span style="color:#00688b;font-weight:bold">long</span>* *offset,*
             *<span style="color:#8b008b;font-weight:bold">struct</span>* *rb_node* *** *node**)*
*{*
  *<span style="color:#8b008b;font-weight:bold">struct</span>* *page* *** *ret**;*
  *<span style="color:#8b008b;font-weight:bold">if</span>* *((ret = __rb_insert_page_cache(inode, offset, node)))*
    *<span style="color:#8b008b;font-weight:bold">goto</span>* *out;*
  *<span style="color:#008b45">rb_insert_color</span>(node, &amp;inode-&gt;i_rb_page_cache);*
 *out:*
  *<span style="color:#8b008b;font-weight:bold">return</span>* *ret;*
*}*
</code></pre></td></tr></table>
</div>
</div><p>ÊèíÂÖ•Êìç‰ΩúÊ†πÊçÆ offsetÈÄâÊã©ÊèíÂÖ•ÊñπÂêëÔºåÂáΩÊï∞Â∏åÊúõÊâæ‰∏çÂà∞ÂåπÈÖçÁöÑoffsetÔºåÂõ†‰∏∫‰ªñÊÉ≥Ë¶ÅÊâæÂà∞ÁöÑÊòØÊñ∞ offset Ë¶ÅÊèíÂÖ•ÁöÑÂè∂Â≠êËäÇÁÇπÔºåÁÑ∂ÂêéÁî® rb_link_node() Âú®ÁªôÂÆö‰ΩçÁΩÆÊèíÂÖ•Êñ∞ËäÇÁÇπÔºåÊèíÂÖ•‰πãÂêéÂÜçË∞ÉÁî®ÂáΩÊï∞ËøõË°åÂ§çÊùÇÁöÑÁ∫¢ÈªëÊ†ëÂπ≥Ë°°ËøáÁ®ãÔºåÂ¶ÇÊûúÈ°µË¢´Âä†ÂÖ•ÊàêÂäüÔºåÂàôËøîÂõûNULLÔºåÂê¶ÂàôËøîÂõûÂ∑≤ÁªèÂ≠òÂú®ÁöÑÈ°µÂú∞ÂùÄ</p>
<h1 id="Êï∞ÊçÆÁªìÊûÑÁöÑÈÄâÊã©">Êï∞ÊçÆÁªìÊûÑÁöÑÈÄâÊã©</h1>
<ul>
<li>
<p>Â¶ÇÊûúÂØπÊï∞ÊçÆÈõÜÂêàÁöÑ‰∏ªË¶ÅÊìç‰ΩúÊòØÈÅçÂéÜÊï∞ÊçÆÔºåÈÇ£Â∞±‰ΩøÁî®ÈìæË°®„ÄÇ</p>
</li>
<li>
<p>Â¶ÇÊûú‰ª£Á†ÅÁ¨¶Âêà Áîü‰∫ßËÄÖ/Ê∂àË¥πËÄÖÊ®°ÂºèÔºåÂ∞±‰ΩøÁî®ÈòüÂàó</p>
</li>
<li>
<p>Â¶ÇÊûúÈúÄË¶ÅÊò†Â∞Ñ‰∏Ä‰∏™ UID Âà∞‰∏Ä‰∏™ÂØπË±°ÔºåÈÇ£Â∞±‰ΩøÁî®Êò†Â∞Ñ„ÄÇ</p>
</li>
<li>
<p>Â¶ÇÊûúÈúÄË¶ÅÂ≠òÂÇ®Â§ßÈáèÊï∞ÊçÆÂêóÔºåÂπ∂‰∏îÈúÄË¶ÅÊ£ÄÁ¥¢Âø´ÈÄüÔºåÂ∞±Áî®Á∫¢ÈªëÊ†ë„ÄÇÊèíÂÖ•Âà†Èô§Â§çÊùÇÂ∫¶ÈÉΩÊòØO(logn)ÁöÑ</p>
</li>
</ul>
<h1 id="ÊÄùËÄÉ">ÊÄùËÄÉ</h1>
<ol>
<li>ÂÜÖÊ†∏‰∏≠‰∏çÊòØÊääÂ∞ÜÊï∞ÊçÆÁªìÊûÑÂ°ûÂÖ•ÈìæË°®ÔºåËÄåÊòØÂ∞ÜÈìæË°®ËäÇÁÇπÂ°ûÂÖ•Êï∞ÊçÆÁªìÊûÑÔºåËøôÊòØ‰∏∫‰ªÄ‰πàÔºü</li>
</ol>
<p>Á≠îÔºö‰∏ÄÊù°ÈìæË°®ÂèØ‰ª•‰∏≤ËÅîËµ∑Â§ö‰∏™‰∏çÂêåÂØπË±°ÔºåÊØîËæÉÁÅµÊ¥ª</p>
<ol start="2">
<li>AVLÊ†ë‰πüÊòØÂπ≥Ë°°‰∫åÂèâÊêúÁ¥¢Ê†ëÔºå‰∏∫‰ªÄ‰πàÈÄâÁî®‰∫ÜÁ∫¢ÈªëÊ†ëËÄå‰∏çÊòØAVL?</li>
</ol>
<p>Á≠îÔºöDocumentation/rbtree.txt‰∏≠Á¨¨16Ë°åÊèêÂà∞ÔºöÁ∫¢ÈªëÊ†ëÁ±ª‰ºº‰∫éAVLÊ†ëÔºå‰ΩÜÊèê‰æõÊõ¥Âø´ÁöÑÂÆûÊó∂ÊÄßÊèíÂÖ•ÂíåÂà†Èô§ÁöÑÊúâÁïåÊúÄÂùèÊÉÖÂÜµÊÄßËÉΩÔºàÊúÄÂ§ö‰∏§‰∏™ÂàÜÂà´ÊóãËΩ¨Âíå‰∏âÊ¨°ÊóãËΩ¨‰ª•Âπ≥Ë°°Ê†ëÔºâ„ÄÇÊü•ÊâæÊó∂Èó¥Á®çÊÖ¢Ôºà‰ΩÜ‰ªç‰∏∫OÔºàlog nÔºâÔºâ„ÄÇ</p>
<p>Á∫¢ÈªëÊ†ë‰∏ßÂ§±‰∫ÜÈÉ®ÂàÜÂπ≥Ë°°ÊÄßÔºåÊù•‰øùËØÅÊóãËΩ¨ÁöÑÊ¨°Êï∞ÔºåÊÄª‰ΩìÊù•ËØ¥ÔºåÊÄßËÉΩÊõ¥Â•Ω</p>
<h1 id="ÂÖ∂‰ªñ">ÂÖ∂‰ªñ</h1>
<p>ÂÜÖÊ†∏ÁöÑÊñá‰ª∂ÁõÆÂΩï‰∏≠ÔºåÊúâ‰∏≠ÊñáÊñáÊ°£ÔºåÂ§ßÂÆ∂ÂèØ‰ª•ÂèÇËÄÉ‰∏Ä‰∏ãÔºö</p>
<p><a href="https://github.com/torvalds/linux/tree/master/Documentation/translations/zh_CN/process">https://github.com/torvalds/linux/tree/master/Documentation/translations/zh_CN/process</a></p>
<p>ÊØîÂ¶ÇÔºåËøôÈáåÊúâÂÜÖÊ†∏ËßÑÂÆöÁöÑ‰ª£Á†ÅÈ£éÊ†º‰∏≠ÊñáÁâàÔºöhttps://github.com/torvalds/linux/blob/master/Documentation/translations/zh_CN/process/coding-style.rst</p>
<h1 id="ÂèÇËÄÉËµÑÊñô">ÂèÇËÄÉËµÑÊñô</h1>
<ol>
<li>
<p><a href="https://www.cnblogs.com/yangguang-it/p/11667772.html">LinuxÂÜÖÊ†∏ÈìæË°®‚Äî‚ÄîÁúãËøô‰∏ÄÁØáÊñáÁ´†Â∞±Â§ü‰∫Ü</a></p>
</li>
<li>
<p><a href="https://zh.wikipedia.org/wiki/%E7%BA%A2%E9%BB%91%E6%A0%91">Áª¥Âü∫ÁôæÁßëÔºöÁ∫¢ÈªëÊ†ë</a></p>
</li>
</ol>

                    
                    <HR width="100%" id="EOF">
		            <p style="color:#777;">ÊúÄÂêé‰øÆÊîπ‰∫é 2020-08-28</p>
                    
                    
                    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Áü•ËØÜÂÖ±‰∫´ËÆ∏ÂèØÂçèËÆÆ" style="border-width:0" src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20210508215939.png" /></a><br />Êú¨‰ΩúÂìÅÈááÁî®<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Áü•ËØÜÂÖ±‰∫´ÁΩ≤Âêç-ÈùûÂïÜ‰∏öÊÄß‰ΩøÁî®-Áõ∏ÂêåÊñπÂºèÂÖ±‰∫´ 4.0 ÂõΩÈôÖËÆ∏ÂèØÂçèËÆÆ</a>ËøõË°åËÆ∏ÂèØ„ÄÇ
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://caixiongjiang.github.io/blog/2020/leetcode-214-%E6%9C%80%E7%9F%AD%E5%9B%9E%E6%96%87%E4%B8%B2kmpnext%E5%BA%94%E7%94%A8/">
			‰∏ãÂõû<br>LeetCode 214 ÊúÄÁü≠ÂõûÊñá‰∏≤(kmp„ÄÅnextÂ∫îÁî®)
                </a>
                
                
                
                <a class="older-posts" href="https://caixiongjiang.github.io/blog/2020/leetcode-332-%E9%87%8D%E6%96%B0%E5%AE%89%E6%8E%92%E8%A1%8C%E7%A8%8B%E8%BE%93%E5%87%BA%E6%AC%A7%E6%8B%89%E8%B7%AF%E7%BB%8F/">
			‰∏äÂõû<br>LeetCode 332 ÈáçÊñ∞ÂÆâÊéíË°åÁ®ã(ËæìÂá∫Ê¨ßÊãâË∑ØÁªè)
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                








<div id="tcomment"></div>



            </div>
        </div>
    </div>
</div>

            </div><div id="single-column-footer">
È≠îÊîπËá™ <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://blog.riba2534.cn">riba2534</a>
<br>

&copy;
	
	2021 üåÄriba2534&#39;s Blog
	</div>
            </div>
    <script>
let app;

app = new Vue({
    el: '#app',
    data: {
        scrollY: 0,
        navOpacity: 0,
        isDrawerOpen: false,
        mounted: false,
        isDarkMode: false
    },
    methods: {
            sgn(t, x) {
                let k = 1. / (1. - 2 * t);
                if (x <= t) return 0;
                else if (x >= 1 - t) return 1;
                else {
                    return k * (x - t);
                }
            },
            handleScroll() {
                this.scrollY = window.scrollY;
                this.navOpacity = this.sgn(.0, Math.min(1, Math.max(0, window.scrollY / (this.pageHeadHeight() - this.navBarHeight() * 0.8))));
                const {navBar, navBackground, navTitle, extraContainer, streamContainer} = this.$refs;

                if (this.navOpacity >= 1) {
                    navBackground.style.opacity = 1;
                    navTitle.style.opacity = 1;
                } else {
                    navBackground.style.opacity = 0;
                    navTitle.style.opacity = 0;
                }
            },
            handleResize() {
                const {navBar, navBackground, navTitle, extraContainer, streamContainer} = this.$refs;
                extraContainer.style.left = (streamContainer.offsetWidth - extraContainer.offsetWidth) + 'px';
            },
            navBarHeight() {
                return this.$refs.navBar.offsetHeight;
            },
            pageHeadHeight() {
                return this.$refs.pageHead.offsetHeight;
            },
            toggleDrawer() {
                this.isDrawerOpen = !this.isDrawerOpen;
                document.getElementsByTagName('html')[0].style.overflow = this.isDrawerOpen ? 'hidden' : 'unset';
            },
            closeDrawer() {
                this.isDrawerOpen = false;
                document.getElementsByTagName('html')[0].style.overflow = this.isDrawerOpen ? 'hidden' : 'unset';
            },
            toggleDarkMode() {
                this.isDarkMode = !this.isDarkMode;
                if (this.isDarkMode==true){
                    document.cookie = "night=1;path=/";
                    document.body.classList.add("night");
                } else {
                    document.cookie = "night=0;path=/";
                    document.body.classList.remove("night");
                }
            },
            debounce(func, wait, options) {
                let lastArgs,
                    lastThis,
                    maxWait,
                    result,
                    timerId,
                    lastCallTime

                let lastInvokeTime = 0
                let leading = false
                let maxing = false
                let trailing = true

                
                const useRAF = (!wait && wait !== 0 && typeof root.requestAnimationFrame === 'function')

                if (typeof func !== 'function') {
                    throw new TypeError('Expected a function')
                }
                function isObject(value) {
                    const type = typeof value
                    return value != null && (type === 'object' || type === 'function')
                }

                wait = +wait || 0
                if (isObject(options)) {
                    leading = !!options.leading
                    maxing = 'maxWait' in options
                    maxWait = maxing ? Math.max(+options.maxWait || 0, wait) : maxWait
                    trailing = 'trailing' in options ? !!options.trailing : trailing
                }

                function invokeFunc(time) {
                    const args = lastArgs
                    const thisArg = lastThis

                    lastArgs = lastThis = undefined
                    lastInvokeTime = time
                    result = func.apply(thisArg, args)
                    return result
                }

                function startTimer(pendingFunc, wait) {
                    if (useRAF) {
                    root.cancelAnimationFrame(timerId)
                    return root.requestAnimationFrame(pendingFunc)
                    }
                    return setTimeout(pendingFunc, wait)
                }

                function cancelTimer(id) {
                    if (useRAF) {
                    return root.cancelAnimationFrame(id)
                    }
                    clearTimeout(id)
                }

                function leadingEdge(time) {
                    
                    lastInvokeTime = time
                    
                    timerId = startTimer(timerExpired, wait)
                    
                    return leading ? invokeFunc(time) : result
                }

                function remainingWait(time) {
                    const timeSinceLastCall = time - lastCallTime
                    const timeSinceLastInvoke = time - lastInvokeTime
                    const timeWaiting = wait - timeSinceLastCall

                    return maxing
                    ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke)
                    : timeWaiting
                }

                function shouldInvoke(time) {
                    const timeSinceLastCall = time - lastCallTime
                    const timeSinceLastInvoke = time - lastInvokeTime

                    
                    
                    
                    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
                    (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait))
                }

                function timerExpired() {
                    const time = Date.now()
                    if (shouldInvoke(time)) {
                    return trailingEdge(time)
                    }
                    
                    timerId = startTimer(timerExpired, remainingWait(time))
                }

                function trailingEdge(time) {
                    timerId = undefined

                    
                    
                    if (trailing && lastArgs) {
                    return invokeFunc(time)
                    }
                    lastArgs = lastThis = undefined
                    return result
                }

                function cancel() {
                    if (timerId !== undefined) {
                    cancelTimer(timerId)
                    }
                    lastInvokeTime = 0
                    lastArgs = lastCallTime = lastThis = timerId = undefined
                }

                function flush() {
                    return timerId === undefined ? result : trailingEdge(Date.now())
                }

                function pending() {
                    return timerId !== undefined
                }

                function debounced(...args) {
                    const time = Date.now()
                    const isInvoking = shouldInvoke(time)

                    lastArgs = args
                    lastThis = this
                    lastCallTime = time

                    if (isInvoking) {
                    if (timerId === undefined) {
                        return leadingEdge(lastCallTime)
                    }
                    if (maxing) {
                        
                        timerId = startTimer(timerExpired, wait)
                        return invokeFunc(lastCallTime)
                    }
                    }
                    if (timerId === undefined) {
                    timerId = startTimer(timerExpired, wait)
                    }
                    return result
                }
                debounced.cancel = cancel
                debounced.flush = flush
                debounced.pending = pending
                return debounced
                }

    },
    created() {
        window.addEventListener('scroll', this.handleScroll);
        window.addEventListener('resize', this.handleResize);
        window._nonDesktop = function () {
            let check = false;
            (function (a) {
                if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) check = true;
            })(navigator.userAgent || navigator.vendor || window.opera);
            return check;
        };
        
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1");
        if (night==""){
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                
            }
        }else{
            
            if (night=="1") {
                this.toggleDarkMode();
            }
        }
    },
    mounted() {
        this.handleScroll();
        this.handleResize();
        this.mounted = true;

        
        
        
            twikoo.init({
                envId: "blog-9g6ht92ca9c564c6",
                el: '#tcomment',
                region:  null ,
            });
        

        document.querySelectorAll("table").forEach(function(elem){
            elem.classList.add("table-striped");
            elem.classList.add("table");
            elem.classList.add("table-responsive");
            elem.classList.add("table-hover");
        })

        
        spy();
        window.addEventListener('scroll', this.debounce(spy, 250, { 'maxWait': 250 }), false);
        
        
    },
    destroyed() {
        window.removeEventListener('scroll', this.handleScroll);
        window.removeEventListener('resize', this.handleResize);
    }
});



</script>
    </body>
</html>
