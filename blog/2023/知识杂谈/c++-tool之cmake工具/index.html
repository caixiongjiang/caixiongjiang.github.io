<!DOCTYPE html>
<html><head>
<title>C&#43;&#43; Tool: CMake</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="C&#43;&#43; Projectçš„æ„å»ºå·¥å…·">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="C&#43;&#43; Tool: CMake" />
<meta property="og:description" content="C&#43;&#43; Projectçš„æ„å»ºå·¥å…·" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://caixiongjiang.github.io/blog/2023/%E7%9F%A5%E8%AF%86%E6%9D%82%E8%B0%88/c&#43;&#43;-tool%E4%B9%8Bcmake%E5%B7%A5%E5%85%B7/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2023-08-16T18:18:05+08:00" />
<meta property="article:modified_time" content="2023-08-20T09:19:06+08:00" />












<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<script src="/vendor/js/vue.min.js" ></script>


  




<link rel="icon" href="https://blog-1311257248.cos.ap-nanjing.myqcloud.com/imgs/avater.jfif">



<link rel="stylesheet" href="https://caixiongjiang.github.io/scss/journal.min.3f72a5fc8f5b5dd732a4b476aced0eece2156958d9d414316494ddb10593ddf7.css" integrity="sha256-P3Kl/I9bXdcypLR2rO0O7OIVaVjZ1BQxZJTdsQWT3fc=" media="screen">



<link rel="stylesheet" href="https://caixiongjiang.github.io/scss/dark-mode.min.c0082f0b082177f6fb3768ff91439a097de49689bd26f4d49f76d94ebb81e02d.css" integrity="sha256-wAgvCwghd/b7N2j/kUOaCX3klom9JvTUn3bZTruB4C0=" media="screen">


<script src="/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>


  
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script type="text/javascript" id="MathJax-script"
async
src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
MathJax.Hub.Queue(function() {



var all = MathJax.Hub.getAllJax(), i;
for(i = 0; i < all.length; i += 1) {
all[i].SourceElement().parentNode.className += ' has-jax';
}
});
</script>

<style>
code.has-jax {
font: inherit;
font-size: 100%;
background: inherit;
border: inherit;
color: #515151;
}
</style>





  
    <script src="/js/toc.js"></script>
  











<script src="https://cdn.jsdelivr.net/npm/twikoo@1.5.11/dist/twikoo.all.min.js"></script>




</head>
<body>
    	<div id="app"><div ref="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://caixiongjiang.github.io/">
    
        <div class="nav-title">
            ğŸŒ€Jarson Cai&#39;s Blog
        </div>
        
        <div class="nav-subtitle">
            å¤´è„‘æ˜¯æ—¥ç”¨å“ï¼Œä¸æ˜¯è£…é¥°å“
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/blog">
                æ–‡ç« ğŸ“–
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                åˆ†ç±»ğŸ“Œ
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                æ ‡ç­¾ğŸ·ï¸
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/series">
                ç³»åˆ—ğŸ“š
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/archive">
                å½’æ¡£ğŸ“ƒ
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about">
                å…³äºğŸ‘‹
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/friends">
                å‹é“¾ğŸ”—
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSSğŸ“¢
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
<a href="https://github.com/caixiongjiang">
    GitHub
</a>
<br>

<a href="https://jarson-cai.gitee.io/jarson-cai-blog">
    MiFeng
</a>
<br>

<a href="nau_cxj@163.com">
    Email
</a>
<br>

<a href="https://leetcode-cn.com/u/cai-xiong-jiang/">
    Leetcode
</a>
<br>

        <hr>
        
é­”æ”¹è‡ª <a href="https://github.com/riba2534/hugo-blog">Riba2534</a> by <a href="https://caixiongjiang.github.io">Jarson Cai</a>
<br>

&copy;
	
	2023 ğŸŒ€Jarson Cai&#39;s Blog
	
    </div>
    
</div><div ref="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®å½• -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#cmake" onclick="onNavClick(`#cmake-nav`)" id="cmake-nav">
									CMake
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#cmake%e7%9a%84%e4%bd%bf%e7%94%a8" onclick="onNavClick(`#cmakeçš„ä½¿ç”¨-nav`)" id="cmakeçš„ä½¿ç”¨-nav">
									CMakeçš„ä½¿ç”¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%b3%a8%e9%87%8a" onclick="onNavClick(`#æ³¨é‡Š-nav`)" id="æ³¨é‡Š-nav">
									æ³¨é‡Š
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%aa%e6%9c%89%e6%ba%90%e6%96%87%e4%bb%b6%e7%9a%84%e6%83%85%e5%86%b5" onclick="onNavClick(`#åªæœ‰æºæ–‡ä»¶çš„æƒ…å†µ-nav`)" id="åªæœ‰æºæ–‡ä»¶çš„æƒ…å†µ-nav">
									åªæœ‰æºæ–‡ä»¶çš„æƒ…å†µ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%96%87%e4%bb%b6%e7%ae%a1%e7%90%86" onclick="onNavClick(`#æ–‡ä»¶ç®¡ç†-nav`)" id="æ–‡ä»¶ç®¡ç†-nav">
									æ–‡ä»¶ç®¡ç†
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#vip%e5%ae%9a%e5%88%b6" onclick="onNavClick(`#vipå®šåˆ¶-nav`)" id="vipå®šåˆ¶-nav">
									VIPå®šåˆ¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%90%9c%e7%b4%a2%e6%96%87%e4%bb%b6" onclick="onNavClick(`#æœç´¢æ–‡ä»¶-nav`)" id="æœç´¢æ–‡ä»¶-nav">
									æœç´¢æ–‡ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8c%85%e5%90%ab%e5%a4%b4%e6%96%87%e4%bb%b6" onclick="onNavClick(`#åŒ…å«å¤´æ–‡ä»¶-nav`)" id="åŒ…å«å¤´æ–‡ä»¶-nav">
									åŒ…å«å¤´æ–‡ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%b6%e4%bd%9c%e5%8a%a8%e6%80%81%e5%ba%93%e6%88%96%e8%80%85%e9%9d%99%e6%80%81%e5%ba%93" onclick="onNavClick(`#åˆ¶ä½œåŠ¨æ€åº“æˆ–è€…é™æ€åº“-nav`)" id="åˆ¶ä½œåŠ¨æ€åº“æˆ–è€…é™æ€åº“-nav">
									åˆ¶ä½œåŠ¨æ€åº“æˆ–è€…é™æ€åº“
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8c%85%e5%90%ab%e5%ba%93%e6%96%87%e4%bb%b6" onclick="onNavClick(`#åŒ…å«åº“æ–‡ä»¶-nav`)" id="åŒ…å«åº“æ–‡ä»¶-nav">
									åŒ…å«åº“æ–‡ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%97%a5%e5%bf%97" onclick="onNavClick(`#æ—¥å¿—-nav`)" id="æ—¥å¿—-nav">
									æ—¥å¿—
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%98%e9%87%8f%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#å˜é‡æ“ä½œ-nav`)" id="å˜é‡æ“ä½œ-nav">
									å˜é‡æ“ä½œ
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a class="pagination-action" v-on:click="toggleDarkMode">
            <i class="material-icons pagination-action-icon" v-if="isDarkMode">
                brightness_4
            </i>
            <i class="material-icons pagination-action-icon" v-else="isDarkMode">
                brightness_7
            </i>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/blog">
                    æ–‡ç« ğŸ“–
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    åˆ†ç±»ğŸ“Œ
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    æ ‡ç­¾ğŸ·ï¸
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/series">
                    ç³»åˆ—ğŸ“š
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/archive">
                    å½’æ¡£ğŸ“ƒ
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about">
                    å…³äºğŸ‘‹
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/friends">
                    å‹é“¾ğŸ”—
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSSğŸ“¢
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®å½• -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#cmake" onclick="onNavClick(`#cmake-nav`)" id="cmake-nav">
									CMake
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#cmake%e7%9a%84%e4%bd%bf%e7%94%a8" onclick="onNavClick(`#cmakeçš„ä½¿ç”¨-nav`)" id="cmakeçš„ä½¿ç”¨-nav">
									CMakeçš„ä½¿ç”¨
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%b3%a8%e9%87%8a" onclick="onNavClick(`#æ³¨é‡Š-nav`)" id="æ³¨é‡Š-nav">
									æ³¨é‡Š
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%aa%e6%9c%89%e6%ba%90%e6%96%87%e4%bb%b6%e7%9a%84%e6%83%85%e5%86%b5" onclick="onNavClick(`#åªæœ‰æºæ–‡ä»¶çš„æƒ…å†µ-nav`)" id="åªæœ‰æºæ–‡ä»¶çš„æƒ…å†µ-nav">
									åªæœ‰æºæ–‡ä»¶çš„æƒ…å†µ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%96%87%e4%bb%b6%e7%ae%a1%e7%90%86" onclick="onNavClick(`#æ–‡ä»¶ç®¡ç†-nav`)" id="æ–‡ä»¶ç®¡ç†-nav">
									æ–‡ä»¶ç®¡ç†
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#vip%e5%ae%9a%e5%88%b6" onclick="onNavClick(`#vipå®šåˆ¶-nav`)" id="vipå®šåˆ¶-nav">
									VIPå®šåˆ¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%90%9c%e7%b4%a2%e6%96%87%e4%bb%b6" onclick="onNavClick(`#æœç´¢æ–‡ä»¶-nav`)" id="æœç´¢æ–‡ä»¶-nav">
									æœç´¢æ–‡ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8c%85%e5%90%ab%e5%a4%b4%e6%96%87%e4%bb%b6" onclick="onNavClick(`#åŒ…å«å¤´æ–‡ä»¶-nav`)" id="åŒ…å«å¤´æ–‡ä»¶-nav">
									åŒ…å«å¤´æ–‡ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%b6%e4%bd%9c%e5%8a%a8%e6%80%81%e5%ba%93%e6%88%96%e8%80%85%e9%9d%99%e6%80%81%e5%ba%93" onclick="onNavClick(`#åˆ¶ä½œåŠ¨æ€åº“æˆ–è€…é™æ€åº“-nav`)" id="åˆ¶ä½œåŠ¨æ€åº“æˆ–è€…é™æ€åº“-nav">
									åˆ¶ä½œåŠ¨æ€åº“æˆ–è€…é™æ€åº“
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8c%85%e5%90%ab%e5%ba%93%e6%96%87%e4%bb%b6" onclick="onNavClick(`#åŒ…å«åº“æ–‡ä»¶-nav`)" id="åŒ…å«åº“æ–‡ä»¶-nav">
									åŒ…å«åº“æ–‡ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%97%a5%e5%bf%97" onclick="onNavClick(`#æ—¥å¿—-nav`)" id="æ—¥å¿—-nav">
									æ—¥å¿—
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8f%98%e9%87%8f%e6%93%8d%e4%bd%9c" onclick="onNavClick(`#å˜é‡æ“ä½œ-nav`)" id="å˜é‡æ“ä½œ-nav">
									å˜é‡æ“ä½œ
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="https://caixiongjiang.github.io/">
            ğŸŒ€Jarson Cai&#39;s Blog
        </a>
        
        <button type="button" class="nav-darkmode-toggle" v-on:click="toggleDarkMode">
            <i class="material-icons" v-if="isDarkMode">
                brightness_4
            </i>
            <i class="material-icons" v-else="isDarkMode">
                brightness_7
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://caixiongjiang.github.io/">
        <div class="single-column-header-title">ğŸŒ€Jarson Cai&#39;s Blog</div>
        
        <div class="single-column-header-subtitle">å¤´è„‘æ˜¯æ—¥ç”¨å“ï¼Œä¸æ˜¯è£…é¥°å“</div>
        

    </a>
</div>

            <div id="content">
<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://blog-1311257248.cos.ap-nanjing.myqcloud.com/imgs/%E7%9F%A5%E8%AF%86%E6%9D%82%E8%B0%88/c%2B%2B_tools_title.jpg')"
                    
                
            >
                <div class="post-title">
                    C&#43;&#43; Tool: CMake
                    
                    <div class="post-subtitle">
                        C&#43;&#43; Projectçš„æ„å»ºå·¥å…·
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2023-08-16 18:18
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/">[è¯­è¨€å°å·¥å…·]</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/c&#43;&#43;">c&#43;&#43;</a>
                                &nbsp;
                            
                        
                        
                            <i class="material-icons" style="">schedule</i>
                            

                            
                            

                            
                            31 min
                            
                            33 s.
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h2 id="cmake">CMake</h2>
<p>CMake æ˜¯ä¸€ä¸ªé¡¹ç›®æ„å»ºå·¥å…·ï¼Œå¹¶ä¸”æ˜¯è·¨å¹³å°çš„ã€‚å…³äºé¡¹ç›®æ„å»ºæˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„è¿˜æœ‰Makefileï¼ˆé€šè¿‡ make å‘½ä»¤è¿›è¡Œé¡¹ç›®çš„æ„å»ºï¼‰ï¼Œå¤§å¤šæ˜¯IDEè½¯ä»¶éƒ½é›†æˆäº†makeï¼Œæ¯”å¦‚ï¼šVS çš„ nmakeã€linux ä¸‹çš„ GNU makeã€Qt çš„ qmakeç­‰ï¼Œå¦‚æœè‡ªå·±åŠ¨æ‰‹å†™ makefileï¼Œä¼šå‘ç°ï¼Œmakefile é€šå¸¸ä¾èµ–äºå½“å‰çš„ç¼–è¯‘å¹³å°ï¼Œè€Œä¸”ç¼–å†™ makefile çš„å·¥ä½œé‡æ¯”è¾ƒå¤§ï¼Œè§£å†³ä¾èµ–å…³ç³»æ—¶ä¹Ÿå®¹æ˜“å‡ºé”™ã€‚</p>
<p>CMake æ°å¥½èƒ½è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œ å…¶å…è®¸å¼€å‘è€…æŒ‡å®šæ•´ä¸ªå·¥ç¨‹çš„ç¼–è¯‘æµç¨‹ï¼Œåœ¨æ ¹æ®ç¼–è¯‘å¹³å°ï¼Œè‡ªåŠ¨ç”Ÿæˆæœ¬åœ°åŒ–çš„Makefileå’Œå·¥ç¨‹æ–‡ä»¶ï¼Œæœ€åç”¨æˆ·åªéœ€makeç¼–è¯‘å³å¯ï¼Œæ‰€ä»¥å¯ä»¥æŠŠCMakeçœ‹æˆä¸€æ¬¾è‡ªåŠ¨ç”Ÿæˆ Makefileçš„å·¥å…·</p>
<h3 id="cmakeçš„ä½¿ç”¨">CMakeçš„ä½¿ç”¨</h3>
<h4 id="æ³¨é‡Š">æ³¨é‡Š</h4>
<p>CMakeä½¿ç”¨<code>#</code>è¿›è¡Œ<code>è¡Œæ³¨é‡Š</code>ï¼Œä½¿ç”¨<code>#[[]]</code>å½¢å¼è¿›è¡Œå—æ³¨é‡Š</p>
<h4 id="åªæœ‰æºæ–‡ä»¶çš„æƒ…å†µ">åªæœ‰æºæ–‡ä»¶çš„æƒ…å†µ</h4>
<p>å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·çš„ç›®å½•ç»“æ„ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ tree
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>â”œâ”€â”€ add.c
</span></span><span style="display:flex;"><span>â”œâ”€â”€ div.c
</span></span><span style="display:flex;"><span>â”œâ”€â”€ head.h
</span></span><span style="display:flex;"><span>â”œâ”€â”€ main.c
</span></span><span style="display:flex;"><span>â”œâ”€â”€ mult.c
</span></span><span style="display:flex;"><span>â””â”€â”€ sub.c
</span></span></code></pre></td></tr></table>
</div>
</div><p>é‚£ä¹ˆæˆ‘ä»¬ä¸ºå…¶æ·»åŠ çš„<code>CMakeLists.txt</code>å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">cmake_minimum_required</span>(<span style="color:#cd5555">VERSION</span> <span style="color:#cd5555">3.0</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">CALC</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">add_executable</span>(<span style="color:#cd5555">app</span> <span style="color:#cd5555">add.c</span> <span style="color:#cd5555">div.c</span> <span style="color:#cd5555">main.c</span> <span style="color:#cd5555">mult.c</span> <span style="color:#cd5555">sub.c</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>cmake_minimum_required</code>çš„ä½œç”¨æ˜¯æŒ‡å®šä½¿ç”¨çš„cmakeçš„æœ€ä½ç‰ˆæœ¬</li>
</ul>
<p>å¯ä»¥é€šè¿‡<code>cmake --version</code>æ¥æŸ¥çœ‹æœ¬æœºçš„cmakeç‰ˆæœ¬</p>
<ul>
<li><code>project</code>ï¼šå®šä¹‰å·¥ç¨‹åç§°ï¼Œ<strong>å¹¶å¯æŒ‡å®šå·¥ç¨‹çš„ç‰ˆæœ¬ã€å·¥ç¨‹æè¿°ã€webä¸»é¡µåœ°å€ã€æ”¯æŒçš„è¯­è¨€ï¼ˆé»˜è®¤æƒ…å†µæ”¯æŒæ‰€æœ‰è¯­è¨€ï¼‰</strong>ï¼Œå¦‚æœä¸éœ€è¦è¿™äº›éƒ½æ˜¯å¯ä»¥å¿½ç•¥çš„ï¼Œåªéœ€è¦æŒ‡å®šå‡ºå·¥ç¨‹åå­—å³å¯ã€‚</li>
</ul>
<p>å…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">project</span>(<span style="color:#cd5555">&lt;PROJECT-NAME&gt;</span> <span style="color:#cd5555">[&lt;language-name&gt;...]</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">&lt;PROJECT-NAME&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#cd5555">[VERSION</span> <span style="color:#cd5555">&lt;major&gt;[.&lt;minor&gt;[.&lt;patch&gt;[.&lt;tweak&gt;]]]]</span>
</span></span><span style="display:flex;"><span>       <span style="color:#cd5555">[DESCRIPTION</span> <span style="color:#cd5555">&lt;project-description-string&gt;]</span>
</span></span><span style="display:flex;"><span>       <span style="color:#cd5555">[HOMEPAGE_URL</span> <span style="color:#cd5555">&lt;url-string&gt;]</span>
</span></span><span style="display:flex;"><span>       <span style="color:#cd5555">[LANGUAGES</span> <span style="color:#cd5555">&lt;language-name&gt;...]</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>add_executable</code>ï¼Œå®šä¹‰å·¥ç¨‹ä¼šç”Ÿæˆçš„ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº</li>
</ul>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">add_executable</span>(<span style="color:#cd5555">å¯æ‰§è¡Œç¨‹åºå</span> <span style="color:#cd5555">æºæ–‡ä»¶åç§°</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># æ ·å¼1
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">add_executable</span>(<span style="color:#cd5555">app</span> <span style="color:#cd5555">add.c</span> <span style="color:#cd5555">div.c</span> <span style="color:#cd5555">main.c</span> <span style="color:#cd5555">mult.c</span> <span style="color:#cd5555">sub.c</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># æ ·å¼2
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">add_executable</span>(<span style="color:#cd5555">app</span> <span style="color:#cd5555">add.c;div.c;main.c;mult.c;sub.c</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><em>è¿™é‡Œçš„å¯æ‰§è¡Œç¨‹åºåå’Œprojectä¸­çš„é¡¹ç›®åæ²¡æœ‰ä»»ä½•å…³ç³»ã€‚</em></p>
<p><em>æºæ–‡ä»¶åå¯ä»¥æ˜¯ä¸€ä¸ªä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªï¼Œå¦‚æœ‰å¤šä¸ªå¯ç”¨<code> </code>æˆ–<code>;</code>é—´éš”ã€‚</em></p>
<ul>
<li>æ‰§è¡Œ<code>CMake</code>å‘½ä»¤</li>
</ul>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#228b22"># cmake å‘½ä»¤åŸå‹</span>
</span></span><span style="display:flex;"><span>$ cmake CMakeLists.txtæ–‡ä»¶æ‰€åœ¨è·¯å¾„
</span></span><span style="display:flex;"><span>$ tree
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>â”œâ”€â”€ add.c
</span></span><span style="display:flex;"><span>â”œâ”€â”€ CMakeLists.txt
</span></span><span style="display:flex;"><span>â”œâ”€â”€ div.c
</span></span><span style="display:flex;"><span>â”œâ”€â”€ head.h
</span></span><span style="display:flex;"><span>â”œâ”€â”€ main.c
</span></span><span style="display:flex;"><span>â”œâ”€â”€ mult.c
</span></span><span style="display:flex;"><span>â””â”€â”€ sub.c
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b452cd">0</span> directories, <span style="color:#b452cd">7</span> files
</span></span><span style="display:flex;"><span>$ cmake .
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨å¯¹åº”çš„ç›®å½•ä¸‹ç”Ÿæˆäº†ä¸€ä¸ª<code>makefile</code>æ–‡ä»¶ï¼Œæ­¤æ—¶å†æ‰§è¡Œmakeå‘½ä»¤ï¼Œå°±å¯ä»¥å¯¹é¡¹ç›®è¿›è¡Œæ„å»ºå¾—åˆ°æ‰€éœ€çš„å¯æ‰§è¡Œç¨‹åºäº†ã€‚</p>
<ul>
<li>æ‰§è¡Œ<code>make</code>å‘½ä»¤</li>
</ul>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ make
</span></span><span style="display:flex;"><span>Scanning dependencies of target app
</span></span><span style="display:flex;"><span>[ 16%] Building C object CMakeFiles/app.dir/add.c.o
</span></span><span style="display:flex;"><span>[ 33%] Building C object CMakeFiles/app.dir/div.c.o
</span></span><span style="display:flex;"><span>[ 50%] Building C object CMakeFiles/app.dir/main.c.o
</span></span><span style="display:flex;"><span>[ 66%] Building C object CMakeFiles/app.dir/mult.c.o
</span></span><span style="display:flex;"><span>[ 83%] Building C object CMakeFiles/app.dir/sub.c.o
</span></span><span style="display:flex;"><span>[100%] Linking C executable app
</span></span><span style="display:flex;"><span>[100%] Built target app
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22"># æŸ¥çœ‹å¯æ‰§è¡Œç¨‹åºæ˜¯å¦å·²ç»ç”Ÿæˆ</span>
</span></span><span style="display:flex;"><span>$ tree -L <span style="color:#b452cd">1</span>
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>â”œâ”€â”€ add.c
</span></span><span style="display:flex;"><span>â”œâ”€â”€ app					<span style="color:#228b22"># ç”Ÿæˆçš„å¯æ‰§è¡Œç¨‹åº</span>
</span></span><span style="display:flex;"><span>â”œâ”€â”€ CMakeCache.txt
</span></span><span style="display:flex;"><span>â”œâ”€â”€ CMakeFiles
</span></span><span style="display:flex;"><span>â”œâ”€â”€ cmake_install.cmake
</span></span><span style="display:flex;"><span>â”œâ”€â”€ CMakeLists.txt
</span></span><span style="display:flex;"><span>â”œâ”€â”€ div.c
</span></span><span style="display:flex;"><span>â”œâ”€â”€ head.h
</span></span><span style="display:flex;"><span>â”œâ”€â”€ main.c
</span></span><span style="display:flex;"><span>â”œâ”€â”€ Makefile
</span></span><span style="display:flex;"><span>â”œâ”€â”€ mult.c
</span></span><span style="display:flex;"><span>â””â”€â”€ sub.c
</span></span></code></pre></td></tr></table>
</div>
</div><p>æœ€ç»ˆå¯æ‰§è¡Œç¨‹åº<code>app</code>å°±è¢«ç¼–è¯‘å‡ºæ¥äº†ï¼ˆè¿™ä¸ªåå­—æ˜¯åœ¨<code>CMakeLists.txt</code>ä¸­æŒ‡å®šçš„ï¼‰ã€‚</p>
<h4 id="æ–‡ä»¶ç®¡ç†">æ–‡ä»¶ç®¡ç†</h4>
<p>åœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿä¸€å¤§å †ä¸­é—´æ–‡ä»¶ï¼Œä»¥åŠä¸€äº›å¥‡æ€ªçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†å…¶å…¨éƒ¨é›†ä¸­åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œé¢</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir build
</span></span><span style="display:flex;"><span>$ <span style="color:#658b00">cd</span> build
</span></span><span style="display:flex;"><span>$ cmake ..
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·å°±å¯ä»¥åœ¨buildç›®å½•ä¸­æ‰§è¡Œmakeå‘½ä»¤ç¼–è¯‘é¡¹ç›®ï¼Œç”Ÿæˆçš„ç›¸å…³æ–‡ä»¶è‡ªç„¶ä¹Ÿå°±è¢«å­˜å‚¨åˆ°buildç›®å½•ä¸­äº†ã€‚è¿™æ ·é€šè¿‡cmakeå’Œmakeç”Ÿæˆçš„æ‰€æœ‰æ–‡ä»¶å°±å…¨éƒ¨å’Œé¡¹ç›®æºæ–‡ä»¶éš”ç¦»å¼€äº†</p>
<h4 id="vipå®šåˆ¶">VIPå®šåˆ¶</h4>
<blockquote>
<p>å®šä¹‰å˜é‡</p>
</blockquote>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ä¸€å…±æä¾›äº†5ä¸ªæºæ–‡ä»¶ï¼Œå‡è®¾è¿™äº”ä¸ªæºæ–‡ä»¶éœ€è¦åå¤è¢«ä½¿ç”¨ï¼Œæ¯æ¬¡éƒ½ç›´æ¥å°†å®ƒä»¬çš„åå­—å†™å‡ºæ¥ç¡®å®æ˜¯å¾ˆéº»çƒ¦ï¼Œåœ¨cmakeé‡Œå®šä¹‰å˜é‡éœ€è¦ä½¿ç”¨<code>set</code>ã€‚</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#228b22"># SET æŒ‡ä»¤çš„è¯­æ³•æ˜¯ï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"># [] ä¸­çš„å‚æ•°ä¸ºå¯é€‰é¡¹, å¦‚ä¸éœ€è¦å¯ä»¥ä¸å†™
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">SET</span>(<span style="color:#cd5555">VAR</span> <span style="color:#cd5555">[VALUE]</span> <span style="color:#cd5555">[CACHE</span> <span style="color:#cd5555">TYPE</span> <span style="color:#cd5555">DOCSTRING</span> <span style="color:#cd5555">[FORCE]]</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>VAR</code>ä¸ºå˜é‡åã€<code>VALUE</code>ä¸ºå˜é‡å€¼ã€‚</p>
<p>é‚£ä¹ˆé’ˆå¯¹ä¸Šé¢çš„ä¾‹å­å¯ä»¥è¿™æ ·å†™ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#228b22"># æ–¹å¼1: å„ä¸ªæºæ–‡ä»¶ä¹‹é—´ä½¿ç”¨ç©ºæ ¼é—´éš”
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"># set(SRC_LIST add.c  div.c   main.c  mult.c  sub.c)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"># æ–¹å¼2: å„ä¸ªæºæ–‡ä»¶ä¹‹é—´ä½¿ç”¨åˆ†å· ; é—´éš”
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">set</span>(<span style="color:#cd5555">SRC_LIST</span> <span style="color:#cd5555">add.c;div.c;main.c;mult.c;sub.c</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">add_executable</span>(<span style="color:#cd5555">app</span>  ${<span style="color:#00688b">SRC_LIST</span>})<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>æŒ‡å®šä½¿ç”¨çš„C++æ ‡å‡†</p>
</blockquote>
<p>åœ¨ç¼–å†™C++ç¨‹åºçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šç”¨åˆ°C++11ã€C++14ã€C++17ã€C++20ç­‰æ–°ç‰¹æ€§ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ç¼–è¯‘çš„æ—¶å€™åœ¨ç¼–è¯‘å‘½ä»¤ä¸­åˆ¶å®šå‡ºè¦ä½¿ç”¨å“ªä¸ªæ ‡å‡†ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ g++ *.cpp -std=c++11 -o app
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šé¢çš„ä¾‹å­ä¸­é€šè¿‡å‚æ•°<code>-std=c++11</code>æŒ‡å®šå‡ºè¦ä½¿ç”¨c++11æ ‡å‡†ç¼–è¯‘ç¨‹åºï¼ŒC++æ ‡å‡†å¯¹åº”æœ‰ä¸€å®å«åš<code>DCMAKE_CXX_STANDARD</code>ã€‚åœ¨CMakeä¸­æƒ³è¦æŒ‡å®šC++æ ‡å‡†æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>åœ¨<code>CMakeLists.txt</code>ä¸­é€šè¿‡<code>set</code>å‘½ä»¤æŒ‡å®š:</li>
</ul>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#228b22">#å¢åŠ -std=c++11
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">set</span>(<span style="color:#cd5555">CMAKE_CXX_STANDARD</span> <span style="color:#cd5555">11</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22">#å¢åŠ -std=c++14
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">set</span>(<span style="color:#cd5555">CMAKE_CXX_STANDARD</span> <span style="color:#cd5555">14</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22">#å¢åŠ -std=c++17
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">set</span>(<span style="color:#cd5555">CMAKE_CXX_STANDARD</span> <span style="color:#cd5555">17</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åœ¨æ‰§è¡Œcmakeå‘½ä»¤çš„æ—¶å€™æŒ‡å®šè¿™ä¸ªå®çš„å€¼</li>
</ul>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#228b22">#å¢åŠ -std=c++11</span>
</span></span><span style="display:flex;"><span>cmake CMakeLists.txtæ–‡ä»¶è·¯å¾„ -DCMAKE_CXX_STANDARD=<span style="color:#b452cd">11</span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">#å¢åŠ -std=c++14</span>
</span></span><span style="display:flex;"><span>cmake CMakeLists.txtæ–‡ä»¶è·¯å¾„ -DCMAKE_CXX_STANDARD=<span style="color:#b452cd">14</span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">#å¢åŠ -std=c++17</span>
</span></span><span style="display:flex;"><span>cmake CMakeLists.txtæ–‡ä»¶è·¯å¾„ -DCMAKE_CXX_STANDARD=<span style="color:#b452cd">17</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>æŒ‡å®šè¾“å‡ºçš„è·¯å¾„</p>
</blockquote>
<p>åœ¨CMakeä¸­æŒ‡å®šå¯æ‰§è¡Œç¨‹åºè¾“å‡ºçš„è·¯å¾„ï¼Œä¹Ÿå¯¹åº”ä¸€ä¸ªå®ï¼Œå«åš<code>EXECUTABLE_OUTPUT_PATH</code>ï¼Œå®ƒçš„å€¼è¿˜æ˜¯é€šè¿‡setå‘½ä»¤è¿›è¡Œè®¾ç½®:</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">set</span>(<span style="color:#cd5555">HOME</span> <span style="color:#cd5555">/home/robin/Linux/Sort</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">set</span>(<span style="color:#cd5555">EXECUTABLE_OUTPUT_PATH</span> ${<span style="color:#00688b">HOME</span>}<span style="color:#cd5555">/bin</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç¬¬ä¸€è¡Œï¼šå®šä¹‰ä¸€ä¸ªå˜é‡ç”¨äºå­˜å‚¨ä¸€ä¸ªç»å¯¹è·¯å¾„</li>
<li>ç¬¬äºŒè¡Œï¼šå°†æ‹¼æ¥å¥½çš„è·¯å¾„å€¼è®¾ç½®ç»™EXECUTABLE_OUTPUT_PATHå®
<ul>
<li>å¦‚æœè¿™ä¸ªè·¯å¾„ä¸­çš„å­ç›®å½•ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€è‡ªå·±æ‰‹åŠ¨åˆ›å»º</li>
</ul>
</li>
</ul>
<p>ç”±äºå¯æ‰§è¡Œç¨‹åºæ˜¯åŸºäº cmake å‘½ä»¤ç”Ÿæˆçš„ makefile æ–‡ä»¶ç„¶åå†æ‰§è¡Œ make å‘½ä»¤å¾—åˆ°çš„ï¼Œæ‰€ä»¥<strong>å¦‚æœæ­¤å¤„æŒ‡å®šå¯æ‰§è¡Œç¨‹åºç”Ÿæˆè·¯å¾„çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„ ./xxx/xxxï¼Œé‚£ä¹ˆè¿™ä¸ªè·¯å¾„ä¸­çš„ ./ å¯¹åº”çš„å°±æ˜¯ makefile æ–‡ä»¶æ‰€åœ¨çš„é‚£ä¸ªç›®å½•ã€‚</strong></p>
<h4 id="æœç´¢æ–‡ä»¶">æœç´¢æ–‡ä»¶</h4>
<p>å¦‚æœä¸€ä¸ªé¡¹ç›®é‡Œè¾¹çš„æºæ–‡ä»¶å¾ˆå¤šï¼Œåœ¨ç¼–å†™CMakeLists.txtæ–‡ä»¶çš„æ—¶å€™ä¸å¯èƒ½å°†é¡¹ç›®ç›®å½•çš„å„ä¸ªæ–‡ä»¶ä¸€ä¸€ç½—åˆ—å‡ºæ¥ï¼Œè¿™æ ·å¤ªéº»çƒ¦ä¹Ÿä¸ç°å®ã€‚æ‰€ä»¥ï¼Œåœ¨CMakeä¸­ä¸ºæˆ‘ä»¬æä¾›äº†æœç´¢æ–‡ä»¶çš„å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨<code>aux_source_directory</code>å‘½ä»¤æˆ–è€…<code>file</code>å‘½ä»¤ã€‚</p>
<blockquote>
<p>æ–¹å¼ä¸€</p>
</blockquote>
<p>åœ¨ CMake ä¸­ä½¿ç”¨<code>aux_source_directory</code>å‘½ä»¤å¯ä»¥æŸ¥æ‰¾æŸä¸ªè·¯å¾„ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶ï¼Œå‘½ä»¤æ ¼å¼ä¸ºï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">aux_source_directory</span>(<span style="color:#cd5555">&lt;</span> <span style="color:#cd5555">dir</span> <span style="color:#cd5555">&gt;</span> <span style="color:#cd5555">&lt;</span> <span style="color:#cd5555">variable</span> <span style="color:#cd5555">&gt;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>dir</code>ï¼šè¦æœç´¢çš„ç›®å½•</li>
<li><code>variable</code>ï¼šå°†ä»<code>dir</code>ç›®å½•ä¸‹æœç´¢åˆ°çš„æºæ–‡ä»¶åˆ—è¡¨å­˜å‚¨åˆ°è¯¥å˜é‡ä¸­</li>
</ul>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">cmake_minimum_required</span>(<span style="color:#cd5555">VERSION</span> <span style="color:#cd5555">3.0</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">CALC</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">include_directories</span>(${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/include</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># æœç´¢ src ç›®å½•ä¸‹çš„æºæ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">aux_source_directory</span>(${<span style="color:#00688b">CMAKE_CURRENT_SOURCE_DIR</span>}<span style="color:#cd5555">/src</span> <span style="color:#cd5555">SRC_LIST</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">add_executable</span>(<span style="color:#cd5555">app</span>  ${<span style="color:#00688b">SRC_LIST</span>})<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>æ–¹å¼äºŒ</p>
</blockquote>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB/GLOB_RECURSE</span> <span style="color:#cd5555">å˜é‡å</span> <span style="color:#cd5555">è¦æœç´¢çš„æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶ç±»å‹</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>GLOB</code>ï¼šå°†æŒ‡å®šç›®å½•ä¸‹æœç´¢åˆ°çš„æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰æ–‡ä»¶åç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå°†å…¶å­˜å‚¨åˆ°å˜é‡ä¸­</li>
<li><code>GLOB_RECURSE</code>ï¼šé€’å½’æœç´¢æŒ‡å®šç›®å½•ï¼Œå°†æœç´¢åˆ°çš„æ»¡è¶³æ¡ä»¶çš„æ–‡ä»¶åç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶å°†å…¶å­˜å‚¨åˆ°å˜é‡ä¸­ã€‚</li>
</ul>
<p><strong>æœç´¢å½“å‰ç›®å½•çš„srcç›®å½•ä¸‹æ‰€æœ‰çš„æºæ–‡ä»¶ï¼Œå¹¶å­˜å‚¨åˆ°å˜é‡ä¸­</strong></p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">MAIN_SRC</span> ${<span style="color:#00688b">CMAKE_CURRENT_SOURCE_DIR</span>}<span style="color:#cd5555">/src/*.cpp</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">MAIN_HEAD</span> ${<span style="color:#00688b">CMAKE_CURRENT_SOURCE_DIR</span>}<span style="color:#cd5555">/include/*.h</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><code>CMAKE_CURRENT_SOURCE_DIR</code>å®è¡¨ç¤ºå½“å‰è®¿é—®çš„ CMakeLists.txt æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ã€‚</p>
</li>
<li>
<p>å…³äºè¦æœç´¢çš„æ–‡ä»¶è·¯å¾„å’Œç±»å‹å¯åŠ åŒå¼•å·ï¼Œä¹Ÿå¯ä¸åŠ :</p>
</li>
</ul>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">MAIN_HEAD</span> <span style="color:#cd5555">&#34;${CMAKE_CURRENT_SOURCE_DIR}/src/*.h&#34;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="åŒ…å«å¤´æ–‡ä»¶">åŒ…å«å¤´æ–‡ä»¶</h4>
<p>åœ¨ç¼–è¯‘é¡¹ç›®æºæ–‡ä»¶çš„æ—¶å€™ï¼Œå¾ˆå¤šæ—¶å€™éƒ½éœ€è¦å°†æºæ–‡ä»¶å¯¹åº”çš„å¤´æ–‡ä»¶è·¯å¾„æŒ‡å®šå‡ºæ¥ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ç¼–è¯‘å™¨èƒ½å¤Ÿæ‰¾åˆ°è¿™äº›å¤´æ–‡ä»¶ï¼Œå¹¶é¡ºåˆ©é€šè¿‡ç¼–è¯‘ã€‚åœ¨CMakeä¸­è®¾ç½®è¦åŒ…å«çš„ç›®å½•ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡ä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥æå®šäº†ï¼Œä»–å°±æ˜¯<code>include_directories</code>:</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">include_directories</span>(<span style="color:#cd5555">headpath</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸¾ä¾‹è¯´æ˜ï¼Œæœ‰æºæ–‡ä»¶è‹¥å¹²ï¼Œå…¶ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ tree
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>â”œâ”€â”€ build
</span></span><span style="display:flex;"><span>â”œâ”€â”€ CMakeLists.txt
</span></span><span style="display:flex;"><span>â”œâ”€â”€ include
</span></span><span style="display:flex;"><span>â”‚Â Â  â””â”€â”€ head.h
</span></span><span style="display:flex;"><span>â””â”€â”€ src
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ add.cpp
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ div.cpp
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ main.cpp
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ mult.cpp
</span></span><span style="display:flex;"><span>    â””â”€â”€ sub.cpp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b452cd">3</span> directories, <span style="color:#b452cd">7</span> files
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>CMakeLists.txt</code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">cmake_minimum_required</span>(<span style="color:#cd5555">VERSION</span> <span style="color:#cd5555">3.0</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">CALC</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">set</span>(<span style="color:#cd5555">CMAKE_CXX_STANDARD</span> <span style="color:#cd5555">11</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">set</span>(<span style="color:#cd5555">HOME</span> <span style="color:#cd5555">/home/robin/Linux/calc</span>)         <span style="color:#228b22"># å®šä¹‰å˜é‡å
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">set</span>(<span style="color:#cd5555">EXECUTABLE_OUTPUT_PATH</span> ${<span style="color:#00688b">HOME</span>}<span style="color:#cd5555">/bin/</span>) <span style="color:#228b22"># æŒ‡å®šå¯æ‰§è¡Œç¨‹åºè¾“å‡ºçš„ä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">include_directories</span>(${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/include</span>) <span style="color:#228b22"># åŒ…å«å¤´æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">SRC_LIST</span> ${<span style="color:#00688b">CMAKE_CURRENT_SOURCE_DIR</span>}<span style="color:#cd5555">/src/*.cpp</span>) <span style="color:#228b22"># æœæŸä¸ªæ–‡ä»¶ä»¶ä¸‹æ‰€æœ‰çš„cppæ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">add_executable</span>(<span style="color:#cd5555">app</span>  ${<span style="color:#00688b">SRC_LIST</span>})         <span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­ï¼Œç¬¬å…­è¡ŒæŒ‡å®šå°±æ˜¯å¤´æ–‡ä»¶çš„è·¯å¾„ï¼Œ<strong><code>PROJECT_SOURCE_DIR</code>å®å¯¹åº”çš„å€¼å°±æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨cmakeå‘½ä»¤æ—¶ï¼Œåé¢ç´§è·Ÿçš„ç›®å½•ï¼Œä¸€èˆ¬æ˜¯å·¥ç¨‹çš„æ ¹ç›®å½•</strong>ã€‚</p>
<h4 id="åˆ¶ä½œåŠ¨æ€åº“æˆ–è€…é™æ€åº“">åˆ¶ä½œåŠ¨æ€åº“æˆ–è€…é™æ€åº“</h4>
<p>æœ‰äº›æ—¶å€™æˆ‘ä»¬ç¼–å†™çš„æºä»£ç å¹¶ä¸éœ€è¦å°†ä»–ä»¬ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºï¼Œè€Œæ˜¯ç”Ÿæˆä¸€äº›é™æ€åº“æˆ–åŠ¨æ€åº“æä¾›ç»™ç¬¬ä¸‰æ–¹ä½¿ç”¨ï¼Œä¸‹é¢æ¥è®²è§£åœ¨cmakeä¸­ç”Ÿæˆè¿™ä¸¤ç±»åº“æ–‡ä»¶çš„æ–¹æ³•ã€‚</p>
<blockquote>
<p>åˆ¶ä½œé™æ€åº“</p>
</blockquote>
<p>åœ¨cmakeä¸­ï¼Œå¦‚æœè¦åˆ¶ä½œé™æ€åº“ï¼Œéœ€è¦ä½¿ç”¨çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">add_library</span>(<span style="color:#cd5555">åº“åç§°</span> <span style="color:#cd5555">STATIC</span> <span style="color:#cd5555">æºæ–‡ä»¶1</span> <span style="color:#cd5555">[æºæ–‡ä»¶2]</span> <span style="color:#cd5555">...</span>) <span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨Linuxä¸­ï¼Œé™æ€åº“åå­—åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š<code>lib</code>+<code>åº“åå­—</code>+<code>.a</code>ï¼Œæ­¤å¤„åªéœ€è¦æŒ‡å®šå‡ºåº“çš„åå­—å°±å¯ä»¥äº†ï¼Œå¦å¤–ä¸¤éƒ¨åˆ†åœ¨ç”Ÿæˆè¯¥æ–‡ä»¶çš„æ—¶å€™ä¼šè‡ªåŠ¨å¡«å……ã€‚</p>
<p>åœ¨Windowsä¸­è™½ç„¶åº“åå’ŒLinuxæ ¼å¼ä¸åŒï¼Œä½†ä¹Ÿåªéœ€æŒ‡å®šå‡ºåå­—å³å¯ã€‚</p>
<p>ä¸‹é¢æœ‰ä¸€ä¸ªç›®å½•ï¼Œéœ€è¦å°†<code>src</code>ç›®å½•ä¸­çš„æºæ–‡ä»¶ç¼–è¯‘æˆé™æ€åº“ï¼Œç„¶åå†ä½¿ç”¨ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>â”œâ”€â”€ build
</span></span><span style="display:flex;"><span>â”œâ”€â”€ CMakeLists.txt
</span></span><span style="display:flex;"><span>â”œâ”€â”€ include           <span style="color:#228b22"># å¤´æ–‡ä»¶ç›®å½•</span>
</span></span><span style="display:flex;"><span>â”‚Â Â  â””â”€â”€ head.h
</span></span><span style="display:flex;"><span>â”œâ”€â”€ main.cpp          <span style="color:#228b22"># ç”¨äºæµ‹è¯•çš„æºæ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>â””â”€â”€ src               <span style="color:#228b22"># æºæ–‡ä»¶ç›®å½•</span>
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ add.cpp
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ div.cpp
</span></span><span style="display:flex;"><span>    â”œâ”€â”€ mult.cpp
</span></span><span style="display:flex;"><span>    â””â”€â”€ sub.cpp
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ ¹æ®ä¸Šé¢çš„ç›®å½•ç»“æ„ï¼Œå¯ä»¥è¿™æ ·ç¼–å†™<code>CMakeLists.txt</code>æ–‡ä»¶:</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">cmake_minimum_required</span>(<span style="color:#cd5555">VERSION</span> <span style="color:#cd5555">3.0</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">CALC</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">include_directories</span>(${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/include</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">SRC_LIST</span> <span style="color:#cd5555">&#34;${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp&#34;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">add_library</span>(<span style="color:#cd5555">calc</span> <span style="color:#cd5555">STATIC</span> ${<span style="color:#00688b">SRC_LIST</span>})<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·æœ€ç»ˆå°±ä¼šç”Ÿæˆå¯¹åº”çš„é™æ€åº“æ–‡ä»¶<code>libcalc.a</code>ã€‚</p>
<blockquote>
<p>åˆ¶ä½œåŠ¨æ€åº“</p>
</blockquote>
<p>åœ¨cmakeä¸­ï¼Œå¦‚æœè¦åˆ¶ä½œåŠ¨æ€åº“ï¼Œéœ€è¦ä½¿ç”¨çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">add_library</span>(<span style="color:#cd5555">åº“åç§°</span> <span style="color:#cd5555">SHARED</span> <span style="color:#cd5555">æºæ–‡ä»¶1</span> <span style="color:#cd5555">[æºæ–‡ä»¶2]</span> <span style="color:#cd5555">...</span>) <span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨Linuxä¸­ï¼ŒåŠ¨æ€åº“åå­—åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š<code>lib</code>+<code>åº“åå­—</code>+<code>.so</code>ï¼Œæ­¤å¤„åªéœ€è¦æŒ‡å®šå‡ºåº“çš„åå­—å°±å¯ä»¥äº†ï¼Œå¦å¤–ä¸¤éƒ¨åˆ†åœ¨ç”Ÿæˆè¯¥æ–‡ä»¶çš„æ—¶å€™ä¼šè‡ªåŠ¨å¡«å……ã€‚</p>
<p>åœ¨Windowsä¸­è™½ç„¶åº“åå’ŒLinuxæ ¼å¼ä¸åŒï¼Œä½†ä¹Ÿåªéœ€æŒ‡å®šå‡ºåå­—å³å¯ã€‚</p>
<p>æ ¹æ®ä¸Šé¢çš„ç›®å½•ç»“æ„ï¼Œå¯ä»¥è¿™æ ·ç¼–å†™CMakeLists.txtæ–‡ä»¶:</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">cmake_minimum_required</span>(<span style="color:#cd5555">VERSION</span> <span style="color:#cd5555">3.0</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">CALC</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">include_directories</span>(${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/include</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">SRC_LIST</span> <span style="color:#cd5555">&#34;${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp&#34;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">add_library</span>(<span style="color:#cd5555">calc</span> <span style="color:#cd5555">SHARED</span> ${<span style="color:#00688b">SRC_LIST</span>})<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·æœ€ç»ˆå°±ä¼šç”Ÿæˆå¯¹åº”çš„åŠ¨æ€åº“æ–‡ä»¶<code>libcalc.so</code>ã€‚</p>
<blockquote>
<p>æŒ‡å®šè¾“å‡ºçš„è·¯å¾„</p>
</blockquote>
<ul>
<li>æ–¹æ³•ä¸€ï¼š</li>
</ul>
<p>å¯¹äºç”Ÿæˆçš„åº“æ–‡ä»¶æ¥è¯´å’Œå¯æ‰§è¡Œç¨‹åºä¸€æ ·éƒ½å¯ä»¥æŒ‡å®šè¾“å‡ºè·¯å¾„ã€‚ç”±äº<strong>åœ¨Linuxä¸‹ç”Ÿæˆçš„åŠ¨æ€åº“é»˜è®¤æ˜¯æœ‰æ‰§è¡Œæƒé™çš„</strong>ï¼Œæ‰€ä»¥å¯ä»¥æŒ‰ç…§ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºçš„æ–¹å¼å»æŒ‡å®šå®ƒç”Ÿæˆçš„ç›®å½•ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">cmake_minimum_required</span>(<span style="color:#cd5555">VERSION</span> <span style="color:#cd5555">3.0</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">CALC</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">include_directories</span>(${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/include</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">SRC_LIST</span> <span style="color:#cd5555">&#34;${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp&#34;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># è®¾ç½®åŠ¨æ€åº“ç”Ÿæˆè·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">set</span>(<span style="color:#cd5555">EXECUTABLE_OUTPUT_PATH</span> ${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/lib</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">add_library</span>(<span style="color:#cd5555">calc</span> <span style="color:#cd5555">SHARED</span> ${<span style="color:#00688b">SRC_LIST</span>})<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å¯¹äºè¿™ç§æ–¹å¼æ¥è¯´ï¼Œå…¶å®å°±æ˜¯é€šè¿‡setå‘½ä»¤ç»™<code>EXECUTABLE_OUTPUT_PATH</code>å®è®¾ç½®äº†ä¸€ä¸ªè·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„å°±æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ç”Ÿæˆçš„è·¯å¾„ã€‚</p>
<ul>
<li>æ–¹æ³•äºŒï¼š</li>
</ul>
<p>ç”±äºåœ¨Linuxä¸‹ç”Ÿæˆçš„é™æ€åº“é»˜è®¤ä¸å…·æœ‰å¯æ‰§è¡Œæƒé™ï¼Œæ‰€ä»¥åœ¨æŒ‡å®šé™æ€åº“ç”Ÿæˆçš„è·¯å¾„çš„æ—¶å€™å°±ä¸èƒ½ä½¿ç”¨<code>EXECUTABLE_OUTPUT_PATH</code>å®äº†ï¼Œè€Œåº”è¯¥ä½¿ç”¨<code>LIBRARY_OUTPUT_PATH</code>ï¼Œè¿™ä¸ªå®å¯¹åº”é™æ€åº“æ–‡ä»¶å’ŒåŠ¨æ€åº“æ–‡ä»¶éƒ½é€‚ç”¨ã€‚</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">cmake_minimum_required</span>(<span style="color:#cd5555">VERSION</span> <span style="color:#cd5555">3.0</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">CALC</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">include_directories</span>(${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/include</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">SRC_LIST</span> <span style="color:#cd5555">&#34;${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp&#34;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># è®¾ç½®åŠ¨æ€åº“/é™æ€åº“ç”Ÿæˆè·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">set</span>(<span style="color:#cd5555">LIBRARY_OUTPUT_PATH</span> ${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/lib</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># ç”ŸæˆåŠ¨æ€åº“
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">#add_library(calc SHARED ${SRC_LIST})
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"># ç”Ÿæˆé™æ€åº“
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">add_library</span>(<span style="color:#cd5555">calc</span> <span style="color:#cd5555">STATIC</span> ${<span style="color:#00688b">SRC_LIST</span>})<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>åŠ¨æ€åº“å’Œé™æ€åº“çš„åŒºåˆ«</p>
</blockquote>
<p>åŠ¨æ€åº“å’Œé™æ€åº“éƒ½æ˜¯ç¼–ç¨‹ä¸­å¸¸ç”¨çš„åº“æ–‡ä»¶ï¼Œå®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨äºé“¾æ¥æ—¶åˆ»å’Œå ç”¨å†…å­˜çš„æ–¹å¼ã€‚</p>
<p>é™æ€åº“åœ¨ç¼–è¯‘æ—¶ä¼šè¢«å®Œæ•´åœ°å¤åˆ¶åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œå› æ­¤å®ƒä»¬ä¼šå¢åŠ å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°ã€‚åœ¨é“¾æ¥æ—¶åˆ»ï¼Œç¼–è¯‘å™¨ä¼šå°†é™æ€åº“çš„ä»£ç ä¸å¯æ‰§è¡Œæ–‡ä»¶çš„ä»£ç åˆå¹¶ï¼Œç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ç”±äºé™æ€åº“å·²ç»è¢«å®Œæ•´åœ°å¤åˆ¶åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œå› æ­¤ç¨‹åºåœ¨è¿è¡Œæ—¶ä¸éœ€è¦å†åŠ è½½é™æ€åº“ï¼Œè¿™æ ·å¯ä»¥æé«˜ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ã€‚ä½†æ˜¯ï¼Œå¦‚æœå¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶éƒ½ä½¿ç”¨åŒä¸€ä¸ªé™æ€åº“ï¼Œé‚£ä¹ˆé™æ€åº“çš„ä»£ç ä¼šè¢«å¤åˆ¶å¤šæ¬¡ï¼Œæµªè´¹ç©ºé—´ã€‚</p>
<p>åŠ¨æ€åº“åˆ™æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶æ‰è¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå› æ­¤å®ƒä»¬ä¸ä¼šå¢åŠ å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°ã€‚åœ¨é“¾æ¥æ—¶åˆ»ï¼Œç¼–è¯‘å™¨åªä¼šå°†åŠ¨æ€åº“çš„å¼•ç”¨ä¿¡æ¯æ·»åŠ åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œè€Œä¸ä¼šå°†åŠ¨æ€åº“çš„ä»£ç å¤åˆ¶åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚ç¨‹åºåœ¨è¿è¡Œæ—¶ä¼šåŠ¨æ€åœ°åŠ è½½åŠ¨æ€åº“ï¼Œå¹¶å°†å…¶æ˜ å°„åˆ°å†…å­˜ä¸­ã€‚ç”±äºå¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥å…±äº«åŒä¸€ä¸ªåŠ¨æ€åº“ï¼Œå› æ­¤åŠ¨æ€åº“å¯ä»¥èŠ‚çœå†…å­˜ç©ºé—´ã€‚ä½†æ˜¯ï¼Œç”±äºåŠ¨æ€åº“éœ€è¦åœ¨ç¨‹åºè¿è¡Œæ—¶æ‰èƒ½åŠ è½½ï¼Œå› æ­¤ç¨‹åºçš„å¯åŠ¨é€Ÿåº¦å¯èƒ½ä¼šå—åˆ°å½±å“ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œ<strong>é™æ€åº“é€‚ç”¨äºéœ€è¦é«˜æ•ˆè¿è¡Œçš„å°å‹ç¨‹åºï¼Œè€ŒåŠ¨æ€åº“é€‚ç”¨äºéœ€è¦å…±äº«ä»£ç å’ŒèŠ‚çœå†…å­˜ç©ºé—´çš„å¤§å‹ç¨‹åºã€‚</strong></p>
<h4 id="åŒ…å«åº“æ–‡ä»¶">åŒ…å«åº“æ–‡ä»¶</h4>
<p>åœ¨ç¼–å†™ç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šç”¨åˆ°ä¸€äº›ç³»ç»Ÿæä¾›çš„åŠ¨æ€åº“æˆ–è€…è‡ªå·±åˆ¶ä½œå‡ºçš„åŠ¨æ€åº“æˆ–è€…é™æ€åº“æ–‡ä»¶ï¼Œcmakeä¸­ä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†ç›¸å…³çš„åŠ è½½åŠ¨æ€åº“çš„å‘½ä»¤ã€‚</p>
<blockquote>
<p>é“¾æ¥é™æ€åº“</p>
</blockquote>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>src
</span></span><span style="display:flex;"><span>â”œâ”€â”€ add.cpp
</span></span><span style="display:flex;"><span>â”œâ”€â”€ div.cpp
</span></span><span style="display:flex;"><span>â”œâ”€â”€ main.cpp
</span></span><span style="display:flex;"><span>â”œâ”€â”€ mult.cpp
</span></span><span style="display:flex;"><span>â””â”€â”€ sub.cpp
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç°åœ¨æˆ‘ä»¬æŠŠä¸Šé¢<code>src</code>ç›®å½•ä¸­çš„<code>add.cppã€div.cppã€mult.cppã€sub.cpp</code>ç¼–è¯‘æˆä¸€ä¸ªé™æ€åº“æ–‡ä»¶<code>libcalc.a</code>ã€‚</p>
<p>æµ‹è¯•ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">$</span> <span style="color:#a61717;background-color:#e3d2d2">tree</span> <span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">.
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">â”œâ”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">build
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">â”œâ”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">CMakeLists.txt
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">â”œâ”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">include
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">â”‚Â Â </span> <span style="color:#a61717;background-color:#e3d2d2">â””â”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">head.h
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">â”œâ”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">lib
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">â”‚Â Â </span> <span style="color:#a61717;background-color:#e3d2d2">â””â”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">libcalc.a</span>     <span style="color:#228b22"># åˆ¶ä½œå‡ºçš„é™æ€åº“çš„åå­—
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#a61717;background-color:#e3d2d2">â””â”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">src
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span>    <span style="color:#a61717;background-color:#e3d2d2">â””â”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">main.cpp
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">4</span> <span style="color:#a61717;background-color:#e3d2d2">directories,</span> <span style="color:#a61717;background-color:#e3d2d2">4</span> <span style="color:#a61717;background-color:#e3d2d2">files
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨cmakeä¸­ï¼Œé“¾æ¥é™æ€åº“çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">link_libraries</span>(<span style="color:#cd5555">&lt;static</span> <span style="color:#cd5555">lib&gt;</span> <span style="color:#cd5555">[&lt;static</span> <span style="color:#cd5555">lib&gt;...]</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>å‚æ•°1</strong>ï¼šæŒ‡å®šå‡ºè¦é“¾æ¥çš„é™æ€åº“çš„åå­—
<ul>
<li>å¯ä»¥æ˜¯å…¨å<code>libxxx.a</code></li>
<li>ä¹Ÿå¯ä»¥æ˜¯æå¤´<code>lib</code>å»å°¾<code>.a</code>ä¹‹åçš„åå­— <code>xxx</code></li>
</ul>
</li>
<li><strong>å‚æ•°2-N</strong>ï¼šè¦é“¾æ¥çš„å…¶å®ƒé™æ€åº“çš„åå­—</li>
</ul>
<p>å¦‚æœè¯¥é™æ€åº“ä¸æ˜¯ç³»ç»Ÿæä¾›çš„ï¼ˆè‡ªå·±åˆ¶ä½œæˆ–è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„é™æ€åº“ï¼‰å¯èƒ½å‡ºç°é™æ€åº“æ‰¾ä¸åˆ°çš„æƒ…å†µï¼Œæ­¤æ—¶å¯ä»¥å°†é™æ€åº“çš„è·¯å¾„ä¹ŸæŒ‡å®šå‡ºæ¥ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">link_directories</span>(<span style="color:#cd5555">&lt;lib</span> <span style="color:#cd5555">path&gt;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ ·ï¼Œä¿®æ”¹ä¹‹åçš„<code>CMakeLists.txt</code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">cmake_minimum_required</span>(<span style="color:#cd5555">VERSION</span> <span style="color:#cd5555">3.0</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">CALC</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># æœç´¢æŒ‡å®šç›®å½•ä¸‹æºæ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">SRC_LIST</span> ${<span style="color:#00688b">CMAKE_CURRENT_SOURCE_DIR</span>}<span style="color:#cd5555">/src/*.cpp</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># åŒ…å«å¤´æ–‡ä»¶è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">include_directories</span>(${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/include</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># åŒ…å«é™æ€åº“è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">link_directories</span>(${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/lib</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># é“¾æ¥é™æ€åº“
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">link_libraries</span>(<span style="color:#cd5555">calc</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">add_executable</span>(<span style="color:#cd5555">app</span> ${<span style="color:#00688b">SRC_LIST</span>})<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>é“¾æ¥åŠ¨æ€åº“</p>
</blockquote>
<p>åœ¨<code>cmake</code>ä¸­é“¾æ¥åŠ¨æ€åº“çš„å‘½ä»¤å¦‚ä¸‹:</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">target_link_libraries</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#cd5555">&lt;target&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#cd5555">&lt;PRIVATE|PUBLIC|INTERFACE&gt;</span> <span style="color:#cd5555">&lt;item&gt;...</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#cd5555">[&lt;PRIVATE|PUBLIC|INTERFACE&gt;</span> <span style="color:#cd5555">&lt;item&gt;...]...</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><strong>target</strong>ï¼šæŒ‡å®šè¦åŠ è½½åŠ¨æ€åº“çš„æ–‡ä»¶çš„åå­—</p>
<ul>
<li>è¯¥æ–‡ä»¶å¯èƒ½æ˜¯ä¸€ä¸ªæºæ–‡ä»¶</li>
<li>è¯¥æ–‡ä»¶å¯èƒ½æ˜¯ä¸€ä¸ªåŠ¨æ€åº“æ–‡ä»¶</li>
<li>è¯¥æ–‡ä»¶å¯èƒ½æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶</li>
</ul>
</li>
<li>
<p><strong>PRIVATE|PUBLIC|INTERFACE</strong>ï¼šåŠ¨æ€åº“çš„è®¿é—®æƒé™ï¼Œé»˜è®¤ä¸º<code>PUBLIC</code></p>
<ul>
<li>
<p>å¦‚æœå„ä¸ªåŠ¨æ€åº“ä¹‹é—´æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œæ— éœ€åšä»»ä½•è®¾ç½®ï¼Œ<code>ä¸‰è€…æ²¡æœ‰æ²¡æœ‰åŒºåˆ«ï¼Œä¸€èˆ¬æ— éœ€æŒ‡å®šï¼Œä½¿ç”¨é»˜è®¤çš„ PUBLIC å³å¯</code>ã€‚</p>
</li>
<li>
<p><code>åŠ¨æ€åº“çš„é“¾æ¥å…·æœ‰ä¼ é€’æ€§</code>ï¼Œå¦‚æœåŠ¨æ€åº“ A é“¾æ¥äº†åŠ¨æ€åº“Bã€Cï¼ŒåŠ¨æ€åº“Dé“¾æ¥äº†åŠ¨æ€åº“Aï¼Œæ­¤æ—¶åŠ¨æ€åº“Dç›¸å½“äºä¹Ÿé“¾æ¥äº†åŠ¨æ€åº“Bã€Cï¼Œå¹¶å¯ä»¥ä½¿ç”¨åŠ¨æ€åº“Bã€Cä¸­å®šä¹‰çš„æ–¹æ³•ã€‚</p>
</li>
</ul>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">target_link_libraries</span>(<span style="color:#cd5555">A</span> <span style="color:#cd5555">B</span> <span style="color:#cd5555">C</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">target_link_libraries</span>(<span style="color:#cd5555">D</span> <span style="color:#cd5555">A</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>PUBLICï¼šåœ¨publicåé¢çš„åº“ä¼šè¢«Linkåˆ°å‰é¢çš„targetä¸­ï¼Œå¹¶ä¸”é‡Œé¢çš„ç¬¦å·ä¹Ÿä¼šè¢«å¯¼å‡ºï¼Œæä¾›ç»™ç¬¬ä¸‰æ–¹ä½¿ç”¨ã€‚</li>
<li>PRIVATEï¼šåœ¨privateåé¢çš„åº“ä»…è¢«linkåˆ°å‰é¢çš„targetä¸­ï¼Œå¹¶ä¸”ç»ˆç»“æ‰ï¼Œç¬¬ä¸‰æ–¹ä¸èƒ½æ„ŸçŸ¥ä½ è°ƒäº†å•¥åº“</li>
<li>INTERFACEï¼šåœ¨interfaceåé¢å¼•å…¥çš„åº“ä¸ä¼šè¢«é“¾æ¥åˆ°å‰é¢çš„targetä¸­ï¼Œåªä¼šå¯¼å‡ºç¬¦å·ã€‚</li>
</ul>
</li>
<li>
<p>åŠ¨æ€åº“çš„é“¾æ¥å’Œé™æ€åº“æ˜¯å®Œå…¨ä¸åŒçš„ï¼š</p>
<ul>
<li>é™æ€åº“ä¼šåœ¨ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºçš„é“¾æ¥é˜¶æ®µè¢«æ‰“åŒ…åˆ°å¯æ‰§è¡Œç¨‹åºä¸­ï¼Œæ‰€ä»¥å¯æ‰§è¡Œç¨‹åºå¯åŠ¨ï¼Œé™æ€åº“å°±è¢«åŠ è½½åˆ°å†…å­˜ä¸­äº†ã€‚</li>
<li>åŠ¨æ€åº“åœ¨ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºçš„é“¾æ¥é˜¶æ®µä¸ä¼šè¢«æ‰“åŒ…åˆ°å¯æ‰§è¡Œç¨‹åºä¸­ï¼Œå½“å¯æ‰§è¡Œç¨‹åºè¢«å¯åŠ¨å¹¶ä¸”è°ƒç”¨äº†åŠ¨æ€åº“ä¸­çš„å‡½æ•°çš„æ—¶å€™ï¼ŒåŠ¨æ€åº“æ‰ä¼šè¢«åŠ è½½åˆ°å†…å­˜ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>é“¾æ¥ç³»ç»ŸåŠ¨æ€åº“</p>
</blockquote>
<p>å› æ­¤ï¼Œåœ¨<code>cmake</code>ä¸­æŒ‡å®šè¦é“¾æ¥çš„åŠ¨æ€åº“çš„æ—¶å€™ï¼Œ<code>åº”è¯¥å°†å‘½ä»¤å†™åˆ°ç”Ÿæˆäº†å¯æ‰§è¡Œæ–‡ä»¶ä¹‹å</code>ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">cmake_minimum_required</span>(<span style="color:#cd5555">VERSION</span> <span style="color:#cd5555">3.0</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">TEST</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">SRC_LIST</span> ${<span style="color:#00688b">CMAKE_CURRENT_SOURCE_DIR</span>}<span style="color:#cd5555">/*.cpp</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># æ·»åŠ å¹¶æŒ‡å®šæœ€ç»ˆç”Ÿæˆçš„å¯æ‰§è¡Œç¨‹åºå
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">add_executable</span>(<span style="color:#cd5555">app</span> ${<span style="color:#00688b">SRC_LIST</span>})<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># æŒ‡å®šå¯æ‰§è¡Œç¨‹åºè¦é“¾æ¥çš„åŠ¨æ€åº“åå­—
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">target_link_libraries</span>(<span style="color:#cd5555">app</span> <span style="color:#cd5555">pthread</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åœ¨target_link_libraries(app pthread)ä¸­ï¼š
<ul>
<li>app: å¯¹åº”çš„æ˜¯æœ€ç»ˆç”Ÿæˆçš„å¯æ‰§è¡Œç¨‹åºçš„åå­—</li>
<li>pthreadï¼šè¿™æ˜¯å¯æ‰§è¡Œç¨‹åºè¦åŠ è½½çš„<code>åŠ¨æ€åº“</code>ï¼Œè¿™ä¸ªåº“æ˜¯<code>ç³»ç»Ÿæä¾›çš„çº¿ç¨‹åº“</code>ï¼Œå…¨åä¸º<code>libpthread.so</code>ï¼Œåœ¨æŒ‡å®šçš„æ—¶å€™ä¸€èˆ¬ä¼šæå¤´ï¼ˆlibï¼‰å»å°¾ï¼ˆ.soï¼‰ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>é“¾æ¥ç¬¬ä¸‰æ–¹åŠ¨æ€åº“</p>
</blockquote>
<p>å‡è®¾è‡ªå·±ç”Ÿæˆäº†ä¸€ä¸ªåŠ¨æ€åº“ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">$</span> <span style="color:#a61717;background-color:#e3d2d2">tree</span> <span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">.
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">â”œâ”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">build
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">â”œâ”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">CMakeLists.txt
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">â”œâ”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">include
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">â”‚Â Â </span> <span style="color:#a61717;background-color:#e3d2d2">â””â”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">head.h</span>            <span style="color:#228b22"># åŠ¨æ€åº“å¯¹åº”çš„å¤´æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#a61717;background-color:#e3d2d2">â”œâ”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">lib
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">â”‚Â Â </span> <span style="color:#a61717;background-color:#e3d2d2">â””â”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">libcalc.so</span>        <span style="color:#228b22"># è‡ªå·±åˆ¶ä½œçš„åŠ¨æ€åº“æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#a61717;background-color:#e3d2d2">â””â”€â”€</span> <span style="color:#a61717;background-color:#e3d2d2">main.cpp</span>              <span style="color:#228b22"># æµ‹è¯•ç”¨çš„æºæ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">3</span> <span style="color:#a61717;background-color:#e3d2d2">directories,</span> <span style="color:#a61717;background-color:#e3d2d2">4</span> <span style="color:#a61717;background-color:#e3d2d2">files
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å‡è®¾åœ¨æµ‹è¯•æ–‡ä»¶<code>main.cpp</code>ä¸­æ—¢ä½¿ç”¨äº†è‡ªå·±åˆ¶ä½œçš„åŠ¨æ€åº“<code>libcalc.so</code>ï¼Œåˆä½¿ç”¨äº†ç³»ç»Ÿæä¾›çš„çº¿ç¨‹åº“ï¼Œæ­¤æ—¶<code>CMakeLists.txt</code>æ–‡ä»¶å¯ä»¥è¿™æ ·å†™ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">cmake_minimum_required</span>(<span style="color:#cd5555">VERSION</span> <span style="color:#cd5555">3.0</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">TEST</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">SRC_LIST</span> ${<span style="color:#00688b">CMAKE_CURRENT_SOURCE_DIR</span>}<span style="color:#cd5555">/*.cpp</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">include_directories</span>(${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/include</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">add_executable</span>(<span style="color:#cd5555">app</span> ${<span style="color:#00688b">SRC_LIST</span>})<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">target_link_libraries</span>(<span style="color:#cd5555">app</span> <span style="color:#cd5555">pthread</span> <span style="color:#cd5555">calc</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ç¬¬å…­è¡Œä¸­ï¼Œ<code>pthreadã€calc</code>éƒ½æ˜¯å¯æ‰§è¡Œç¨‹åº<code>app</code>è¦é“¾æ¥çš„åŠ¨æ€åº“çš„åå­—ã€‚å½“å¯æ‰§è¡Œç¨‹åº<code>app</code>ç”Ÿæˆä¹‹åå¹¶æ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œä¼šæç¤ºæœ‰å¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ./app 
</span></span><span style="display:flex;"><span>./app: error <span style="color:#8b008b;font-weight:bold">while</span> loading shared libraries: libcalc.so: cannot open shared object file: No such file or directory
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ˜¯å› ä¸ºå¯æ‰§è¡Œç¨‹åºå¯åŠ¨ä¹‹åï¼Œå»åŠ è½½<code>calc</code>è¿™ä¸ªåŠ¨æ€åº“ï¼Œä½†æ˜¯ä¸çŸ¥é“è¿™ä¸ªåŠ¨æ€åº“æ”¾åœ¨äº†ä»€ä¹ˆä½ç½®</p>
<p><strong>åœ¨ CMake ä¸­å¯ä»¥åœ¨ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤æŒ‡å®šå‡ºè¦é“¾æ¥çš„åŠ¨æ€åº“çš„ä½ç½®ï¼ŒæŒ‡å®šé™æ€åº“ä½ç½®ä½¿ç”¨çš„ä¹Ÿæ˜¯è¿™ä¸ªå‘½ä»¤</strong>ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">link_directories</span>(<span style="color:#cd5555">path</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰€ä»¥ä¿®æ”¹ä¹‹åçš„<code>CMakeLists.txt</code>æ–‡ä»¶åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">cmake_minimum_required</span>(<span style="color:#cd5555">VERSION</span> <span style="color:#cd5555">3.0</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">TEST</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">SRC_LIST</span> ${<span style="color:#00688b">CMAKE_CURRENT_SOURCE_DIR</span>}<span style="color:#cd5555">/*.cpp</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># æŒ‡å®šæºæ–‡ä»¶æˆ–è€…åŠ¨æ€åº“å¯¹åº”çš„å¤´æ–‡ä»¶è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">include_directories</span>(${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/include</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># æŒ‡å®šè¦é“¾æ¥çš„åŠ¨æ€åº“çš„è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">link_directories</span>(${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/lib</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># æ·»åŠ å¹¶ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">add_executable</span>(<span style="color:#cd5555">app</span> ${<span style="color:#00688b">SRC_LIST</span>})<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># æŒ‡å®šè¦é“¾æ¥çš„åŠ¨æ€åº“
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">target_link_libraries</span>(<span style="color:#cd5555">app</span> <span style="color:#cd5555">pthread</span> <span style="color:#cd5555">calc</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä½¿ç”¨ target_link_libraries å‘½ä»¤å°±å¯ä»¥é“¾æ¥åŠ¨æ€åº“ï¼Œä¹Ÿå¯ä»¥é“¾æ¥é™æ€åº“æ–‡ä»¶!</strong></p>
<h4 id="æ—¥å¿—">æ—¥å¿—</h4>
<p>åœ¨CMakeä¸­å¯ä»¥ç”¨ç”¨æˆ·æ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯ï¼Œè¯¥å‘½ä»¤çš„åå­—ä¸º<code>message</code>ï¼š</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">message</span>(<span style="color:#cd5555">[STATUS|WARNING|AUTHOR_WARNING|FATAL_ERROR|SEND_ERROR]</span> <span style="color:#cd5555">&#34;message to display&#34;</span> <span style="color:#cd5555">...</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>(æ— ) ï¼šé‡è¦æ¶ˆæ¯</li>
<li>STATUS ï¼šéé‡è¦æ¶ˆæ¯</li>
<li>WARNINGï¼šCMake è­¦å‘Š, ä¼šç»§ç»­æ‰§è¡Œ</li>
<li>AUTHOR_WARNINGï¼šCMake è­¦å‘Š (dev), ä¼šç»§ç»­æ‰§è¡Œ</li>
<li>SEND_ERRORï¼šCMake é”™è¯¯, ç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯ä¼šè·³è¿‡ç”Ÿæˆçš„æ­¥éª¤</li>
<li>FATAL_ERRORï¼šCMake é”™è¯¯, ç»ˆæ­¢æ‰€æœ‰å¤„ç†è¿‡ç¨‹</li>
</ul>
<p>CMakeçš„å‘½ä»¤è¡Œå·¥å…·ä¼šåœ¨stdoutä¸Šæ˜¾ç¤º<code>STATUS</code>æ¶ˆæ¯ï¼Œåœ¨stderrä¸Šæ˜¾ç¤ºå…¶ä»–æ‰€æœ‰æ¶ˆæ¯ã€‚CMakeçš„GUIä¼šåœ¨å®ƒçš„logåŒºåŸŸæ˜¾ç¤ºæ‰€æœ‰æ¶ˆæ¯ã€‚</p>
<p>CMakeè­¦å‘Šå’Œé”™è¯¯æ¶ˆæ¯çš„æ–‡æœ¬æ˜¾ç¤ºä½¿ç”¨çš„æ˜¯ä¸€ç§ç®€å•çš„æ ‡è®°è¯­è¨€ã€‚æ–‡æœ¬æ²¡æœ‰ç¼©è¿›ï¼Œè¶…è¿‡é•¿åº¦çš„è¡Œä¼šå›å·ï¼Œæ®µè½ä¹‹é—´ä»¥æ–°è¡Œåšä¸ºåˆ†éš”ç¬¦ã€‚</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#228b22"># è¾“å‡ºä¸€èˆ¬æ—¥å¿—ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">message</span>(<span style="color:#cd5555">STATUS</span> <span style="color:#cd5555">&#34;source path: ${PROJECT_SOURCE_DIR}&#34;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># è¾“å‡ºè­¦å‘Šä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">message</span>(<span style="color:#cd5555">WARNING</span> <span style="color:#cd5555">&#34;source path: ${PROJECT_SOURCE_DIR}&#34;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># è¾“å‡ºé”™è¯¯ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">message</span>(<span style="color:#cd5555">FATAL_ERROR</span> <span style="color:#cd5555">&#34;source path: ${PROJECT_SOURCE_DIR}&#34;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å˜é‡æ“ä½œ">å˜é‡æ“ä½œ</h4>
<blockquote>
<p>è¿½åŠ </p>
</blockquote>
<p>æœ‰æ—¶å€™é¡¹ç›®ä¸­çš„æºæ–‡ä»¶å¹¶ä¸ä¸€å®šéƒ½åœ¨åŒä¸€ä¸ªç›®å½•ä¸­ï¼Œä½†æ˜¯è¿™äº›æºæ–‡ä»¶æœ€ç»ˆå´éœ€è¦ä¸€èµ·è¿›è¡Œç¼–è¯‘æ¥ç”Ÿæˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–è€…åº“æ–‡ä»¶ã€‚å¦‚æœæˆ‘ä»¬é€šè¿‡<code>file</code>å‘½ä»¤å¯¹å„ä¸ªç›®å½•ä¸‹çš„æºæ–‡ä»¶è¿›è¡Œæœç´¢ï¼Œæœ€åè¿˜éœ€è¦åšä¸€ä¸ªå­—ç¬¦ä¸²æ‹¼æ¥çš„æ“ä½œï¼Œå…³äºå­—ç¬¦ä¸²æ‹¼æ¥å¯ä»¥ä½¿ç”¨<code>set</code>å‘½ä»¤ä¹Ÿå¯ä»¥ä½¿ç”¨<code>list</code>å‘½ä»¤ã€‚</p>
<ul>
<li>ä½¿ç”¨setæ‹¼æ¥ï¼š</li>
</ul>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">set</span>(<span style="color:#cd5555">å˜é‡å1</span> ${<span style="color:#00688b">å˜é‡å1</span>} ${<span style="color:#00688b">å˜é‡å2</span>} <span style="color:#cd5555">...</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å…³äºä¸Šé¢çš„å‘½ä»¤å…¶å®å°±æ˜¯å°†ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹å¾€åæ‰€æœ‰çš„å­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥ï¼Œæœ€åå°†ç»“æœå­˜å‚¨åˆ°ç¬¬ä¸€ä¸ªå‚æ•°ä¸­ã€‚</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">cmake_minimum_required</span>(<span style="color:#cd5555">VERSION</span> <span style="color:#cd5555">3.0</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">TEST</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">set</span>(<span style="color:#cd5555">TEMP</span> <span style="color:#cd5555">&#34;hello,world&#34;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">SRC_1</span> ${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/src1/*.cpp</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">SRC_2</span> ${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/src2/*.cpp</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># è¿½åŠ (æ‹¼æ¥)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">set</span>(<span style="color:#cd5555">SRC_1</span> ${<span style="color:#00688b">SRC_1</span>} ${<span style="color:#00688b">SRC_2</span>} ${<span style="color:#00688b">TEMP</span>})<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">message</span>(<span style="color:#cd5555">STATUS</span> <span style="color:#cd5555">&#34;message: ${SRC_1}&#34;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ä½¿ç”¨listæ‹¼æ¥ï¼š</li>
</ul>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">list</span>(<span style="color:#cd5555">APPEND</span> <span style="color:#cd5555">&lt;list&gt;</span> <span style="color:#cd5555">[&lt;element&gt;</span> <span style="color:#cd5555">...]</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>list</code>å‘½ä»¤çš„åŠŸèƒ½æ¯”<code>set</code>è¦å¼ºå¤§ï¼Œå­—ç¬¦ä¸²æ‹¼æ¥åªæ˜¯å®ƒçš„å…¶ä¸­ä¸€ä¸ªåŠŸèƒ½ï¼Œæ‰€ä»¥éœ€è¦åœ¨å®ƒç¬¬ä¸€ä¸ªå‚æ•°çš„ä½ç½®æŒ‡å®šå‡ºæˆ‘ä»¬è¦åšçš„æ“ä½œï¼Œ<code>APPEND</code>è¡¨ç¤ºè¿›è¡Œæ•°æ®è¿½åŠ ï¼Œåè¾¹çš„å‚æ•°å’Œ<code>set</code>å°±ä¸€æ ·äº†ã€‚</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmake" data-lang="cmake"><span style="display:flex;"><span><span style="color:#658b00">cmake_minimum_required</span>(<span style="color:#cd5555">VERSION</span> <span style="color:#cd5555">3.0</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">project</span>(<span style="color:#cd5555">TEST</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">set</span>(<span style="color:#cd5555">TEMP</span> <span style="color:#cd5555">&#34;hello,world&#34;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">SRC_1</span> ${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/src1/*.cpp</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">file</span>(<span style="color:#cd5555">GLOB</span> <span style="color:#cd5555">SRC_2</span> ${<span style="color:#00688b">PROJECT_SOURCE_DIR</span>}<span style="color:#cd5555">/src2/*.cpp</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#228b22"># è¿½åŠ (æ‹¼æ¥)
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#658b00">list</span>(<span style="color:#cd5555">APPEND</span> <span style="color:#cd5555">SRC_1</span> ${<span style="color:#00688b">SRC_1</span>} ${<span style="color:#00688b">SRC_2</span>} ${<span style="color:#00688b">TEMP</span>})<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#658b00">message</span>(<span style="color:#cd5555">STATUS</span> <span style="color:#cd5555">&#34;message: ${SRC_1}&#34;</span>)<span style="color:#a61717;background-color:#e3d2d2">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
                    
                    <HR width="100%" id="EOF">
		            <p style="color:#777;">æœ€åä¿®æ”¹äº 2023-08-20</p>
                    
                    
                    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20210508215939.png" /></a><br />æœ¬ä½œå“é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://caixiongjiang.github.io/blog/2023/%E5%8D%8E%E4%B8%BA%E6%98%87%E8%85%BE%E9%83%A8%E7%BD%B2/%E6%98%87%E8%85%BE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83docker%E9%95%9C%E5%83%8F%E5%88%B6%E4%BD%9C/">
			ä¸‹å›<br>ä»é›¶åˆ¶ä½œæ˜‡è…¾å¼€å‘ç¯å¢ƒDockeré•œåƒ
                </a>
                
                
                
                <a class="older-posts" href="https://caixiongjiang.github.io/blog/2023/%E7%9F%A5%E8%AF%86%E6%9D%82%E8%B0%88/c&#43;&#43;-tool%E4%B9%8Bgdb%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/">
			ä¸Šå›<br>C&#43;&#43; Tool: GDB
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                








<div id="tcomment"></div>



            </div>
        </div>
    </div>
</div>

            </div><div id="single-column-footer">
é­”æ”¹è‡ª <a href="https://github.com/riba2534/hugo-blog">Riba2534</a> by <a href="https://caixiongjiang.github.io">Jarson Cai</a>
<br>

&copy;
	
	2023 ğŸŒ€Jarson Cai&#39;s Blog
	</div>
            </div>
    <script>
let app;

app = new Vue({
    el: '#app',
    data: {
        scrollY: 0,
        navOpacity: 0,
        isDrawerOpen: false,
        mounted: false,
        isDarkMode: false
    },
    methods: {
            sgn(t, x) {
                let k = 1. / (1. - 2 * t);
                if (x <= t) return 0;
                else if (x >= 1 - t) return 1;
                else {
                    return k * (x - t);
                }
            },
            handleScroll() {
                this.scrollY = window.scrollY;
                this.navOpacity = this.sgn(.0, Math.min(1, Math.max(0, window.scrollY / (this.pageHeadHeight() - this.navBarHeight() * 0.8))));
                const {navBar, navBackground, navTitle, extraContainer, streamContainer} = this.$refs;

                if (this.navOpacity >= 1) {
                    navBackground.style.opacity = 1;
                    navTitle.style.opacity = 1;
                } else {
                    navBackground.style.opacity = 0;
                    navTitle.style.opacity = 0;
                }
            },
            handleResize() {
                const {navBar, navBackground, navTitle, extraContainer, streamContainer} = this.$refs;
                extraContainer.style.left = (streamContainer.offsetWidth - extraContainer.offsetWidth) + 'px';
            },
            navBarHeight() {
                return this.$refs.navBar.offsetHeight;
            },
            pageHeadHeight() {
                return this.$refs.pageHead.offsetHeight;
            },
            toggleDrawer() {
                this.isDrawerOpen = !this.isDrawerOpen;
                document.getElementsByTagName('html')[0].style.overflow = this.isDrawerOpen ? 'hidden' : 'unset';
            },
            closeDrawer() {
                this.isDrawerOpen = false;
                document.getElementsByTagName('html')[0].style.overflow = this.isDrawerOpen ? 'hidden' : 'unset';
            },
            toggleDarkMode() {
                this.isDarkMode = !this.isDarkMode;
                if (this.isDarkMode==true){
                    document.cookie = "night=1;path=/";
                    document.body.classList.add("night");
                } else {
                    document.cookie = "night=0;path=/";
                    document.body.classList.remove("night");
                }
            },
            debounce(func, wait, options) {
                let lastArgs,
                    lastThis,
                    maxWait,
                    result,
                    timerId,
                    lastCallTime

                let lastInvokeTime = 0
                let leading = false
                let maxing = false
                let trailing = true

                
                const useRAF = (!wait && wait !== 0 && typeof root.requestAnimationFrame === 'function')

                if (typeof func !== 'function') {
                    throw new TypeError('Expected a function')
                }
                function isObject(value) {
                    const type = typeof value
                    return value != null && (type === 'object' || type === 'function')
                }

                wait = +wait || 0
                if (isObject(options)) {
                    leading = !!options.leading
                    maxing = 'maxWait' in options
                    maxWait = maxing ? Math.max(+options.maxWait || 0, wait) : maxWait
                    trailing = 'trailing' in options ? !!options.trailing : trailing
                }

                function invokeFunc(time) {
                    const args = lastArgs
                    const thisArg = lastThis

                    lastArgs = lastThis = undefined
                    lastInvokeTime = time
                    result = func.apply(thisArg, args)
                    return result
                }

                function startTimer(pendingFunc, wait) {
                    if (useRAF) {
                    root.cancelAnimationFrame(timerId)
                    return root.requestAnimationFrame(pendingFunc)
                    }
                    return setTimeout(pendingFunc, wait)
                }

                function cancelTimer(id) {
                    if (useRAF) {
                    return root.cancelAnimationFrame(id)
                    }
                    clearTimeout(id)
                }

                function leadingEdge(time) {
                    
                    lastInvokeTime = time
                    
                    timerId = startTimer(timerExpired, wait)
                    
                    return leading ? invokeFunc(time) : result
                }

                function remainingWait(time) {
                    const timeSinceLastCall = time - lastCallTime
                    const timeSinceLastInvoke = time - lastInvokeTime
                    const timeWaiting = wait - timeSinceLastCall

                    return maxing
                    ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke)
                    : timeWaiting
                }

                function shouldInvoke(time) {
                    const timeSinceLastCall = time - lastCallTime
                    const timeSinceLastInvoke = time - lastInvokeTime

                    
                    
                    
                    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
                    (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait))
                }

                function timerExpired() {
                    const time = Date.now()
                    if (shouldInvoke(time)) {
                    return trailingEdge(time)
                    }
                    
                    timerId = startTimer(timerExpired, remainingWait(time))
                }

                function trailingEdge(time) {
                    timerId = undefined

                    
                    
                    if (trailing && lastArgs) {
                    return invokeFunc(time)
                    }
                    lastArgs = lastThis = undefined
                    return result
                }

                function cancel() {
                    if (timerId !== undefined) {
                    cancelTimer(timerId)
                    }
                    lastInvokeTime = 0
                    lastArgs = lastCallTime = lastThis = timerId = undefined
                }

                function flush() {
                    return timerId === undefined ? result : trailingEdge(Date.now())
                }

                function pending() {
                    return timerId !== undefined
                }

                function debounced(...args) {
                    const time = Date.now()
                    const isInvoking = shouldInvoke(time)

                    lastArgs = args
                    lastThis = this
                    lastCallTime = time

                    if (isInvoking) {
                    if (timerId === undefined) {
                        return leadingEdge(lastCallTime)
                    }
                    if (maxing) {
                        
                        timerId = startTimer(timerExpired, wait)
                        return invokeFunc(lastCallTime)
                    }
                    }
                    if (timerId === undefined) {
                    timerId = startTimer(timerExpired, wait)
                    }
                    return result
                }
                debounced.cancel = cancel
                debounced.flush = flush
                debounced.pending = pending
                return debounced
                }

    },
    created() {
        window.addEventListener('scroll', this.handleScroll);
        window.addEventListener('resize', this.handleResize);
        window._nonDesktop = function () {
            let check = false;
            (function (a) {
                if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) check = true;
            })(navigator.userAgent || navigator.vendor || window.opera);
            return check;
        };
        
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1");
        if (night==""){
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                
            }
        }else{
            
            if (night=="1") {
                this.toggleDarkMode();
            }
        }
    },
    mounted() {
        this.handleScroll();
        this.handleResize();
        this.mounted = true;

        
        
        
            twikoo.init({
                envId: "https://twikoo-rho-olive.vercel.app/",
                el: '#tcomment',
                region:  null ,
            });
        

        document.querySelectorAll("table").forEach(function(elem){
            elem.classList.add("table-striped");
            elem.classList.add("table");
            elem.classList.add("table-responsive");
            elem.classList.add("table-hover");
        })

        
        spy();
        window.addEventListener('scroll', this.debounce(spy, 250, { 'maxWait': 250 }), false);
        
        
    },
    destroyed() {
        window.removeEventListener('scroll', this.handleScroll);
        window.removeEventListener('resize', this.handleResize);
    }
});



</script>
    </body>
</html>
