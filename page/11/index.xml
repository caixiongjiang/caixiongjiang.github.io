<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ğŸŒ€riba2534&#39;s Blog</title>
    <link>https://caixiongjiang.github.io/</link>
    <description>Recent content on ğŸŒ€riba2534&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Mon, 20 Sep 2021 09:40:54 +0800</lastBuildDate>
    
        <atom:link href="https://caixiongjiang.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    
    
        <item>
        <title>ç‰›å®¢ç½‘-æ‹¼å¤šå¤š2018ç¬”è¯• è¿·å®«å¯»è·¯(çŠ¶æ€å‹ç¼©&#43;bfs)</title>
        <link>https://caixiongjiang.github.io/blog/2019/%E7%89%9B%E5%AE%A2%E7%BD%91-%E6%8B%BC%E5%A4%9A%E5%A4%9A2018%E7%AC%94%E8%AF%95-%E8%BF%B7%E5%AE%AB%E5%AF%BB%E8%B7%AF%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9bfs/</link>
        <pubDate>Sat, 19 Jan 2019 20:17:59 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2019/%E7%89%9B%E5%AE%A2%E7%BD%91-%E6%8B%BC%E5%A4%9A%E5%A4%9A2018%E7%AC%94%E8%AF%95-%E8%BF%B7%E5%AE%AB%E5%AF%BB%E8%B7%AF%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9bfs/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2019/%E7%89%9B%E5%AE%A2%E7%BD%91-%E6%8B%BC%E5%A4%9A%E5%A4%9A2018%E7%AC%94%E8%AF%95-%E8%BF%B7%E5%AE%AB%E5%AF%BB%E8%B7%AF%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9bfs/ -&lt;p&gt;é¢˜ç›®æ¥æºï¼š&lt;a href=&#34;https://www.nowcoder.com/practice/e3fc4f8094964a589735d640424b6a47?tpId=90&amp;amp;tqId=30779&amp;amp;rp=1&amp;amp;ru=%2Fta%2F2018test&amp;amp;qru=%2Fta%2F2018test%2Fquestion-ranking&amp;amp;tPage=1&#34;&gt;è¿·å®«å¯»è·¯&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;é¢˜ç›®æè¿°&#34;&gt;é¢˜ç›®æè¿°&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å‡è®¾ä¸€ä¸ªæ¢é™©å®¶è¢«å›°åœ¨äº†åœ°åº•çš„è¿·å®«ä¹‹ä¸­ï¼Œè¦ä»å½“å‰ä½ç½®å¼€å§‹æ‰¾åˆ°ä¸€æ¡é€šå¾€è¿·å®«å‡ºå£çš„è·¯å¾„ã€‚è¿·å®«å¯ä»¥ç”¨ä¸€ä¸ªäºŒç»´çŸ©é˜µç»„æˆï¼Œæœ‰çš„éƒ¨åˆ†æ˜¯å¢™ï¼Œæœ‰çš„éƒ¨åˆ†æ˜¯è·¯ã€‚è¿·å®«ä¹‹ä¸­æœ‰çš„è·¯ä¸Šè¿˜æœ‰é—¨ï¼Œæ¯æ‰‡é—¨éƒ½åœ¨è¿·å®«çš„æŸä¸ªåœ°æ–¹æœ‰ä¸ä¹‹åŒ¹é…çš„é’¥åŒ™ï¼Œåªæœ‰å…ˆæ‹¿åˆ°é’¥åŒ™æ‰èƒ½æ‰“å¼€é—¨ã€‚è¯·è®¾è®¡ä¸€ä¸ªç®—æ³•ï¼Œå¸®åŠ©æ¢é™©å®¶æ‰¾åˆ°è„±å›°çš„æœ€çŸ­è·¯å¾„ã€‚å¦‚å‰æ‰€è¿°ï¼Œè¿·å®«æ˜¯é€šè¿‡ä¸€ä¸ªäºŒç»´çŸ©é˜µè¡¨ç¤ºçš„ï¼Œæ¯ä¸ªå…ƒç´ çš„å€¼çš„å«ä¹‰å¦‚ä¸‹ 0-å¢™ï¼Œ1-è·¯ï¼Œ2-æ¢é™©å®¶çš„èµ·å§‹ä½ç½®ï¼Œ3-è¿·å®«çš„å‡ºå£ï¼Œå¤§å†™å­—æ¯-é—¨ï¼Œå°å†™å­—æ¯-å¯¹åº”å¤§å†™å­—æ¯æ‰€ä»£è¡¨çš„é—¨çš„é’¥åŒ™&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;è¾“å…¥æè¿°&#34;&gt;è¾“å…¥æè¿°:&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿·å®«çš„åœ°å›¾ï¼Œç”¨äºŒç»´çŸ©é˜µè¡¨ç¤ºã€‚ç¬¬ä¸€è¡Œæ˜¯è¡¨ç¤ºçŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°Må’ŒN
åé¢çš„Mè¡Œæ˜¯çŸ©é˜µçš„æ•°æ®ï¼Œæ¯ä¸€è¡Œå¯¹åº”ä¸çŸ©é˜µçš„ä¸€è¡Œï¼ˆä¸­é—´æ²¡æœ‰ç©ºæ ¼ï¼‰ã€‚Må’ŒNéƒ½ä¸è¶…è¿‡100, é—¨ä¸è¶…è¿‡10æ‰‡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;è¾“å‡ºæè¿°&#34;&gt;è¾“å‡ºæè¿°:&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;è·¯å¾„çš„é•¿åº¦ï¼Œæ˜¯ä¸€ä¸ªæ•´æ•°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;è¾“å…¥&#34;&gt;è¾“å…¥&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;5 5
02111
01a0A
01003
01001
01111
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;è¾“å‡º&#34;&gt;è¾“å‡º&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;7
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ€è·¯&#34;&gt;æ€è·¯&lt;/h2&gt;
&lt;p&gt;ç®€å•çŠ¶å‹ï¼Œåˆ©ç”¨10ä¸ªäºŒè¿›åˆ¶ä½ï¼Œé‡åˆ°ä¸€ä¸ªé—¨ï¼Œæ£€æŸ¥ä¸€ä¸‹èƒ½ä¸èƒ½å¼€é—¨ï¼Œä¸èƒ½å¼€é—¨å°±ä¸èƒ½èµ°ã€‚é‡åˆ°é’¥åŒ™çš„æ—¶å€™ç”¨ä½è¿ç®—ã€Œæˆ–ã€æŠŠè¿™ä¸ªçŠ¶æ€æ·»åŠ è¿›å»ï¼Œbfs æœå‡ºæ¥çš„å°±æ˜¯ç»“æœã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç &#34;&gt;ä»£ç &lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;36
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;37
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;38
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;39
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;40
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;41
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;42
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;43
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;44
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;45
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;46
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;47
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;48
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;49
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;50
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;51
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;52
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;53
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;54
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;55
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;56
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;57
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;58
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;59
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;60
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;61
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;62
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;63
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;64
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;65
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;66
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;67
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;68
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;69
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;70
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;71
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;72
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;73
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;74
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;75
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;76
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;77
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;78
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;79
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;bits/stdc++.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;using&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;namespace&lt;/span&gt; std;
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;typedef&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; ll;
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; inf = &lt;span style=&#34;color:#b452cd&#34;&gt;0x3f3f3f3f&lt;/span&gt;;
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; N = &lt;span style=&#34;color:#b452cd&#34;&gt;100&lt;/span&gt; + &lt;span style=&#34;color:#b452cd&#34;&gt;10&lt;/span&gt;;
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; n, m, sx, sy, ex, ey, minn = inf;
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; s[N][N];
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; vis[N][N][(&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;10&lt;/span&gt;) + &lt;span style=&#34;color:#b452cd&#34;&gt;10&lt;/span&gt;];
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; go[&lt;span style=&#34;color:#b452cd&#34;&gt;4&lt;/span&gt;][&lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;] = {&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;, -&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;, -&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;};
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;node&lt;/span&gt;
{
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; x, y, step, key;
    node() {}
    node(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; _x, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; _y, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; _step, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; _key)
    {
        x = _x, y = _y, step = _step, key = _key;
    }
};
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;pd&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; x, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; y)
{
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (x &amp;gt;= &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;amp;&amp;amp; x &amp;lt;= n &amp;amp;&amp;amp; y &amp;gt;= &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;amp;&amp;amp; y &amp;lt;= m)
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
}
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;bfs&lt;/span&gt;()
{
    node now(sx, sy, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;), to;
    vis[sx][sy][&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;] = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
    queue&amp;lt;node&amp;gt; q;
    q.push(now);
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (!q.empty())
    {
        now = q.front();
        q.pop();
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (now.x == ex &amp;amp;&amp;amp; now.y == ey)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; now.step;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;4&lt;/span&gt;; i++)
        {
            to.x = now.x + go[i][&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;];
            to.y = now.y + go[i][&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;];
            to.step = now.step + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
            to.key = now.key;
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (pd(to.x, to.y) &amp;amp;&amp;amp; s[to.x][to.y] != &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &amp;amp;&amp;amp; !vis[to.x][to.y][to.key])
            {
                &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (s[to.x][to.y] &amp;gt;= &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;A&amp;#39;&lt;/span&gt; &amp;amp;&amp;amp; s[to.x][to.y] &amp;lt;= &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;Z&amp;#39;&lt;/span&gt;)
                {
                    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; key = to.key | (&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; (s[to.x][to.y] - &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;A&amp;#39;&lt;/span&gt;));
                    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (key != to.key)
                        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;continue&lt;/span&gt;;
                }
                &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (s[to.x][to.y] &amp;gt;= &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;a&amp;#39;&lt;/span&gt; &amp;amp;&amp;amp; s[to.x][to.y] &amp;lt;= &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;z&amp;#39;&lt;/span&gt;)
                {
                    to.key |= (&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; (s[to.x][to.y] - &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;a&amp;#39;&lt;/span&gt;));
                }
                vis[to.x][to.y][to.key] = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
                q.push(to);
            }
        }
    }
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
}
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;main&lt;/span&gt;()
{
    &lt;span style=&#34;color:#228b22&#34;&gt;//freopen(&amp;#34;in.txt&amp;#34;, &amp;#34;r&amp;#34;, stdin);
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;    scanf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;%d%d&amp;#34;&lt;/span&gt;, &amp;amp;n, &amp;amp;m);
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;; i &amp;lt;= n; i++)
    {
        scanf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;%s&amp;#34;&lt;/span&gt;, s[i] + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;);
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; j = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;; j &amp;lt;= m; j++)
        {
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (s[i][j] == &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;2&amp;#39;&lt;/span&gt;)
                sx = i, sy = j;
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (s[i][j] == &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;3&amp;#39;&lt;/span&gt;)
                ex = i, ey = j;
        }
    }
    printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;%d&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;, bfs());
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;- https://caixiongjiang.github.io/blog/2019/%E7%89%9B%E5%AE%A2%E7%BD%91-%E6%8B%BC%E5%A4%9A%E5%A4%9A2018%E7%AC%94%E8%AF%95-%E8%BF%B7%E5%AE%AB%E5%AF%BB%E8%B7%AF%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9bfs/ - </description>
        </item>
    
    
    
        <item>
        <title>ã€ŠTCP/IPç½‘ç»œç¼–ç¨‹ã€‹ç¬¬ 9 ç«  å¥—æ¥å­—çš„å¤šç§å¯é€‰é¡¹ ç¬”è®°</title>
        <link>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-9-%E7%AB%A0-%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E5%A4%9A%E7%A7%8D%E5%8F%AF%E9%80%89%E9%A1%B9-%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Sat, 19 Jan 2019 17:37:05 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-9-%E7%AB%A0-%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E5%A4%9A%E7%A7%8D%E5%8F%AF%E9%80%89%E9%A1%B9-%E7%AC%94%E8%AE%B0/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-9-%E7%AB%A0-%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E5%A4%9A%E7%A7%8D%E5%8F%AF%E9%80%89%E9%A1%B9-%E7%AC%94%E8%AE%B0/ -&lt;h2 id=&#34;ç¬¬-9-ç« -å¥—æ¥å­—çš„å¤šç§å¯é€‰é¡¹&#34;&gt;ç¬¬ 9 ç«  å¥—æ¥å­—çš„å¤šç§å¯é€‰é¡¹&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä»£ç ï¼Œåœ¨&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote&#34;&gt;TCP-IP-NetworkNote&lt;/a&gt;ä¸­å¯ä»¥æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;91-å¥—æ¥å­—å¯é€‰é¡¹å’Œ-io-ç¼“å†²å¤§å°&#34;&gt;9.1 å¥—æ¥å­—å¯é€‰é¡¹å’Œ I/O ç¼“å†²å¤§å°&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬è¿›è¡Œå¥—æ¥å­—ç¼–ç¨‹æ—¶å¾€å¾€åªå…³æ³¨æ•°æ®é€šä¿¡ï¼Œè€Œå¿½ç•¥äº†å¥—æ¥å­—å…·æœ‰çš„ä¸åŒç‰¹æ€§ã€‚ä½†æ˜¯ï¼Œç†è§£è¿™äº›ç‰¹æ€§å¹¶æ ¹æ®å®é™…éœ€è¦è¿›è¡Œæ›´æ”¹ä¹Ÿå¾ˆé‡è¦&lt;/p&gt;
&lt;h4 id=&#34;911-å¥—æ¥å­—å¤šç§å¯é€‰é¡¹&#34;&gt;9.1.1 å¥—æ¥å­—å¤šç§å¯é€‰é¡¹&lt;/h4&gt;
&lt;p&gt;æˆ‘ä»¬ä¹‹å‰å†™å¾—ç¨‹åºéƒ½æ˜¯åˆ›å»ºå¥½å¥—æ¥å­—ä¹‹åç›´æ¥ä½¿ç”¨çš„ï¼Œæ­¤æ—¶é€šè¿‡é»˜è®¤çš„å¥—æ¥å­—ç‰¹æ€§è¿›è¡Œæ•°æ®é€šä¿¡ï¼Œè¿™é‡Œåˆ—å‡ºäº†ä¸€äº›å¥—æ¥å­—å¯é€‰é¡¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;åè®®å±‚&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;é€‰é¡¹å&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;è¯»å–&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;è®¾ç½®&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SOL_SOCKET&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SO_SNDBUF&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SOL_SOCKET&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SO_RCVBUF&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SOL_SOCKET&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SO_REUSEADDR&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SOL_SOCKET&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SO_KEEPALIVE&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SOL_SOCKET&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SO_BROADCAST&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SOL_SOCKET&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SO_DONTROUTE&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SOL_SOCKET&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SO_OOBINLINE&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SOL_SOCKET&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SO_ERROR&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;X&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SOL_SOCKET&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;SO_TYPE&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;X&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IPPROTO_IP&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IP_TOS&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IPPROTO_IP&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IP_TTL&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IPPROTO_IP&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IP_MULTICAST_TTL&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IPPROTO_IP&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IP_MULTICAST_LOOP&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IPPROTO_IP&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IP_MULTICAST_IF&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IPPROTO_TCP&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;TCP_KEEPALIVE&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IPPROTO_TCP&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;TCP_NODELAY&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IPPROTO_TCP&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;TCP_MAXSEG&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä»è¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¥—æ¥å­—å¯é€‰é¡¹æ˜¯åˆ†å±‚çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;IPPROTO_IP å¯é€‰é¡¹æ˜¯IPåè®®ç›¸å…³äº‹é¡¹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IPPROTO_TCP å±‚å¯é€‰é¡¹æ˜¯ TCP åè®®çš„ç›¸å…³äº‹é¡¹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SOL_SOCKET å±‚æ˜¯å¥—æ¥å­—çš„é€šç”¨å¯é€‰é¡¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;912-getsockopt--setsockopt&#34;&gt;9.1.2 &lt;code&gt;getsockopt&lt;/code&gt; &amp;amp; &lt;code&gt;setsockopt&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;å¯é€‰é¡¹çš„è¯»å–å’Œè®¾ç½®é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°æ¥å®Œæˆ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;getsockopt&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; sock, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; level, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; optname, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; *optval, socklen_t *optlen);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å› 0 ï¼Œå¤±è´¥æ—¶è¿”å› -1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;sock: ç”¨äºæŸ¥çœ‹é€‰é¡¹å¥—æ¥å­—æ–‡ä»¶æè¿°ç¬¦
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;level: è¦æŸ¥çœ‹çš„å¯é€‰é¡¹åè®®å±‚
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;optname: è¦æŸ¥çœ‹çš„å¯é€‰é¡¹å
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;optval: ä¿å­˜æŸ¥çœ‹ç»“æœçš„ç¼“å†²åœ°å€å€¼
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;optlen: å‘ç¬¬å››ä¸ªå‚æ•°ä¼ é€’çš„ç¼“å†²å¤§å°ã€‚è°ƒç”¨å‡½æ•°å€™ï¼Œè¯¥å˜é‡ä¸­ä¿å­˜é€šè¿‡ç¬¬å››ä¸ªå‚æ•°è¿”å›çš„å¯é€‰é¡¹ä¿¡æ¯çš„å­—èŠ‚æ•°ã€‚
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸Šè¿°å‡½æ•°å¯ä»¥ç”¨æ¥è¯»å–å¥—æ¥å­—å¯é€‰é¡¹ï¼Œä¸‹é¢çš„å‡½æ•°å¯ä»¥æ›´æ”¹å¯é€‰é¡¹ï¼šd&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;setsockopt&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; sock, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; level, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; optname, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; *optval, socklen_t optlen);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å› 0 ï¼Œå¤±è´¥æ—¶è¿”å› -1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;sock: ç”¨äºæ›´æ”¹é€‰é¡¹å¥—æ¥å­—æ–‡ä»¶æè¿°ç¬¦
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;level: è¦æ›´æ”¹çš„å¯é€‰é¡¹åè®®å±‚
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;optname: è¦æ›´æ”¹çš„å¯é€‰é¡¹å
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;optval: ä¿å­˜æ›´æ”¹ç»“æœçš„ç¼“å†²åœ°å€å€¼
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;optlen: å‘ç¬¬å››ä¸ªå‚æ•°ä¼ é€’çš„ç¼“å†²å¤§å°ã€‚è°ƒç”¨å‡½æ•°å€™ï¼Œè¯¥å˜é‡ä¸­ä¿å­˜é€šè¿‡ç¬¬å››ä¸ªå‚æ•°è¿”å›çš„å¯é€‰é¡¹ä¿¡æ¯çš„å­—èŠ‚æ•°ã€‚
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸‹é¢çš„ä»£ç å¯ä»¥çœ‹å‡º getsockopt çš„ä½¿ç”¨æ–¹æ³•ã€‚ä¸‹é¢ç¤ºä¾‹ç”¨åè®®å±‚ä¸º SOL_SOCKET ã€åä¸º SO_TYPE çš„å¯é€‰é¡¹æŸ¥çœ‹å¥—æ¥å­—ç±»å‹ï¼ˆTCP å’Œ UDP ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch09/sock_type.c&#34;&gt;sock_type.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc sock_type.c -o sock_type
./sock_type
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»“æœï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;SOCK_STREAM: 1
SOCK_DGRAM: 2
Socket type one: 1
Socket type two: 2
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª TCP å¥—æ¥å­—å’Œä¸€ä¸ª UDP å¥—æ¥å­—ã€‚ç„¶åé€šè¿‡è°ƒç”¨ getsockopt å‡½æ•°æ¥è·å¾—å½“å‰å¥—æ¥å­—çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;éªŒè¯å¥—æ¥ç±»å‹çš„ SO_TYPE æ˜¯åªè¯»å¯é€‰é¡¹ï¼Œå› ä¸º&lt;strong&gt;å¥—æ¥å­—ç±»å‹åªèƒ½åœ¨åˆ›å»ºæ—¶å†³å®šï¼Œä»¥åä¸èƒ½å†æ›´æ”¹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;913-so_sndbuf--so_rcvbuf&#34;&gt;9.1.3 &lt;code&gt;SO_SNDBUF&lt;/code&gt; &amp;amp; &lt;code&gt;SO_RCVBUF&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;åˆ›å»ºå¥—æ¥å­—çš„åŒæ—¶ä¼šç”Ÿæˆ I/O ç¼“å†²ã€‚å…³äº I/O ç¼“å†²ï¼Œå¯ä»¥å»çœ‹ç¬¬äº”ç« ã€‚&lt;/p&gt;
&lt;p&gt;SO_RCVBUF æ˜¯è¾“å…¥ç¼“å†²å¤§å°ç›¸å…³å¯é€‰é¡¹ï¼ŒSO_SNDBUF æ˜¯è¾“å‡ºç¼“å†²å¤§å°ç›¸å…³å¯é€‰é¡¹ã€‚ç”¨è¿™ 2 ä¸ªå¯é€‰é¡¹æ—¢å¯ä»¥è¯»å–å½“å‰ I/O å¤§å°ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œæ›´æ”¹ã€‚é€šè¿‡ä¸‹åˆ—ç¤ºä¾‹è¯»å–åˆ›å»ºå¥—æ¥å­—æ—¶é»˜è®¤çš„ I/O ç¼“å†²å¤§å°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch09/get_buf.c&#34;&gt;get_buf.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc get_buf.c -o getbuf
./getbuf
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿è¡Œç»“æœï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Input buffer size: 87380
Output buffer size: 16384
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹å‡ºæœ¬æœºçš„è¾“å…¥ç¼“å†²å’Œè¾“å‡ºç¼“å†²å¤§å°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†ï¼Œé€šè¿‡ç¨‹åºè®¾ç½® I/O ç¼“å†²åŒºçš„å¤§å°&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch09/set_buf.c&#34;&gt;set_buf.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc get_buf.c -o setbuf
./setbuf
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»“æœ:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Input buffer size: 6144
Output buffer size: 6144
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¾“å‡ºç»“æœå’Œæˆ‘ä»¬é¢„æƒ³çš„ä¸æ˜¯å¾ˆç›¸åŒï¼Œç¼“å†²å¤§å°çš„è®¾ç½®éœ€è°¨æ…å¤„ç†ï¼Œå› æ­¤ä¸ä¼šå®Œå…¨æŒ‰ç…§æˆ‘ä»¬çš„è¦æ±‚è¿›è¡Œã€‚&lt;/p&gt;
&lt;h3 id=&#34;92-so_reuseaddr&#34;&gt;9.2 &lt;code&gt;SO_REUSEADDR&lt;/code&gt;&lt;/h3&gt;
&lt;h4 id=&#34;921-å‘ç”Ÿåœ°å€åˆ†é…é”™è¯¯binding-error&#34;&gt;9.2.1 å‘ç”Ÿåœ°å€åˆ†é…é”™è¯¯ï¼ˆBinding Errorï¼‰&lt;/h4&gt;
&lt;p&gt;åœ¨å­¦ä¹  SO_REUSEADDR å¯é€‰é¡¹ä¹‹å‰ï¼Œåº”è¯¥å¥½å¥½ç†è§£ Time-wait çŠ¶æ€ã€‚çœ‹ä»¥ä¸‹ä»£ç çš„ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch09/reuseadr_eserver.c&#34;&gt;reuseadr_eserver.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªå›å£°æœåŠ¡å™¨çš„æœåŠ¡ç«¯ä»£ç ï¼Œå¯ä»¥é…åˆç¬¬å››ç« çš„ &lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch04/echo_client.c&#34;&gt;echo_client.c&lt;/a&gt; ä½¿ç”¨ï¼Œåœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œå®¢æˆ·ç«¯é€šçŸ¥æœåŠ¡å™¨ç»ˆæ­¢ç¨‹åºã€‚åœ¨å®¢æˆ·ç«¯æ§åˆ¶å°è¾“å…¥ Q å¯ä»¥ç»“æŸç¨‹åºï¼Œå‘æœåŠ¡å™¨å‘é€ FIN æ¶ˆæ¯å¹¶ç»è¿‡å››æ¬¡æ¡æ‰‹è¿‡ç¨‹ã€‚å½“ç„¶ï¼Œè¾“å…¥ CTRL+C ä¹Ÿä¼šå‘æœåŠ¡å™¨ä¼ é€’ FIN ä¿¡æ¯ã€‚å¼ºåˆ¶ç»ˆæ­¢ç¨‹åºæ—¶ï¼Œç”±æ“ä½œç³»ç»Ÿå…³é—­æ–‡ä»¶å¥—æ¥å­—ï¼Œæ­¤è¿‡ç¨‹ç›¸å½“äºè°ƒç”¨ close å‡½æ•°ï¼Œä¹Ÿä¼šå‘æœåŠ¡å™¨å‘é€ FIN æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·çœ‹ä¸åˆ°æ˜¯ä»€ä¹ˆç‰¹æ®Šç°è±¡ï¼Œè€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯éƒ½å·²ç»å»ºç«‹è¿æ¥çš„çŠ¶æ€ä¸‹ï¼Œå‘æœåŠ¡å™¨æ§åˆ¶å°è¾“å…¥ CTRL+C ï¼Œå¼ºåˆ¶å…³é—­æœåŠ¡ç«¯&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœç”¨è¿™ç§æ–¹å¼ç»ˆæ­¢ç¨‹åºï¼Œå¦‚æœç”¨åŒä¸€ç«¯å£å·å†æ¬¡è¿è¡ŒæœåŠ¡ç«¯ï¼Œå°±ä¼šè¾“å‡ºã€Œbind() errorã€æ¶ˆæ¯ï¼Œå¹¶ä¸”æ— æ³•å†æ¬¡è¿è¡Œã€‚ä½†æ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå†è¿‡å¤§çº¦ 3 åˆ†é’Ÿå°±å¯ä»¥é‡æ–°è¿è¡ŒæœåŠ¡ç«¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;922-time-wait-çŠ¶æ€&#34;&gt;9.2.2 &lt;code&gt;Time-wait&lt;/code&gt; çŠ¶æ€&lt;/h4&gt;
&lt;p&gt;è§‚å¯Ÿä»¥ä¸‹è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/19/5c42db182cade.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾å›¾ä¸­ä¸»æœº A æ˜¯æœåŠ¡å™¨ï¼Œå› ä¸ºæ˜¯ä¸»æœº A å‘ B å‘é€ FIN æ¶ˆæ¯ï¼Œæ•…å¯æƒ³è±¡æˆæœåŠ¡å™¨ç«¯åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ CTRL+C ã€‚ä½†æ˜¯é—®é¢˜æ˜¯ï¼Œå¥—æ¥å­—ç»è¿‡å››æ¬¡æ¡æ‰‹åå¹¶æ²¡æœ‰ç«‹å³æ¶ˆé™¤ï¼Œè€Œæ˜¯è¦ç»è¿‡ä¸€æ®µæ—¶é—´çš„ Time-wait çŠ¶æ€ã€‚å½“ç„¶ï¼Œåªæœ‰å…ˆæ–­å¼€è¿æ¥çš„ï¼ˆå…ˆå‘é€ FIN æ¶ˆæ¯çš„ï¼‰ä¸»æœºæ‰ç»è¿‡ Time-wait çŠ¶æ€ã€‚å› æ­¤ï¼Œè‹¥æœåŠ¡å™¨ç«¯å…ˆæ–­å¼€è¿æ¥ï¼Œåˆ™æ— æ³•ç«‹å³é‡æ–°è¿è¡Œã€‚å¥—æ¥å­—å¤„åœ¨ Time-wait è¿‡ç¨‹æ—¶ï¼Œç›¸åº”ç«¯å£æ˜¯æ­£åœ¨ä½¿ç”¨çš„çŠ¶æ€ã€‚å› æ­¤ï¼Œå°±åƒä¹‹å‰éªŒè¯è¿‡çš„ï¼Œbind å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿé”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®é™…ä¸Šï¼Œä¸è®ºæ˜¯æœåŠ¡ç«¯è¿˜æ˜¯å®¢æˆ·ç«¯ï¼Œéƒ½è¦ç»è¿‡ä¸€æ®µæ—¶é—´çš„ Time-wait è¿‡ç¨‹ã€‚å…ˆæ–­å¼€è¿æ¥çš„å¥—æ¥å­—å¿…ç„¶ä¼šç»è¿‡ Time-wait è¿‡ç¨‹ï¼Œä½†æ˜¯ç”±äºå®¢æˆ·ç«¯å¥—æ¥å­—çš„ç«¯å£æ˜¯ä»»æ„åˆ¶å®šçš„ï¼Œæ‰€ä»¥æ— éœ€è¿‡å¤šå…³æ³¨ Time-wait çŠ¶æ€ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é‚£åˆ°åº•ä¸ºä»€ä¹ˆä¼šæœ‰ Time-wait çŠ¶æ€å‘¢ï¼Œåœ¨å›¾ä¸­å‡è®¾ï¼Œä¸»æœº A å‘ä¸»æœº B ä¼ è¾“ ACK æ¶ˆæ¯ï¼ˆSEQ 5001 , ACK 7502 ï¼‰åç«‹åˆ»æ¶ˆé™¤å¥—æ¥å­—ã€‚ä½†æ˜¯æœ€åè¿™æ¡ ACK æ¶ˆæ¯åœ¨ä¼ é€’è¿‡ç¨‹ä¸­ä¸¢å¤±ï¼Œæ²¡æœ‰ä¼ é€’ä¸»æœº B ï¼Œè¿™æ—¶ä¸»æœº B å°±ä¼šè¯•å›¾é‡ä¼ ã€‚ä½†æ˜¯æ­¤æ—¶ä¸»æœº A å·²ç»æ˜¯å®Œå…¨ç»ˆæ­¢çŠ¶æ€ï¼Œå› ä¸ºä¸»æœº B æ°¸è¿œæ— æ³•æ”¶åˆ°ä»ä¸»æœº A æœ€åä¼ æ¥çš„ ACK æ¶ˆæ¯ã€‚åŸºäºè¿™äº›é—®é¢˜çš„è€ƒè™‘ï¼Œæ‰€ä»¥è¦è®¾è®¡ Time-wait çŠ¶æ€ã€‚&lt;/p&gt;
&lt;h4 id=&#34;923-åœ°å€å†åˆ†é…&#34;&gt;9.2.3 åœ°å€å†åˆ†é…&lt;/h4&gt;
&lt;p&gt;Time-wait çŠ¶æ€çœ‹ä¼¼é‡è¦ï¼Œä½†æ˜¯ä¸ä¸€å®šè®¨äººå–œæ¬¢ã€‚å¦‚æœç³»ç»Ÿå‘ç”Ÿæ•…éšœç´§æ€¥åœæ­¢ï¼Œè¿™æ—¶éœ€è¦å°½å¿«é‡å¯æœåŠ¡èµ·ä»¥æä¾›æœåŠ¡ï¼Œä½†å› å¤„äº Time-wait çŠ¶æ€è€Œå¿…é¡»ç­‰å¾…å‡ åˆ†é’Ÿã€‚å› æ­¤ï¼ŒTime-wait å¹¶éåªæœ‰ä¼˜ç‚¹ï¼Œè¿™äº›æƒ…å†µä¸‹å®¹æ˜“å¼•å‘å¤§é—®é¢˜ã€‚ä¸‹å›¾ä¸­å±•ç¤ºäº†å››æ¬¡æ¡æ‰‹æ—¶ä¸å¾—ä¸å»¶é•¿ Time-wait è¿‡ç¨‹çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/19/5c42dec2ba42b.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä»å›¾ä¸Šå¯ä»¥çœ‹å‡ºï¼Œåœ¨ä¸»æœº A å››æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæœ€åçš„æ•°æ®ä¸¢å¤±ï¼Œåˆ™ä¸»æœº B ä¼šè®¤ä¸ºä¸»æœº A æœªèƒ½æ”¶åˆ°è‡ªå·±å‘é€çš„ FIN ä¿¡æ¯ï¼Œå› æ­¤é‡ä¼ ã€‚è¿™æ—¶ï¼Œæ”¶åˆ°çš„ FIN æ¶ˆæ¯çš„ä¸»æœº A å°†é‡å¯  Time-wait è®¡æ—¶å™¨ã€‚å› æ­¤ï¼Œå¦‚æœç½‘ç»œçŠ¶å†µä¸ç†æƒ³ï¼Œ Time-wait å°†æŒç»­ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆå°±æ˜¯åœ¨å¥—æ¥å­—çš„å¯é€‰é¡¹ä¸­æ›´æ”¹ SO_REUSEADDR çš„çŠ¶æ€ã€‚é€‚å½“è°ƒæ•´è¯¥å‚æ•°ï¼Œå¯å°† Time-wait çŠ¶æ€ä¸‹çš„å¥—æ¥å­—ç«¯å£å·é‡æ–°åˆ†é…ç»™æ–°çš„å¥—æ¥å­—ã€‚SO_REUSEADDR çš„é»˜è®¤å€¼ä¸º 0.è¿™å°±æ„å‘³ç€æ— æ³•åˆ†é… Time-wait çŠ¶æ€ä¸‹çš„å¥—æ¥å­—ç«¯å£å·ã€‚å› æ­¤éœ€è¦å°†è¿™ä¸ªå€¼æ”¹æˆ 1 ã€‚å…·ä½“ä½œæ³•å·²åœ¨ç¤ºä¾‹ &lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch09/reuseadr_eserver.c&#34;&gt;reuseadr_eserver.c&lt;/a&gt; ç»™å‡ºï¼Œåªéœ€è¦æŠŠæ³¨é‡Šæ‰çš„ä¸œè¥¿æ¥è§£é™¤æ³¨é‡Šå³å¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;optlen = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;sizeof&lt;/span&gt;(option);
option = TRUE;
setsockopt(serv_sock, SOL_SOCKET, SO_REUSEADDR, (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; *)&amp;amp;option, optlen);
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­¤æ—¶ï¼Œå·²ç»è§£å†³äº†ä¸Šè¿°é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;93-tcp_nodelay&#34;&gt;9.3 &lt;code&gt;TCP_NODELAY&lt;/code&gt;&lt;/h3&gt;
&lt;h4 id=&#34;931-nagle-ç®—æ³•&#34;&gt;9.3.1 &lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•&lt;/h4&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢å› æ•°æ®åŒ…è¿‡å¤šè€Œå‘ç”Ÿç½‘ç»œè¿‡è½½ï¼Œ&lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•è¯ç”Ÿäº†ã€‚å®ƒåº”ç”¨äº TCP å±‚ã€‚å®ƒæ˜¯å¦ä½¿ç”¨ä¼šå¯¼è‡´å¦‚å›¾æ‰€ç¤ºçš„å·®å¼‚ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/19/5c42e12abc5b8.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸­å±•ç¤ºäº†é€šè¿‡ &lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•å‘é€å­—ç¬¦ä¸² &lt;code&gt;Nagle&lt;/code&gt; å’Œæœªä½¿ç”¨ &lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•çš„å·®åˆ«ã€‚å¯ä»¥å¾—åˆ°ä¸€ä¸ªç»“è®ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åªæœ‰æ¥æ”¶åˆ°å‰ä¸€æ•°æ®çš„ ACK æ¶ˆæ¯ï¼Œ &lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•æ‰å‘é€ä¸‹ä¸€æ•°æ®ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;TCP å¥—æ¥å­—é»˜è®¤ä½¿ç”¨ &lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•äº¤æ¢æ•°æ®ï¼Œå› æ­¤æœ€å¤§é™åº¦çš„è¿›è¡Œç¼“å†²ï¼Œç›´åˆ°æ”¶åˆ° ACK ã€‚å·¦å›¾ä¹Ÿå°±æ˜¯è¯´ä¸€å…±ä¼ é€’ 4 ä¸ªæ•°æ®åŒ…ä»¥ä¼ è¾“ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä»å³å›¾å¯ä»¥çœ‹å‡ºï¼Œå‘é€æ•°æ®åŒ…ä¸€å…±ä½¿ç”¨äº† 10 ä¸ªæ•°æ®åŒ…ã€‚ç”±æ­¤å¯çŸ¥ï¼Œä¸ä½¿ç”¨ &lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•å°†å¯¹ç½‘ç»œæµé‡äº§ç”Ÿè´Ÿé¢å½±å“ã€‚å³ä½¿åªä¼ è¾“ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œå…¶å¤´ä¿¡æ¯éƒ½å¯èƒ½æ˜¯å‡ åä¸ªå­—èŠ‚ã€‚å› æ­¤ï¼Œä¸ºäº†æé«˜ç½‘ç»œä¼ è¾“æ•ˆç‡ï¼Œå¿…é¡»ä½¿ç”¨ &lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•å¹¶ä¸æ˜¯ä»€ä¹ˆæƒ…å†µä¸‹éƒ½é€‚ç”¨ï¼Œç½‘ç»œæµé‡æœªå—å¤ªå¤§å½±å“æ—¶ï¼Œä¸ä½¿ç”¨ &lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•è¦æ¯”ä½¿ç”¨å®ƒæ—¶ä¼ è¾“é€Ÿåº¦å¿«ã€‚æœ€å…¸å‹çš„å°±æ˜¯ã€Œä¼ è¾“å¤§æ–‡æ•°æ®ã€ã€‚å°†æ–‡ä»¶æ•°æ®ä¼ å…¥è¾“å‡ºç¼“å†²ä¸ä¼šèŠ±å¤ªå¤šæ—¶é—´ï¼Œå› æ­¤ï¼Œä¸ä½¿ç”¨ &lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•ï¼Œä¹Ÿä¼šåœ¨è£…æ»¡è¾“å‡ºç¼“å†²æ—¶ä¼ è¾“æ•°æ®åŒ…ã€‚è¿™ä¸ä»…ä¸ä¼šå¢åŠ æ•°æ®åŒ…çš„æ•°é‡ï¼Œåè€Œåœ¨æ— éœ€ç­‰å¾… ACK çš„å‰æä¸‹è¿ç»­ä¼ è¾“ï¼Œå› æ­¤å¯ä»¥å¤§å¤§æé«˜ä¼ è¾“é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œæœªå‡†ç¡®åˆ¤æ–­æ•°æ®æ€§è´¨æ—¶ä¸åº”ç¦ç”¨ &lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•ã€‚&lt;/p&gt;
&lt;h4 id=&#34;932-ç¦ç”¨-nagle-ç®—æ³•&#34;&gt;9.3.2 ç¦ç”¨ &lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•&lt;/h4&gt;
&lt;p&gt;ç¦ç”¨ &lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•åº”è¯¥ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; opt_val = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
setsockopt(sock, IPPROTO_TCP, TCP_NODELAY, (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; *)&amp;amp;opt_val, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;sizeof&lt;/span&gt;(opt_val));
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é€šè¿‡ TCP_NODELAY çš„å€¼æ¥æŸ¥çœ‹&lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•çš„è®¾ç½®çŠ¶æ€ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;opt_len = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;sizeof&lt;/span&gt;(opt_val);
getsockopt(sock, IPPROTO_TCP, TCP_NODELAY, (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; *)&amp;amp;opt_val, opt_len);
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœæ­£åœ¨ä½¿ç”¨&lt;code&gt;Nagle&lt;/code&gt; ç®—æ³•ï¼Œé‚£ä¹ˆ opt_val å€¼ä¸º 0ï¼Œå¦‚æœç¦ç”¨åˆ™ä¸º 1.&lt;/p&gt;
&lt;p&gt;å…³äºè¿™ä¸ªç®—æ³•ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªå›ç­”ï¼š&lt;a href=&#34;https://www.zhihu.com/question/42308970/answer/246334766&#34;&gt;TCPè¿æ¥ä¸­å¯ç”¨å’Œç¦ç”¨TCP_NODELAYæœ‰ä»€ä¹ˆå½±å“ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;94-åŸºäº-windows-çš„å®ç°&#34;&gt;9.4 åŸºäº Windows çš„å®ç°&lt;/h3&gt;
&lt;p&gt;æš‚ç•¥&lt;/p&gt;
&lt;h3 id=&#34;95-ä¹ é¢˜&#34;&gt;9.5 ä¹ é¢˜&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»¥ä¸‹ç­”æ¡ˆä»…ä»£è¡¨æœ¬äººä¸ªäººè§‚ç‚¹ï¼Œå¯èƒ½ä¸æ˜¯æ­£ç¡®ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸‹åˆ—å…³äº Time-wait çŠ¶æ€çš„è¯´æ³•é”™è¯¯çš„æ˜¯ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šä»¥ä¸‹å­—ä½“åŠ ç²—çš„ä»£è¡¨æ­£ç¡®ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Time-wait çŠ¶æ€åªåœ¨æœåŠ¡å™¨çš„å¥—æ¥å­—ä¸­å‘ç”Ÿ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–­å¼€è¿æ¥çš„å››æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼Œå…ˆä¼ è¾“ FIN æ¶ˆæ¯çš„å¥—æ¥å­—å°†è¿›å…¥ Time-wait çŠ¶æ€ã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Time-wait çŠ¶æ€ä¸æ–­å¼€è¿æ¥çš„è¿‡ç¨‹æ— å…³ï¼Œè€Œä¸è¯·æ±‚è¿æ¥è¿‡ç¨‹ä¸­ SYN æ¶ˆæ¯çš„ä¼ è¾“é¡ºåºæœ‰å…³&lt;/li&gt;
&lt;li&gt;Time-wait çŠ¶æ€é€šå¸¸å¹¶éå¿…è¦ï¼Œåº”å°½å¯èƒ½é€šè¿‡æ›´æ”¹å¥—æ¥å­—å¯é€‰é¡¹æ¥é˜²æ­¢å…¶å‘ç”Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;TCP_NODELAY å¯é€‰é¡¹ä¸ Nagle ç®—æ³•æœ‰å…³ï¼Œå¯é€šè¿‡å®ƒç¦ç”¨ Nagle ç®—æ³•ã€‚è¯·é—®ä½•æ—¶åº”è€ƒè™‘ç¦ç”¨ Nagle ç®—æ³•ï¼Ÿç»“åˆæ”¶å‘æ•°æ®çš„ç‰¹æ€§ç»™å‡ºè¯´æ˜ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šå½“ç½‘ç»œæµé‡æœªå—å¤ªå¤§å½±å“æ—¶ï¼Œä¸ä½¿ç”¨ Nagle ç®—æ³•è¦æ¯”ä½¿ç”¨å®ƒæ—¶ä¼ è¾“é€Ÿåº¦å¿«ï¼Œæ¯”å¦‚è¯´åœ¨ä¼ è¾“å¤§æ–‡ä»¶æ—¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
- https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-9-%E7%AB%A0-%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E5%A4%9A%E7%A7%8D%E5%8F%AF%E9%80%89%E9%A1%B9-%E7%AC%94%E8%AE%B0/ - </description>
        </item>
    
    
    
        <item>
        <title>ã€ŠTCP/IPç½‘ç»œç¼–ç¨‹ã€‹ç¬¬ 8 ç«  åŸŸååŠç½‘ç»œåœ°å€ ç¬”è®°</title>
        <link>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-8-%E7%AB%A0-%E5%9F%9F%E5%90%8D%E5%8F%8A%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80-%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Fri, 18 Jan 2019 18:09:27 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-8-%E7%AB%A0-%E5%9F%9F%E5%90%8D%E5%8F%8A%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80-%E7%AC%94%E8%AE%B0/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-8-%E7%AB%A0-%E5%9F%9F%E5%90%8D%E5%8F%8A%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80-%E7%AC%94%E8%AE%B0/ -&lt;h2 id=&#34;ç¬¬-8-ç« -åŸŸååŠç½‘ç»œåœ°å€&#34;&gt;ç¬¬ 8 ç«  åŸŸååŠç½‘ç»œåœ°å€&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä»£ç ï¼Œåœ¨&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote&#34;&gt;TCP-IP-NetworkNote&lt;/a&gt;ä¸­å¯ä»¥æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;81-åŸŸåç³»ç»Ÿ&#34;&gt;8.1 åŸŸåç³»ç»Ÿ&lt;/h3&gt;
&lt;p&gt;DNS æ˜¯å¯¹IPåœ°å€å’ŒåŸŸåè¿›è¡Œç›¸äº’è½¬æ¢çš„ç³»ç»Ÿï¼Œå…¶æ ¸å¿ƒæ˜¯ DNS æœåŠ¡å™¨&lt;/p&gt;
&lt;h4 id=&#34;811-ä»€ä¹ˆæ˜¯åŸŸå&#34;&gt;8.1.1 ä»€ä¹ˆæ˜¯åŸŸå&lt;/h4&gt;
&lt;p&gt;åŸŸåå°±æ˜¯æˆ‘ä»¬å¸¸å¸¸åœ¨åœ°å€æ é‡Œé¢è¾“å…¥çš„åœ°å€ï¼Œå°†æ¯”è¾ƒéš¾è®°å¿†çš„IPåœ°å€å˜æˆäººç±»å®¹æ˜“ç†è§£çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;812-dns-æœåŠ¡å™¨&#34;&gt;8.1.2 DNS æœåŠ¡å™¨&lt;/h4&gt;
&lt;p&gt;ç›¸å½“äºä¸€ä¸ªå­—å…¸ï¼Œå¯ä»¥æŸ¥è¯¢å‡ºæŸä¸€ä¸ªåŸŸåå¯¹åº”çš„IPåœ°å€&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/18/5c41854859ae3.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚å›¾æ‰€ç¤ºï¼Œæ˜¾ç¤ºäº† DNS æœåŠ¡å™¨çš„æŸ¥è¯¢è·¯å¾„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;82-ipåœ°å€å’ŒåŸŸåä¹‹é—´çš„è½¬æ¢&#34;&gt;8.2 IPåœ°å€å’ŒåŸŸåä¹‹é—´çš„è½¬æ¢&lt;/h3&gt;
&lt;h4 id=&#34;821-ç¨‹åºä¸­æœ‰å¿…è¦ä½¿ç”¨åŸŸåå—&#34;&gt;8.2.1 ç¨‹åºä¸­æœ‰å¿…è¦ä½¿ç”¨åŸŸåå—ï¼Ÿ&lt;/h4&gt;
&lt;p&gt;ä¸€å¥è¯ï¼Œéœ€è¦ï¼Œå› ä¸ºIPåœ°å€å¯èƒ½ç»å¸¸æ”¹å˜ï¼Œè€Œä¸”ä¹Ÿä¸å®¹æ˜“è®°å¿†ï¼Œé€šè¿‡åŸŸåå¯ä»¥éšæ—¶æ›´æ”¹è§£æï¼Œè¾¾åˆ°æ›´æ¢IPçš„ç›®çš„&lt;/p&gt;
&lt;h4 id=&#34;822-åˆ©ç”¨åŸŸåè·å–ipåœ°å€&#34;&gt;8.2.2 åˆ©ç”¨åŸŸåè·å–IPåœ°å€&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨ä»¥ä¸‹å‡½æ•°å¯ä»¥é€šè¿‡ä¼ é€’å­—ç¬¦ä¸²æ ¼å¼çš„åŸŸåè·å–IPåœ°å€&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;netdb.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; hostent *&lt;span style=&#34;color:#008b45&#34;&gt;gethostbyname&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *hostname);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å› hostent ç»“æ„ä½“åœ°å€ï¼Œå¤±è´¥æ—¶è¿”å› NULL æŒ‡é’ˆ
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™ä¸ªå‡½æ•°ä½¿ç”¨æ–¹ä¾¿ï¼Œåªè¦ä¼ é€’å­—ç¬¦ä¸²ï¼Œå°±å¯ä»¥è¿”å›åŸŸåå¯¹åº”çš„IPåœ°å€ã€‚åªæ˜¯è¿”å›æ—¶ï¼Œåœ°å€ä¿¡æ¯è£…å…¥ hostent ç»“æ„ä½“ã€‚æ­¤ç»“æ„ä½“çš„å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; hostent
{
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *h_name;       &lt;span style=&#34;color:#228b22&#34;&gt;/* Official name of host.  */&lt;/span&gt;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; **h_aliases;   &lt;span style=&#34;color:#228b22&#34;&gt;/* Alias list.  */&lt;/span&gt;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; h_addrtype;     &lt;span style=&#34;color:#228b22&#34;&gt;/* Host address type.  */&lt;/span&gt;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; h_length;       &lt;span style=&#34;color:#228b22&#34;&gt;/* Length of address.  */&lt;/span&gt;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; **h_addr_list; &lt;span style=&#34;color:#228b22&#34;&gt;/* List of addresses from name server.  */&lt;/span&gt;
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä»ä¸Šè¿°ç»“æ„ä½“å¯ä»¥çœ‹å‡ºï¼Œä¸æ­¢è¿”å›IPä¿¡æ¯ï¼ŒåŒäº‹è¿˜å¸¦ç€å…¶ä»–ä¿¡æ¯ä¸€èµ·è¿”å›ã€‚åŸŸåè½¬æ¢æˆIPæ—¶åªéœ€è¦å…³æ³¨ h_addr_list ã€‚ä¸‹é¢ç®€è¦è¯´æ˜ä¸Šè¿°ç»“æ„ä½“çš„æˆå‘˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;h_nameï¼šè¯¥å˜é‡ä¸­å­˜æœ‰å®˜æ–¹åŸŸåï¼ˆOfficial domain nameï¼‰ã€‚å®˜æ–¹åŸŸåä»£è¡¨æŸä¸€ä¸»é¡µï¼Œä½†å®é™…ä¸Šï¼Œä¸€äº›è‘—åå…¬å¸çš„åŸŸåå¹¶æ²¡æœ‰ç”¨å®˜æ–¹åŸŸåæ³¨å†Œã€‚&lt;/li&gt;
&lt;li&gt;h_aliasesï¼šå¯ä»¥é€šè¿‡å¤šä¸ªåŸŸåè®¿é—®åŒä¸€ä¸»é¡µã€‚åŒä¸€IPå¯ä»¥ç»‘å®šå¤šä¸ªåŸŸåï¼Œå› æ­¤ï¼Œé™¤å®˜æ–¹åŸŸåå¤–è¿˜å¯ä»¥æŒ‡å®šå…¶ä»–åŸŸåã€‚è¿™äº›ä¿¡æ¯å¯ä»¥é€šè¿‡ h_aliases è·å¾—ã€‚&lt;/li&gt;
&lt;li&gt;h_addrtypeï¼šgethostbyname å‡½æ•°ä¸ä»…æ”¯æŒ IPV4 è¿˜æ”¯æŒ IPV6 ã€‚å› æ­¤å¯ä»¥é€šè¿‡æ­¤å˜é‡è·å–ä¿å­˜åœ¨ h_addr_list çš„IPåœ°å€æ—ä¿¡æ¯ã€‚è‹¥æ˜¯ IPV4 ï¼Œåˆ™æ­¤å˜é‡ä¸­å­˜æœ‰ AF_INETã€‚&lt;/li&gt;
&lt;li&gt;h_lengthï¼šä¿å­˜IPåœ°å€é•¿åº¦ã€‚è‹¥æ˜¯ IPV4 åœ°å€ï¼Œå› ä¸ºæ˜¯ 4 ä¸ªå­—èŠ‚ï¼Œåˆ™ä¿å­˜4ï¼›IPV6 æ—¶ï¼Œå› ä¸ºæ˜¯ 16 ä¸ªå­—èŠ‚ï¼Œæ•…ä¿å­˜ 16&lt;/li&gt;
&lt;li&gt;h_addr_listï¼šè¿™ä¸ªæ˜¯æœ€é‡è¦çš„çš„æˆå‘˜ã€‚é€šè¿‡æ­¤å˜é‡ä»¥æ•´æ•°å½¢å¼ä¿å­˜åŸŸåç›¸å¯¹åº”çš„IPåœ°å€ã€‚å¦å¤–ï¼Œç”¨æˆ·æ¯”è¾ƒå¤šçš„ç½‘ç«™æœ‰å¯èƒ½åˆ†é…å¤šä¸ªIPåœ°å€ç»™åŒä¸€ä¸ªåŸŸåï¼Œåˆ©ç”¨å¤šä¸ªæœåŠ¡å™¨åšè´Ÿè½½å‡è¡¡ï¼Œã€‚æ­¤æ—¶å¯ä»¥é€šè¿‡æ­¤å˜é‡è·å–IPåœ°å€ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è°ƒç”¨ gethostbyname å‡½æ•°åï¼Œè¿”å›çš„ç»“æ„ä½“å˜é‡å¦‚å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/18/5c41898ae45e8.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„ä»£ç é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥æ¼”ç¤º gethostbyname çš„åº”ç”¨ï¼Œå¹¶è¯´æ˜ hostent ç»“æ„ä½“å˜é‡ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch08/gethostbyname.c&#34;&gt;gethostbyname.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc gethostbyname.c -o hostname
./hostname www.baidu.com
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/18/5c418faf20495.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚å›¾æ‰€ç¤ºï¼Œæ˜¾ç¤ºå‡ºäº†å¯¹ç™¾åº¦çš„åŸŸåè§£æ&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œç™¾åº¦æœ‰ä¸€ä¸ªåŸŸåè§£ææ˜¯ CNAME è§£æçš„ï¼ŒæŒ‡å‘äº†&lt;code&gt;shifen.com&lt;/code&gt;ï¼Œå…³äºç™¾åº¦å…·ä½“çš„è§£æè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™ä¸€éƒ¨åˆ†ç‰µæ‰¯åˆ°äº†å¾ˆå¤šå…³äºDNSè§£æçš„è¿‡ç¨‹ï¼Œè¿˜æœ‰ Linux ä¸‹å…³äºåŸŸåè§£æçš„ä¸€äº›å‘½ä»¤ï¼Œæˆ‘æ‰¾äº†ä¸€éƒ¨åˆ†èµ„æ–™ï¼Œå¯ä»¥ç‚¹ä¸‹é¢çš„é“¾æ¥æŸ¥çœ‹æ¯”è¾ƒè¯¦ç»†çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://zhan.renren.com/starshen?gid=3602888498023142484&amp;amp;checked=true&#34;&gt;å…³äºç™¾åº¦DNSçš„è§£æè¿‡ç¨‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zhihu.com/question/23042131/answer/66571369&#34;&gt;DNSè§£æçš„è¿‡ç¨‹æ˜¯ä»€ä¹ˆï¼Œæ±‚è¯¦ç»†çš„ï¼Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/45535596&#34;&gt;Linux DNS æŸ¥è¯¢å‰–æ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.live-in.org/archives/1938.html&#34;&gt;Linux DNSæŸ¥è¯¢å‘½ä»¤&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/shangdi1988/article/details/65713077&#34;&gt;Linuxä¸­DNSæœåŠ¡å™¨åœ°å€æŸ¥è¯¢å‘½ä»¤nslookupä½¿ç”¨æ•™ç¨‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.ruanyifeng.com/blog/2016/06/dns.html&#34;&gt;DNS åŸç†å…¥é—¨&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»”ç»†é˜…è¯»è¿™ä¸€æ®µä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;inet_ntoa(*(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; in_addr *)host-&amp;gt;h_addr_list[i])
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è‹¥åªçœ‹ hostent çš„å®šä¹‰ï¼Œç»“æ„ä½“æˆå‘˜ h_addr_list æŒ‡å‘å­—ç¬¦ä¸²æŒ‡é’ˆæ•°ç»„ï¼ˆç”±å¤šä¸ªå­—ç¬¦ä¸²åœ°å€æ„æˆçš„æ•°ç»„ï¼‰ã€‚ä½†æ˜¯å­—ç¬¦ä¸²æŒ‡é’ˆæ•°ç»„ä¿å­˜çš„å…ƒç´ å®é™…æŒ‡å‘çš„æ˜¯ in_addr ç»“æ„ä½“å˜é‡ä¸­åœ°å€å€¼è€Œéå­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯è¯´&lt;code&gt;(struct in_addr *)host-&amp;gt;h_addr_list[i]&lt;/code&gt;å…¶å®æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œç„¶åç”¨&lt;code&gt;*&lt;/code&gt;ç¬¦å·å–å…·ä½“çš„å€¼ã€‚å¦‚å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/18/5c419658a73b8.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;823-åˆ©ç”¨ipåœ°å€è·å–åŸŸå&#34;&gt;8.2.3 åˆ©ç”¨IPåœ°å€è·å–åŸŸå&lt;/h4&gt;
&lt;p&gt;è¯·çœ‹ä¸‹é¢çš„å‡½æ•°å®šä¹‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;netdb.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; hostent *&lt;span style=&#34;color:#008b45&#34;&gt;gethostbyaddr&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *addr, socklen_t len, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; family);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å› hostent ç»“æ„ä½“å˜é‡åœ°å€å€¼ï¼Œå¤±è´¥æ—¶è¿”å› NULL æŒ‡é’ˆ
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;addr: å«æœ‰IPåœ°å€ä¿¡æ¯çš„ in_addr ç»“æ„ä½“æŒ‡é’ˆã€‚ä¸ºäº†åŒæ—¶ä¼ é€’ IPV4 åœ°å€ä¹‹å¤–çš„å…¨éƒ¨ä¿¡æ¯ï¼Œè¯¥å˜é‡çš„ç±»å‹å£°æ˜ä¸º char æŒ‡é’ˆ
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;len: å‘ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’çš„åœ°å€ä¿¡æ¯çš„å­—èŠ‚æ•°ï¼ŒIPV4æ—¶ä¸º 4 ï¼ŒIPV6 æ—¶ä¸º16.
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;family: ä¼ é€’åœ°å€æ—ä¿¡æ¯ï¼Œipv4 æ˜¯ AF_INET ï¼ŒIPV6æ˜¯ AF_INET6
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸‹é¢çš„ä»£ç æ¼”ç¤ºä½¿ç”¨æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch08/gethostbyaddr.c&#34;&gt;gethostbyaddr.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc gethostbyaddr.c -o hostaddr
./hostaddr 8.8.8.8
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/18/5c41a019085d4.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä»å›¾ä¸Šå¯ä»¥çœ‹å‡ºï¼Œ&lt;code&gt;8.8.8.8&lt;/code&gt;è¿™ä¸ªIPåœ°å€æ˜¯è°·æ­Œçš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;83-åŸºäº-windows-çš„å®ç°&#34;&gt;8.3 åŸºäº Windows çš„å®ç°&lt;/h3&gt;
&lt;p&gt;æš‚ç•¥&lt;/p&gt;
&lt;h3 id=&#34;84-ä¹ é¢˜&#34;&gt;8.4 ä¹ é¢˜&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»¥ä¸‹ç­”æ¡ˆä»…ä»£è¡¨æœ¬äººä¸ªäººè§‚ç‚¹ï¼Œå¯èƒ½ä¸æ˜¯æ­£ç¡®ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸‹åˆ—å…³äºDNSçš„è¯´æ³•é”™è¯¯çš„æ˜¯ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šå­—ä½“åŠ ç²—çš„è¡¨ç¤ºæ­£ç¡®ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å› ä¸ºDNSä»å­˜åœ¨ï¼Œæ•…å¯ä»¥ä½¿ç”¨åŸŸåä»£æ›¿IP&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;DNSæœåŠ¡å™¨å®é™…ä¸Šæ˜¯è·¯ç”±å™¨ï¼Œå› ä¸ºè·¯ç”±å™¨æ ¹æ®åŸŸåå†³å®šæ•°æ®çš„è·¯å¾„&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰€æœ‰åŸŸåä¿¡æ¯å¹¶éé›†ä¸­ä¸ 1 å° DNS æœåŠ¡å™¨ï¼Œä½†å¯ä»¥è·å–æŸä¸€ DNS æœåŠ¡å™¨ä¸­æœªæ³¨å†Œçš„æ‰€æœ‰åœ°å€&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;DNS æœåŠ¡å™¨æ ¹æ®æ“ä½œç³»ç»Ÿè¿›è¡ŒåŒºåˆ†ï¼ŒWindows ä¸‹çš„ DNS æœåŠ¡å™¨å’Œ Linux ä¸‹çš„ DNS æœåŠ¡å™¨æ˜¯ä¸åŒçš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é˜…è¯»å¦‚ä¸‹å¯¹è¯ï¼Œå¹¶è¯´æ˜ä¸œç§€çš„æ–¹æ¡ˆæ˜¯å¦å¯è¡Œã€‚ï¼ˆå› ä¸ºå¯¹è¯çš„å­—å¤ªå¤šï¼Œç”¨å›¾ä»£æ›¿ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/18/5c41a22f35390.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šç­”æ¡ˆå°±æ˜¯å¯è¡Œï¼ŒDNS æœåŠ¡å™¨æ˜¯åˆ†å¸ƒå¼çš„ï¼Œä¸€å°åäº†å¯ä»¥æ‰¾å…¶ä»–çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†æµè§ˆå™¨åœ°å€è¾“å…¥ &lt;a href=&#34;http://www.orentec.co.kr&#34;&gt;www.orentec.co.kr&lt;/a&gt; ï¼Œå¹¶æ•´ç†å‡ºä¸»é¡µæ˜¾ç¤ºè¿‡ç¨‹ã€‚å‡è®¾æµè§ˆå™¨è®¿é—®é»˜è®¤ DNS æœåŠ¡å™¨ä¸­å¹¶æ²¡æœ‰å…³äº &lt;a href=&#34;http://www.orentec.co.kr&#34;&gt;www.orentec.co.kr&lt;/a&gt; çš„åœ°å€ä¿¡æ¯.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šå¯ä»¥å‚è€ƒä¸€ä¸‹çŸ¥ä¹å›ç­”ï¼Œ&lt;a href=&#34;https://www.zhihu.com/question/34873227/answer/518086565&#34;&gt;åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ä¸€ä¸ªURLåå›è½¦ï¼ŒèƒŒåä¼šè¿›è¡Œå“ªäº›æŠ€æœ¯æ­¥éª¤ï¼Ÿ&lt;/a&gt;,æˆ‘ç”¨æˆ‘è‡ªå·±çš„ç†è§£ï¼Œç®€å•è¯´ä¸€ä¸‹ï¼Œé¦–å…ˆä¼šå»å‘ä¸Šä¸€çº§çš„ DNS æœåŠ¡å™¨å»æŸ¥è¯¢ï¼Œé€šè¿‡è¿™ç§æ–¹å¼é€çº§å‘ä¸Šä¼ é€’ä¿¡æ¯ï¼Œä¸€ç›´åˆ°è¾¾æ ¹æœåŠ¡å™¨æ—¶ï¼Œå®ƒçŸ¥é“åº”è¯¥å‘å“ªä¸ª DNS æœåŠ¡å™¨å‘èµ·è¯¢é—®ã€‚å‘ä¸‹ä¼ é€’è§£æè¯·æ±‚ï¼Œå¾—åˆ°IPåœ°å€å€™åŸè·¯è¿”å›ï¼Œæœ€åä¼šå°†è§£æçš„IPåœ°å€ä¼ é€’åˆ°å‘èµ·è¯·æ±‚çš„ä¸»æœºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
- https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-8-%E7%AB%A0-%E5%9F%9F%E5%90%8D%E5%8F%8A%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80-%E7%AC%94%E8%AE%B0/ - </description>
        </item>
    
    
    
        <item>
        <title>ã€ŠTCP/IPç½‘ç»œç¼–ç¨‹ã€‹ç¬¬ 7 ç«  ä¼˜é›…çš„æ–­å¼€å¥—æ¥å­—çš„è¿æ¥ ç¬”è®°</title>
        <link>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-7-%E7%AB%A0-%E4%BC%98%E9%9B%85%E7%9A%84%E6%96%AD%E5%BC%80%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E8%BF%9E%E6%8E%A5-%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Fri, 18 Jan 2019 11:25:41 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-7-%E7%AB%A0-%E4%BC%98%E9%9B%85%E7%9A%84%E6%96%AD%E5%BC%80%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E8%BF%9E%E6%8E%A5-%E7%AC%94%E8%AE%B0/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-7-%E7%AB%A0-%E4%BC%98%E9%9B%85%E7%9A%84%E6%96%AD%E5%BC%80%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E8%BF%9E%E6%8E%A5-%E7%AC%94%E8%AE%B0/ -&lt;h2 id=&#34;ç¬¬-7-ç« -ä¼˜é›…çš„æ–­å¼€å¥—æ¥å­—çš„è¿æ¥&#34;&gt;ç¬¬ 7 ç«  ä¼˜é›…çš„æ–­å¼€å¥—æ¥å­—çš„è¿æ¥&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä»£ç ï¼Œåœ¨&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote&#34;&gt;TCP-IP-NetworkNote&lt;/a&gt;ä¸­å¯ä»¥æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç« è®¨è®ºå¦‚ä½•ä¼˜é›…çš„æ–­å¼€å¥—æ¥å­—çš„è¿æ¥ï¼Œä¹‹å‰ç”¨çš„æ–¹æ³•ä¸å¤Ÿä¼˜é›…æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬æ˜¯è°ƒç”¨ close å‡½æ•°æˆ– closesocket å‡½æ•°å•æ–¹é¢æ–­å¼€è¿æ¥çš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;71-åŸºäº-tcp-çš„åŠå…³é—­&#34;&gt;7.1 åŸºäº TCP çš„åŠå…³é—­&lt;/h3&gt;
&lt;p&gt;TCP çš„æ–­å¼€è¿æ¥è¿‡ç¨‹æ¯”å»ºç«‹è¿æ¥æ›´é‡è¦ï¼Œå› ä¸ºè¿æ¥è¿‡ç¨‹ä¸­ä¸€èˆ¬ä¸ä¼šå‡ºç°å¤§é—®é¢˜ï¼Œä½†æ˜¯æ–­å¼€è¿‡ç¨‹å¯èƒ½å‘ç”Ÿé¢„æƒ³ä¸åˆ°çš„æƒ…å†µã€‚å› æ­¤åº”è¯¥å‡†ç¡®æŒæ§ã€‚æ‰€ä»¥è¦&lt;strong&gt;æŒæ¡åŠå…³é—­ï¼ˆHalf-closeï¼‰&lt;/strong&gt;ï¼Œæ‰èƒ½æ˜ç¡®æ–­å¼€è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h4 id=&#34;711-å•æ–¹é¢æ–­å¼€è¿æ¥å¸¦æ¥çš„é—®é¢˜&#34;&gt;7.1.1 å•æ–¹é¢æ–­å¼€è¿æ¥å¸¦æ¥çš„é—®é¢˜&lt;/h4&gt;
&lt;p&gt;Linux å’Œ Windows çš„ closesocket å‡½æ•°æ„å‘³ç€å®Œå…¨æ–­å¼€è¿æ¥ã€‚å®Œå…¨æ–­å¼€ä¸ä»…æŒ‡æ— æ³•ä¼ è¾“æ•°æ®ï¼Œè€Œä¸”ä¹Ÿä¸èƒ½æ¥æ”¶æ•°æ®ã€‚å› æ­¤åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œé€šä¿¡ä¸€æ–¹å•æ–¹é¢çš„æ–­å¼€å¥—æ¥å­—è¿æ¥ï¼Œæ˜¾å¾—ä¸å¤ªä¼˜é›…ã€‚å¦‚å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/18/5c412a8baa2d8.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸­æè¿°çš„æ˜¯ 2 å°ä¸»æœºæ­£åœ¨è¿›è¡ŒåŒå‘é€šä¿¡ï¼Œä¸»æœº A å‘é€å®Œæœ€åçš„æ•°æ®åï¼Œè°ƒç”¨ close å‡½æ•°æ–­å¼€äº†æœ€åçš„è¿æ¥ï¼Œä¹‹åä¸»æœº A æ— æ³•å†æ¥å—ä¸»æœº B ä¼ è¾“çš„æ•°æ®ã€‚å®é™…ä¸Šï¼Œæ˜¯å®Œå…¨æ— æ³•è°ƒç”¨ä¸æ¥å—æ•°æ®ç›¸å…³çš„å‡½æ•°ã€‚æœ€ç»ˆï¼Œç”±ä¸»æœº B ä¼ è¾“çš„ã€ä¸»æœº A å¿…é¡»è¦æ¥å—çš„æ•°æ®ä¹Ÿé”€æ¯äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³è¿™ç±»é—®é¢˜ï¼Œã€Œåªå…³é—­ä¸€éƒ¨åˆ†æ•°æ®äº¤æ¢ä¸­ä½¿ç”¨çš„æµã€çš„æ–¹æ³•åº”è¿è€Œç”Ÿã€‚æ–­å¼€ä¸€éƒ¨åˆ†è¿æ¥æ˜¯æŒ‡ï¼Œå¯ä»¥ä¼ è¾“æ•°æ®ä½†æ˜¯æ— æ³•æ¥æ”¶ï¼Œæˆ–å¯ä»¥æ¥å—æ•°æ®ä½†æ— æ³•ä¼ è¾“ã€‚é¡¾åæ€ä¹‰å°±æ˜¯åªå…³é—­æµçš„ä¸€åŠã€‚&lt;/p&gt;
&lt;h4 id=&#34;712-å¥—æ¥å­—å’Œæµstream&#34;&gt;7.1.2 å¥—æ¥å­—å’Œæµï¼ˆStreamï¼‰&lt;/h4&gt;
&lt;p&gt;ä¸¤å°ä¸»æœºé€šè¿‡å¥—æ¥å­—å»ºç«‹è¿æ¥åè¿›å…¥å¯äº¤æ¢æ•°æ®çš„çŠ¶æ€ï¼Œåˆç§°ã€Œæµå½¢æˆçš„çŠ¶æ€ã€ã€‚ä¹Ÿå°±æ˜¯æŠŠå»ºç«‹å¥—æ¥å­—åå¯äº¤æ¢æ•°æ®çš„çŠ¶æ€çœ‹ä½œä¸€ç§æµã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤„çš„æµå¯ä»¥æ¯”ä½œæ°´æµã€‚æ°´æœç€ä¸€ä¸ªæ–¹å‘æµåŠ¨ï¼ŒåŒæ ·ï¼Œåœ¨å¥—æ¥å­—çš„æµä¸­ï¼Œæ•°æ®ä¹Ÿæ­¢å‘•èƒ½å‘ä¸€ä¸ªæ–¹å‘æµåŠ¨ã€‚å› æ­¤ï¼Œä¸ºäº†è¿›è¡ŒåŒå‘é€šä¿¡ï¼Œéœ€è¦å¦‚å›¾æ‰€ç¤ºçš„ä¸¤ä¸ªæµï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/18/5c412c3ba25dd.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦ä¸¤å°ä¸»æœºä¹‹é—´å»ºç«‹äº†å¥—æ¥å­—è¿æ¥ï¼Œæ¯ä¸ªä¸»æœºå°±ä¼šæ‹¥æœ‰å•ç‹¬çš„è¾“å…¥æµå’Œè¾“å‡ºæµã€‚å½“ç„¶ï¼Œå…¶ä¸­ä¸€ä¸ªä¸»æœºçš„è¾“å…¥æµä¸å¦ä¸€ä¸ªä¸»æœºçš„è¾“å‡ºæµç›¸è¿ï¼Œè€Œè¾“å‡ºæµåˆ™ä¸å¦ä¸€ä¸ªä¸»æœºçš„è¾“å…¥æµç›¸è¿ã€‚å¦å¤–ï¼Œæœ¬ç« è®¨è®ºçš„ã€Œä¼˜é›…çš„æ–­å¼€è¿æ¥æ–¹å¼ã€åªæ–­å¼€å…¶ä¸­ 1 ä¸ªæµï¼Œè€ŒéåŒæ—¶æ–­å¼€ä¸¤ä¸ªæµã€‚Linux å’Œ Windows çš„ closesocket å‡½æ•°å°†åŒæ—¶æ–­å¼€è¿™ä¸¤ä¸ªæµï¼Œå› æ­¤ä¸ã€Œä¼˜é›…ã€äºŒå­—è¿˜æœ‰ä¸€æ®µè·ç¦»ã€‚&lt;/p&gt;
&lt;h4 id=&#34;713-é’ˆå¯¹ä¼˜é›…æ–­å¼€çš„-shutdown-å‡½æ•°&#34;&gt;7.1.3 é’ˆå¯¹ä¼˜é›…æ–­å¼€çš„ shutdown å‡½æ•°&lt;/h4&gt;
&lt;p&gt;shutdown ç”¨æ¥å…³é—­å…¶ä¸­ä¸€ä¸ªæµï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;shutdown&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; sock, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; howto);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å› 0 ï¼Œå¤±è´¥æ—¶è¿”å› -1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;sock: éœ€è¦æ–­å¼€å¥—æ¥å­—æ–‡ä»¶æè¿°ç¬¦
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;howto: ä¼ é€’æ–­å¼€æ–¹å¼ä¿¡æ¯
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è°ƒç”¨ä¸Šè¿°å‡½æ•°æ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•°å†³å®šæ–­å¼€è¿æ¥çš„æ–¹å¼ï¼Œå…¶å€¼å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SHUT_RD&lt;/code&gt; : æ–­å¼€è¾“å…¥æµ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SHUT_WR&lt;/code&gt; : æ–­å¼€è¾“å‡ºæµ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SHUT_RDWR&lt;/code&gt; : åŒæ—¶æ–­å¼€ I/O æµ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è‹¥å‘ shutdown çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’&lt;code&gt;SHUT_RD&lt;/code&gt;ï¼Œåˆ™æ–­å¼€è¾“å…¥æµï¼Œå¥—æ¥å­—æ— æ³•æ¥æ”¶æ•°æ®ã€‚å³ä½¿è¾“å…¥ç¼“å†²æ”¶åˆ°æ•°æ®ä¹Ÿå›æŠ¹å»ï¼Œè€Œä¸”æ— æ³•è°ƒç”¨ç›¸å…³å‡½æ•°ã€‚å¦‚æœå‘  shutdown çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’&lt;code&gt;SHUT_WR&lt;/code&gt;ï¼Œåˆ™ä¸­æ–­è¾“å‡ºæµï¼Œä¹Ÿå°±æ— æ³•ä¼ è¾“æ•°æ®ã€‚è‹¥å¦‚æœè¾“å‡ºç¼“å†²ä¸­è¿˜æœ‰æœªä¼ è¾“çš„æ•°æ®ï¼Œåˆ™å°†ä¼ é€’ç»™ç›®æ ‡ä¸»æœºã€‚æœ€åï¼Œè‹¥ä¼ é€’å…³é”®å­—&lt;code&gt;SHUT_RDWR&lt;/code&gt;ï¼Œåˆ™åŒæ—¶ä¸­æ–­ I/O æµã€‚è¿™ç›¸å½“äºåˆ† 2 æ¬¡è°ƒç”¨ shutdown ï¼Œå…¶ä¸­ä¸€æ¬¡ä»¥&lt;code&gt;SHUT_RD&lt;/code&gt;ä¸ºå‚æ•°ï¼Œå¦ä¸€æ¬¡ä»¥&lt;code&gt;SHUT_WR&lt;/code&gt;ä¸ºå‚æ•°ã€‚&lt;/p&gt;
&lt;h4 id=&#34;714-ä¸ºä½•è¦åŠå…³é—­&#34;&gt;7.1.4 ä¸ºä½•è¦åŠå…³é—­&lt;/h4&gt;
&lt;p&gt;è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸€æ—¦å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°†çº¦å®šçš„æ–‡ä»¶ä¼ è¾“ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°åå‘é€å­—ç¬¦ä¸²ã€ŒThank youã€ç»™æœåŠ¡å™¨ç«¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ­¤å¤„ã€ŒThank youã€çš„ä¼ é€’æ˜¯å¤šä½™çš„ï¼Œè¿™åªæ˜¯ç”¨æ¥æ¨¡æ‹Ÿå®¢æˆ·ç«¯æ–­å¼€è¿æ¥å‰è¿˜æœ‰æ•°æ®è¦ä¼ è¾“çš„æƒ…å†µã€‚æ­¤æ—¶ç¨‹åºçš„è¿˜å«Œéš¾åº¦å¹¶ä¸å°ï¼Œå› ä¸ºä¼ è¾“æ–‡ä»¶çš„æœåŠ¡å™¨ç«¯åªéœ€è¿ç»­ä¼ è¾“æ–‡ä»¶æ•°æ®å³å¯ï¼Œè€Œå®¢æˆ·ç«¯æ— æ³•çŸ¥é“éœ€è¦æ¥æ”¶æ•°æ®åˆ°ä½•æ—¶ã€‚å®¢æˆ·ç«¯ä¹Ÿæ²¡åŠæ³•æ— ä¼‘æ­¢çš„è°ƒç”¨è¾“å…¥å‡½æ•°ï¼Œå› ä¸ºè¿™æœ‰å¯èƒ½å¯¼è‡´ç¨‹åº&lt;strong&gt;é˜»å¡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ˜¯å¦å¯ä»¥è®©æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çº¦å®šä¸€ä¸ªä»£è¡¨æ–‡ä»¶å°¾çš„å­—ç¬¦ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™ç§æ–¹å¼ä¹Ÿæœ‰é—®é¢˜ï¼Œå› ä¸ºè¿™æ„å‘³è¿™æ–‡ä»¶ä¸­ä¸èƒ½æœ‰ä¸çº¦å®šå­—ç¬¦ç›¸åŒçš„å†…å®¹ã€‚ä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼ŒæœåŠ¡ç«¯åº”æœ€åå‘å®¢æˆ·ç«¯ä¼ é€’ EOF è¡¨ç¤ºæ–‡ä»¶ä¼ è¾“ç»“æŸã€‚å®¢æˆ·ç«¯é€šè¿‡å‡½æ•°è¿”å›å€¼æ¥å— EOF ï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸æ–‡ä»¶å†…å®¹å†²çªã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒæœåŠ¡ç«¯å¦‚ä½•ä¼ é€’ EOF ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ–­å¼€è¾“å‡ºæµæ—¶å‘ä¸»æœºä¼ è¾“ EOFã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å½“ç„¶ï¼Œè°ƒç”¨ close å‡½æ•°çš„åŒæ—¶å…³é—­ I/O æµï¼Œè¿™æ ·ä¹Ÿä¼šå‘å¯¹æ–¹å‘é€ EOF ã€‚ä½†æ­¤æ—¶æ— æ³•å†æ¥å—å¯¹æ–¹ä¼ è¾“çš„æ•°æ®ã€‚æ¢è¨€ä¹‹ï¼Œè‹¥è°ƒç”¨ close å‡½æ•°å…³é—­æµï¼Œå°±æ— æ³•æ¥å—å®¢æˆ·ç«¯æœ€åå‘é€çš„å­—ç¬¦ä¸²ã€ŒThank youã€ã€‚è¿™æ—¶éœ€è¦è°ƒç”¨ shutdown å‡½æ•°ï¼Œåªå…³é—­æœåŠ¡å™¨çš„è¾“å‡ºæµã€‚è¿™æ ·æ—¢å¯ä»¥å‘é€ EOF ï¼ŒåŒæ—¶åˆä¿ç•™äº†è¾“å…¥æµã€‚ä¸‹é¢å®ç°æ”¶å‘æ–‡ä»¶çš„æœåŠ¡å™¨ç«¯/å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;715-åŸºäºåŠå…³é—­çš„æ–‡ä»¶ä¼ è¾“ç¨‹åº&#34;&gt;7.1.5 åŸºäºåŠå…³é—­çš„æ–‡ä»¶ä¼ è¾“ç¨‹åº&lt;/h4&gt;
&lt;p&gt;ä¸Šè¿°æ–‡ä»¶ä¼ è¾“æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯çš„æ•°æ®æµå¯ä»¥æ•´ç†å¦‚å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/18/5c41326280ab5.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„ä»£ç ä¸ºç¼–ç¨‹ç®€ä¾¿ï¼Œçœç•¥äº†å¤§é‡é”™è¯¯å¤„ç†ä»£ç ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch07/file_client.c&#34;&gt;file_client.c&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch07/file_server.c&#34;&gt;file_server.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc file_client.c -o fclient
gcc file_server.c -o fserver
./fserver &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
./fclient 127.0.0.1 &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/18/5c4140bc8db2f.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å®¢æˆ·ç«¯æ¥å—å®Œæˆåï¼ŒæœåŠ¡å™¨ä¼šæ¥æ”¶åˆ°æ¥è‡ªå®¢æˆ·ç«¯çš„æ„Ÿè°¢ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;72-åŸºäº-windows-çš„å®ç°&#34;&gt;7.2 åŸºäº Windows çš„å®ç°&lt;/h3&gt;
&lt;p&gt;æš‚ç•¥&lt;/p&gt;
&lt;h3 id=&#34;73-ä¹ é¢˜&#34;&gt;7.3 ä¹ é¢˜&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»¥ä¸‹ç­”æ¡ˆä»…ä»£è¡¨æœ¬äººä¸ªäººè§‚ç‚¹ï¼Œå¯èƒ½ä¸æ˜¯æ­£ç¡®ç­”æ¡ˆ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§£é‡Š TCP ä¸­ã€Œæµã€çš„æ¦‚å¿µã€‚UDP ä¸­èƒ½å¦å½¢æˆæµï¼Ÿè¯·è¯´æ˜åŸå› ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šä¸¤å°ä¸»æœºä¸­é€šè¿‡å¥—æ¥å­—å»ºç«‹è¿æ¥åè¿›å…¥å¯äº¤æ¢æ•°æ®çš„çŠ¶æ€ï¼Œåˆç§°ã€Œæµå½¢æˆçš„çŠ¶æ€ã€ã€‚ä¹Ÿå°±æ˜¯æŠŠå»ºç«‹å¥—æ¥å­—åå¯äº¤æ¢æ•°æ®çš„çŠ¶æ€çœ‹åšä¸€ç§æµã€‚UDP æ²¡æœ‰å»ºç«‹è¿æ¥çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥ä¸èƒ½å½¢æˆæµã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Linux ä¸­çš„ close å‡½æ•°æˆ– Windows ä¸­çš„ closesocket å‡½æ•°å±äºå•æ–¹é¢æ–­å¼€è¿æ¥çš„æ–¹æ³•ï¼Œæœ‰å¯èƒ½å¸¦æ¥ä¸€äº›é—®é¢˜ã€‚ä»€ä¹ˆæ˜¯å•æ–¹é¢æ–­å¼€è¿æ¥ï¼Ÿä»€ä¹ˆæƒ…å½¢ä¸‹ä¼šå‡ºç°é—®é¢˜ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šå•æ–¹é¢æ–­å¼€è¿æ¥å°±æ˜¯ä¸¤å°ä¸»æœºæ­£åœ¨é€šä¿¡ï¼Œå…¶ä¸­ä¸€å°ä¸»æœºå…³é—­äº†æ‰€æœ‰è¿æ¥ï¼Œé‚£ä¹ˆä¸€å°ä¸»æœºå‘å¦ä¸€å°ä¸»æœºä¼ è¾“çš„æ•°æ®å¯èƒ½ä¼šæ²¡æœ‰æ¥æ”¶åˆ°è€ŒæŸæ¯ã€‚ä¼ è¾“æ–‡ä»¶çš„æœåŠ¡å™¨åªéœ€è¿ç»­ä¼ è¾“æ–‡ä»¶æ•°æ®å³å¯ï¼Œè€Œå®¢æˆ·ç«¯ä¸çŸ¥é“éœ€è¦æ¥æ”¶æ•°æ®åˆ°ä½•æ—¶ã€‚å®¢æˆ·ç«¯ä¹Ÿæ²¡æœ‰åŠæ³•æ— ä¼‘æ­¢çš„è°ƒç”¨è¾“å…¥å‡½æ•°ã€‚ç°åœ¨éœ€è¦ä¸€ä¸ª EOF ä»£è¡¨æ•°æ®å·²ç»ä¼ è¾“å®Œæ¯•ï¼Œé‚£ä¹ˆè¿™æ—¶å°±éœ€è¦åŠå…³é—­ï¼ŒæœåŠ¡ç«¯æŠŠè‡ªå·±çš„è¾“å‡ºæµå…³äº†ï¼Œè¿™æ—¶å®¢æˆ·ç«¯å°±çŸ¥æ•°æ®å·²ç»ä¼ è¾“å®Œæ¯•ï¼Œå› ä¸ºæœåŠ¡ç«¯çš„è¾“å…¥æµè¿˜æ²¡å…³ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»™æœåŠ¡å™¨æ±‡æŠ¥ï¼Œæ¥æ”¶å®Œæ¯•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»€ä¹ˆæ˜¯åŠå…³é—­ï¼Ÿé’ˆå¯¹è¾“å‡ºæµæ‰§è¡ŒåŠå…³é—­çš„ä¸»æœºå¤„äºä½•ç§çŠ¶æ€ï¼ŸåŠå…³é—­ä¼šå¯¼è‡´å¯¹æ–¹ä¸»æœºæ¥æ”¶ä»€ä¹ˆæ¶ˆæ¯ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šåŠå…³é—­å°±æ˜¯æŠŠè¾“å…¥æµæˆ–è€…è¾“å‡ºæµå…³äº†ã€‚é’ˆå¯¹è¾“å‡ºæµæ‰§è¡ŒåŠå…³é—­çš„ä¸»æœºå¤„äºå¯ä»¥æ¥æ”¶æ•°æ®è€Œä¸èƒ½å‘é€æ•°æ®ã€‚åŠå…³é—­ä¼šå¯¼è‡´å¯¹æ–¹ä¸»æœºæ¥æ”¶ä¸€ä¸ª EOF æ–‡ä»¶ç»“æŸç¬¦ã€‚å¯¹æ–¹å°±çŸ¥é“ä½ çš„æ•°æ®å·²ç»ä¼ è¾“å®Œæ¯•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
- https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-7-%E7%AB%A0-%E4%BC%98%E9%9B%85%E7%9A%84%E6%96%AD%E5%BC%80%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E8%BF%9E%E6%8E%A5-%E7%AC%94%E8%AE%B0/ - </description>
        </item>
    
    
    
        <item>
        <title>ã€ŠTCP/IPç½‘ç»œç¼–ç¨‹ã€‹ç¬¬ 6 ç«  åŸºäº UDP çš„æœåŠ¡ç«¯/å®¢æˆ·ç«¯ ç¬”è®°</title>
        <link>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-6-%E7%AB%A0-%E5%9F%BA%E4%BA%8E-udp-%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%AB%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF-%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Thu, 17 Jan 2019 16:10:00 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-6-%E7%AB%A0-%E5%9F%BA%E4%BA%8E-udp-%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%AB%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF-%E7%AC%94%E8%AE%B0/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-6-%E7%AB%A0-%E5%9F%BA%E4%BA%8E-udp-%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%AB%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF-%E7%AC%94%E8%AE%B0/ -&lt;h2 id=&#34;ç¬¬-6-ç« -åŸºäº-udp-çš„æœåŠ¡ç«¯å®¢æˆ·ç«¯&#34;&gt;ç¬¬ 6 ç«  åŸºäº UDP çš„æœåŠ¡ç«¯/å®¢æˆ·ç«¯&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä»£ç ï¼Œåœ¨&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote&#34;&gt;TCP-IP-NetworkNote&lt;/a&gt;ä¸­å¯ä»¥æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;TCP æ˜¯å†…å®¹è¾ƒå¤šçš„ä¸€ä¸ªåè®®ï¼Œè€Œæœ¬ç« ä¸­çš„ UDP å†…å®¹è¾ƒå°‘ï¼Œä½†æ˜¯ä¹Ÿå¾ˆé‡è¦ã€‚&lt;/p&gt;
&lt;h3 id=&#34;61-ç†è§£-udp&#34;&gt;6.1 ç†è§£ UDP&lt;/h3&gt;
&lt;h4 id=&#34;611-udp-å¥—æ¥å­—çš„ç‰¹ç‚¹&#34;&gt;6.1.1 UDP å¥—æ¥å­—çš„ç‰¹ç‚¹&lt;/h4&gt;
&lt;p&gt;é€šè¿‡å¯„ä¿¡æ¥è¯´æ˜ UDP çš„å·¥ä½œåŸç†ï¼Œè¿™æ˜¯è®²è§£ UDP æ—¶ä½¿ç”¨çš„ä¼ ç»Ÿç¤ºä¾‹ï¼Œå®ƒä¸ UDP çš„ç‰¹ç‚¹å®Œå…¨ç›¸åŒã€‚å¯„ä¿¡å‰åº”ç°åœ¨ä¿¡å°ä¸Šå¡«å¥½å¯„ä¿¡äººå’Œæ”¶ä¿¡äººçš„åœ°å€ï¼Œä¹‹åè´´ä¸Šé‚®ç¥¨æ”¾è¿›é‚®ç­’å³å¯ã€‚å½“ç„¶ï¼Œä¿¡ä»¶çš„ç‰¹ç‚¹ä½¿æˆ‘ä»¬æ— æ³•ç¡®è®¤ä¿¡ä»¶æ˜¯å¦è¢«æ”¶åˆ°ã€‚é‚®å¯„è¿‡ç¨‹ä¸­ä¹Ÿå¯èƒ½å‘ç”Ÿä¿¡ä»¶ä¸¢å¤±çš„æƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¿¡ä»¶æ˜¯ä¸€ç§ä¸å¯é çš„ä¼ è¾“æ–¹å¼ï¼ŒUDP ä¹Ÿæ˜¯ä¸€ç§ä¸å¯é çš„æ•°æ®ä¼ è¾“æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸º UDP æ²¡æœ‰ TCP é‚£ä¹ˆå¤æ‚ï¼Œæ‰€ä»¥ç¼–ç¨‹éš¾åº¦æ¯”è¾ƒå°ï¼Œæ€§èƒ½ä¹Ÿæ¯” TCP é«˜ã€‚åœ¨æ›´é‡è§†æ€§èƒ½çš„æƒ…å†µä¸‹å¯ä»¥é€‰æ‹© UDP çš„ä¼ è¾“æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;TCP ä¸ UDP çš„åŒºåˆ«å¾ˆå¤§ä¸€éƒ¨åˆ†æ¥æºäºæµæ§åˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´ TCP çš„ç”Ÿå‘½åœ¨äºæµæ§åˆ¶ã€‚&lt;/p&gt;
&lt;h4 id=&#34;612-udp-çš„å·¥ä½œåŸç†&#34;&gt;6.1.2 UDP çš„å·¥ä½œåŸç†&lt;/h4&gt;
&lt;p&gt;å¦‚å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/17/5c3fd29c70bf2.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒIP çš„ä½œç”¨å°±æ˜¯è®©ç¦»å¼€ä¸»æœº B çš„ UDP æ•°æ®åŒ…å‡†ç¡®ä¼ é€’åˆ°ä¸»æœº A ã€‚ä½†æ˜¯æŠŠ UDP æ•°æ®åŒ…æœ€ç»ˆäº¤ç»™ä¸»æœº A çš„æŸä¸€ UDP å¥—æ¥å­—çš„è¿‡ç¨‹æ˜¯ç”± UDP å®Œæˆçš„ã€‚UDP çš„æœ€é‡è¦çš„ä½œç”¨å°±æ˜¯æ ¹æ®ç«¯å£å·å°†ä¼ åˆ°ä¸»æœºçš„æ•°æ®åŒ…äº¤ä»˜ç»™æœ€ç»ˆçš„ UDP å¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;h4 id=&#34;613-udp-çš„é«˜æ•ˆä½¿ç”¨&#34;&gt;6.1.3 UDP çš„é«˜æ•ˆä½¿ç”¨&lt;/h4&gt;
&lt;p&gt;UDP ä¹Ÿå…·æœ‰ä¸€å®šçš„å¯é æ€§ã€‚å¯¹äºé€šè¿‡ç½‘ç»œå®æ—¶ä¼ é€’çš„è§†é¢‘æˆ–è€…éŸ³é¢‘æ—¶æƒ…å†µæœ‰æ‰€ä¸åŒã€‚å¯¹äºå¤šåª’ä½“æ•°æ®è€Œè¨€ï¼Œä¸¢å¤±ä¸€éƒ¨åˆ†æ•°æ®ä¹Ÿæ²¡æœ‰å¤ªå¤§é—®é¢˜ï¼Œè¿™åªæ˜¯ä¼šæš‚æ—¶å¼•èµ·ç”»é¢æŠ–åŠ¨ï¼Œæˆ–è€…å‡ºç°ç»†å¾®çš„æ‚éŸ³ã€‚ä½†æ˜¯è¦æä¾›å®æ—¶æœåŠ¡ï¼Œé€Ÿåº¦å°±æˆä¸ºäº†ä¸€ä¸ªå¾ˆé‡è¦çš„å› ç´ ã€‚å› æ­¤æµæ§åˆ¶å°±æ˜¾å¾—æœ‰ä¸€ç‚¹å¤šä½™ï¼Œè¿™æ—¶å°±è¦è€ƒè™‘ä½¿ç”¨ UDP ã€‚TCP æ¯” UDP æ…¢çš„åŸå› ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ”¶å‘æ•°æ®å‰åè¿›è¡Œçš„è¿æ¥è®¾ç½®åŠæ¸…æ¥šè¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;æ”¶å‘è¿‡ç¨‹ä¸­ä¸ºä¿è¯å¯é æ€§è€Œæ·»åŠ çš„æµæ§åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœæ”¶å‘çš„æ•°æ®é‡å°ä½†æ˜¯éœ€è¦é¢‘ç¹è¿æ¥æ—¶ï¼ŒUDP æ¯” TCP æ›´é«˜æ•ˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;62-å®ç°åŸºäº-udp-çš„æœåŠ¡ç«¯å®¢æˆ·ç«¯&#34;&gt;6.2 å®ç°åŸºäº UDP çš„æœåŠ¡ç«¯/å®¢æˆ·ç«¯&lt;/h3&gt;
&lt;h4 id=&#34;621-udp-ä¸­çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ²¡æœ‰è¿æ¥&#34;&gt;6.2.1 UDP ä¸­çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ²¡æœ‰è¿æ¥&lt;/h4&gt;
&lt;p&gt;UDP ä¸­çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¸åƒ TCP é‚£æ ·åœ¨è¿æ¥çŠ¶æ€ä¸‹äº¤æ¢æ•°æ®ï¼Œå› æ­¤ä¸ TCP ä¸åŒï¼Œæ— éœ€ç»è¿‡è¿æ¥è¿‡ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¿…è°ƒç”¨ TCP è¿æ¥è¿‡ç¨‹ä¸­è°ƒç”¨çš„ listen å’Œ accept å‡½æ•°ã€‚UDP ä¸­åªæœ‰åˆ›å»ºå¥—æ¥å­—å’Œæ•°æ®äº¤æ¢çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h4 id=&#34;622-udp-æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å‡åªéœ€ä¸€ä¸ªå¥—æ¥å­—&#34;&gt;6.2.2 UDP æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å‡åªéœ€ä¸€ä¸ªå¥—æ¥å­—&lt;/h4&gt;
&lt;p&gt;TCP ä¸­ï¼Œå¥—æ¥å­—ä¹‹é—´åº”è¯¥æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚è‹¥è¦å‘ 10 ä¸ªå®¢æˆ·ç«¯æä¾›æœåŠ¡ï¼Œé™¤äº†å®ˆé—¨çš„æœåŠ¡å™¨å¥—æ¥å­—ä¹‹å¤–ï¼Œè¿˜éœ€è¦ 10 ä¸ªæœåŠ¡å™¨å¥—æ¥å­—ã€‚ä½†åœ¨ UDP ä¸­ï¼Œä¸ç®¡äº‹æœåŠ¡å™¨ç«¯è¿˜æ˜¯å®¢æˆ·ç«¯éƒ½åªéœ€è¦ 1 ä¸ªå¥—æ¥å­—ã€‚åªéœ€è¦ä¸€ä¸ª UDP å¥—æ¥å­—å°±å¯ä»¥å‘ä»»æ„ä¸»æœºä¼ è¾“æ•°æ®ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/17/5c3fd703f3c40.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸­å±•ç¤ºäº† 1 ä¸ª UDP å¥—æ¥å­—ä¸ 2 ä¸ªä¸åŒä¸»æœºäº¤æ¢æ•°æ®çš„è¿‡ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªéœ€ 1 ä¸ª UDP å¥—æ¥å­—å°±èƒ½å’Œå¤šå°ä¸»æœºè¿›è¡Œé€šä¿¡ã€‚&lt;/p&gt;
&lt;h4 id=&#34;623-åŸºäº-udp-çš„æ•°æ®-io-å‡½æ•°&#34;&gt;6.2.3 åŸºäº UDP çš„æ•°æ® I/O å‡½æ•°&lt;/h4&gt;
&lt;p&gt;åˆ›å»ºå¥½ TCP å¥—æ¥å­—ä»¥åï¼Œä¼ è¾“æ•°æ®æ—¶æ— éœ€åŠ ä¸Šåœ°å€ä¿¡æ¯ã€‚å› ä¸º TCP å¥—æ¥å­—å°†ä¿æŒä¸å¯¹æ–¹å¥—æ¥å­—çš„è¿æ¥ã€‚æ¢è¨€ä¹‹ï¼ŒTCP å¥—æ¥å­—çŸ¥é“ç›®æ ‡åœ°å€ä¿¡æ¯ã€‚ä½† UDP å¥—æ¥å­—ä¸ä¼šä¿æŒè¿æ¥çŠ¶æ€ï¼ˆUDP å¥—æ¥å­—åªæœ‰ç®€å•çš„é‚®ç­’åŠŸèƒ½ï¼‰ï¼Œå› æ­¤æ¯æ¬¡ä¼ è¾“æ•°æ®æ—¶éƒ½éœ€è¦æ·»åŠ ç›®æ ‡çš„åœ°å€ä¿¡æ¯ã€‚è¿™ç›¸å½“äºå¯„ä¿¡å‰åœ¨ä¿¡ä»¶ä¸­å¡«å†™åœ°å€ã€‚æ¥ä¸‹æ¥æ˜¯ UDP çš„ç›¸å…³å‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;ssize_t &lt;span style=&#34;color:#008b45&#34;&gt;sendto&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; sock, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; *buff, size_t nbytes, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; flags,
               &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr *to, socklen_t addrlen);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å›ä¼ è¾“çš„å­—èŠ‚æ•°ï¼Œå¤±è´¥æ˜¯è¿”å› -1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;sock: ç”¨äºä¼ è¾“æ•°æ®çš„ UDP å¥—æ¥å­—
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;buff: ä¿å­˜å¾…ä¼ è¾“æ•°æ®çš„ç¼“å†²åœ°å€å€¼
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;nbytes: å¾…ä¼ è¾“çš„æ•°æ®é•¿åº¦ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;flags: å¯é€‰é¡¹å‚æ•°ï¼Œè‹¥æ²¡æœ‰åˆ™ä¼ é€’ 0
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;to: å­˜æœ‰ç›®æ ‡åœ°å€çš„ sockaddr ç»“æ„ä½“å˜é‡çš„åœ°å€å€¼
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;addrlen: ä¼ é€’ç»™å‚æ•° to çš„åœ°å€å€¼ç»“æ„ä½“å˜é‡é•¿åº¦
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸Šè¿°å‡½æ•°ä¸ä¹‹å‰çš„ TCP è¾“å‡ºå‡½æ•°æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œæ­¤å‡½æ•°éœ€è¦å‘å®ƒä¼ é€’ç›®æ ‡åœ°å€ä¿¡æ¯ã€‚æ¥ä¸‹æ¥ä»‹ç»æ¥æ”¶ UDP æ•°æ®çš„å‡½æ•°ã€‚UDP æ•°æ®çš„å‘é€å¹¶ä¸å›ºå®šï¼Œå› æ­¤è¯¥å‡½æ•°å®šä¹‰ä¸ºå¯æ¥å—å‘é€ç«¯ä¿¡æ¯çš„å½¢å¼ï¼Œä¹Ÿå°±æ˜¯å°†åŒæ—¶è¿”å› UDP æ•°æ®åŒ…ä¸­çš„å‘é€ç«¯ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;ssize_t &lt;span style=&#34;color:#008b45&#34;&gt;recvfrom&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; sock, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; *buff, size_t nbytes, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; flags,
                 &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr *from, socklen_t *addrlen);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å›ä¼ è¾“çš„å­—èŠ‚æ•°ï¼Œå¤±è´¥æ˜¯è¿”å› -1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;sock: ç”¨äºä¼ è¾“æ•°æ®çš„ UDP å¥—æ¥å­—
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;buff: ä¿å­˜å¾…ä¼ è¾“æ•°æ®çš„ç¼“å†²åœ°å€å€¼
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;nbytes: å¾…ä¼ è¾“çš„æ•°æ®é•¿åº¦ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;flags: å¯é€‰é¡¹å‚æ•°ï¼Œè‹¥æ²¡æœ‰åˆ™ä¼ é€’ 0
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;from: å­˜æœ‰å‘é€ç«¯åœ°å€ä¿¡æ¯çš„ sockaddr ç»“æ„ä½“å˜é‡çš„åœ°å€å€¼
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;addrlen: ä¿å­˜å‚æ•° from çš„ç»“æ„ä½“å˜é‡é•¿åº¦çš„å˜é‡åœ°å€å€¼ã€‚
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç¼–å†™ UDP ç¨‹åºçš„æœ€æ ¸å¿ƒçš„éƒ¨åˆ†å°±åœ¨äºä¸Šè¿°ä¸¤ä¸ªå‡½æ•°ï¼Œè¿™ä¹Ÿè¯´æ˜äºŒè€…åœ¨ UDP æ•°æ®ä¼ è¾“ä¸­çš„åœ°ä½ã€‚&lt;/p&gt;
&lt;h4 id=&#34;624-åŸºäº-udp-çš„å›å£°æœåŠ¡å™¨ç«¯å®¢æˆ·ç«¯&#34;&gt;6.2.4 åŸºäº UDP çš„å›å£°æœåŠ¡å™¨ç«¯/å®¢æˆ·ç«¯&lt;/h4&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å®ç°çš„åŸºäº UDP çš„å›å£°æœåŠ¡å™¨çš„æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ï¼š&lt;/p&gt;
&lt;p&gt;ä»£ç ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch06/uecho_client.c&#34;&gt;uecho_client.c&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch06/uecho_server.c&#34;&gt;uecho_server.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc uecho_client.c -o uclient
gcc uecho_server.c -o userver
./server &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
./uclient 127.0.0.1 &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/17/5c3feb85baa83.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;TCP å®¢æˆ·ç«¯å¥—æ¥å­—åœ¨è°ƒç”¨ connect å‡½æ•°æ—¶è‡ªåŠ¨åˆ†é…IPåœ°å€å’Œç«¯å£å·ï¼Œæ—¢ç„¶å¦‚æ­¤ï¼ŒUDP å®¢æˆ·ç«¯ä½•æ—¶åˆ†é…IPåœ°å€å’Œç«¯å£å·ï¼Ÿ&lt;/p&gt;
&lt;h4 id=&#34;625-udp-å®¢æˆ·ç«¯å¥—æ¥å­—çš„åœ°å€åˆ†é…&#34;&gt;6.2.5 UDP å®¢æˆ·ç«¯å¥—æ¥å­—çš„åœ°å€åˆ†é…&lt;/h4&gt;
&lt;p&gt;ä»”ç»†è§‚å¯Ÿ UDP å®¢æˆ·ç«¯å¯ä»¥å‘ç°ï¼ŒUDP å®¢æˆ·ç«¯ç¼ºå°‘äº†æŠŠIPå’Œç«¯å£åˆ†é…ç»™å¥—æ¥å­—çš„è¿‡ç¨‹ã€‚TCP å®¢æˆ·ç«¯è°ƒç”¨ connect å‡½æ•°è‡ªåŠ¨å®Œæˆæ­¤è¿‡ç¨‹ï¼Œè€Œ UDP ä¸­è¿æ¥èƒ½æ‰¿æ‹…ç›¸åŒåŠŸèƒ½çš„å‡½æ•°è°ƒç”¨è¯­å¥éƒ½æ²¡æœ‰ã€‚ç©¶ç«Ÿåœ¨ä»€ä¹ˆæ—¶å€™åˆ†é…IPå’Œç«¯å£å·å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;UDP ç¨‹åºä¸­ï¼Œè°ƒç”¨ sendto å‡½æ•°ä¼ è¾“æ•°æ®å‰åº”è¯¥å®Œæˆå¯¹å¥—æ¥å­—çš„åœ°å€åˆ†é…å·¥ä½œï¼Œå› æ­¤è°ƒç”¨ bind å‡½æ•°ã€‚å½“ç„¶ï¼Œbind å‡½æ•°åœ¨ TCP ç¨‹åºä¸­å‡ºç°è¿‡ï¼Œä½† bind å‡½æ•°ä¸åŒºåˆ† TCP å’Œ UDPï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ UDP ç¨‹åºä¸­åŒæ ·å¯ä»¥è°ƒç”¨ã€‚å¦å¤–ï¼Œå¦‚æœè°ƒç”¨ sendto å‡½æ•°å°šæœªåˆ†é…åœ°å€ä¿¡æ¯ï¼Œåˆ™åœ¨é¦–æ¬¡è°ƒç”¨ sendto å‡½æ•°æ—¶ç»™ç›¸åº”å¥—æ¥å­—è‡ªåŠ¨åˆ†é… IP å’Œç«¯å£ã€‚è€Œä¸”æ­¤æ—¶åˆ†é…çš„åœ°å€ä¸€ç›´ä¿ç•™åˆ°ç¨‹åºç»“æŸä¸ºæ­¢ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ç”¨æ¥å’Œå…¶ä»– UDP å¥—æ¥å­—è¿›è¡Œæ•°æ®äº¤æ¢ã€‚å½“ç„¶ï¼ŒIP ç”¨ä¸»æœºIPï¼Œç«¯å£å·ç”¨æœªé€‰ç”¨çš„ä»»æ„ç«¯å£å·ã€‚&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Šæ‰€è¿°ï¼Œè°ƒç”¨ sendto å‡½æ•°æ—¶è‡ªåŠ¨åˆ†é…IPå’Œç«¯å£å·ï¼Œå› æ­¤ï¼ŒUDP å®¢æˆ·ç«¯ä¸­é€šå¸¸æ— éœ€é¢å¤–çš„åœ°å€åˆ†é…è¿‡ç¨‹ã€‚æ‰€ä»¥ä¹‹å‰çš„ç¤ºä¾‹ä¸­çœç•¥äº†è¯¥è¿‡ç¨‹ã€‚è¿™ä¹Ÿæ˜¯æ™®éçš„å®ç°æ–¹å¼ã€‚&lt;/p&gt;
&lt;h3 id=&#34;63-udp-çš„æ•°æ®ä¼ è¾“ç‰¹æ€§å’Œè°ƒç”¨-connect-å‡½æ•°&#34;&gt;6.3 UDP çš„æ•°æ®ä¼ è¾“ç‰¹æ€§å’Œè°ƒç”¨ connect å‡½æ•°&lt;/h3&gt;
&lt;h4 id=&#34;631-å­˜åœ¨æ•°æ®è¾¹ç•Œçš„-udp-å¥—æ¥å­—&#34;&gt;6.3.1 å­˜åœ¨æ•°æ®è¾¹ç•Œçš„ UDP å¥—æ¥å­—&lt;/h4&gt;
&lt;p&gt;å‰é¢è¯´å¾— TCP æ•°æ®ä¼ è¾“ä¸­ä¸å­˜åœ¨æ•°æ®è¾¹ç•Œï¼Œè¿™è¡¨ç¤ºã€Œæ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­è°ƒç”¨ I/O å‡½æ•°çš„æ¬¡æ•°ä¸å…·æœ‰ä»»ä½•æ„ä¹‰ã€&lt;/p&gt;
&lt;p&gt;ç›¸åï¼ŒUDP æ˜¯å…·æœ‰æ•°æ®è¾¹ç•Œçš„ä¸‹ä¸€ï¼Œä¼ è¾“ä¸­è°ƒç”¨ I/O å‡½æ•°çš„æ¬¡æ•°éå¸¸é‡è¦ã€‚å› æ­¤ï¼Œè¾“å…¥å‡½æ•°çš„è°ƒç”¨æ¬¡æ•°å’Œè¾“å‡ºå‡½æ•°çš„è°ƒç”¨æ¬¡æ•°å®Œå…¨ä¸€è‡´ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯æ¥æ”¶å…¨éƒ¨å·²ç»å‘é€çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œè°ƒç”¨ 3 æ¬¡è¾“å‡ºå‡½æ•°å‘é€çš„æ•°æ®å¿…é¡»é€šè¿‡è°ƒç”¨ 3 æ¬¡è¾“å…¥å‡½æ•°æ‰èƒ½æ¥æ”¶å®Œã€‚é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¿›è¡ŒéªŒè¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch06/bound_host1.c&#34;&gt;bound_host1.c&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch06/bound_host2.c&#34;&gt;bound_host2.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc bound_host1.c -o host1
gcc bound_host2.c -o host2
./host1 &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
./host2 127.0.0.1 &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿è¡Œç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/17/5c3ff966a8d34.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;host1 æ˜¯æœåŠ¡ç«¯ï¼Œhost2 æ˜¯å®¢æˆ·ç«¯ï¼Œhost2 ä¸€æ¬¡æ€§æŠŠæ•°æ®å‘ç»™æœåŠ¡ç«¯åï¼Œç»“æŸç¨‹åºã€‚ä½†æ˜¯å› ä¸ºæœåŠ¡ç«¯æ¯éš”äº”ç§’æ‰æ¥æ”¶ä¸€æ¬¡ï¼Œæ‰€ä»¥æœåŠ¡ç«¯æ¯éš”äº”ç§’æ¥æ”¶ä¸€æ¬¡æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»è¿è¡Œç»“æœä¹Ÿå¯ä»¥è¯æ˜ UDP é€šä¿¡è¿‡ç¨‹ä¸­ I/O çš„è°ƒç”¨æ¬¡æ•°å¿…é¡»ä¿æŒä¸€è‡´&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&#34;632-å·²è¿æ¥connectudp-å¥—æ¥å­—ä¸æœªè¿æ¥unconnectedudp-å¥—æ¥å­—&#34;&gt;6.3.2 å·²è¿æ¥ï¼ˆconnectï¼‰UDP å¥—æ¥å­—ä¸æœªè¿æ¥ï¼ˆunconnectedï¼‰UDP å¥—æ¥å­—&lt;/h4&gt;
&lt;p&gt;TCP å¥—æ¥å­—ä¸­éœ€æ³¨å†Œå¾…ä¼ ä¼ è¾“æ•°æ®çš„ç›®æ ‡IPå’Œç«¯å£å·ï¼Œè€Œåœ¨ UDP ä¸­æ— éœ€æ³¨å†Œã€‚å› æ­¤é€šè¿‡ sendto å‡½æ•°ä¼ è¾“æ•°æ®çš„è¿‡ç¨‹å¤§æ¦‚å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ 3 ä¸ªé˜¶æ®µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ 1 é˜¶æ®µï¼šå‘ UDP å¥—æ¥å­—æ³¨å†Œç›®æ ‡ IP å’Œç«¯å£å·&lt;/li&gt;
&lt;li&gt;ç¬¬ 2 é˜¶æ®µï¼šä¼ è¾“æ•°æ®&lt;/li&gt;
&lt;li&gt;ç¬¬ 3 é˜¶æ®µï¼šåˆ é™¤ UDP å¥—æ¥å­—ä¸­æ³¨å†Œçš„ç›®æ ‡åœ°å€ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¯æ¬¡è°ƒç”¨ sendto å‡½æ•°æ—¶é‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚æ¯æ¬¡éƒ½å˜æ›´ç›®æ ‡åœ°å€ï¼Œå› æ­¤å¯ä»¥é‡å¤åˆ©ç”¨åŒä¸€ UDP å¥—æ¥å­—å‘ä¸åŒç›®æ ‡ä¼ é€’æ•°æ®ã€‚è¿™ç§æœªæ³¨å†Œç›®æ ‡åœ°å€ä¿¡æ¯çš„å¥—æ¥å­—ç§°ä¸ºæœªè¿æ¥å¥—æ¥å­—ï¼Œåä¹‹ï¼Œæ³¨å†Œäº†ç›®æ ‡åœ°å€çš„å¥—æ¥å­—ç§°ä¸ºè¿æ¥ connected å¥—æ¥å­—ã€‚æ˜¾ç„¶ï¼ŒUDP å¥—æ¥å­—é»˜è®¤å±äºæœªè¿æ¥å¥—æ¥å­—ã€‚å½“ä¸€å°ä¸»æœºå‘å¦ä¸€å°ä¸»æœºä¼ è¾“å¾ˆå¤šä¿¡æ¯æ—¶ï¼Œä¸Šè¿°çš„ä¸‰ä¸ªé˜¶æ®µä¸­ï¼Œç¬¬ä¸€ä¸ªé˜¶æ®µå’Œç¬¬ä¸‰ä¸ªé˜¶æ®µå æ•´ä¸ªé€šä¿¡è¿‡ç¨‹ä¸­è¿‘ä¸‰åˆ†ä¹‹ä¸€çš„æ—¶é—´ï¼Œç¼©çŸ­è¿™éƒ¨åˆ†çš„æ—¶é—´å°†ä¼šå¤§å¤§æé«˜æ•´ä½“æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h4 id=&#34;633-åˆ›å»ºå·²è¿æ¥-udp-å¥—æ¥å­—&#34;&gt;6.3.3 åˆ›å»ºå·²è¿æ¥ UDP å¥—æ¥å­—&lt;/h4&gt;
&lt;p&gt;åˆ›å»ºå·²è¿æ¥ UDP å¥—æ¥å­—è¿‡ç¨‹æ ¼å¤–ç®€å•ï¼Œåªéœ€é’ˆå¯¹ UDP å¥—æ¥å­—è°ƒç”¨ connect å‡½æ•°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;sock = socket(PF_INET, SOCK_DGRAM, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;);
memset(&amp;amp;adr, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;sizeof&lt;/span&gt;(adr));
adr.sin_family = AF_INET;
adr.sin_addr.s_addr = inet_addr(argv[&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;]);
adr.sin_port = htons(atoi(argv[&lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;]));
connect(sock, (&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr *)&amp;amp;adr, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;sizeof&lt;/span&gt;(adr));
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸Šè¿°ä»£ç çœ‹ä¼¼ä¸ TCP å¥—æ¥å­—åˆ›å»ºè¿‡ç¨‹ä¸€è‡´ï¼Œä½† socket å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°åˆ†æ˜æ˜¯ SOCK_DGRAM ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåˆ›å»ºçš„çš„ç¡®æ˜¯ UDP å¥—æ¥å­—ã€‚å½“ç„¶é’ˆå¯¹ UDP è°ƒç”¨ connect å‡½æ•°å¹¶ä¸æ˜¯æ„å‘³ç€è¦ä¸å¯¹æ–¹ UDP å¥—æ¥å­—è¿æ¥ï¼Œè¿™åªæ˜¯å‘ UDP å¥—æ¥å­—æ³¨å†Œç›®æ ‡IPå’Œç«¯å£ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹åå°±ä¸ TCP å¥—æ¥å­—ä¸€è‡´ï¼Œæ¯æ¬¡è°ƒç”¨ sendto å‡½æ•°æ—¶åªéœ€ä¼ é€’ä¿¡æ¯æ•°æ®ã€‚å› ä¸ºå·²ç»æŒ‡å®šäº†æ”¶å‘å¯¹è±¡ï¼Œæ‰€ä»¥ä¸ä»…å¯ä»¥ä½¿ç”¨ sendtoã€recvfrom å‡½æ•°ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ writeã€read å‡½æ•°è¿›è¡Œé€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„ä¾‹å­æŠŠä¹‹å‰çš„ &lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch06/uecho_client.c&#34;&gt;uecho_client.c&lt;/a&gt; ç¨‹åºæ”¹æˆäº†åŸºäºå·²è¿æ¥ UDP çš„å¥—æ¥å­—çš„ç¨‹åºï¼Œå› æ­¤å¯ä»¥ç»“åˆ &lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch06/uecho_server.c&#34;&gt;uecho_server.c&lt;/a&gt; ç¨‹åºè¿è¡Œã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch06/uecho_con_client.c&#34;&gt;uecho_con_client.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¯‘è¿è¡Œè¿‡ç¨‹ä¸ä¸Šé¢ä¸€æ ·ï¼Œæ•…çœç•¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„ä»£ç ä¸­ç”¨ writeã€read å‡½æ•°ä»£æ›¿äº† sendtoã€recvfrom å‡½æ•°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;64-åŸºäº-windows-çš„å®ç°&#34;&gt;6.4 åŸºäº Windows çš„å®ç°&lt;/h3&gt;
&lt;p&gt;æš‚ç•¥&lt;/p&gt;
&lt;h3 id=&#34;65-ä¹ é¢˜&#34;&gt;6.5 ä¹ é¢˜&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»¥ä¸‹ç­”æ¡ˆä»…ä»£è¡¨æœ¬äººä¸ªäººè§‚ç‚¹ï¼Œå¯èƒ½ä¸æ˜¯æ­£ç¡®ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;UDP ä¸ºä»€ä¹ˆæ¯” TCP å¿«ï¼Ÿä¸ºä»€ä¹ˆ TCP ä¼ è¾“å¯é è€Œ TCP ä¼ è¾“ä¸å¯é ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šä¸ºäº†æä¾›å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼ŒTCP åœ¨ä¸å¯é çš„IPå±‚è¿›è¡Œæµæ§åˆ¶ï¼Œè€Œ UDP ç¼ºå°‘è¿™ç§æµæ§åˆ¶ã€‚æ‰€ä»¥ UDP æ˜¯ä¸å¯é çš„è¿æ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸‹é¢ä¸å±äº UDP ç‰¹ç‚¹çš„æ˜¯ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢åŠ ç²—çš„ä»£è¡¨æ­¤å¥è¯æ­£ç¡®&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;UDP ä¸åŒäº TCP ï¼Œä¸å­˜åœ¨è¿æ¥æ¦‚å¿µï¼Œæ‰€ä»¥ä¸åƒ TCP é‚£æ ·åªèƒ½è¿›è¡Œä¸€å¯¹ä¸€çš„æ•°æ®ä¼ è¾“ã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨ UDP ä¼ è¾“æ•°æ®æ—¶ï¼Œå¦‚æœæœ‰ 2 ä¸ªç›®æ ‡ï¼Œåˆ™éœ€è¦ 2 ä¸ªå¥—æ¥å­—ã€‚&lt;/li&gt;
&lt;li&gt;UDP å¥—æ¥å­—ä¸­æ— æ³•ä½¿ç”¨å·²åˆ†é…ç»™ TCP çš„åŒä¸€ç«¯å£å·&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;UDP å¥—æ¥å­—å’Œ TCP å¥—æ¥å­—å¯ä»¥å…±å­˜ã€‚è‹¥éœ€è¦ï¼Œå¯ä»¥åŒæ—¶åœ¨åŒä¸€ä¸»æœºè¿›è¡Œ TCP å’Œ UDP æ•°æ®ä¼ è¾“ã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;é’ˆå¯¹ UDP å‡½æ•°ä¹Ÿå¯ä»¥è°ƒç”¨ connect å‡½æ•°ï¼Œæ­¤æ—¶ UDP å¥—æ¥å­—è·Ÿ TCP å¥—æ¥å­—ç›¸åŒï¼Œä¹Ÿéœ€è¦ç»è¿‡ 3 æ¬¡æ¡æ‰‹é˜¶æ®µã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;UDP æ•°æ®æŠ¥å‘å¯¹æ–¹ä¸»æœºçš„ UDP å¥—æ¥å­—ä¼ é€’è¿‡ç¨‹ä¸­ï¼ŒIP å’Œ UDP åˆ†åˆ«è´Ÿè´£å“ªäº›éƒ¨åˆ†ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šIPçš„ä½œç”¨å°±æ˜¯è®©ç¦»å¼€ä¸»æœºçš„ UDP æ•°æ®åŒ…å‡†ç¡®ä¼ é€’åˆ°å¦ä¸€ä¸ªä¸»æœºã€‚ä½†æŠŠ UDP åŒ…æœ€ç»ˆäº¤ç»™ä¸»æœºçš„æŸä¸€ UDP å¥—æ¥å­—çš„è¿‡ç¨‹åˆ™æ˜¯ç”± UDP å®Œæˆçš„ã€‚UDP çš„æœ€é‡è¦çš„ä½œç”¨å°±æ˜¯æ ¹æ®ç«¯å£å·å°†ä¼ åˆ°ä¸»æœºçš„æ•°æ®åŒ…äº¤ä»˜ç»™æœ€ç»ˆçš„ UDP å¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;UDP ä¸€èˆ¬æ¯” TCP å¿«ï¼Œä½†æ ¹æ®äº¤æ¢æ•°æ®çš„ç‰¹ç‚¹ï¼Œå…¶å·®å¼‚å¯å¤§å¯å°ã€‚è¯·ä½ è¯´æ˜ä½•ç§æƒ…å†µä¸‹ UDP çš„æ€§èƒ½ä¼˜äº TCPï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šå¦‚æœæ”¶å‘æ•°æ®é‡å°ä½†éœ€è¦é¢‘ç¹è¿æ¥æ—¶ï¼ŒUDP æ¯” TCP æ›´é«˜æ•ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®¢æˆ·ç«¯ TCP å¥—æ¥å­—è°ƒç”¨ connect å‡½æ•°æ—¶è‡ªåŠ¨åˆ†é…IPå’Œç«¯å£å·ã€‚UDP ä¸­ä¸è°ƒç”¨ bind å‡½æ•°ï¼Œé‚£ä½•æ—¶åˆ†é…IPå’Œç«¯å£å·ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šåœ¨é¦–æ¬¡è°ƒç”¨ sendto å‡½æ•°æ—¶è‡ªåŠ¨ç»™ç›¸åº”çš„å¥—æ¥å­—åˆ†é…IPå’Œç«¯å£å·ã€‚è€Œä¸”æ­¤æ—¶åˆ†é…çš„åœ°å€ä¸€ç›´ä¿ç•™åˆ°ç¨‹åºç»“æŸä¸ºæ­¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;TCP å®¢æˆ·ç«¯å¿…é¡»è°ƒç”¨ connect å‡½æ•°ï¼Œè€Œ UDP å¯ä»¥é€‰æ‹©æ€§è°ƒç”¨ã€‚è¯·é—®ï¼Œåœ¨ UDP ä¸­è°ƒç”¨ connect å‡½æ•°æœ‰å“ªäº›å¥½å¤„ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šè¦ä¸åŒä¸€ä¸ªä¸»æœºè¿›è¡Œé•¿æ—¶é—´é€šä¿¡æ—¶ï¼Œå°† UDP å¥—æ¥å­—å˜æˆå·²è¿æ¥å¥—æ¥å­—ä¼šæé«˜æ•ˆç‡ã€‚å› ä¸ºä¸‰ä¸ªé˜¶æ®µä¸­ï¼Œç¬¬ä¸€ä¸ªé˜¶æ®µå’Œç¬¬ä¸‰ä¸ªé˜¶æ®µå ç”¨äº†ä¸€å¤§éƒ¨åˆ†æ—¶é—´ï¼Œè°ƒç”¨ connect å‡½æ•°å¯ä»¥èŠ‚çœè¿™äº›æ—¶é—´ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
- https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-6-%E7%AB%A0-%E5%9F%BA%E4%BA%8E-udp-%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%AB%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF-%E7%AC%94%E8%AE%B0/ - </description>
        </item>
    
    
    
        <item>
        <title>ã€ŠTCP/IPç½‘ç»œç¼–ç¨‹ã€‹ç¬¬ 5 ç«  åŸºäº TCP çš„æœåŠ¡ç«¯/å®¢æˆ·ç«¯ï¼ˆ2ï¼‰ ç¬”è®°</title>
        <link>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-5-%E7%AB%A0-%E5%9F%BA%E4%BA%8E-tcp-%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%AB%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF2-%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Wed, 16 Jan 2019 15:57:00 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-5-%E7%AB%A0-%E5%9F%BA%E4%BA%8E-tcp-%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%AB%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF2-%E7%AC%94%E8%AE%B0/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-5-%E7%AB%A0-%E5%9F%BA%E4%BA%8E-tcp-%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%AB%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF2-%E7%AC%94%E8%AE%B0/ -&lt;h2 id=&#34;ç¬¬-5-ç« -åŸºäº-tcp-çš„æœåŠ¡ç«¯å®¢æˆ·ç«¯2&#34;&gt;ç¬¬ 5 ç«  åŸºäº TCP çš„æœåŠ¡ç«¯/å®¢æˆ·ç«¯ï¼ˆ2ï¼‰&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä»£ç ï¼Œåœ¨&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote&#34;&gt;TCP-IP-NetworkNote&lt;/a&gt;ä¸­å¯ä»¥æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šä¸€ç« ä»…ä»…æ˜¯ä»ç¼–ç¨‹è§’åº¦å­¦ä¹ å®ç°æ–¹æ³•ï¼Œå¹¶æœªè¯¦ç»†è®¨è®º TCP çš„å·¥ä½œåŸç†ã€‚å› æ­¤ï¼Œæœ¬ç« å°†æƒ³æ¬¡è®²è§£ TCP ä¸­å¿…è¦çš„ç†è®ºçŸ¥è¯†ï¼Œè¿˜å°†ç»™å‡ºç¬¬ 4 ç« å®¢æˆ·ç«¯é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;51-å›å£°å®¢æˆ·ç«¯çš„å®Œç¾å®ç°&#34;&gt;5.1 å›å£°å®¢æˆ·ç«¯çš„å®Œç¾å®ç°&lt;/h3&gt;
&lt;h4 id=&#34;511-å›å£°æœåŠ¡å™¨æ²¡æœ‰é—®é¢˜åªæœ‰å›å£°å®¢æˆ·ç«¯æœ‰é—®é¢˜&#34;&gt;5.1.1 å›å£°æœåŠ¡å™¨æ²¡æœ‰é—®é¢˜ï¼Œåªæœ‰å›å£°å®¢æˆ·ç«¯æœ‰é—®é¢˜ï¼Ÿ&lt;/h4&gt;
&lt;p&gt;é—®é¢˜ä¸åœ¨æœåŠ¡å™¨ç«¯ï¼Œè€Œåœ¨å®¢æˆ·ç«¯ï¼Œåªçœ‹ä»£ç å¯èƒ½ä¸å¥½ç†è§£ï¼Œå› ä¸º I/O ä¸­ä½¿ç”¨äº†ç›¸åŒçš„å‡½æ•°ã€‚å…ˆå›é¡¾ä¸€ä¸‹æœåŠ¡å™¨ç«¯çš„ I/O ç›¸å…³ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; ((str_len = read(clnt_sock, message, BUF_SIZE)) != &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;)
    write(clnt_sock, message, str_len);
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ¥ç€æ˜¯å®¢æˆ·ç«¯ä»£ç :&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;write(sock, message, strlen(message));
str_len = read(sock, message, BUF_SIZE - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;äºŒè€…éƒ½åœ¨æ‘æ¢è°ƒç”¨ read å’Œ write å‡½æ•°ã€‚å®é™…ä¸Šä¹‹å‰çš„å›å£°å®¢æˆ·ç«¯å°† 100% æ¥å—å­—èŠ‚ä¼ è¾“çš„æ•°æ®ï¼Œåªä¸è¿‡æ¥å—æ•°æ®æ—¶çš„å•ä½æœ‰äº›é—®é¢˜ã€‚æ‰©å±•å®¢æˆ·ç«¯ä»£ç å›é¡¾èŒƒå›´ï¼Œä¸‹é¢æ˜¯ï¼Œå®¢æˆ·ç«¯çš„ä»£ç :&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;)
{
    fputs(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Input message(Q to quit): &amp;#34;&lt;/span&gt;, stdout);
    fgets(message, BUF_SIZE, stdin);

    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (!strcmp(message, &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;q&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;) || !strcmp(message, &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Q&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;))
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;break&lt;/span&gt;;

    write(sock, message, strlen(message));
    str_len = read(sock, message, BUF_SIZE - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;);
    message[str_len] = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
    printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Message from server: %s&amp;#34;&lt;/span&gt;, message);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç°åœ¨åº”è¯¥ç†è§£äº†é—®é¢˜ï¼Œå›å£°å®¢æˆ·ç«¯ä¼ è¾“çš„æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œä¸”æ˜¯é€šè¿‡è°ƒç”¨ write å‡½æ•°ä¸€æ¬¡æ€§å‘é€çš„ã€‚ä¹‹åè¿˜è°ƒç”¨ä¸€æ¬¡ read å‡½æ•°ï¼ŒæœŸå¾…ç€æ¥å—è‡ªå·±ä¼ è¾“çš„å­—ç¬¦ä¸²ï¼Œè¿™å°±æ˜¯é—®é¢˜æ‰€åœ¨ã€‚&lt;/p&gt;
&lt;h4 id=&#34;512-å›å£°å®¢æˆ·ç«¯é—®é¢˜çš„è§£å†³åŠæ³•&#34;&gt;5.1.2 å›å£°å®¢æˆ·ç«¯é—®é¢˜çš„è§£å†³åŠæ³•&lt;/h4&gt;
&lt;p&gt;è¿™ä¸ªé—®é¢˜å…¶å®å¾ˆå®¹æ˜“è§£å†³ï¼Œå› ä¸ºå¯ä»¥æå‰æ¥å—æ•°æ®çš„å¤§å°ã€‚è‹¥ä¹‹å‰ä¼ è¾“äº†20å­—èŠ‚é•¿çš„å­—ç¬¦ä¸²ï¼Œåˆ™å†æ¥æ”¶æ—¶å¾ªç¯è°ƒç”¨ read å‡½æ•°è¯»å– 20 ä¸ªå­—èŠ‚å³å¯ã€‚æ—¢ç„¶æœ‰äº†è§£å†³åŠæ³•ï¼Œé‚£ä¹ˆä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch05/echo_client2.c&#34;&gt;echo_client2.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ ·ä¿®æ”¹ä¸ºäº†æ¥æ”¶æ‰€æœ‰ä¼ è¾“æ•°æ®è€Œå¾ªç¯è°ƒç”¨ read å‡½æ•°ã€‚æµ‹è¯•åŠè¿è¡Œç»“æœå¯å‚è€ƒç¬¬å››ç« ã€‚&lt;/p&gt;
&lt;h4 id=&#34;513-å¦‚æœé—®é¢˜ä¸åœ¨äºå›å£°å®¢æˆ·ç«¯å®šä¹‰åº”ç”¨å±‚åè®®&#34;&gt;5.1.3 å¦‚æœé—®é¢˜ä¸åœ¨äºå›å£°å®¢æˆ·ç«¯ï¼šå®šä¹‰åº”ç”¨å±‚åè®®&lt;/h4&gt;
&lt;p&gt;å›å£°å®¢æˆ·ç«¯å¯ä»¥æå‰çŸ¥é“æ¥æ”¶æ•°æ®çš„é•¿åº¦ï¼Œè¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯ä¸å¯èƒ½çš„ã€‚é‚£ä¹ˆæ­¤æ—¶æ— æ³•é¢„çŸ¥æ¥æ”¶æ•°æ®é•¿åº¦æ—¶åº”è¯¥å¦‚ä½•æ‰‹æ³•æ•°æ®ï¼Ÿè¿™æ˜¯éœ€è¦çš„æ˜¯&lt;strong&gt;åº”ç”¨å±‚åè®®&lt;/strong&gt;çš„å®šä¹‰ã€‚åœ¨æ”¶å‘è¿‡ç¨‹ä¸­å®šå¥½è§„åˆ™ï¼ˆåè®®ï¼‰ä»¥è¡¨ç¤ºæ•°æ®è¾¹ç•Œï¼Œæˆ–è€…æå‰å‘ŠçŸ¥éœ€è¦å‘é€çš„æ•°æ®çš„å¤§å°ã€‚æœåŠ¡ç«¯/å®¢æˆ·ç«¯å®ç°è¿‡ç¨‹ä¸­é€æ­¥å®šä¹‰çš„è§„åˆ™é›†åˆå°±æ˜¯åº”ç”¨å±‚åè®®ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨å†™ä¸€ä¸ªå°ç¨‹åºæ¥ä½“éªŒåº”ç”¨å±‚åè®®çš„å®šä¹‰è¿‡ç¨‹ã€‚è¦æ±‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æœåŠ¡å™¨ä»å®¢æˆ·ç«¯è·å¾—å¤šä¸ªæ•°ç»„å’Œè¿ç®—ç¬¦ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨æ¥æ”¶åˆ°æ•°å­—å€™å¯¹é½è¿›è¡ŒåŠ å‡ä¹˜è¿ç®—ï¼Œç„¶åæŠŠç»“æœä¼ å›å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¾‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‘æœåŠ¡å™¨ä¼ é€’3,5,9çš„åŒäº‹è¯·æ±‚åŠ æ³•è¿ç®—ï¼ŒæœåŠ¡å™¨è¿”å›3+5+9çš„ç»“æœ&lt;/li&gt;
&lt;li&gt;è¯·æ±‚åšä¹˜æ³•è¿ç®—ï¼Œå®¢æˆ·ç«¯ä¼šæ”¶åˆ°&lt;code&gt;3*5*9&lt;/code&gt;çš„ç»“æœ&lt;/li&gt;
&lt;li&gt;å¦‚æœå‘æœåŠ¡å™¨ä¼ é€’4,3,2çš„åŒæ—¶è¦æ±‚åšå‡æ³•ï¼Œåˆ™è¿”å›4-3-2çš„è¿ç®—ç»“æœã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¯·è‡ªå·±å®ç°ä¸€ä¸ªç¨‹åºæ¥å®ç°åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è‡ªå·±çš„å®ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch05/My_op_server.c&#34;&gt;My_op_server.c&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch05/My_op_client.c&#34;&gt;My_op_client.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¯‘ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc My_op_client.c -o myclient
gcc My_op_server.c -o myserver
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/15/5c3d966b81c03.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å…¶å®ä¸»è¦æ˜¯å¯¹ç¨‹åºçš„ä¸€ç‚¹ç‚¹å°æ”¹åŠ¨ï¼Œåªéœ€è¦å†å®¢æˆ·ç«¯å›ºå®šå¥½å‘é€çš„æ ¼å¼ï¼ŒæœåŠ¡ç«¯æŒ‰ç…§å›ºå®šæ ¼å¼è§£æï¼Œç„¶åè¿”å›ç»“æœå³å¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¹¦ä¸Šçš„å®ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch05/op_client.c&#34;&gt;op_client.c&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch05/op_server.c&#34;&gt;op_server.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é˜…è¯»ä»£ç è¦æ³¨æ„ä¸€ä¸‹ï¼Œ&lt;code&gt;int*&lt;/code&gt;ä¸&lt;code&gt;char&lt;/code&gt;ä¹‹é—´çš„è½¬æ¢ã€‚TCP ä¸­ä¸å­˜åœ¨æ•°æ®è¾¹ç•Œã€‚&lt;/p&gt;
&lt;p&gt;ç¼–è¯‘ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc op_client.c -o opclient
gcc op_server.c -o opserver
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿è¡Œ:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;./opserver &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
./opclient 127.0.0.1 &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/16/5c3ea297c7649.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;52-tcp-åŸç†&#34;&gt;5.2 TCP åŸç†&lt;/h3&gt;
&lt;h4 id=&#34;521-tcp-å¥—æ¥å­—ä¸­çš„-io-ç¼“å†²&#34;&gt;5.2.1 TCP å¥—æ¥å­—ä¸­çš„ I/O ç¼“å†²&lt;/h4&gt;
&lt;p&gt;TCP å¥—æ¥å­—çš„æ•°æ®æ”¶å‘æ— è¾¹ç•Œã€‚æœåŠ¡å™¨å³ä½¿è°ƒç”¨ 1 æ¬¡ write å‡½æ•°ä¼ è¾“ 40 å­—èŠ‚çš„æ•°æ®ï¼Œå®¢æˆ·ç«¯ä¹Ÿæœ‰å¯èƒ½é€šè¿‡ 4 æ¬¡ read å‡½æ•°è°ƒç”¨æ¯æ¬¡è¯»å– 10 å­—èŠ‚ã€‚ä½†æ­¤å¤„ä¹Ÿæœ‰ä¸€äº›ä¸€é—®ï¼ŒæœåŠ¡å™¨ä¸€æ¬¡æ€§ä¼ è¾“äº† 40 å­—èŠ‚ï¼Œè€Œå®¢æˆ·ç«¯ç«Ÿç„¶å¯ä»¥ç¼“æ…¢çš„åˆ†æ‰¹æ¥å—ã€‚å®¢æˆ·ç«¯æ¥å— 10 å­—èŠ‚åï¼Œå‰©ä¸‹çš„ 30 å­—èŠ‚åœ¨ä½•å¤„ç­‰å€™å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œwrite å‡½æ•°è°ƒç”¨åå¹¶éç«‹å³ä¼ è¾“æ•°æ®ï¼Œ read å‡½æ•°è°ƒç”¨åä¹Ÿå¹¶éé©¬ä¸Šæ¥æ”¶æ•°æ®ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œwrite å‡½æ•°æ»´å•Šç”¨ç¬é—´ï¼Œæ•°æ®å°†ç§»è‡³è¾“å‡ºç¼“å†²ï¼›read å‡½æ•°è°ƒç”¨ç¬é—´ï¼Œä»è¾“å…¥ç¼“å†²è¯»å–æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/16/5c3ea41cd93c6.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;I/O ç¼“å†²ç‰¹æ€§å¯ä»¥æ•´ç†å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I/O ç¼“å†²åœ¨æ¯ä¸ª TCP å¥—æ¥å­—ä¸­å•ç‹¬å­˜åœ¨&lt;/li&gt;
&lt;li&gt;I/O ç¼“å†²åœ¨åˆ›å»ºå¥—æ¥å­—æ—¶è‡ªåŠ¨ç”Ÿæˆ&lt;/li&gt;
&lt;li&gt;å³ä½¿å…³é—­å¥—æ¥å­—ä¹Ÿä¼šç»§ç»­ä¼ é€’è¾“å‡ºç¼“å†²ä¸­é—ç•™çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;å…³é—­å¥—æ¥å­—å°†ä¸¢å¤±è¾“å…¥ç¼“å†²ä¸­çš„æ•°æ®&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‡è®¾å‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼Œä¼šå‘ç”Ÿä»€ä¹ˆäº‹å‘¢ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å®¢æˆ·ç«¯è¾“å…¥ç¼“å†²ä¸º 50 å­—èŠ‚ï¼Œè€ŒæœåŠ¡å™¨ç«¯ä¼ è¾“äº† 100 å­—èŠ‚ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å› ä¸º TCP ä¸ä¼šå‘ç”Ÿè¶…è¿‡è¾“å…¥ç¼“å†²å¤§å°çš„æ•°æ®ä¼ è¾“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ ¹æœ¬ä¸ä¼šå‘ç”Ÿè¿™ç±»é—®é¢˜ï¼Œå› ä¸º TCP ä¼šæ§åˆ¶æ•°æ®æµã€‚TCP ä¸­æœ‰æ»‘åŠ¨çª—å£ï¼ˆSliding Windowï¼‰åè®®ï¼Œç”¨å¯¹è¯æ–¹å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Aï¼šä½ å¥½ï¼Œæœ€å¤šå¯ä»¥å‘æˆ‘ä¼ é€’ 50 å­—èŠ‚&lt;/li&gt;
&lt;li&gt;Bï¼šå¥½çš„&lt;/li&gt;
&lt;li&gt;Aï¼šæˆ‘è…¾å‡ºäº† 20 å­—èŠ‚çš„ç©ºé—´ï¼Œæœ€å¤šå¯ä»¥æ¥å— 70 å­—èŠ‚&lt;/li&gt;
&lt;li&gt;Bï¼šå¥½çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ•°æ®æ”¶å‘ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå› æ­¤ TCP ä¸­ä¸ä¼šå› ä¸ºç¼“å†²æº¢å‡ºè€Œä¸¢å¤±æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;write å‡½æ•°åœ¨æ•°æ®ä¼ è¾“å®Œæˆæ—¶è¿”å›ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&#34;522-tcp-å†…éƒ¨å·¥ä½œåŸç†-1ä¸å¯¹æ–¹å¥—æ¥å­—çš„è¿æ¥&#34;&gt;5.2.2 TCP å†…éƒ¨å·¥ä½œåŸç† 1ï¼šä¸å¯¹æ–¹å¥—æ¥å­—çš„è¿æ¥&lt;/h4&gt;
&lt;p&gt;TCP å¥—æ¥å­—ä»åˆ›å»ºåˆ°æ¶ˆå¤±æ‰€ç»è¿‡çš„è¿‡ç¨‹åˆ†ä¸ºå¦‚ä¸‹ä¸‰æ­¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸å¯¹æ–¹å¥—æ¥å­—å»ºç«‹è¿æ¥&lt;/li&gt;
&lt;li&gt;ä¸å¯¹æ–¹å¥—æ¥å­—è¿›è¡Œæ•°æ®äº¤æ¢&lt;/li&gt;
&lt;li&gt;æ–­å¼€ä¸å¯¹æ–¹å¥—æ¥å­—çš„è¿æ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é¦–å…ˆè®²è§£ä¸å¯¹æ–¹å¥—æ¥å­—å»ºç«‹è¿æ¥çš„è¿‡ç¨‹ã€‚è¿æ¥è¿‡ç¨‹ä¸­ï¼Œå¥—æ¥å­—çš„å¯¹è¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¥—æ¥å­—Aï¼šä½ å¥½ï¼Œå¥—æ¥å­— Bã€‚æˆ‘è¿™é‡Œæœ‰æ•°æ®ç»™ä½ ï¼Œå»ºç«‹è¿æ¥å§&lt;/li&gt;
&lt;li&gt;å¥—æ¥å­—Bï¼šå¥½çš„ï¼Œæˆ‘è¿™è¾¹å·²å°±ç»ª&lt;/li&gt;
&lt;li&gt;å¥—æ¥å­—Aï¼šè°¢è°¢ä½ å—ç†æˆ‘çš„è¯·æ±‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TCP åœ¨å®é™…é€šä¿¡ä¸­ä¹Ÿä¼šç»è¿‡ä¸‰æ¬¡å¯¹è¯è¿‡ç¨‹ï¼Œå› æ­¤ï¼Œè¯¥è¿‡ç¨‹åˆè¢«ç§°ä¸º &lt;strong&gt;Three-way handshakingï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰&lt;/strong&gt;ã€‚æ¥ä¸‹æ¥ç»™å‡ºè¿æ¥è¿‡ç¨‹ä¸­å®é™…äº¤æ¢çš„ä¿¡æ¯æ–¹å¼ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/16/5c3ecdec9fc04.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å¥—æ¥å­—æ˜¯å…¨åŒå·¥æ–¹å¼å·¥ä½œçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥åŒå‘ä¼ é€’æ•°æ®ã€‚å› æ­¤ï¼Œæ”¶å‘æ•°æ®å‰è¦åšä¸€äº›å‡†å¤‡ã€‚é¦–å…ˆè¯·æ±‚è¿æ¥çš„ä¸»æœº A è¦ç»™ä¸»æœº B ä¼ é€’ä»¥ä¸‹ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[SYN] SEQ : 1000 , ACK:-&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¯¥æ¶ˆæ¯ä¸­çš„ SEQ ä¸º 1000 ï¼ŒACK ä¸ºç©ºï¼Œè€Œ SEQ ä¸º1000 çš„å«ä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç°åœ¨ä¼ é€’çš„æ•°æ®åŒ…çš„åºå·ä¸º 1000ï¼Œå¦‚æœæ¥æ”¶æ— è¯¯ï¼Œè¯·é€šçŸ¥æˆ‘å‘æ‚¨ä¼ é€’ 1001 å·æ•°æ®åŒ…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™æ˜¯é¦–æ¬¡è¯·æ±‚è¿æ¥æ—¶ä½¿ç”¨çš„æ¶ˆæ¯ï¼Œåˆç§°ä¸º SYNã€‚SYN æ˜¯ Synchronization çš„ç®€å†™ï¼Œè¡¨ç¤ºæ”¶å‘æ•°æ®å‰ä¼ è¾“çš„åŒæ­¥æ¶ˆæ¯ã€‚æ¥ä¸‹æ¥ä¸»æœº B å‘ A ä¼ é€’ä»¥ä¸‹ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[SYN+ACK] SEQ: 2000, ACK: 1001&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ­¤æ—¶ SEQ ä¸º 2000ï¼ŒACK ä¸º 1001ï¼Œè€Œ SEQ ä¸º 2000 çš„å«ä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç°ä¼ é€’çš„æ•°æ®åŒ…å·ä¸º 2000 ï¼Œå¦‚æœæ¥å—æ— è¯¯ï¼Œè¯·é€šçŸ¥æˆ‘å‘æ‚¨ä¼ é€’ 2001 å·æ•°æ®åŒ…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è€Œ ACK 1001 çš„å«ä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åˆšæ‰ä¼ è¾“çš„ SEQ ä¸º 1000 çš„æ•°æ®åŒ…æ¥å—æ— è¯¯ï¼Œç°åœ¨è¯·ä¼ é€’ SEQ ä¸º 1001 çš„æ•°æ®åŒ…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯¹äºä¸»æœº A é¦–æ¬¡ä¼ è¾“çš„æ•°æ®åŒ…çš„ç¡®è®¤æ¶ˆæ¯ï¼ˆACK 1001ï¼‰å’Œä¸ºä¸»æœº B ä¼ è¾“æ•°æ®åšå‡†å¤‡çš„åŒæ­¥æ¶ˆæ¯ï¼ˆSEQ 2000ï¼‰æ†ç»‘å‘é€ã€‚å› æ­¤ï¼Œæ­¤ç§ç±»æ¶ˆæ¯åˆç§°ä¸º SYN+ACKã€‚&lt;/p&gt;
&lt;p&gt;æ”¶å‘æ•°æ®å‰å‘æ•°æ®åŒ…åˆ†é…åºå·ï¼Œå¹¶å‘å¯¹æ–¹é€šæŠ¥æ­¤åºå·ï¼Œè¿™éƒ½æ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®ä¸¢å¤±åšçš„å‡†å¤‡ã€‚é€šè¿‡é¡¹æ•°æ®åŒ…åˆ†é…åºå·å¹¶ç¡®è®¤ï¼Œå¯ä»¥åœ¨æ•°æ®åŒ…ä¸¢å¤±æ—¶é©¬ä¸ŠæŸ¥çœ‹å¹¶é‡ä¼ ä¸¢å¤±çš„æ•°æ®åŒ…ã€‚å› æ­¤ TCP å¯ä»¥ä¿è¯å¯é çš„æ•°æ®ä¼ è¾“ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡è¿™ä¸‰ä¸ªè¿‡ç¨‹ï¼Œè¿™æ ·ä¸»æœº A å’Œä¸»æœº B å°±ç¡®è®¤äº†å½¼æ­¤å·²ç»å‡†å¤‡å°±ç»ªã€‚&lt;/p&gt;
&lt;h4 id=&#34;523-tcp-å†…éƒ¨å·¥ä½œåŸç†-2ä¸å¯¹æ–¹ä¸»æœºçš„æ•°æ®äº¤æ¢&#34;&gt;5.2.3 TCP å†…éƒ¨å·¥ä½œåŸç† 2ï¼šä¸å¯¹æ–¹ä¸»æœºçš„æ•°æ®äº¤æ¢&lt;/h4&gt;
&lt;p&gt;é€šè¿‡ç¬¬ä¸€æ­¥ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹å®Œæˆäº†æ•°æ®äº¤æ¢å‡†å¤‡ï¼Œä¸‹é¢å°±å¼€å§‹æ­£å¼æ”¶å‘æ•°æ®ï¼Œå…¶é»˜è®¤æ–¹å¼å¦‚å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/16/5c3ed1a97ce2b.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸Šç»™å‡ºäº†ä¸»æœº A åˆ†æˆ 2 ä¸ªæ•°æ®åŒ…å‘ä¸»æœº B ä¼ è¾“ 200 å­—èŠ‚çš„è¿‡ç¨‹ã€‚é¦–å…ˆï¼Œä¸»æœº A é€šè¿‡ 1 ä¸ªæ•°æ®åŒ…å‘é€ 100 ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œæ•°æ®åŒ…çš„ SEQ ä¸º 1200 ã€‚ä¸»æœº B ä¸ºäº†ç¡®è®¤è¿™ä¸€ç‚¹ï¼Œå‘ä¸»æœº A å‘é€ ACK 1301 æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶çš„ ACK å·ä¸º 1301 è€Œä¸æ˜¯ 1201ï¼ŒåŸå› åœ¨äº ACK å·çš„å¢é‡ä¸ºä¼ è¾“çš„æ•°æ®å­—èŠ‚æ•°ã€‚å‡è®¾æ¯æ¬¡ ACK å·ä¸åŠ ä¼ è¾“çš„å­—èŠ‚æ•°ï¼Œè¿™æ ·è™½ç„¶å¯ä»¥ç¡®è®¤æ•°æ®åŒ…çš„ä¼ è¾“ï¼Œä½†æ— æ³•æ˜ç¡® 100 ä¸ªå­—èŠ‚å…¨éƒ½æ­£ç¡®ä¼ é€’è¿˜æ˜¯ä¸¢å¤±äº†ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚åªä¼ é€’äº† 80 å­—èŠ‚ã€‚å› æ­¤æŒ‰ç…§å¦‚ä¸‹å…¬å¼ä¼ é€’ ACK ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ACK å· = SEQ å· + ä¼ é€’çš„å­—èŠ‚æ•° + 1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸ä¸‰æ¬¡æ¡æ‰‹åè®®ç›¸åŒï¼Œæœ€å + 1 æ˜¯ä¸ºäº†å‘ŠçŸ¥å¯¹æ–¹ä¸‹æ¬¡è¦ä¼ é€’çš„ SEQ å·ã€‚ä¸‹é¢åˆ†æä¼ è¾“è¿‡ç¨‹ä¸­æ•°æ®åŒ…ä¸¢å¤±çš„æƒ…å†µï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/16/5c3ed371187a6.png&#34; alt=&#34;&#34;&gt;&#39;&lt;/p&gt;
&lt;p&gt;ä¸Šå›¾è¡¨ç¤ºäº†é€šè¿‡ SEQ 1301 æ•°æ®åŒ…å‘ä¸»æœº B ä¼ é€’ 100 å­—èŠ‚æ•°æ®ã€‚ä½†ä¸­é—´å‘ç”Ÿäº†é”™è¯¯ï¼Œä¸»æœº B æœªæ”¶åˆ°ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œä¸»æœº A ä»ç„¶æœªæ”¶åˆ°å¯¹äº SEQ 1301 çš„ ACK çš„ç¡®è®¤ï¼Œå› æ­¤è¯•ç€é‡ä¼ è¯¥æ•°æ®åŒ…ã€‚ä¸ºäº†å®Œæˆè¯¥æ•°æ®åŒ…çš„é‡ä¼ ï¼ŒTCP å¥—æ¥å­—å¯åŠ¨è®¡æ—¶å™¨ä»¥ç­‰å¾… ACK åº”ç­”ã€‚è‹¥ç›¸åº”è®¡æ—¶å™¨å‘ç”Ÿè¶…æ—¶ï¼ˆTime-out!ï¼‰åˆ™é‡ä¼ ã€‚&lt;/p&gt;
&lt;h4 id=&#34;524-tcp-å†…éƒ¨å·¥ä½œåŸç†-3æ–­å¼€å¥—æ¥å­—çš„è¿æ¥&#34;&gt;5.2.4 TCP å†…éƒ¨å·¥ä½œåŸç† 3ï¼šæ–­å¼€å¥—æ¥å­—çš„è¿æ¥&lt;/h4&gt;
&lt;p&gt;TCP å¥—æ¥å­—çš„ç»“æŸè¿‡ç¨‹ä¹Ÿéå¸¸ä¼˜é›…ã€‚å¦‚æœå¯¹æ–¹è¿˜æœ‰æ•°æ®éœ€è¦ä¼ è¾“æ—¶ç›´æ¥æ–­æ‰è¯¥è¿æ¥ä¼šå‡ºé—®é¢˜ï¼Œæ‰€ä»¥æ–­å¼€è¿æ¥æ—¶éœ€è¦åŒæ–¹åå•†ï¼Œæ–­å¼€è¿æ¥æ—¶åŒæ–¹çš„å¯¹è¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å¥—æ¥å­—Aï¼šæˆ‘å¸Œæœ›æ–­å¼€è¿æ¥&lt;/li&gt;
&lt;li&gt;å¥—æ¥å­—Bï¼šå“¦ï¼Œæ˜¯å—ï¼Ÿè¯·ç¨åã€‚&lt;/li&gt;
&lt;li&gt;å¥—æ¥å­—Aï¼šæˆ‘ä¹Ÿå‡†å¤‡å°±ç»ªï¼Œå¯ä»¥æ–­å¼€è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;å¥—æ¥å­—Bï¼šå¥½çš„ï¼Œè°¢è°¢åˆä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…ˆç”±å¥—æ¥å­— A å‘å¥—æ¥å­— B ä¼ é€’æ–­å¼€è¿æ¥çš„ä¿¡æ¯ï¼Œå¥—æ¥å­— B å‘å‡ºç¡®è®¤æ”¶åˆ°çš„æ¶ˆæ¯ï¼Œç„¶åå‘å¥—æ¥å­— A ä¼ é€’å¯ä»¥æ–­å¼€è¿æ¥çš„æ¶ˆæ¯ï¼Œå¥—æ¥å­— A åŒæ ·å‘å‡ºç¡®è®¤æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/16/5c3ed7503c18c.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸­æ•°æ®åŒ…å†…çš„ FIN è¡¨ç¤ºæ–­å¼€è¿æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒæ–¹å„å‘é€ 1 æ¬¡ FIN æ¶ˆæ¯åæ–­å¼€è¿æ¥ã€‚æ­¤è¿‡è¿‡ç¨‹ç»å† 4 ä¸ªé˜¶æ®µï¼Œå› æ­¤åˆç§°å››æ¬¡æ¡æ‰‹ï¼ˆFour-way handshakingï¼‰ã€‚SEQ å’Œ ACK çš„å«ä¹‰ä¸ä¹‹å‰è®²è§£çš„å†…å®¹ä¸€è‡´ï¼Œçœç•¥ã€‚å›¾ä¸­ï¼Œä¸»æœº A ä¼ é€’äº†ä¸¤æ¬¡ ACK 5001ï¼Œä¹Ÿè®¸è¿™é‡Œä¼šæœ‰å›°æƒ‘ã€‚å…¶å®ï¼Œç¬¬äºŒæ¬¡ FIN æ•°æ®åŒ…ä¸­çš„ ACK 5001 åªæ˜¯å› ä¸ºæ¥æ”¶äº† ACK æ¶ˆæ¯åæœªæ¥æ”¶åˆ°çš„æ•°æ®é‡ä¼ çš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;53-åŸºäº-windows-çš„å®ç°&#34;&gt;5.3 åŸºäº Windows çš„å®ç°&lt;/h3&gt;
&lt;p&gt;æš‚ç•¥&lt;/p&gt;
&lt;h3 id=&#34;54-ä¹ é¢˜&#34;&gt;5.4 ä¹ é¢˜&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”æ¡ˆä»…ä»£è¡¨æœ¬äººä¸ªäººè§‚ç‚¹ï¼Œå¯èƒ½ä¸æ˜¯æ­£ç¡®ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯·è¯´æ˜ TCP å¥—æ¥å­—è¿æ¥è®¾ç½®çš„ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ã€‚å°¤å…¶æ˜¯ 3 æ¬¡æ•°æ®äº¤æ¢è¿‡ç¨‹æ¯æ¬¡æ”¶å‘çš„æ•°æ®å†…å®¹ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šä¸‰æ¬¡æ¡æ‰‹ä¸»è¦åˆ†ä¸ºï¼šâ‘ ä¸å¯¹æ–¹å¥—æ¥å­—å»ºç«‹è¿æ¥â‘¡ä¸å¯¹æ–¹å¥—æ¥å­—è¿›è¡Œæ•°æ®äº¤æ¢â‘¢æ–­å¼€ä¸å¯¹æ–¹å¥—æ¥å­—çš„è¿æ¥ã€‚æ¯æ¬¡æ”¶å‘çš„æ•°æ®å†…å®¹ä¸»è¦æœ‰ï¼šâ‘ ç”±ä¸»æœº1ç»™ä¸»æœº2å‘é€åˆå§‹çš„SEQï¼Œé¦–æ¬¡è¿æ¥è¯·æ±‚æ˜¯å…³é”®å­—æ˜¯SYNï¼Œè¡¨ç¤ºæ”¶å‘æ•°æ®å‰åŒæ­¥ä¼ è¾“çš„æ¶ˆæ¯ã€‚â‘¡ä¸»æœº2æ”¶åˆ°æŠ¥æ–‡ä»¥åï¼Œç»™ä¸»æœº 1 ä¼ é€’ä¿¡æ¯ï¼Œç”¨ä¸€ä¸ªæ–°çš„SEQè¡¨ç¤ºè‡ªå·±çš„åºå·ï¼Œç„¶åACKä»£è¡¨å·²ç»æ¥å—åˆ°ä¸»æœº1çš„æ¶ˆæ¯ï¼Œå¸Œæœ›æ¥å—ä¸‹ä¸€ä¸ªæ¶ˆæ¯â‘¢ä¸»æœº1æ”¶åˆ°ä¸»æœº2çš„ç¡®è®¤ä»¥åï¼Œè¿˜éœ€è¦ç»™ä¸»æœº2ç»™å‡ºç¡®è®¤ï¼Œæ­¤æ—¶å†å‘é€ä¸€æ¬¡SEQå’ŒACKã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;TCP æ˜¯å¯é çš„æ•°æ®ä¼ è¾“åè®®ï¼Œä½†åœ¨é€šè¿‡ç½‘ç»œé€šä¿¡çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¸¢å¤±æ•°æ®ã€‚è¯·é€šè¿‡ ACK å’Œ SEQ è¯´æ˜ TCP é€šè¿‡å’Œä½•ç§æœºåˆ¶ä¿è¯ä¸¢å¤±æ•°æ®çš„å¯é ä¼ è¾“ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šé€šè¿‡è¶…æ—¶é‡ä¼ æœºåˆ¶æ¥ä¿è¯ï¼Œå¦‚æœæŠ¥æ–‡å‘å‡ºå»çš„ç‰¹å®šæ—¶é—´å†…ï¼Œå‘é€æ¶ˆæ¯çš„ä¸»æœºæ²¡æœ‰æ”¶åˆ°å¦ä¸€ä¸ªä¸»æœºçš„å›å¤ï¼Œé‚£ä¹ˆå°±ç»§ç»­å‘é€è¿™æ¡æ¶ˆæ¯ï¼Œç›´åˆ°æ”¶åˆ°å›å¤ä¸ºæ­¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;TCP å¥—æ¥å­—ä¸­è°ƒç”¨ write å’Œ read å‡½æ•°æ—¶æ•°æ®å¦‚ä½•ç§»åŠ¨ï¼Ÿç»“åˆ I/O ç¼“å†²è¿›è¡Œè¯´æ˜ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šTCP å¥—æ¥å­—è°ƒç”¨ write å‡½æ•°æ—¶ï¼Œæ•°æ®å°†ç§»è‡³è¾“å‡ºç¼“å†²ï¼Œåœ¨é€‚å½“çš„æ—¶å€™ï¼Œä¼ åˆ°å¯¹æ–¹è¾“å…¥ç¼“å†²ã€‚è¿™æ—¶å¯¹æ–¹å°†è°ƒç”¨ read å‡½æ•°ä»è¾“å…¥ç¼“å†²ä¸­è¯»å–æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯¹æ–¹ä¸»æœºçš„è¾“å…¥ç¼“å†²å‰©ä½™ 50 å­—èŠ‚ç©ºé—´æ—¶ï¼Œè‹¥æœ¬ä¸»æœºé€šè¿‡ write å‡½æ•°è¯·æ±‚ä¼ è¾“ 70 å­—èŠ‚ï¼Œè¯·é—® TCP å¦‚ä½•å¤„ç†è¿™ç§æƒ…å†µï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šTCP ä¸­æœ‰æ»‘åŠ¨çª—å£æ§åˆ¶åè®®ï¼Œæ‰€ä»¥ä¼ è¾“çš„æ—¶å€™ä¼šä¿è¯ä¼ è¾“çš„å­—èŠ‚æ•°å°äºç­‰äºè‡ªå·±èƒ½æ¥å—çš„å­—èŠ‚æ•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
- https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-5-%E7%AB%A0-%E5%9F%BA%E4%BA%8E-tcp-%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%AB%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF2-%E7%AC%94%E8%AE%B0/ - </description>
        </item>
    
    
    
        <item>
        <title>ã€ŠTCP/IPç½‘ç»œç¼–ç¨‹ã€‹ç¬¬ 4 ç«  åŸºäº TCP çš„æœåŠ¡ç«¯/å®¢æˆ·ç«¯ï¼ˆ1ï¼‰ ç¬”è®°</title>
        <link>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-4-%E7%AB%A0-%E5%9F%BA%E4%BA%8E-tcp-%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%AB%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF1-%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Tue, 15 Jan 2019 13:10:00 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-4-%E7%AB%A0-%E5%9F%BA%E4%BA%8E-tcp-%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%AB%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF1-%E7%AC%94%E8%AE%B0/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-4-%E7%AB%A0-%E5%9F%BA%E4%BA%8E-tcp-%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%AB%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF1-%E7%AC%94%E8%AE%B0/ -&lt;h2 id=&#34;ç¬¬-4-ç« -åŸºäº-tcp-çš„æœåŠ¡ç«¯å®¢æˆ·ç«¯1&#34;&gt;ç¬¬ 4 ç«  åŸºäº TCP çš„æœåŠ¡ç«¯/å®¢æˆ·ç«¯ï¼ˆ1ï¼‰&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä»£ç ï¼Œåœ¨&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote&#34;&gt;TCP-IP-NetworkNote&lt;/a&gt;ä¸­å¯ä»¥æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;41-ç†è§£-tcp-å’Œ-udp&#34;&gt;4.1 ç†è§£ TCP å’Œ UDP&lt;/h3&gt;
&lt;p&gt;æ ¹æ®æ•°æ®ä¼ è¾“æ–¹å¼çš„ä¸åŒï¼ŒåŸºäºç½‘ç»œåè®®çš„å¥—æ¥å­—ä¸€èˆ¬åˆ†ä¸º TCP å¥—æ¥å­—å’Œ UDP å¥—æ¥å­—ã€‚å› ä¸º TCP å¥—æ¥å­—æ˜¯é¢å‘è¿æ¥çš„ï¼Œå› æ­¤åˆè¢«ç§°ä¸ºåŸºäºæµï¼ˆstreamï¼‰çš„å¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;p&gt;TCP æ˜¯ Transmission Control Protocol ï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰çš„ç®€å†™ï¼Œæ„ä¸ºã€Œå¯¹æ•°æ®ä¼ è¾“è¿‡ç¨‹çš„æ§åˆ¶ã€ã€‚å› æ­¤ï¼Œå­¦ä¹ æ§åˆ¶æ–¹æ³•åŠèŒƒå›´æœ‰åŠ©äºæ­£ç¡®ç†è§£ TCP å¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;h4 id=&#34;411-tcpip-åè®®æ ˆ&#34;&gt;4.1.1 TCP/IP åè®®æ ˆ&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/14/5c3c21889db06.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;TCP/IP åè®®æ ˆå…±åˆ†ä¸º 4 å±‚ï¼Œå¯ä»¥ç†è§£ä¸ºæ•°æ®æ”¶å‘åˆ†æˆäº† 4 ä¸ªå±‚æ¬¡åŒ–è¿‡ç¨‹ï¼Œé€šè¿‡å±‚æ¬¡åŒ–çš„æ–¹å¼æ¥è§£å†³é—®é¢˜&lt;/p&gt;
&lt;h4 id=&#34;412-é“¾è·¯å±‚&#34;&gt;4.1.2 é“¾è·¯å±‚&lt;/h4&gt;
&lt;p&gt;é“¾è·¯å±‚æ˜¯ç‰©ç†é“¾æ¥é¢†åŸŸæ ‡å‡†åŒ–çš„ç»“æœï¼Œä¹Ÿæ˜¯æœ€åŸºæœ¬çš„é¢†åŸŸï¼Œä¸“é—¨å®šä¹‰LANã€WANã€MANç­‰ç½‘ç»œæ ‡å‡†ã€‚è‹¥ä¸¤å°ä¸»æœºé€šè¿‡ç½‘ç»œè¿›è¡Œæ•°æ®äº¤æ¢ï¼Œåˆ™éœ€è¦ç‰©ç†è¿æ¥ï¼Œé“¾è·¯å±‚å°±è´Ÿè´£è¿™äº›æ ‡å‡†ã€‚&lt;/p&gt;
&lt;h4 id=&#34;413-ip-å±‚&#34;&gt;4.1.3 IP å±‚&lt;/h4&gt;
&lt;p&gt;è½¬å¤‡å¥½ç‰©ç†è¿æ¥å€™å°±è¦ä¼ è¾“æ•°æ®ã€‚ä¸ºäº†å†å¤æ‚ç½‘ç»œä¸­ä¼ è¾“æ•°æ®ï¼Œé¦–å…ˆè¦è€ƒè™‘è·¯å¾„çš„é€‰æ‹©ã€‚å‘ç›®æ ‡ä¼ è¾“æ•°æ®éœ€è¦ç»è¿‡å“ªæ¡è·¯å¾„ï¼Ÿè§£å†³æ­¤é—®é¢˜çš„å°±æ˜¯IPå±‚ï¼Œè¯¥å±‚ä½¿ç”¨çš„åè®®å°±æ˜¯IPã€‚&lt;/p&gt;
&lt;p&gt;IP æ˜¯é¢å‘æ¶ˆæ¯çš„ã€ä¸å¯é çš„åè®®ã€‚æ¯æ¬¡ä¼ è¾“æ•°æ®æ—¶ä¼šå¸®æˆ‘ä»¬é€‰æ‹©è·¯å¾„ï¼Œä½†å¹¶ä¸ä¸€è‡´ã€‚å¦‚æœä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œåˆ™é€‰æ‹©å…¶ä»–è·¯å¾„ï¼Œä½†æ˜¯å¦‚æœå‘ç”Ÿæ•°æ®ä¸¢å¤±æˆ–é”™è¯¯ï¼Œåˆ™æ— æ³•è§£å†³ã€‚æ¢è¨€ä¹‹ï¼ŒIPåè®®æ— æ³•åº”å¯¹æ•°æ®é”™è¯¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;414-tcpudp-å±‚&#34;&gt;4.1.4 TCP/UDP å±‚&lt;/h4&gt;
&lt;p&gt;IP å±‚è§£å†³æ•°æ®ä¼ è¾“ä¸­çš„è·¯å¾„é€‰æ‹©é—®é¢˜ï¼Œç§©åºç…§æ­¤è·¯å¾„ä¼ è¾“æ•°æ®å³å¯ã€‚TCP å’Œ UDP å±‚ä»¥ IP å±‚æä¾›çš„è·¯å¾„ä¿¡æ¯ä¸ºåŸºç¡€å®Œæˆå®é™…çš„æ•°æ®ä¼ è¾“ï¼Œæ•…è¯¥å±‚åˆç§°ä¸ºä¼ è¾“å±‚ã€‚UDP æ¯” TCP ç®€å•ï¼Œç°åœ¨æˆ‘ä»¬åªè§£é‡Š TCP ã€‚ TCP å¯ä»¥ä¿è¯æ•°æ®çš„å¯é ä¼ è¾“ï¼Œä½†æ˜¯å®ƒå‘é€æ•°æ®æ—¶ä»¥ IP å±‚ä¸ºåŸºç¡€ï¼ˆè¿™ä¹Ÿæ˜¯åè®®æ ˆå±‚æ¬¡åŒ–çš„åŸå› ï¼‰&lt;/p&gt;
&lt;p&gt;IP å±‚åªå…³æ³¨ä¸€ä¸ªæ•°æ®åŒ…ï¼ˆæ•°æ®ä¼ è¾“åŸºæœ¬å•ä½ï¼‰çš„ä¼ è¾“è¿‡ç¨‹ã€‚å› æ­¤ï¼Œå³ä½¿ä¼ è¾“å¤šä¸ªæ•°æ®åŒ…ï¼Œæ¯ä¸ªæ•°æ®åŒ…ä¹Ÿæ˜¯ç”± IP å±‚å®é™…ä¼ è¾“çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼ è¾“é¡ºåºåŠä¼ è¾“æœ¬èº«æ˜¯ä¸å¯é çš„ã€‚è‹¥åªåˆ©ç”¨IPå±‚ä¼ è¾“æ•°æ®ï¼Œåˆ™å¯èƒ½å¯¼è‡´åä¼ è¾“çš„æ•°æ®åŒ…Bæ¯”å…ˆä¼ è¾“çš„æ•°æ®åŒ…Aææ—©åˆ°è¾¾ã€‚å¦å¤–ï¼Œä¼ è¾“çš„æ•°æ®åŒ…Aã€Bã€Cä¸­å¯èƒ½åªæ”¶åˆ°Aå’ŒCï¼Œç”šè‡³æ”¶åˆ°çš„Cå¯èƒ½å·²ç»æŸæ¯ ã€‚åä¹‹ï¼Œè‹¥æ·»åŠ  TCP åè®®åˆ™æŒ‰ç…§å¦‚ä¸‹å¯¹è¯æ–¹å¼è¿›è¡Œæ•°æ®äº¤æ¢ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸»æœºAï¼šæ­£ç¡®æ¥å—ç¬¬äºŒä¸ªæ•°æ®åŒ…&lt;/p&gt;
&lt;p&gt;ä¸»æœºBï¼šæ©ï¼ŒçŸ¥é“äº†&lt;/p&gt;
&lt;p&gt;ä¸»æœºAï¼šæ­£ç¡®æ”¶åˆ°ç¬¬ä¸‰ä¸ªæ•°æ®åŒ…&lt;/p&gt;
&lt;p&gt;ä¸»æœºBï¼šå¯æˆ‘å·²ç»å‘é€ç¬¬å››ä¸ªæ•°æ®åŒ…äº†å•Šï¼å“¦ï¼Œæ‚¨æ²¡æ”¶åˆ°å§ï¼Œæˆ‘ç»™ä½ é‡æ–°å‘ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™å°±æ˜¯ TCP çš„ä½œç”¨ã€‚å¦‚æœäº¤æ¢æ•°æ®çš„è¿‡ç¨‹ä¸­å¯ä»¥ç¡®è®¤å¯¹æ–¹å·²ç»æ”¶åˆ°æ•°æ®ï¼Œå¹¶é‡ä¼ ä¸¢å¤±çš„æ•°æ®ï¼Œé‚£ä¹ˆå³ä¾¿IPå±‚ä¸ä¿è¯æ•°æ®ä¼ è¾“ï¼Œè¿™ç±»é€šä¿¡ä¹Ÿæ˜¯å¯é çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/14/5c3c268b40be6.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;415-åº”ç”¨å±‚&#34;&gt;4.1.5 åº”ç”¨å±‚&lt;/h4&gt;
&lt;p&gt;ä¸Šè¿°å†…å®¹æ˜¯å¥—æ¥å­—é€šä¿¡è¿‡ç¨‹ä¸­è‡ªåŠ¨å¤„ç†çš„ã€‚é€‰æ‹©æ•°æ®ä¼ è¾“è·¯å¾„ã€æ•°æ®ç¡®è®¤è¿‡ç¨‹éƒ½è¢«éšè—åˆ°å¥—æ¥å­—å†…éƒ¨ã€‚å‘ç¨‹åºå‘˜æä¾›çš„å·¥å…·å°±æ˜¯å¥—æ¥å­—ï¼Œåªéœ€è¦åˆ©ç”¨å¥—æ¥å­—ç¼–å‡ºç¨‹åºå³å¯ã€‚ç¼–å†™è½¯ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ ¹æ®ç¨‹åºçš„ç‰¹ç‚¹æ¥å†³å®šæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„æ•°æ®ä¼ è¾“è§„åˆ™ï¼Œè¿™ä¾¿æ˜¯åº”ç”¨å±‚åè®®ã€‚&lt;/p&gt;
&lt;h3 id=&#34;42-å®ç°åŸºäº-tcp-çš„æœåŠ¡å™¨å®¢æˆ·ç«¯&#34;&gt;4.2 å®ç°åŸºäº TCP çš„æœåŠ¡å™¨/å®¢æˆ·ç«¯&lt;/h3&gt;
&lt;h4 id=&#34;421-tcp-æœåŠ¡ç«¯çš„é»˜è®¤å‡½æ•°çš„è°ƒç”¨ç¨‹åº&#34;&gt;4.2.1 TCP æœåŠ¡ç«¯çš„é»˜è®¤å‡½æ•°çš„è°ƒç”¨ç¨‹åº&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/14/5c3c2782a7810.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;è°ƒç”¨ socket å‡½æ•°åˆ›å»ºå¥—æ¥å­—ï¼Œå£°æ˜å¹¶åˆå§‹åŒ–åœ°å€ä¿¡æ¯çš„ç»“æ„ä½“å˜é‡ï¼Œè°ƒç”¨ bind å‡½æ•°å‘å¥—æ¥å­—åˆ†é…åœ°å€ã€‚&lt;/p&gt;
&lt;h4 id=&#34;422-è¿›å…¥ç­‰å¾…è¿æ¥è¯·æ±‚çŠ¶æ€&#34;&gt;4.2.2 è¿›å…¥ç­‰å¾…è¿æ¥è¯·æ±‚çŠ¶æ€&lt;/h4&gt;
&lt;p&gt;å·²ç»è°ƒç”¨äº† bind å‡½æ•°ç»™ä»–è¦å€Ÿèµ„åˆ†é…åœ°å€ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è¦é€šè¿‡è°ƒç”¨ listen å‡½æ•°è¿›å…¥ç­‰å¾…é“¾æ¥è¯·æ±‚çŠ¶æ€ã€‚åªæœ‰è°ƒç”¨äº† listen å‡½æ•°ï¼Œå®¢æˆ·ç«¯æ‰èƒ½è¿›å…¥å¯å‘å‡ºè¿æ¥è¯·æ±‚çš„çŠ¶æ€ã€‚æ¢è¨€ä¹‹ï¼Œè¿™æ—¶å®¢æˆ·ç«¯æ‰èƒ½è°ƒç”¨ connect å‡½æ•°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;listen&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; sockfd, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; backlog);
&lt;span style=&#34;color:#228b22&#34;&gt;//æˆåŠŸæ—¶è¿”å›0ï¼Œå¤±è´¥æ—¶è¿”å›-1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;//sock: å¸Œæœ›è¿›å…¥ç­‰å¾…è¿æ¥è¯·æ±‚çŠ¶æ€çš„å¥—æ¥å­—æ–‡ä»¶æè¿°ç¬¦ï¼Œä¼ é€’çš„æè¿°ç¬¦å¥—æ¥å­—å‚æ•°ç§°ä¸ºæœåŠ¡ç«¯å¥—æ¥å­—
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;//backlog: è¿æ¥è¯·æ±‚ç­‰å¾…é˜Ÿåˆ—çš„é•¿åº¦ï¼Œè‹¥ä¸º5ï¼Œåˆ™é˜Ÿåˆ—é•¿åº¦ä¸º5ï¼Œè¡¨ç¤ºæœ€å¤šä½¿5ä¸ªè¿æ¥è¯·æ±‚è¿›å…¥é˜Ÿåˆ—            
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;423-å—ç†å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚&#34;&gt;4.2.3 å—ç†å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚&lt;/h4&gt;
&lt;p&gt;è°ƒç”¨ listen å‡½æ•°åï¼Œåˆ™åº”è¯¥æŒ‰åºå—ç†ã€‚å—ç†è¯·æ±‚æ„å‘³ç€å¯æ¥å—æ•°æ®çš„çŠ¶æ€ã€‚è¿›å…¥è¿™ç§çŠ¶æ€æ‰€éœ€çš„éƒ¨ä»¶æ˜¯&lt;strong&gt;å¥—æ¥å­—&lt;/strong&gt;ï¼Œä½†æ˜¯æ­¤æ—¶ä½¿ç”¨çš„ä¸æ˜¯æœåŠ¡ç«¯å¥—æ¥å­—ï¼Œæ­¤æ—¶éœ€è¦å¦ä¸€ä¸ªå¥—æ¥å­—ï¼Œä½†æ˜¯æ²¡å¿…è¦äº²è‡ªåˆ›å»ºï¼Œä¸‹é¢çš„å‡½æ•°å°†è‡ªåŠ¨åˆ›å»ºå¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;accept&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; sockfd, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr *addr, socklen_t *addrlen);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å›æ–‡ä»¶æè¿°ç¬¦ï¼Œå¤±è´¥æ—¶è¿”å›-1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;sock: æœåŠ¡ç«¯å¥—æ¥å­—çš„æ–‡ä»¶æè¿°ç¬¦
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;addr: ä¿å­˜å‘èµ·è¿æ¥è¯·æ±‚çš„å®¢æˆ·ç«¯åœ°å€ä¿¡æ¯çš„å˜é‡åœ°å€å€¼
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;addrlen: çš„ç¬¬äºŒä¸ªå‚æ•°addrç»“æ„ä½“çš„é•¿åº¦ï¼Œä½†æ˜¯å­˜æ”¾æœ‰é•¿åº¦çš„å˜é‡åœ°å€ã€‚
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;sccept å‡½æ•°å—ç†è¿æ¥è¯·æ±‚é˜Ÿåˆ—ä¸­å¾…å¤„ç†çš„å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚ã€‚å‡½æ•°è°ƒç”¨æˆåŠŸåï¼Œaccept å†…éƒ¨å°†äº§ç”Ÿç”¨äºæ•°æ® I/O çš„å¥—æ¥å­—ï¼Œå¹¶è¿”å›å…¶æ–‡ä»¶æè¿°ç¬¦ã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯å¥—æ¥å­—æ˜¯è‡ªåŠ¨åˆ›å»ºçš„ï¼Œå¹¶è‡ªåŠ¨ä¸å‘èµ·è¿æ¥è¯·æ±‚çš„å®¢æˆ·ç«¯å»ºç«‹è¿æ¥ã€‚&lt;/p&gt;
&lt;h4 id=&#34;424-å›é¡¾-hello-world-æœåŠ¡ç«¯&#34;&gt;4.2.4 å›é¡¾ Hello World æœåŠ¡ç«¯&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä»£ç ï¼š&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch04/hello_server.c&#34;&gt;hello_server.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é‡æ–°æ•´ç†ä¸€ä¸‹ä»£ç çš„æ€è·¯&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æœåŠ¡ç«¯å®ç°è¿‡ç¨‹ä¸­é¦–å…ˆè¦åˆ›å»ºå¥—æ¥å­—ï¼Œæ­¤æ—¶çš„å¥—æ¥å­—å¹¶éæ˜¯çœŸæ­£çš„æœåŠ¡ç«¯å¥—æ¥å­—&lt;/li&gt;
&lt;li&gt;ä¸ºäº†å®Œæˆå¥—æ¥å­—åœ°å€çš„åˆ†é…ï¼Œåˆå§‹åŒ–ç»“æ„ä½“å˜é‡å¹¶è°ƒç”¨ bind å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ listen å‡½æ•°è¿›å…¥ç­‰å¾…è¿æ¥è¯·æ±‚çŠ¶æ€ã€‚è¿æ¥è¯·æ±‚çŠ¶æ€é˜Ÿåˆ—çš„é•¿åº¦è®¾ç½®ä¸º5.æ­¤æ—¶çš„å¥—æ¥å­—æ‰æ˜¯æœåŠ¡ç«¯å¥—æ¥å­—ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ accept å‡½æ•°ä»é˜Ÿå¤´å– 1 ä¸ªè¿æ¥è¯·æ±‚ä¸å®¢æˆ·ç«¯å»ºç«‹è¿æ¥ï¼Œå¹¶è¿”å›åˆ›å»ºçš„å¥—æ¥å­—æ–‡ä»¶æè¿°ç¬¦ã€‚å¦å¤–ï¼Œè°ƒç”¨ accept å‡½æ•°æ—¶è‹¥ç­‰å¾…é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™ accept å‡½æ•°ä¸ä¼šè¿”å›ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­å‡ºç°æ–°çš„å®¢æˆ·ç«¯è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ write å‡½æ•°å‘å®¢æˆ·ç«¯ä¼ é€æ•°æ®ï¼Œè°ƒç”¨ close å…³é—­è¿æ¥&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;425-tcp-å®¢æˆ·ç«¯çš„é»˜è®¤å‡½æ•°è°ƒç”¨é¡ºåº&#34;&gt;4.2.5 TCP å®¢æˆ·ç«¯çš„é»˜è®¤å‡½æ•°è°ƒç”¨é¡ºåº&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/14/5c3c31d77e86c.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä¸æœåŠ¡ç«¯ç›¸æ¯”ï¼ŒåŒºåˆ«å°±åœ¨äºã€Œè¯·æ±‚è¿æ¥ã€ï¼Œä»–æ˜¯åˆ›å»ºå®¢æˆ·ç«¯å¥—æ¥å­—åå‘æœåŠ¡ç«¯å‘èµ·çš„è¿æ¥è¯·æ±‚ã€‚æœåŠ¡ç«¯è°ƒç”¨ listen å‡½æ•°ååˆ›å»ºè¿æ¥è¯·æ±‚ç­‰å¾…é˜Ÿåˆ—ï¼Œä¹‹åå®¢æˆ·ç«¯å³å¯è¯·æ±‚è¿æ¥ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;connect&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; sock, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr *servaddr, socklen_t addrlen);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å›0ï¼Œå¤±è´¥è¿”å›-1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;sock:å®¢æˆ·ç«¯å¥—æ¥å­—æ–‡ä»¶æè¿°ç¬¦
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;servaddr: ä¿å­˜ç›®æ ‡æœåŠ¡å™¨ç«¯åœ°å€ä¿¡æ¯çš„å˜é‡åœ°å€å€¼
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;addrlen: ä»¥å­—èŠ‚ä¸ºå•ä½ä¼ é€’ç»™ç¬¬äºŒä¸ªç»“æ„ä½“å‚æ•° servaddr çš„å˜é‡åœ°å€é•¿åº¦
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å®¢æˆ·ç«¯è°ƒç”¨ connect å‡½æ•°å€™ï¼Œå‘ç”Ÿä»¥ä¸‹å‡½æ•°ä¹‹ä¸€æ‰ä¼šè¿”å›ï¼ˆå®Œæˆå‡½æ•°è°ƒç”¨ï¼‰:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœåŠ¡ç«¯æ¥å—è¿æ¥è¯·æ±‚&lt;/li&gt;
&lt;li&gt;å‘ç”Ÿæ–­ç½‘ç­‰ä¸€åœºçŠ¶å†µè€Œä¸­æ–­è¿æ¥è¯·æ±‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;strong&gt;æ¥å—è¿æ¥&lt;/strong&gt;ä¸ä»£è¡¨æœåŠ¡ç«¯è°ƒç”¨ accept å‡½æ•°ï¼Œå…¶å®åªæ˜¯æœåŠ¡å™¨ç«¯æŠŠè¿æ¥è¯·æ±‚ä¿¡æ¯è®°å½•åˆ°ç­‰å¾…é˜Ÿåˆ—ã€‚å› æ­¤ connect å‡½æ•°è¿”å›åå¹¶ä¸åº”è¯¥ç«‹å³è¿›è¡Œæ•°æ®äº¤æ¢ã€‚&lt;/p&gt;
&lt;h4 id=&#34;426-å›é¡¾-hello-world-å®¢æˆ·ç«¯&#34;&gt;4.2.6 å›é¡¾ Hello World å®¢æˆ·ç«¯&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä»£ç ï¼š&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch04/hello_client.c&#34;&gt;hello_client.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é‡æ–°ç†è§£è¿™ä¸ªç¨‹åºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ›å»ºå‡†å¤‡è¿æ¥æœåŠ¡å™¨çš„å¥—æ¥å­—ï¼Œæ­¤æ—¶åˆ›å»ºçš„æ˜¯ TCP å¥—æ¥å­—&lt;/li&gt;
&lt;li&gt;ç»“æ„ä½“å˜é‡ serv_addr ä¸­åˆå§‹åŒ–IPå’Œç«¯å£ä¿¡æ¯ã€‚åˆå§‹åŒ–å€¼ä¸ºç›®æ ‡æœåŠ¡å™¨ç«¯å¥—æ¥å­—çš„IPå’Œç«¯å£ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ connect å‡½æ•°å‘æœåŠ¡ç«¯å‘èµ·è¿æ¥è¯·æ±‚&lt;/li&gt;
&lt;li&gt;å®Œæˆè¿æ¥åï¼Œæ¥æ”¶æœåŠ¡ç«¯ä¼ è¾“çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;æ¥æ”¶æ•°æ®åè°ƒç”¨ close å‡½æ•°å…³é—­å¥—æ¥å­—ï¼Œç»“æŸä¸æœåŠ¡å™¨ç«¯çš„è¿æ¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;427-åŸºäº-tcp-çš„æœåŠ¡ç«¯å®¢æˆ·ç«¯å‡½æ•°è°ƒç”¨å…³ç³»&#34;&gt;4.2.7 åŸºäº TCP çš„æœåŠ¡ç«¯/å®¢æˆ·ç«¯å‡½æ•°è°ƒç”¨å…³ç³»&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/14/5c3c35a773b8c.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å…³ç³»å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;h3 id=&#34;43-å®ç°è¿­ä»£æœåŠ¡ç«¯å®¢æˆ·ç«¯&#34;&gt;4.3 å®ç°è¿­ä»£æœåŠ¡ç«¯/å®¢æˆ·ç«¯&lt;/h3&gt;
&lt;p&gt;ç¼–å†™ä¸€ä¸ªå›å£°ï¼ˆechoï¼‰æœåŠ¡å™¨/å®¢æˆ·ç«¯ã€‚é¡¾åæ€ä¹‰ï¼ŒæœåŠ¡ç«¯å°†å®¢æˆ·ç«¯ä¼ è¾“çš„å­—ç¬¦ä¸²æ•°æ®åŸå°ä¸åŠ¨çš„ä¼ å›å®¢æˆ·ç«¯ï¼Œå°±åƒå›å£°ä¸€æ ·ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œéœ€è¦è§£é‡Šä¸€ä¸‹è¿­ä»£æœåŠ¡å™¨ç«¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;431-å®ç°è¿­ä»£æœåŠ¡å™¨ç«¯&#34;&gt;4.3.1 å®ç°è¿­ä»£æœåŠ¡å™¨ç«¯&lt;/h4&gt;
&lt;p&gt;åœ¨ Hello World çš„ä¾‹å­ä¸­ï¼Œç­‰å¾…é˜Ÿåˆ—çš„ä½œç”¨æ²¡æœ‰å¤ªå¤§æ„ä¹‰ã€‚å¦‚æœæƒ³ç»§ç»­å¤„ç†å¥½åé¢çš„å®¢æˆ·ç«¯è¯·æ±‚åº”è¯¥æ€æ ·æ‰©å±•ä»£ç ï¼Ÿæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯æ’å…¥å¾ªç¯åå¤è°ƒç”¨ accept å‡½æ•°ï¼Œå¦‚å›¾:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/15/5c3d3c8a283ad.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œè°ƒç”¨ accept å‡½æ•°åï¼Œç´§æ¥ç€è°ƒç”¨ I/O ç›¸å…³çš„ read write å‡½æ•°ï¼Œç„¶åè°ƒç”¨ close å‡½æ•°ã€‚è¿™å¹¶éé’ˆå¯¹æœåŠ¡å™¨å¥—æ¥å­—ï¼Œè€Œæ˜¯é’ˆå¯¹ accept å‡½æ•°è°ƒç”¨æ—¶åˆ›å»ºçš„å¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;h4 id=&#34;432-è¿­ä»£å›å£°æœåŠ¡å™¨ç«¯å®¢æˆ·ç«¯&#34;&gt;4.3.2 è¿­ä»£å›å£°æœåŠ¡å™¨ç«¯/å®¢æˆ·ç«¯&lt;/h4&gt;
&lt;p&gt;ç¨‹åºè¿è¡Œçš„åŸºæœ¬æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœåŠ¡å™¨ç«¯åœ¨åŒä¸€æ—¶åˆ»åªä¸ä¸€ä¸ªå®¢æˆ·ç«¯ç›¸è¿ï¼Œå¹¶æä¾›å›å£°æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨ç«¯ä¾æ¬¡å‘ 5 ä¸ªå®¢æˆ·ç«¯æä¾›æœåŠ¡å¹¶é€€å‡ºã€‚&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯æ¥å—ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²å¹¶å‘é€åˆ°æœåŠ¡å™¨ç«¯ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨ç«¯å°†æ¥å—çš„å­—ç¬¦ä¸²æ•°æ®ä¼ å›å®¢æˆ·ç«¯ï¼Œå³ã€Œå›å£°ã€&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨ç«¯ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„å­—ç¬¦ä¸²å›å£°ä¸€ç›´æ‰§è¡Œåˆ°å®¢æˆ·ç«¯è¾“å…¥ Q ä¸ºæ­¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯çš„ä»£ç ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch04/echo_server.c&#34;&gt;echo_server.c&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch04/echo_client.c&#34;&gt;echo_client.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¯‘:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc echo_client.c -o eclient
gcc echo_server.c -o eserver
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åˆ†åˆ«è¿è¡Œ:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;./eserver &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
./eclient 127.0.0.1 &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿‡ç¨‹å’Œç»“æœï¼š&lt;/p&gt;
&lt;p&gt;åœ¨ä¸€ä¸ªæœåŠ¡ç«¯å¼€å¯åï¼Œç”¨å¦ä¸€ä¸ªç»ˆç«¯çª—å£å¼€å¯å®¢æˆ·ç«¯ï¼Œç„¶åç¨‹åºä¼šè®©ä½ è¾“å…¥å­—ç¬¦ä¸²ï¼Œç„¶åå®¢æˆ·ç«¯è¾“å…¥ä»€ä¹ˆå­—ç¬¦ä¸²ï¼Œå®¢æˆ·ç«¯å°±ä¼šè¿”å›ä»€ä¹ˆå­—ç¬¦ä¸²ï¼ŒæŒ‰ q é€€å‡ºã€‚è¿™æ—¶æœåŠ¡ç«¯çš„è¿è¡Œå¹¶æ²¡æœ‰ç»“æŸï¼ŒæœåŠ¡ç«¯ä¸€å…±è¦å¤„ç† 5 ä¸ªå®¢æˆ·ç«¯çš„è¿æ¥ï¼Œæ‰€ä»¥å¦å¤–å¼€å¤šä¸ªç»ˆç«¯çª—å£åŒæ—¶å¼€å¯å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨æŒ‰ç…§é¡ºåºè¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;server:
&lt;img src=&#34;https://i.loli.net/2019/01/15/5c3d523d0a675.png&#34; alt=&#34;server.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;client:
&lt;img src=&#34;https://i.loli.net/2019/01/15/5c3d523d336e7.png&#34; alt=&#34;client.png&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;433-å›å£°å®¢æˆ·ç«¯å­˜åœ¨çš„é—®é¢˜&#34;&gt;4.3.3 å›å£°å®¢æˆ·ç«¯å­˜åœ¨çš„é—®é¢˜&lt;/h4&gt;
&lt;p&gt;ä»¥ä¸Šä»£ç æœ‰ä¸€ä¸ªå‡è®¾ã€Œæ¯æ¬¡è°ƒç”¨ readã€writeå‡½æ•°æ—¶éƒ½ä¼šä»¥å­—ç¬¦ä¸²ä¸ºå•ä½æ‰§è¡Œå®é™… I/O æ“ä½œã€&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ã€Œç¬¬äºŒç« ã€ä¸­è¯´è¿‡ã€ŒTCP ä¸å­˜åœ¨æ•°æ®è¾¹ç•Œã€ï¼Œä¸Šè¿°å®¢æˆ·ç«¯æ˜¯åŸºäº TCP çš„ï¼Œå› æ­¤å¤šæ¬¡è°ƒç”¨ write å‡½æ•°ä¼ é€’çš„å­—ç¬¦ä¸²æœ‰å¯èƒ½ä¸€æ¬¡æ€§ä¼ é€’åˆ°æœåŠ¡ç«¯ã€‚æ­¤æ—¶å®¢æˆ·ç«¯æœ‰å¯èƒ½ä»æœåŠ¡ç«¯æ”¶åˆ°å¤šä¸ªå­—ç¬¦ä¸²ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚è¿˜éœ€è¦è€ƒè™‘æœåŠ¡å™¨çš„å¦‚ä¸‹æƒ…å†µï¼š&lt;/p&gt;
&lt;p&gt;ã€Œå­—ç¬¦ä¸²å¤ªé•¿ï¼Œéœ€è¦åˆ† 2 ä¸ªåŒ…å‘é€ï¼ã€&lt;/p&gt;
&lt;p&gt;æœåŠ¡ç«¯å¸Œæœ›é€šè¿‡è°ƒç”¨ 1 æ¬¡ write å‡½æ•°ä¼ è¾“æ•°æ®ï¼Œä½†æ˜¯å¦‚æœæ•°æ®å¤ªå¤§ï¼Œæ“ä½œç³»ç»Ÿå°±æœ‰å¯èƒ½æŠŠæ•°æ®åˆ†æˆå¤šä¸ªæ•°æ®åŒ…å‘é€åˆ°å®¢æˆ·ç«¯ã€‚å¦å¤–ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯å¯èƒ½åœ¨å°šæœªæ”¶åˆ°å…¨éƒ¨æ•°æ®åŒ…æ—¶å°±è°ƒç”¨ read å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šçš„é—®é¢˜éƒ½æ˜¯æºè‡ª TCP çš„ä¼ è¾“ç‰¹æ€§ï¼Œè§£å†³æ–¹æ³•åœ¨ç¬¬ 5 ç« ã€‚&lt;/p&gt;
&lt;h3 id=&#34;44-åŸºäº-windows-çš„å®ç°&#34;&gt;4.4 åŸºäº Windows çš„å®ç°&lt;/h3&gt;
&lt;p&gt;æš‚ç•¥&lt;/p&gt;
&lt;h3 id=&#34;45-ä¹ é¢˜&#34;&gt;4.5 ä¹ é¢˜&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”æ¡ˆä»…ä»£è¡¨æœ¬äººä¸ªäººè§‚ç‚¹ï¼Œä¸ä¸€å®šæ˜¯æ­£ç¡®ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯·ä½ è¯´æ˜ TCP/IP çš„ 4 å±‚åè®®æ ˆï¼Œå¹¶è¯´æ˜ TCP å’Œ UDP å¥—æ¥å­—ç»è¿‡çš„å±‚çº§ç»“æ„å·®å¼‚ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šTCP/IP çš„å››å±‚åè®®åˆ†ä¸ºï¼šåº”ç”¨å±‚ã€TCP/UDP å±‚ã€IPå±‚ã€é“¾è·¯å±‚ã€‚å·®å¼‚æ˜¯ä¸€ä¸ªç»è¿‡ TCP å±‚ï¼Œä¸€ä¸ªç»è¿‡ UDP å±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯·è¯´å‡º TCP/IP åè®®æ ˆä¸­é“¾è·¯å±‚å’ŒIPå±‚çš„ä½œç”¨ï¼Œå¹¶ç»™å‡ºäºŒè€…å…³ç³»&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šé“¾è·¯å±‚æ˜¯ç‰©ç†é“¾æ¥é¢†åŸŸæ ‡å‡†åŒ–çš„ç»“æœï¼Œä¸“é—¨å®šä¹‰ç½‘ç»œæ ‡å‡†ã€‚è‹¥ä¸¤å°ä¸»æœºé€šè¿‡ç½‘ç»œè¿›è¡Œæ•°æ®äº¤æ¢ï¼Œåˆ™é¦–å…ˆè¦åšåˆ°çš„å°±æ˜¯è¿›è¡Œç‰©ç†é“¾æ¥ã€‚IPå±‚ï¼šä¸ºäº†åœ¨å¤æ‚çš„ç½‘ç»œä¸­ä¼ è¾“æ•°æ®ï¼Œé¦–å…ˆéœ€è¦è€ƒè™‘è·¯å¾„çš„é€‰æ‹©ã€‚å…³ç³»ï¼šé“¾è·¯å±‚è´Ÿè´£è¿›è¡Œä¸€ç³»åˆ—ç‰©ç†è¿æ¥ï¼Œè€ŒIPå±‚è´Ÿè´£é€‰æ‹©æ­£ç¡®å¯è¡Œçš„ç‰©ç†è·¯å¾„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºä½•éœ€è¦æŠŠ TCP/IP åè®®æ ˆåˆ†æˆ 4 å±‚ï¼ˆæˆ–7å±‚ï¼‰ï¼Ÿå¼€æ”¾å¼å›ç­”ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šARPANET çš„ç ”åˆ¶ç»éªŒè¡¨æ˜ï¼Œå¯¹äºå¤æ‚çš„è®¡ç®—æœºç½‘ç»œåè®®ï¼Œå…¶ç»“æ„åº”è¯¥æ˜¯å±‚æ¬¡å¼çš„ã€‚åˆ†å†Œçš„å¥½å¤„ï¼šâ‘ éš”å±‚ä¹‹é—´æ˜¯ç‹¬ç«‹çš„â‘¡çµæ´»æ€§å¥½â‘¢ç»“æ„ä¸Šå¯ä»¥åˆ†éš”å¼€â‘£æ˜“äºå®ç°å’Œç»´æŠ¤â‘¤èƒ½ä¿ƒè¿›æ ‡å‡†åŒ–å·¥ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®¢æˆ·ç«¯è°ƒç”¨ connect å‡½æ•°å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚ã€‚æœåŠ¡å™¨ç«¯è°ƒç”¨å“ªä¸ªå‡½æ•°åï¼Œå®¢æˆ·ç«¯å¯ä»¥è°ƒç”¨ connect å‡½æ•°ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šæœåŠ¡ç«¯è°ƒç”¨ listen å‡½æ•°åï¼Œå®¢æˆ·ç«¯å¯ä»¥è°ƒç”¨ connect å‡½æ•°ã€‚å› ä¸ºï¼ŒæœåŠ¡ç«¯è°ƒç”¨ listen å‡½æ•°åï¼ŒæœåŠ¡ç«¯å¥—æ¥å­—æ‰æœ‰èƒ½åŠ›æ¥å—è¯·æ±‚è¿æ¥çš„ä¿¡å·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»€ä¹ˆæ—¶å€™åˆ›å»ºè¿æ¥è¯·æ±‚ç­‰å¾…é˜Ÿåˆ—ï¼Ÿå®ƒæœ‰ä½•ç§ä½œç”¨ï¼Ÿä¸ accept æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šæœåŠ¡ç«¯è°ƒç”¨ listen å‡½æ•°åï¼Œacceptå‡½æ•°æ­£åœ¨å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œ æ›´å¤šçš„å®¢æˆ·ç«¯å‘æ¥äº†è¯·æ±‚è¿æ¥çš„æ•°æ®ï¼Œæ­¤æ—¶ï¼Œå°±éœ€è¦åˆ›å»ºè¿æ¥è¯·æ±‚ç­‰å¾…é˜Ÿåˆ—ã€‚ä»¥ä¾¿äºåœ¨acceptå‡½æ•°å¤„ç†å®Œæ‰‹å¤´çš„è¯·æ±‚ä¹‹åï¼ŒæŒ‰ç…§æ­£ç¡®çš„é¡ºåºå¤„ç†åé¢æ­£åœ¨æ’é˜Ÿçš„å…¶ä»–è¯·æ±‚ã€‚ä¸acceptå‡½æ•°çš„å…³ç³»ï¼šacceptå‡½æ•°å—ç†è¿æ¥è¯·æ±‚ç­‰å¾…é˜Ÿåˆ—ä¸­å¾…å¤„ç†çš„å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®¢æˆ·ç«¯ä¸­ä¸ºä½•ä¸éœ€è¦è°ƒç”¨ bind å‡½æ•°åˆ†é…åœ°å€ï¼Ÿå¦‚æœä¸è°ƒç”¨ bind å‡½æ•°ï¼Œé‚£ä½•æ—¶ã€å¦‚ä½•å‘å¥—æ¥å­—åˆ†é…IPåœ°å€å’Œç«¯å£å·ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šåœ¨è°ƒç”¨ connect å‡½æ•°æ—¶åˆ†é…äº†åœ°å€ï¼Œå®¢æˆ·ç«¯IPåœ°å€å’Œç«¯å£åœ¨è°ƒç”¨ connect å‡½æ•°æ—¶è‡ªåŠ¨åˆ†é…ï¼Œæ— éœ€è°ƒç”¨æ ‡è®°çš„ bind å‡½æ•°è¿›è¡Œåˆ†é…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
- https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-4-%E7%AB%A0-%E5%9F%BA%E4%BA%8E-tcp-%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%AB%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF1-%E7%AC%94%E8%AE%B0/ - </description>
        </item>
    
    
    
        <item>
        <title>ã€ŠTCP/IPç½‘ç»œç¼–ç¨‹ã€‹ç¬¬ 3 ç«  ç½‘ç»œåœ°å€çš„åˆå§‹åŒ–ä¸åˆ†é… ç¬”è®°</title>
        <link>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-3-%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E5%88%86%E9%85%8D-%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Mon, 14 Jan 2019 13:13:00 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-3-%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E5%88%86%E9%85%8D-%E7%AC%94%E8%AE%B0/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-3-%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E5%88%86%E9%85%8D-%E7%AC%94%E8%AE%B0/ -&lt;h2 id=&#34;ç¬¬-3-ç« -åœ°å€æ—ä¸æ•°æ®åºåˆ—&#34;&gt;ç¬¬ 3 ç«  åœ°å€æ—ä¸æ•°æ®åºåˆ—&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä»£ç ï¼Œåœ¨&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote&#34;&gt;TCP-IP-NetworkNote&lt;/a&gt;ä¸­å¯ä»¥æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;æŠŠå¥—æ¥å­—æ¯”å–»æˆç”µè¯ï¼Œé‚£ä¹ˆç›®å‰åªå®‰è£…äº†ç”µè¯æœºï¼Œæœ¬ç« è®²è§£ç»™ç”µè¯æœºåˆ†é…å·ç çš„æ–¹æ³•ï¼Œå³ç»™å¥—æ¥å­—åˆ†é… IP åœ°å€å’Œç«¯å£å·ã€‚&lt;/p&gt;
&lt;h3 id=&#34;31-åˆ†é…ç»™å¥—æ¥å­—çš„-ip-åœ°å€ä¸ç«¯å£å·&#34;&gt;3.1 åˆ†é…ç»™å¥—æ¥å­—çš„ IP åœ°å€ä¸ç«¯å£å·&lt;/h3&gt;
&lt;p&gt;IP æ˜¯ Internet Protocolï¼ˆç½‘ç»œåè®®ï¼‰çš„ç®€å†™ï¼Œæ˜¯ä¸ºæ‰‹æ³•ç½‘ç»œæ•°æ®è€Œåˆ†é…ç»™è®¡ç®—æœºçš„å€¼ã€‚ç«¯å£å·å¹¶éèµ‹äºˆè®¡ç®—æœºçš„å€¼ï¼Œè€Œæ˜¯ä¸ºäº†åŒºåˆ†ç¨‹åºä¸­åˆ›å»ºçš„å¥—æ¥å­—è€Œåˆ†é…ç»™å¥—æ¥å­—çš„ç«¯å£å·ã€‚&lt;/p&gt;
&lt;h4 id=&#34;311-ç½‘ç»œåœ°å€internet-address&#34;&gt;3.1.1 ç½‘ç»œåœ°å€ï¼ˆInternet Addressï¼‰&lt;/h4&gt;
&lt;p&gt;ä¸ºä½¿è®¡ç®—æœºè¿æ¥åˆ°ç½‘ç»œå¹¶æ”¶å‘æ•°æ®ï¼Œå¿…é¡»ä¸ºå…¶åˆ†é… IP åœ°å€ã€‚IP åœ°å€åˆ†ä¸ºä¸¤ç±»ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IPV4ï¼ˆInternet Protocol version 4ï¼‰4 å­—èŠ‚åœ°å€æ—&lt;/li&gt;
&lt;li&gt;IPV6ï¼ˆInternet Protocol version 6ï¼‰6 å­—èŠ‚åœ°å€æ—&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸¤è€…ä¹‹é—´çš„ä¸»è¦å·®åˆ«æ˜¯ IP åœ°å€æ‰€ç”¨çš„å­—èŠ‚æ•°ï¼Œç›®å‰é€šç”¨çš„æ˜¯ IPV4 , IPV6 çš„æ™®åŠè¿˜éœ€è¦æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;IPV4 æ ‡å‡†çš„ 4 å­—èŠ‚ IP åœ°å€åˆ†ä¸ºç½‘ç»œåœ°å€å’Œä¸»æœºï¼ˆæŒ‡è®¡ç®—æœºï¼‰åœ°å€ï¼Œä¸”åˆ†ä¸º Aã€Bã€Cã€Dã€E ç­‰ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/13/5c3ab0eb17bbe.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;æ•°æ®ä¼ è¾“è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/13/5c3ab19174fa4.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;æŸä¸»æœºå‘ 203.211.172.103 å’Œ 203.211.217.202 ä¼ é€’æ•°æ®ï¼Œå…¶ä¸­ 203.211.172 å’Œ 203.211.217 ä¸ºè¯¥ç½‘ç»œçš„ç½‘ç»œåœ°å€ï¼Œæ‰€ä»¥ã€Œå‘ç›¸åº”ç½‘ç»œä¼ è¾“æ•°æ®ã€å®é™…ä¸Šæ˜¯å‘æ„æˆç½‘ç»œçš„è·¯ç”±å™¨æˆ–è€…äº¤æ¢æœºä¼ è¾“æ•°æ®ï¼Œç„¶ååˆè·¯ç”±å™¨æˆ–è€…äº¤æ¢æœºæ ¹æ®æ•°æ®ä¸­çš„ä¸»æœºåœ°å€å‘ç›®æ ‡ä¸»æœºä¼ é€’æ•°æ®ã€‚&lt;/p&gt;
&lt;h4 id=&#34;312-ç½‘ç»œåœ°å€åˆ†ç±»ä¸ä¸»æœºåœ°å€è¾¹ç•Œ&#34;&gt;3.1.2 ç½‘ç»œåœ°å€åˆ†ç±»ä¸ä¸»æœºåœ°å€è¾¹ç•Œ&lt;/h4&gt;
&lt;p&gt;åªéœ€é€šè¿‡IPåœ°å€çš„ç¬¬ä¸€ä¸ªå­—èŠ‚å³å¯åˆ¤æ–­ç½‘ç»œåœ°å€å ç”¨çš„æ€»å­—èŠ‚æ•°ï¼Œå› ä¸ºæˆ‘ä»¬æ ¹æ®IPåœ°å€çš„è¾¹ç•ŒåŒºåˆ†ç½‘ç»œåœ°å€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A ç±»åœ°å€çš„é¦–å­—èŠ‚èŒƒå›´ä¸ºï¼š0~127&lt;/li&gt;
&lt;li&gt;B ç±»åœ°å€çš„é¦–å­—èŠ‚èŒƒå›´ä¸ºï¼š128~191&lt;/li&gt;
&lt;li&gt;C ç±»åœ°å€çš„é¦–å­—èŠ‚èŒƒå›´ä¸ºï¼š192~223&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿˜æœ‰å¦‚ä¸‹è¿™ç§è¡¨ç¤ºæ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A ç±»åœ°å€çš„é¦–ä½ä»¥ 0 å¼€å§‹&lt;/li&gt;
&lt;li&gt;B ç±»åœ°å€çš„å‰2ä½ä»¥ 10 å¼€å§‹&lt;/li&gt;
&lt;li&gt;C ç±»åœ°å€çš„å‰3ä½ä»¥ 110 å¼€å§‹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤å¥—æ¥å­—æ‰‹æ³•æ•°æ®æ—¶ï¼Œæ•°æ®ä¼ åˆ°ç½‘ç»œåå³å¯è½»æ¾æ‰¾åˆ°ä¸»æœºã€‚&lt;/p&gt;
&lt;h4 id=&#34;313-ç”¨äºåŒºåˆ†å¥—æ¥å­—çš„ç«¯å£å·&#34;&gt;3.1.3 ç”¨äºåŒºåˆ†å¥—æ¥å­—çš„ç«¯å£å·&lt;/h4&gt;
&lt;p&gt;IPåœ°å€ç”¨äºåŒºåˆ†è®¡ç®—æœºï¼Œåªè¦æœ‰IPåœ°å€å°±èƒ½å‘ç›®æ ‡ä¸»æœºä¼ è¾“æ•°æ®ï¼Œä½†æ˜¯åªæœ‰è¿™äº›è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¿¡æ¯ä¼ è¾“ç»™å…·ä½“çš„åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥è®¡ç®—æœºä¸€èˆ¬æœ‰ NICï¼ˆç½‘ç»œæ¥å£å¡ï¼‰æ•°æ®ä¼ è¾“è®¾å¤‡ã€‚é€šè¿‡ NIC æ¥å—çš„æ•°æ®å†…æœ‰ç«¯å£å·ï¼Œæ“ä½œç³»ç»Ÿå‚è€ƒç«¯å£å·æŠŠä¿¡æ¯ä¼ ç»™ç›¸åº”çš„åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;ç«¯å£å·ç”± 16 ä½æ„æˆï¼Œå¯åˆ†é…çš„ç«¯å£å·èŒƒå›´æ˜¯ 0~65535 ã€‚ä½†æ˜¯ 0~1023 æ˜¯çŸ¥åç«¯å£ï¼Œä¸€èˆ¬åˆ†é…ç»™ç‰¹å®šçš„åº”ç”¨ç¨‹åºï¼Œæ‰€ä»¥åº”å½“åˆ†é…ç»™æ­¤èŒƒå›´ä¹‹å¤–çš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ç«¯å£å·ä¸èƒ½é‡å¤ï¼Œä½†æ˜¯ TCP å¥—æ¥å­—å’Œ UDP å¥—æ¥å­—ä¸ä¼šå…±ç”¨ç«¯æ¥å£å·ï¼Œæ‰€ä»¥å…è®¸é‡å¤ã€‚å¦‚æœæŸ TCP å¥—æ¥å­—ä½¿ç”¨äº† 9190 ç«¯å£å·ï¼Œå…¶ä»– TCP å¥—æ¥å­—å°±æ— æ³•ä½¿ç”¨è¯¥ç«¯å£å·ï¼Œä½†æ˜¯ UDP å¥—æ¥å­—å¯ä»¥ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ä¹‹ï¼Œæ•°æ®ä¼ è¾“ç›®æ ‡åœ°å€åŒæ—¶åŒ…å«IPåœ°å€å’Œç«¯å£å·ï¼Œåªæœ‰è¿™æ ·ï¼Œæ•°æ®æ‰ä¼šè¢«ä¼ è¾“åˆ°æœ€ç»ˆçš„ç›®çš„åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;h3 id=&#34;32-åœ°å€ä¿¡æ¯çš„è¡¨ç¤º&#34;&gt;3.2 åœ°å€ä¿¡æ¯çš„è¡¨ç¤º&lt;/h3&gt;
&lt;p&gt;åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„IPåœ°å€å’Œç«¯å£å·ä»¥ç»“æ„ä½“çš„å½¢å¼ç»™å‡ºäº†å®šä¹‰ã€‚æœ¬èŠ‚å›´ç»•ç»“æ„ä½“è®¨è®ºç›®æ ‡åœ°å€çš„è¡¨ç¤ºæ–¹æ³•ã€‚&lt;/p&gt;
&lt;h4 id=&#34;321-è¡¨ç¤º-ipv4-åœ°å€çš„ç»“æ„ä½“&#34;&gt;3.2.1 è¡¨ç¤º IPV4 åœ°å€çš„ç»“æ„ä½“&lt;/h4&gt;
&lt;p&gt;ç»“æ„ä½“çš„å®šä¹‰å¦‚ä¸‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr_in
{
    sa_family_t sin_family;  &lt;span style=&#34;color:#228b22&#34;&gt;//åœ°å€æ—ï¼ˆAddress Familyï¼‰
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;uint16_t&lt;/span&gt; sin_port;       &lt;span style=&#34;color:#228b22&#34;&gt;//16 ä½ TCP/UDP ç«¯å£å·
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; in_addr sin_addr; &lt;span style=&#34;color:#228b22&#34;&gt;//32ä½ IP åœ°å€
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; sin_zero[&lt;span style=&#34;color:#b452cd&#34;&gt;8&lt;/span&gt;];        &lt;span style=&#34;color:#228b22&#34;&gt;//ä¸ä½¿ç”¨
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¯¥ç»“æ„ä½“ä¸­æåˆ°çš„å¦ä¸€ä¸ªç»“æ„ä½“ in_addr å®šä¹‰å¦‚ä¸‹ï¼Œå®ƒç”¨æ¥å­˜æ”¾ 32 ä½IPåœ°å€&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; in_addr
{
    in_addr_t s_addr; &lt;span style=&#34;color:#228b22&#34;&gt;//32ä½IPV4åœ°å€
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å…³äºä»¥ä¸Šä¸¤ä¸ªç»“æ„ä½“çš„ä¸€äº›æ•°æ®ç±»å‹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;æ•°æ®ç±»å‹åç§°&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;æ•°æ®ç±»å‹è¯´æ˜&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;å£°æ˜çš„å¤´æ–‡ä»¶&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;int 8_t&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;signed 8-bit int&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;sys/types.h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;uint8_t&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;unsigned 8-bit int (unsigned char)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;sys/types.h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;int16_t&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;signed 16-bit int&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;sys/types.h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;uint16_t&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;unsigned 16-bit int (unsigned short)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;sys/types.h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;int32_t&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;signed 32-bit int&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;sys/types.h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;uint32_t&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;unsigned 32-bit int (unsigned long)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;sys/types.h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;sa_family_t&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;åœ°å€æ—ï¼ˆaddress familyï¼‰&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;sys/socket.h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;socklen_t&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;é•¿åº¦ï¼ˆlength of structï¼‰&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;sys/socket.h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;in_addr_t&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;IPåœ°å€ï¼Œå£°æ˜ä¸º uint_32_t&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;netinet/in.h&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;in_port_t&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ç«¯å£å·ï¼Œå£°æ˜ä¸º uint_16_t&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;netinet/in.h&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆè¦é¢å¤–å®šä¹‰è¿™äº›æ•°æ®ç±»å‹å‘¢ï¼Ÿè¿™æ˜¯è€ƒè™‘æ‰©å±•æ€§çš„ç»“æœ&lt;/p&gt;
&lt;h4 id=&#34;322-ç»“æ„ä½“-sockaddr_in-çš„æˆå‘˜åˆ†æ&#34;&gt;3.2.2 ç»“æ„ä½“ sockaddr_in çš„æˆå‘˜åˆ†æ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æˆå‘˜ sin_family&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¯ç§åè®®é€‚ç”¨çš„åœ°å€æ—ä¸åŒï¼Œæ¯”å¦‚ï¼ŒIPV4 ä½¿ç”¨ 4 å­—èŠ‚çš„åœ°å€æ—ï¼ŒIPV6 ä½¿ç”¨ 16 å­—èŠ‚çš„åœ°å€æ—ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ°å€æ—&lt;/p&gt;
&lt;/blockquote&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœ°å€æ—ï¼ˆAddress Familyï¼‰&lt;/th&gt;
&lt;th&gt;å«ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;AF_INET&lt;/td&gt;
&lt;td&gt;IPV4ç”¨çš„åœ°å€æ—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;AF_INET6&lt;/td&gt;
&lt;td&gt;IPV6ç”¨çš„åœ°å€æ—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;AF_LOCAL&lt;/td&gt;
&lt;td&gt;æœ¬åœ°é€šä¿¡ä¸­é‡‡ç”¨çš„ Unix åè®®çš„åœ°å€æ—&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;AF_LOACL åªæ˜¯ä¸ºäº†è¯´æ˜å…·æœ‰å¤šç§åœ°å€æ—è€Œæ·»åŠ çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æˆå‘˜ sin_port&lt;/p&gt;
&lt;p&gt;è¯¥æˆå‘˜ä¿å­˜ 16 ä½ç«¯å£å·ï¼Œé‡ç‚¹åœ¨äºï¼Œå®ƒä»¥ç½‘ç»œå­—èŠ‚åºä¿å­˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆå‘˜ sin_addr&lt;/p&gt;
&lt;p&gt;è¯¥æˆå‘˜ä¿å­˜ 32 ä¸ºIPåœ°å€ä¿¡æ¯ï¼Œä¸”ä¹Ÿä»¥ç½‘ç»œå­—èŠ‚åºä¿å­˜&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆå‘˜ sin_zero&lt;/p&gt;
&lt;p&gt;æ— ç‰¹æ®Šå«ä¹‰ã€‚åªæ˜¯ä¸ºç»“æ„ä½“ sockaddr_in ç»“æ„ä½“å˜é‡åœ°å€å€¼å°†ä»¥å¦‚ä¸‹æ–¹å¼ä¼ é€’ç»™ bind å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¹‹å‰çš„ä»£ç ä¸­&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (bind(serv_sock, (&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr *)&amp;amp;serv_addr, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;sizeof&lt;/span&gt;(serv_addr)) == -&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;)
    error_handling(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;bind() error&amp;#34;&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­¤å¤„ bind ç¬¬äºŒä¸ªå‚æ•°æœŸæœ›å¾—åˆ°çš„æ˜¯ sockaddr ç»“æ„ä½“å˜é‡çš„åœ°å€å€¼ï¼ŒåŒ…æ‹¬åœ°å€æ—ã€ç«¯å£å·ã€IPåœ°å€ç­‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr
{
    sa_family_t sin_family; &lt;span style=&#34;color:#228b22&#34;&gt;//åœ°å€æ—
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; sa_data[&lt;span style=&#34;color:#b452cd&#34;&gt;14&lt;/span&gt;];       &lt;span style=&#34;color:#228b22&#34;&gt;//åœ°å€ä¿¡æ¯
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­¤ç»“æ„ä½“ sa_data ä¿å­˜çš„åœ°å€ä¿¡æ¯ä¸­éœ€è¦åŒ…å«IPåœ°å€å’Œç«¯å£å·ï¼Œå‰©ä½™éƒ¨åˆ†åº”è¯¥å¡«å…… 0 ï¼Œä½†æ˜¯è¿™æ ·å¯¹äºåŒ…å«åœ°å€çš„ä¿¡æ¯éå¸¸éº»çƒ¦ï¼Œæ‰€ä»¥å‡ºç°äº† sockaddr_in ç»“æ„ä½“ï¼Œç„¶åå¼ºåˆ¶è½¬æ¢æˆ sockaddr ç±»å‹ï¼Œåˆ™ç”Ÿæˆç¬¦åˆ bind æ¡ä»¶çš„å‚æ•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;33-ç½‘ç»œå­—èŠ‚åºä¸åœ°å€å˜æ¢&#34;&gt;3.3 ç½‘ç»œå­—èŠ‚åºä¸åœ°å€å˜æ¢&lt;/h3&gt;
&lt;p&gt;ä¸åŒçš„ CPU ä¸­ï¼Œ4 å­—èŠ‚æ•´æ•°å€¼1åœ¨å†…å­˜ç©ºé—´ä¿å­˜æ–¹å¼æ˜¯ä¸åŒçš„ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰äº› CPU è¿™æ ·ä¿å­˜ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;00000000 00000000 00000000 00000001
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœ‰äº› CPU è¿™æ ·ä¿å­˜ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;00000001 00000000 00000000 00000000
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸¤ç§ä¸€ç§æ˜¯é¡ºåºä¿å­˜ï¼Œä¸€ç§æ˜¯å€’åºä¿å­˜ ã€‚&lt;/p&gt;
&lt;h4 id=&#34;331-å­—èŠ‚åºorderä¸ç½‘ç»œå­—èŠ‚åº&#34;&gt;3.3.1 å­—èŠ‚åºï¼ˆOrderï¼‰ä¸ç½‘ç»œå­—èŠ‚åº&lt;/h4&gt;
&lt;p&gt;CPU ä¿å­˜æ•°æ®çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œè¿™æ„å‘³ç€ CPU è§£ææ•°æ®çš„æ–¹å¼ä¹Ÿæœ‰ 2 ç§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤§ç«¯åºï¼ˆBig Endianï¼‰ï¼šé«˜ä½å­—èŠ‚å­˜æ”¾åˆ°ä½ä½åœ°å€&lt;/li&gt;
&lt;li&gt;å°ç«¯åºï¼ˆLittle Endianï¼‰ï¼šé«˜ä½å­—èŠ‚å­˜æ”¾åˆ°é«˜ä½åœ°å€&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/13/5c3ac9c1b2550.png&#34; alt=&#34;big.png&#34;&gt;
&lt;img src=&#34;https://i.loli.net/2019/01/13/5c3ac9c1c3348.png&#34; alt=&#34;small.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä¸¤å°å­—èŠ‚åºä¸åŒçš„è®¡ç®—æœºåœ¨æ•°æ®ä¼ é€’çš„è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2019/01/13/5c3aca956c8e9.png&#34; alt=&#34;zijiexu.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;å› ä¸ºè¿™ç§åŸå› ï¼Œæ‰€ä»¥åœ¨é€šè¿‡ç½‘ç»œä¼ è¾“æ•°æ®æ—¶å¿…é¡»çº¦å®šç»Ÿä¸€çš„æ–¹å¼ï¼Œè¿™ç§çº¦å®šè¢«ç§°ä¸ºç½‘ç»œå­—èŠ‚åºï¼Œéå¸¸ç®€å•ï¼Œç»Ÿä¸€ä¸ºå¤§ç«¯åºã€‚å³ï¼Œå…ˆæŠŠæ•°æ®æ•°ç»„è½¬åŒ–æˆå¤§ç«¯åºæ ¼å¼å†è¿›è¡Œç½‘ç»œä¼ è¾“ã€‚&lt;/p&gt;
&lt;h4 id=&#34;332-å­—èŠ‚åºè½¬æ¢&#34;&gt;3.3.2 å­—èŠ‚åºè½¬æ¢&lt;/h4&gt;
&lt;p&gt;å¸®åŠ©è½¬æ¢å­—èŠ‚åºçš„å‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;short&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;htons&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;short&lt;/span&gt;);
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;short&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;ntohs&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;short&lt;/span&gt;);
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;htonl&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt;);
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;ntohl&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é€šè¿‡å‡½æ•°åç§°æŒæ¡å…¶åŠŸèƒ½ï¼Œåªéœ€è¦äº†è§£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;htons çš„ h ä»£è¡¨ä¸»æœºï¼ˆhostï¼‰å­—èŠ‚åºã€‚&lt;/li&gt;
&lt;li&gt;htons çš„ n ä»£è¡¨ç½‘ç»œï¼ˆnetworkï¼‰å­—èŠ‚åºã€‚&lt;/li&gt;
&lt;li&gt;s ä»£è¡¨ short&lt;/li&gt;
&lt;li&gt;l ä»£è¡¨ long&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢çš„ä»£ç æ˜¯ç¤ºä¾‹ï¼Œè¯´æ˜ä»¥ä¸Šå‡½æ•°è°ƒç”¨è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch03/endian_conv.c&#34;&gt;endian_conv.c&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;arpa/inet.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;main&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; argc, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *argv[])
{
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;short&lt;/span&gt; host_port = &lt;span style=&#34;color:#b452cd&#34;&gt;0x1234&lt;/span&gt;;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;short&lt;/span&gt; net_port;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; host_addr = &lt;span style=&#34;color:#b452cd&#34;&gt;0x12345678&lt;/span&gt;;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; net_addr;

    net_port = htons(host_port); &lt;span style=&#34;color:#228b22&#34;&gt;//è½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚åº
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;    net_addr = htonl(host_addr);

    printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Host ordered port: %#x &lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;, host_port);
    printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Network ordered port: %#x &lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;, net_port);
    printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Host ordered address: %#lx &lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;, host_addr);
    printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Network ordered address: %#lx &lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;, net_addr);

    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc endian_conv.c -o conv
./conv
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»“æœï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Host ordered port: 0x1234
Network ordered port: 0x3412
Host ordered address: 0x12345678
Network ordered address: 0x78563412
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ˜¯åœ¨å°ç«¯ CPU çš„è¿è¡Œç»“æœã€‚å¤§éƒ¨åˆ†äººä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœï¼Œå› ä¸º Intel å’Œ AMD çš„ CPU éƒ½æ˜¯å°ç«¯åºä¸ºæ ‡å‡†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;34-ç½‘ç»œåœ°å€çš„åˆå§‹åŒ–ä¸åˆ†é…&#34;&gt;3.4 ç½‘ç»œåœ°å€çš„åˆå§‹åŒ–ä¸åˆ†é…&lt;/h3&gt;
&lt;h4 id=&#34;341-å°†å­—ç¬¦ä¸²ä¿¡æ¯è½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚åºçš„æ•´æ•°å‹&#34;&gt;3.4.1 å°†å­—ç¬¦ä¸²ä¿¡æ¯è½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚åºçš„æ•´æ•°å‹&lt;/h4&gt;
&lt;p&gt;sockaddr_in ä¸­éœ€è¦çš„æ˜¯ 32 ä½æ•´æ•°å‹ï¼Œä½†æ˜¯æˆ‘ä»¬åªç†Ÿæ‚‰ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ³•ï¼Œé‚£ä¹ˆæ”¹å¦‚ä½•æŠŠç±»ä¼¼äº 201.211.214.36 è½¬æ¢ä¸º 4 å­—èŠ‚çš„æ•´æ•°ç±»å‹æ•°æ®å‘¢ ?å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªå‡½æ•°å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆå®ƒã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;arpa/inet.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;in_addr_t &lt;span style=&#34;color:#008b45&#34;&gt;inet_addr&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *string);
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å…·ä½“ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch03/inet_addr.c&#34;&gt;inet_addr.c&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;arpa/inet.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;main&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; argc, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *argv[])
{
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *addr1 = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;1.2.3.4&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *addr2 = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;1.2.3.256&amp;#34;&lt;/span&gt;;

    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; conv_addr = inet_addr(addr1);
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (conv_addr == INADDR_NONE)
        printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Error occured! &lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;);
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;else&lt;/span&gt;
        printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Network ordered integer addr: %#lx &lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;, conv_addr);

    conv_addr = inet_addr(addr2);
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (conv_addr == INADDR_NONE)
        printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Error occured! &lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;);
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;else&lt;/span&gt;
        printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Network ordered integer addr: %#lx &lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;, conv_addr);
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc inet_addr.c -o addr
./addr
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Network ordered integer addr: 0x4030201
Error occured!
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;1ä¸ªå­—èŠ‚èƒ½è¡¨ç¤ºçš„æœ€å¤§æ•´æ•°æ˜¯255ï¼Œæ‰€ä»¥ä»£ç ä¸­ addr2 æ˜¯é”™è¯¯çš„IPåœ°å€ã€‚ä»è¿è¡Œç»“æœçœ‹ï¼Œinet_addr ä¸ä»…å¯ä»¥è½¬æ¢åœ°å€ï¼Œè¿˜å¯ä»¥æ£€æµ‹æœ‰æ•ˆæ€§ã€‚&lt;/p&gt;
&lt;p&gt;inet_aton å‡½æ•°ä¸ inet_addr å‡½æ•°åœ¨åŠŸèƒ½ä¸Šå®Œå…¨ç›¸åŒï¼Œä¹Ÿæ˜¯å°†å­—ç¬¦ä¸²å½¢å¼çš„IPåœ°å€è½¬æ¢æˆæ•´æ•°å‹çš„IPåœ°å€ã€‚åªä¸è¿‡è¯¥å‡½æ•°ç”¨äº† in_addr ç»“æ„ä½“ï¼Œä¸”ä½¿ç”¨é¢‘ç‡æ›´é«˜ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;arpa/inet.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;inet_aton&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *string, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; in_addr *addr);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å› 1 ï¼Œå¤±è´¥æ—¶è¿”å› 0
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;string: å«æœ‰éœ€è¦è½¬æ¢çš„IPåœ°å€ä¿¡æ¯çš„å­—ç¬¦ä¸²åœ°å€å€¼
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;addr: å°†ä¿å­˜è½¬æ¢ç»“æœçš„ in_addr ç»“æ„ä½“å˜é‡çš„åœ°å€å€¼
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å‡½æ•°è°ƒç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch03/inet_aton.c&#34;&gt;inet_aton.c&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;arpa/inet.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;error_handling&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *message);

&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;main&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; argc, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *argv[])
{
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *addr = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;127.232.124.79&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr_in addr_inet;

    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (!inet_aton(addr, &amp;amp;addr_inet.sin_addr))
        error_handling(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Conversion error&amp;#34;&lt;/span&gt;);
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;else&lt;/span&gt;
        printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Network ordered integer addr: %#x &lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;, addr_inet.sin_addr.s_addr);
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
}

&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;error_handling&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *message)
{
    fputs(message, stderr);
    fputc(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;\n&amp;#39;&lt;/span&gt;, stderr);
    exit(&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;gcc inet_aton.c -o aton
./aton
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿è¡Œç»“æœï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Network ordered integer addr: 0x4f7ce87f
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œå·²ç»æˆåŠŸçš„æŠŠè½¬æ¢åçš„åœ°å€æ”¾è¿›äº† addr_inet.sin_addr.s_addr ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œä¸ inet_aton() æ­£å¥½ç›¸åï¼Œå®ƒå¯ä»¥æŠŠç½‘ç»œå­—èŠ‚åºæ•´æ•°å‹IPåœ°å€è½¬æ¢æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;arpa/inet.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *&lt;span style=&#34;color:#008b45&#34;&gt;inet_ntoa&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; in_addr adr);
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¯¥å‡½æ•°å°†é€šè¿‡å‚æ•°ä¼ å…¥çš„æ•´æ•°å‹IPåœ°å€è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ ¼å¼å¹¶è¿”å›ã€‚ä½†è¦å°å¿ƒï¼Œè¿”å›å€¼ä¸º char æŒ‡é’ˆï¼Œè¿”å›å­—ç¬¦ä¸²åœ°å€æ„å‘³ç€å­—ç¬¦ä¸²å·²ç»ä¿å­˜åœ¨å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯è¯¥å‡½æ•°æœªå‘ç¨‹åºå‘˜è¦æ±‚åˆ†é…å†…å­˜ï¼Œè€Œæ˜¯å†å†…éƒ¨ç”³è¯·äº†å†…å­˜ä¿å­˜äº†å­—ç¬¦ä¸²ã€‚ä¹Ÿå°±æ˜¯è¯´è°ƒç”¨äº†è¯¥å‡½æ•°å€™è¦ç«‹å³æŠŠä¿¡æ¯å¤åˆ¶åˆ°å…¶ä»–å†…å­˜ç©ºé—´ã€‚å› æ­¤ï¼Œè‹¥å†æ¬¡è°ƒç”¨ inet_ntoa å‡½æ•°ï¼Œåˆ™æœ‰å¯èƒ½è¦†ç›–ä¹‹å‰ä¿å­˜çš„å­—ç¬¦ä¸²ä¿¡æ¯ã€‚æ€»ä¹‹ï¼Œå†æ¬¡è°ƒç”¨ inet_ntoa å‡½æ•°å‰è¿”å›çš„å­—ç¬¦ä¸²åœ°å€æ˜¯æœ‰æ•ˆçš„ã€‚è‹¥éœ€è¦é•¿æœŸä¿å­˜ï¼Œåˆ™åº”è¯¥å°†å­—ç¬¦ä¸²å¤åˆ¶åˆ°å…¶ä»–å†…å­˜ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch03/inet_ntoa.c&#34;&gt;inet_ntoa.c&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;arpa/inet.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;main&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; argc, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *argv[])
{
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr_in addr1, addr2;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *str_ptr;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; str_arr[&lt;span style=&#34;color:#b452cd&#34;&gt;20&lt;/span&gt;];

    addr1.sin_addr.s_addr = htonl(&lt;span style=&#34;color:#b452cd&#34;&gt;0x1020304&lt;/span&gt;);
    addr2.sin_addr.s_addr = htonl(&lt;span style=&#34;color:#b452cd&#34;&gt;0x1010101&lt;/span&gt;);
    &lt;span style=&#34;color:#228b22&#34;&gt;//æŠŠaddr1ä¸­çš„ç»“æ„ä½“ä¿¡æ¯è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„IPåœ°å€å½¢å¼
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;    str_ptr = inet_ntoa(addr1.sin_addr);
    strcpy(str_arr, str_ptr);
    printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Dotted-Decimal notation1: %s &lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;, str_ptr);

    inet_ntoa(addr2.sin_addr);
    printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Dotted-Decimal notation2: %s &lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;, str_ptr);
    printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Dotted-Decimal notation3: %s &lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;, str_arr);
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc inet_ntoa.c -o ntoa
./ntoa
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¾“å‡º:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;Dotted-Decimal notation1: &lt;span style=&#34;color:#b452cd&#34;&gt;1.2.3.4&lt;/span&gt;
Dotted-Decimal notation2: &lt;span style=&#34;color:#b452cd&#34;&gt;1.1.1.1&lt;/span&gt;
Dotted-Decimal notation3: &lt;span style=&#34;color:#b452cd&#34;&gt;1.2.3.4&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;342-ç½‘ç»œåœ°å€åˆå§‹åŒ–&#34;&gt;3.4.2 ç½‘ç»œåœ°å€åˆå§‹åŒ–&lt;/h4&gt;
&lt;p&gt;ç»“åˆå‰é¢çš„å†…å®¹ï¼Œä»‹ç»å¥—æ¥å­—åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œå¸¸è§çš„ç½‘ç»œä¿¡æ¯åˆå§‹åŒ–æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr_in addr;
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *serv_ip = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;211.217,168.13&amp;#34;&lt;/span&gt;;          &lt;span style=&#34;color:#228b22&#34;&gt;//å£°æ˜IPåœ°å€æ—
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *serv_port = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;9190&amp;#34;&lt;/span&gt;;                  &lt;span style=&#34;color:#228b22&#34;&gt;//å£°æ˜ç«¯å£å·å­—ç¬¦ä¸²
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;memset(&amp;amp;addr, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;sizeof&lt;/span&gt;(addr));            &lt;span style=&#34;color:#228b22&#34;&gt;//ç»“æ„ä½“å˜é‡ addr çš„æ‰€æœ‰æˆå‘˜åˆå§‹åŒ–ä¸º0
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;addr.sin_family = AF_INET;                 &lt;span style=&#34;color:#228b22&#34;&gt;//åˆ¶å®šåœ°å€æ—
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;addr.sin_addr.s_addr = inet_addr(serv_ip); &lt;span style=&#34;color:#228b22&#34;&gt;//åŸºäºå­—ç¬¦ä¸²çš„IPåœ°å€åˆå§‹åŒ–
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;addr.sin_port = htons(atoi(serv_port));    &lt;span style=&#34;color:#228b22&#34;&gt;//åŸºäºå­—ç¬¦ä¸²çš„IPåœ°å€ç«¯å£å·åˆå§‹åŒ–
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;35-åŸºäº-windows-çš„å®ç°&#34;&gt;3.5 åŸºäº Windows çš„å®ç°&lt;/h3&gt;
&lt;p&gt;ç•¥&lt;/p&gt;
&lt;h3 id=&#34;36-ä¹ é¢˜&#34;&gt;3.6 ä¹ é¢˜&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”æ¡ˆä»…ä»£è¡¨æœ¬äººä¸ªäººè§‚ç‚¹ï¼Œä¸ä¸€å®šæ­£ç¡®&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;IPåœ°å€æ— IPV4 ä¸ IPV6 æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿåœ¨ä½•ç§èƒŒæ™¯ä¸‹è¯ç”Ÿäº† IPV6?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šä¸»è¦å·®åˆ«æ˜¯IPåœ°å€æ‰€ç”¨çš„å­—èŠ‚æ•°ï¼Œç›®å‰é€šç”¨çš„æ˜¯IPV4ï¼Œç›®å‰IPV4çš„èµ„æºå·²è€—å°½ï¼Œæ‰€ä»¥è¯ç”Ÿäº†IPV6ï¼Œå®ƒå…·æœ‰æ›´å¤§çš„åœ°å€ç©ºé—´ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€šè¿‡ IPV4 ç½‘ç»œ ID ã€ä¸»æœº ID åŠè·¯ç”±å™¨çš„å…³ç³»è¯´æ˜å…¬å¸å±€åŸŸç½‘çš„è®¡ç®—æœºä¼ è¾“æ•°æ®çš„è¿‡ç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šç½‘ç»œIDæ˜¯ä¸ºäº†åŒºåˆ†ç½‘ç»œè€Œè®¾ç½®çš„ä¸€éƒ¨åˆ†IPåœ°å€ï¼Œå‡è®¾å‘&lt;code&gt;www.baidu.com&lt;/code&gt;å…¬å¸ä¼ è¾“æ•°æ®ï¼Œè¯¥å…¬å¸å†…éƒ¨æ„å»ºäº†å±€åŸŸç½‘ã€‚å› ä¸ºé¦–å…ˆè¦å‘&lt;code&gt;baidu.com&lt;/code&gt;ä¼ è¾“æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´å¹¶éä¸€å¼€å§‹å°±æµè§ˆæ‰€æœ‰å››å­—èŠ‚IPåœ°å€ï¼Œé¦–å…ˆæ‰¾åˆ°ç½‘ç»œåœ°å€ï¼Œè¿›è€Œç”±&lt;code&gt;baidu.com&lt;/code&gt;ï¼ˆæ„æˆç½‘ç»œçš„è·¯ç”±å™¨ï¼‰æ¥æ”¶åˆ°æ•°æ®åï¼Œä¼ è¾“åˆ°ä¸»æœºåœ°å€ã€‚æ¯”å¦‚å‘ 203.211.712.103 ä¼ è¾“æ•°æ®ï¼Œé‚£å°±å…ˆæ‰¾åˆ° 203.211.172 ç„¶åç”±è¿™ä¸ªç½‘ç»œçš„ç½‘å…³æ‰¾ä¸»æœºå·ä¸º 172 çš„æœºå™¨ä¼ è¾“æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¥—æ¥å­—åœ°å€åˆ†ä¸ºIPåœ°å€å’Œç«¯å£å·ï¼Œä¸ºä»€ä¹ˆéœ€è¦IPåœ°å€å’Œç«¯å£å·ï¼Ÿæˆ–è€…è¯´ï¼Œé€šè¿‡IPåœ°å€å¯ä»¥åŒºåˆ†å“ªäº›å¯¹è±¡ï¼Ÿé€šè¿‡ç«¯å£å·å¯ä»¥åŒºåˆ†å“ªäº›å¯¹è±¡ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šæœ‰äº†IPåœ°å€å’Œç«¯å£å·ï¼Œæ‰èƒ½æŠŠæ•°æ®å‡†ç¡®çš„ä¼ é€åˆ°æŸä¸ªåº”ç”¨ç¨‹åºä¸­ã€‚é€šè¿‡IPåœ°å€å¯ä»¥åŒºåˆ†å…·ä½“çš„ä¸»æœºï¼Œé€šè¿‡ç«¯å£å·å¯ä»¥åŒºåˆ†ä¸»æœºä¸Šçš„åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯·è¯´æ˜IPåœ°å€çš„åˆ†ç±»æ–¹æ³•ï¼Œå¹¶æ®æ­¤è¯´å‡ºä¸‹é¢è¿™äº›IPçš„åˆ†ç±»ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;214.121.212.102ï¼ˆCç±»ï¼‰&lt;/li&gt;
&lt;li&gt;120.101.122.89ï¼ˆAç±»ï¼‰&lt;/li&gt;
&lt;li&gt;129.78.102.211ï¼ˆBç±»ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åˆ†ç±»æ–¹æ³•ï¼šA ç±»åœ°å€çš„é¦–å­—èŠ‚èŒƒå›´ä¸ºï¼š0~127ã€B ç±»åœ°å€çš„é¦–å­—èŠ‚èŒƒå›´ä¸ºï¼š128~191ã€C ç±»åœ°å€çš„é¦–å­—èŠ‚èŒƒå›´ä¸ºï¼š192~223&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—æœºé€šè¿‡è·¯ç”±å™¨å’Œäº¤æ¢æœºè¿æ¥åˆ°äº’è”ç½‘ï¼Œè¯·è¯´å‡ºè·¯ç”±å™¨å’Œäº¤æ¢æœºçš„ä½œç”¨ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šè·¯ç”±å™¨å’Œäº¤æ¢æœºå®Œæˆå¤–ç½‘å’Œæœ¬ç½‘ä¸»æœºä¹‹é—´çš„æ•°æ®äº¤æ¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»€ä¹ˆæ˜¯çŸ¥åç«¯å£ï¼Ÿå…¶èŒƒå›´æ˜¯å¤šå°‘ï¼ŸçŸ¥åç«¯å£ä¸­å…·æœ‰ä»£è¡¨æ€§çš„ HTTP å’Œ FTP çš„ç«¯å£å·å„æ˜¯å¤šå°‘ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šçŸ¥åç«¯å£æ˜¯è¦æŠŠè¯¥ç«¯å£åˆ†é…ç»™ç‰¹å®šçš„åº”ç”¨ç¨‹åºï¼ŒèŒƒå›´æ˜¯ 0~1023 ï¼ŒHTTP çš„ç«¯å£å·æ˜¯ 80 ï¼ŒFTP çš„ç«¯å£å·æ˜¯20å’Œ21&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‘å¥—æ¥å­—åˆ†é…åœ°å€çš„ bind å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;bind&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; sockfd, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr *myaddr, socklen_t addrlen);
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;è€Œè°ƒç”¨æ—¶åˆ™ç”¨ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;bind(serv_sock, (&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr *)&amp;amp;serv_addr, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;sizeof&lt;/span&gt;(serv_addr)
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ­¤å¤„ serv_addr ä¸º sockaddr_in ç»“æ„ä½“å˜é‡ã€‚ä¸å‡½æ•°åŸå‹ä¸åŒï¼Œä¼ å…¥çš„æ˜¯ sockaddr_in ç»“æ„ä½“å˜é‡ï¼Œè¯·è¯´æ˜åŸå› ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šå› ä¸ºå¯¹äºè¯¦ç»†çš„åœ°å€ä¿¡æ¯ä½¿ç”¨ sockaddr ç±»å‹ä¼ é€’ç‰¹åˆ«éº»çƒ¦ï¼Œè¿›è€Œæœ‰äº† sockaddr_in ç±»å‹ï¼Œå…¶ä¸­åŸºæœ¬ä¸å‰é¢çš„ç±»å‹ä¿æŒä¸€è‡´ï¼Œè¿˜æœ‰ sa_sata[4] æ¥ä¿å­˜åœ°å€ä¿¡æ¯ï¼Œå‰©ä½™å…¨éƒ¨å¡« 0ï¼Œæ‰€ä»¥å¼ºåˆ¶è½¬æ¢åï¼Œä¸å½±å“ç¨‹åºè¿è¡Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯·è§£é‡Šå¤§ç«¯åºï¼Œå°ç«¯åºã€ç½‘ç»œå­—èŠ‚åºï¼Œå¹¶è¯´æ˜ä¸ºä½•éœ€è¦ç½‘ç»œå­—èŠ‚åºã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šCPU å‘å†…å­˜ä¿å­˜æ•°æ®æœ‰ä¸¤ç§æ–¹å¼ï¼Œå¤§ç«¯åºæ˜¯é«˜ä½å­—èŠ‚å­˜æ”¾ä½ä½åœ°å€ï¼Œå°ç«¯åºæ˜¯é«˜ä½å­—èŠ‚å­˜æ”¾é«˜ä½åœ°å€ï¼Œç½‘ç»œå­—èŠ‚åºæ˜¯ä¸ºäº†æ–¹ä¾¿ä¼ è¾“çš„ä¿¡æ¯ç»Ÿä¸€æ€§ï¼Œç»Ÿä¸€æˆäº†å¤§ç«¯åºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤§ç«¯åºè®¡ç®—æœºå¸Œæœ›æŠŠ 4 å­—èŠ‚æ•´æ•°å‹ 12 ä¼ é€’åˆ°å°ç«¯åºè®¡ç®—æœºã€‚è¯·è¯´å‡ºæ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿçš„å­—èŠ‚åºå˜æ¢è¿‡ç¨‹ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼š0x12-&amp;gt;0x21&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€æ ·è¡¨ç¤ºå›é€åœ°å€ï¼Ÿå…¶å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœå‘ä¼šé€åœ°å€å¤„ä¼ è¾“æ•°æ®å°†ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼š127.0.0.1 è¡¨ç¤ºå›é€åœ°å€ï¼ŒæŒ‡çš„æ˜¯è®¡ç®—æœºè‡ªèº«çš„IPåœ°å€ï¼Œæ— è®ºä»€ä¹ˆç¨‹åºï¼Œä¸€æ—¦ä½¿ç”¨å›é€åœ°å€å‘é€æ•°æ®ï¼Œåè®®è½¯ä»¶ç«‹å³è¿”å›ï¼Œä¸è¿›è¡Œä»»ä½•ç½‘ç»œä¼ è¾“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
- https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-3-%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E5%88%86%E9%85%8D-%E7%AC%94%E8%AE%B0/ - </description>
        </item>
    
    
    
        <item>
        <title>ã€ŠTCP/IPç½‘ç»œç¼–ç¨‹ã€‹ç¬¬ 2 ç«  å¥—æ¥å­—ç±»å‹ä¸åè®®è®¾ç½® ç¬”è®°</title>
        <link>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-2-%E7%AB%A0-%E5%A5%97%E6%8E%A5%E5%AD%97%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8D%8F%E8%AE%AE%E8%AE%BE%E7%BD%AE-%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Sun, 13 Jan 2019 11:15:00 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-2-%E7%AB%A0-%E5%A5%97%E6%8E%A5%E5%AD%97%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8D%8F%E8%AE%AE%E8%AE%BE%E7%BD%AE-%E7%AC%94%E8%AE%B0/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-2-%E7%AB%A0-%E5%A5%97%E6%8E%A5%E5%AD%97%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8D%8F%E8%AE%AE%E8%AE%BE%E7%BD%AE-%E7%AC%94%E8%AE%B0/ -&lt;h2 id=&#34;ç¬¬äºŒç« -å¥—æ¥å­—ç±»å‹ä¸åè®®è®¾ç½®&#34;&gt;ç¬¬äºŒç«  å¥—æ¥å­—ç±»å‹ä¸åè®®è®¾ç½®&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä»£ç ï¼Œåœ¨&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote&#34;&gt;TCP-IP-NetworkNote&lt;/a&gt;ä¸­å¯ä»¥æ‰¾åˆ°ï¼Œç›´æ¥ç‚¹è¿æ¥å¯èƒ½è¿›ä¸å»ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç« ä»…éœ€äº†è§£åˆ›å»ºå¥—æ¥å­—æ—¶è°ƒç”¨çš„ socket å‡½æ•°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;21-å¥—æ¥å­—åè®®åŠæ•°æ®ä¼ è¾“ç‰¹æ€§&#34;&gt;2.1 å¥—æ¥å­—åè®®åŠæ•°æ®ä¼ è¾“ç‰¹æ€§&lt;/h3&gt;
&lt;h4 id=&#34;211-åˆ›å»ºå¥—æ¥å­—&#34;&gt;2.1.1 åˆ›å»ºå¥—æ¥å­—&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;socket&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; domain, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; type, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; protocol);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å›æ–‡ä»¶æè¿°ç¬¦ï¼Œå¤±è´¥æ—¶è¿”å›-1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;domain: å¥—æ¥å­—ä¸­ä½¿ç”¨çš„åè®®æ—ï¼ˆProtocol Familyï¼‰
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;type: å¥—æ¥å­—æ•°æ®ä¼ è¾“çš„ç±»å‹ä¿¡æ¯
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;protocol: è®¡ç®—æœºé—´é€šä¿¡ä¸­ä½¿ç”¨çš„åè®®ä¿¡æ¯
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;212-åè®®æ—protocol-family&#34;&gt;2.1.2 åè®®æ—ï¼ˆProtocol Familyï¼‰&lt;/h4&gt;
&lt;p&gt;é€šè¿‡ socket å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’å¥—æ¥å­—ä¸­ä½¿ç”¨çš„åè®®åˆ†ç±»ä¿¡æ¯ã€‚æ­¤åè®®åˆ†ç±»ä¿¡æ¯ç§°ä¸ºåè®®æ—ï¼Œå¯åˆ†æˆå¦‚ä¸‹å‡ ç±»ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¤´æ–‡ä»¶ &lt;code&gt;sys/socket.h&lt;/code&gt; ä¸­å£°æ˜çš„åè®®æ—&lt;/p&gt;
&lt;/blockquote&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åç§°&lt;/th&gt;
&lt;th&gt;åè®®æ—&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;PF_INET&lt;/td&gt;
&lt;td&gt;IPV4 äº’è”ç½‘åè®®æ—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PF_INET6&lt;/td&gt;
&lt;td&gt;IPV6 äº’è”ç½‘åè®®æ—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PF_LOCAL&lt;/td&gt;
&lt;td&gt;æœ¬åœ°é€šä¿¡ Unix åè®®æ—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PF_PACKET&lt;/td&gt;
&lt;td&gt;åº•å±‚å¥—æ¥å­—çš„åè®®æ—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PF_IPX&lt;/td&gt;
&lt;td&gt;IPX Novel åè®®æ—&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æœ¬ä¹¦ç€é‡è®² PF_INET å¯¹åº”çš„ IPV4 äº’è”ç½‘åè®®æ—ã€‚å…¶ä»–åè®®å¹¶ä¸å¸¸ç”¨ï¼Œæˆ–å¹¶æœªæ™®åŠã€‚&lt;strong&gt;å¦å¤–ï¼Œå¥—æ¥å­—ä¸­é‡‡ç”¨çš„æœ€ç»ˆçš„åè®®ä¿¡æ¯æ˜¯é€šè¿‡ socket å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’çš„ã€‚åœ¨æŒ‡å®šçš„åè®®æ—èŒƒå›´å†…é€šè¿‡ç¬¬ä¸€ä¸ªå‚æ•°å†³å®šç¬¬ä¸‰ä¸ªå‚æ•°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&#34;213-å¥—æ¥å­—ç±»å‹type&#34;&gt;2.1.3 å¥—æ¥å­—ç±»å‹ï¼ˆTypeï¼‰&lt;/h4&gt;
&lt;p&gt;å¥—æ¥å­—ç±»å‹æŒ‡çš„æ˜¯å¥—æ¥å­—çš„æ•°æ®ä¼ è¾“æ–¹å¼ï¼Œæ˜¯é€šè¿‡ socket å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°è¿›è¡Œä¼ é€’ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½å†³å®šåˆ›å»ºçš„å¥—æ¥å­—çš„æ•°æ®ä¼ è¾“æ–¹å¼ã€‚&lt;strong&gt;å·²ç»é€šè¿‡ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’äº†åè®®æ—ä¿¡æ¯ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å†³å®šæ•°æ®ä¼ è¾“æ–¹å¼ï¼Ÿé—®é¢˜å°±åœ¨äºï¼Œå†³å®šäº†åè®®æ—å¹¶ä¸èƒ½åŒæ—¶å†³å®šæ•°æ®ä¼ è¾“æ–¹å¼ã€‚æ¢è¨€ä¹‹ï¼Œ socket å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•° PF_INET åè®®æ—ä¸­ä¹Ÿå­˜åœ¨å¤šç§æ•°æ®ä¼ è¾“æ–¹å¼ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&#34;214-å¥—æ¥å­—ç±»å‹1é¢å‘è¿æ¥çš„å¥—æ¥å­—sock_stream&#34;&gt;2.1.4 å¥—æ¥å­—ç±»å‹1ï¼šé¢å‘è¿æ¥çš„å¥—æ¥å­—ï¼ˆSOCK_STREAMï¼‰&lt;/h4&gt;
&lt;p&gt;å¦‚æœ socket å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’&lt;code&gt;SOCK_STREAM&lt;/code&gt;ï¼Œå°†åˆ›å»ºé¢å‘è¿æ¥çš„å¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;p&gt;ä¼ è¾“æ–¹å¼ç‰¹å¾æ•´ç†å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼ è¾“è¿‡ç¨‹ä¸­æ•°æ®ä¸ä¼šæ¶ˆå¤±&lt;/li&gt;
&lt;li&gt;æŒ‰åºä¼ è¾“æ•°æ®&lt;/li&gt;
&lt;li&gt;ä¼ è¾“çš„æ•°æ®ä¸å­˜åœ¨æ•°æ®è¾¹ç•Œï¼ˆBoundaryï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§æƒ…å½¢é€‚ç”¨äºä¹‹å‰è¯´è¿‡çš„ write å’Œ read å‡½æ•°&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¼ è¾“æ•°æ®çš„è®¡ç®—æœºé€šè¿‡è°ƒç”¨3æ¬¡ write å‡½æ•°ä¼ é€’äº† 100 å­—èŠ‚çš„æ•°æ®ï¼Œä½†æ˜¯æ¥å—æ•°æ®çš„è®¡ç®—æœºä»…ä»…é€šè¿‡è°ƒç”¨ 1 æ¬¡ read å‡½æ•°è°ƒç”¨å°±æ¥å—äº†å…¨éƒ¨ 100 ä¸ªå­—èŠ‚ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ”¶å‘æ•°æ®çš„å¥—æ¥å­—å†…éƒ¨æœ‰ç¼“å†²ï¼ˆbufferï¼‰ï¼Œç®€è¨€ä¹‹å°±æ˜¯å­—èŠ‚æ•°ç»„ã€‚åªè¦ä¸è¶…è¿‡æ•°ç»„å®¹é‡ï¼Œé‚£ä¹ˆæ•°æ®å¡«æ»¡ç¼“å†²åè¿‡ 1 æ¬¡ read å‡½æ•°çš„è°ƒç”¨å°±å¯ä»¥è¯»å–å…¨éƒ¨ï¼Œä¹Ÿæœ‰å¯èƒ½è°ƒç”¨å¤šæ¬¡æ¥å®Œæˆè¯»å–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¥—æ¥å­—ç¼“å†²å·²æ»¡æ˜¯å¦æ„å‘³ç€æ•°æ®ä¸¢å¤±ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”ï¼šç¼“å†²å¹¶ä¸æ€»æ˜¯æ»¡çš„ã€‚å¦‚æœè¯»å–é€Ÿåº¦æ¯”æ•°æ®ä¼ å…¥è¿‡æ¥çš„é€Ÿåº¦æ…¢ï¼Œåˆ™ç¼“å†²å¯èƒ½è¢«å¡«æ»¡ï¼Œä½†æ˜¯è¿™æ—¶ä¹Ÿä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œå› ä¸ºä¼ è¾“å¥—æ¥å­—æ­¤æ—¶ä¼šåœæ­¢æ•°æ®ä¼ è¾“ï¼Œæ‰€ä»¥é¢å‘è¿æ¥çš„å¥—æ¥å­—ä¸ä¼šå‘ç”Ÿæ•°æ®ä¸¢å¤±ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¥—æ¥å­—è”æœºå¿…é¡»ä¸€ä¸€å¯¹åº”ã€‚é¢å‘è¿æ¥çš„å¥—æ¥å­—å¯æ€»ç»“ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¯é åœ°ã€æŒ‰åºä¼ é€’çš„ã€åŸºäºå­—èŠ‚çš„é¢å‘è¿æ¥çš„æ•°æ®ä¼ è¾“æ–¹å¼çš„å¥—æ¥å­—ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&#34;215-é¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—sock_dgram&#34;&gt;2.1.5 é¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—ï¼ˆSOCK_DGRAMï¼‰&lt;/h4&gt;
&lt;p&gt;å¦‚æœ socket å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’&lt;code&gt;SOCK_DGRAM&lt;/code&gt;ï¼Œåˆ™å°†åˆ›å»ºé¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—ã€‚é¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—å¯ä»¥æ¯”å–»æˆé«˜é€Ÿç§»åŠ¨çš„æ‘©æ‰˜è½¦é˜Ÿã€‚ç‰¹ç‚¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¼ºè°ƒå¿«é€Ÿä¼ è¾“è€Œéä¼ è¾“æœ‰åº&lt;/li&gt;
&lt;li&gt;ä¼ è¾“çš„æ•°æ®å¯èƒ½ä¸¢å¤±ä¹Ÿå¯èƒ½æŸæ¯&lt;/li&gt;
&lt;li&gt;ä¼ è¾“çš„æ•°æ®æœ‰è¾¹ç•Œ&lt;/li&gt;
&lt;li&gt;é™åˆ¶æ¯æ¬¡ä¼ è¾“æ•°æ®çš„å¤§å°&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—æ¯”é¢å‘è¿æ¥çš„å¥—æ¥å­—æ›´å…·å“Ÿä¼ è¾“é€Ÿåº¦ï¼Œä½†å¯èƒ½ä¸¢å¤±ã€‚ç‰¹ç‚¹å¯æ€»ç»“ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸å¯é çš„ã€ä¸æŒ‰åºä¼ é€’çš„ã€ä»¥æ•°æ®çš„é«˜é€Ÿä¼ è¾“ä¸ºç›®çš„å¥—æ¥å­—ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&#34;216-åè®®çš„æœ€ç»ˆé€‰æ‹©&#34;&gt;2.1.6 åè®®çš„æœ€ç»ˆé€‰æ‹©&lt;/h4&gt;
&lt;p&gt;socket å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°å†³å®šæœ€ç»ˆé‡‡ç”¨çš„åè®®ã€‚å‰é¢å·²ç»é€šè¿‡å‰ä¸¤ä¸ªå‚æ•°ä¼ é€’äº†åè®®æ—ä¿¡æ¯å’Œå¥—æ¥å­—æ•°æ®ä¼ è¾“æ–¹å¼ï¼Œè¿™äº›ä¿¡æ¯è¿˜ä¸å¤Ÿå—ï¼Ÿä¸ºä»€ä¹ˆè¦ä¼ è¾“ç¬¬ä¸‰ä¸ªå‚æ•°å‘¢ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯ä»¥åº”å¯¹åŒä¸€åè®®æ—ä¸­å­˜åœ¨çš„å¤šä¸ªæ•°æ®ä¼ è¾“æ–¹å¼ç›¸åŒçš„åè®®ï¼Œæ‰€ä»¥æ•°æ®ä¼ è¾“æ–¹å¼ç›¸åŒï¼Œä½†æ˜¯åè®®ä¸åŒï¼Œéœ€è¦ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®šå…·ä½“çš„åè®®ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ¬ä¹¦ç”¨çš„æ˜¯ Ipv4 çš„åè®®æ—ï¼Œå’Œé¢å‘è¿æ¥çš„æ•°æ®ä¼ è¾“ï¼Œæ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶çš„åè®®åªæœ‰ TPPROTO_TCP ï¼Œå› æ­¤å¯ä»¥å¦‚ä¸‹è°ƒç”¨ socket å‡½æ•°åˆ›å»ºå¥—æ¥å­—ï¼Œè¿™ç§å¥—æ¥å­—ç§°ä¸º TCP å¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; tcp_socket = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;SOCK_DGRAM æŒ‡çš„æ˜¯é¢å‘æ¶ˆæ¯çš„æ•°æ®ä¼ è¾“æ–¹å¼ï¼Œæ»¡è¶³ä¸Šè¿°æ¡ä»¶çš„åè®®åªæœ‰ TPPROTO_UDP ã€‚è¿™ç§å¥—æ¥å­—ç§°ä¸º UDP å¥—æ¥å­—ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; udp_socket = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP);
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;217-é¢å‘è¿æ¥çš„å¥—æ¥å­—tcp-å¥—æ¥å­—ç¤ºä¾‹&#34;&gt;2.1.7 é¢å‘è¿æ¥çš„å¥—æ¥å­—ï¼šTCP å¥—æ¥å­—ç¤ºä¾‹&lt;/h4&gt;
&lt;p&gt;éœ€è¦å¯¹ç¬¬ä¸€ç« çš„ä»£ç åšå‡ºä¿®æ”¹ï¼Œä¿®æ”¹å¥½çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch02/tcp_client.c&#34;&gt;tcp_client.c&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote/blob/master/ch02/tcp_server.c&#34;&gt;tcp_server.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¯‘ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc tcp_client.c -o hclient
gcc tcp_server.c -o hserver
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;./hserver &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
./hclient 127.0.0.1 &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»“æœï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Message from server : Hello World! 
Function read call count: 13
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºæœåŠ¡ç«¯å‘é€äº†13å­—èŠ‚çš„æ•°æ®ï¼Œå®¢æˆ·ç«¯è°ƒç”¨13æ¬¡ read å‡½æ•°è¿›è¡Œè¯»å–ã€‚&lt;/p&gt;
&lt;h3 id=&#34;22-windows-å¹³å°ä¸‹çš„å®ç°åŠéªŒè¯&#34;&gt;2.2 Windows å¹³å°ä¸‹çš„å®ç°åŠéªŒè¯&lt;/h3&gt;
&lt;p&gt;æš‚ç•¥&lt;/p&gt;
&lt;h3 id=&#34;23-ä¹ é¢˜&#34;&gt;2.3 ä¹ é¢˜&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯åè®®ï¼Ÿåœ¨æ”¶å‘æ•°æ®ä¸­å®šä¹‰åè®®æœ‰ä½•æ„ä¹‰ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”ï¼šåè®®æ˜¯å¯¹è¯ä¸­ä½¿ç”¨çš„é€šä¿¡è§„åˆ™ï¼Œç®€è¨€ä¹‹ï¼Œåè®®å°±æ˜¯ä¸ºäº†å®Œæˆæ•°æ®äº¤æ¢è€Œå®šå¥½çš„çº¦å®šã€‚åœ¨æ”¶å‘æ•°æ®ä¸­å®šä¹‰åè®®ï¼Œèƒ½å¤Ÿè®©è®¡ç®—æœºä¹‹é—´è¿›è¡Œæ­£ç¡®æ— è¯¯çš„å¯¹è¯ï¼Œä»¥æ­¤æ¥äº¤æ¢æ•°æ®ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é¢å‘è¿æ¥çš„å¥—æ¥å­— TCP å¥—æ¥å­—ä¼ è¾“ç‰¹æ€§æœ‰ 3 ç‚¹ï¼Œè¯·åˆ†åˆ«è¯´æ˜ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”ï¼šâ‘ ä¼ è¾“è¿‡ç¨‹ä¸­æ•°æ®ä¸ä¼šæ¶ˆå¤±â‘¡æŒ‰åºä¼ è¾“æ•°æ®â‘¢ä¼ è¾“çš„æ•°æ®ä¸å­˜åœ¨æ•°æ®è¾¹ç•Œï¼ˆBoundaryï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸‹é¢é‚£äº›æ˜¯é¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—çš„ç‰¹æ€§ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼ è¾“æ•°æ®å¯èƒ½ä¸¢å¤±&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰æ•°æ®è¾¹ç•Œï¼ˆBoundaryï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»¥å¿«é€Ÿä¼ é€’ä¸ºç›®æ ‡&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ä¸é™åˆ¶æ¯æ¬¡ä¼ è¾“æ•°æ®å¤§å°&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸é¢å‘è¿æ¥çš„å¥—æ¥å­—ä¸åŒï¼Œä¸å­˜åœ¨è¿æ¥æ¦‚å¿µ&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸‹åˆ—æ•°æ®é€‚åˆç”¨å“ªç±»å¥—æ¥å­—è¿›è¡Œä¼ è¾“ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¼”å”±ä¼šç°åœºç›´æ’­çš„å¤šåª’ä½“æ•°æ®ï¼ˆUDPï¼‰&lt;/li&gt;
&lt;li&gt;æŸäººå‹ç¼©è¿‡çš„æ–‡æœ¬æ–‡ä»¶ï¼ˆTCPï¼‰&lt;/li&gt;
&lt;li&gt;ç½‘ä¸Šé“¶è¡Œç”¨æˆ·ä¸é“¶è¡Œä¹‹é—´çš„æ•°æ®ä¼ é€’ï¼ˆTCPï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½•ç§ç±»å‹çš„å¥—æ¥å­—ä¸å­˜åœ¨æ•°æ®è¾¹ç•Œï¼Ÿè¿™ç±»å¥—æ¥å­—æ¥æ”¶æ•°æ®æ—¶åº”è¯¥æ³¨æ„ä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”ï¼šTCP ä¸å­˜åœ¨æ•°æ®è¾¹ç•Œã€‚åœ¨æ¥æ”¶æ•°æ®æ—¶ï¼Œéœ€è¦ä¿è¯åœ¨æ¥æ”¶å¥—æ¥å­—çš„ç¼“å†²åŒºå¡«å……æ»¡ä¹‹æ—¶å°±ä»bufferé‡Œè¯»å–æ•°æ®ã€‚ä¹Ÿå°±æ˜¯ï¼Œåœ¨æ¥æ”¶å¥—æ¥å­—å†…éƒ¨ï¼Œå†™å…¥bufferçš„é€Ÿåº¦è¦å°äºè¯»å‡ºbufferçš„é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
- https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-2-%E7%AB%A0-%E5%A5%97%E6%8E%A5%E5%AD%97%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8D%8F%E8%AE%AE%E8%AE%BE%E7%BD%AE-%E7%AC%94%E8%AE%B0/ - </description>
        </item>
    
    
    
        <item>
        <title>ã€ŠTCP/IPç½‘ç»œç¼–ç¨‹ã€‹ç¬¬ 1 ç«  ç†è§£ç½‘ç»œç¼–ç¨‹å’Œå¥—æ¥å­— ç¬”è®°</title>
        <link>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-1-%E7%AB%A0-%E7%90%86%E8%A7%A3%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%92%8C%E5%A5%97%E6%8E%A5%E5%AD%97-%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Sat, 12 Jan 2019 13:12:00 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-1-%E7%AB%A0-%E7%90%86%E8%A7%A3%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%92%8C%E5%A5%97%E6%8E%A5%E5%AD%97-%E7%AC%94%E8%AE%B0/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-1-%E7%AB%A0-%E7%90%86%E8%A7%A3%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%92%8C%E5%A5%97%E6%8E%A5%E5%AD%97-%E7%AC%94%E8%AE%B0/ -&lt;h2 id=&#34;ç¬¬ä¸€ç« ç†è§£ç½‘ç»œç¼–ç¨‹å’Œå¥—æ¥å­—&#34;&gt;ç¬¬ä¸€ç« ï¼šç†è§£ç½‘ç»œç¼–ç¨‹å’Œå¥—æ¥å­—&lt;/h2&gt;
&lt;p&gt;æœ¬ç« ä»£ç ï¼Œåœ¨&lt;a href=&#34;https://github.com/riba2534/TCP-IP-NetworkNote&#34;&gt;TCP-IP-NetworkNote&lt;/a&gt;ä¸­å¯ä»¥æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;11-ç†è§£ç½‘ç»œç¼–ç¨‹å’Œå¥—æ¥å­—&#34;&gt;1.1 ç†è§£ç½‘ç»œç¼–ç¨‹å’Œå¥—æ¥å­—&lt;/h3&gt;
&lt;h4 id=&#34;111æ„å»ºæ‰“ç”µè¯å¥—æ¥å­—&#34;&gt;1.1.1æ„å»ºæ‰“ç”µè¯å¥—æ¥å­—&lt;/h4&gt;
&lt;p&gt;ä»¥ç”µè¯æœºæ‰“ç”µè¯çš„æ–¹å¼æ¥ç†è§£å¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è°ƒç”¨ socket å‡½æ•°ï¼ˆå®‰è£…ç”µè¯æœºï¼‰æ—¶è¿›è¡Œçš„å¯¹è¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é—®ï¼šæ¥ç”µè¯éœ€è¦å‡†å¤‡ä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç­”ï¼šå½“ç„¶æ˜¯ç”µè¯æœºã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ‰äº†ç”µè¯æœºæ‰èƒ½å®‰è£…ç”µè¯ï¼Œäºæ˜¯å°±è¦å‡†å¤‡ä¸€ä¸ªç”µè¯æœºï¼Œä¸‹é¢å‡½æ•°ç›¸å½“äºç”µè¯æœºçš„å¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;socket&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; domain, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; type, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; protocol);
&lt;span style=&#34;color:#228b22&#34;&gt;//æˆåŠŸæ—¶è¿”å›æ–‡ä»¶æè¿°ç¬¦ï¼Œå¤±è´¥æ—¶è¿”å›-1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;è°ƒç”¨ bind å‡½æ•°ï¼ˆåˆ†é…ç”µè¯å·ç ï¼‰æ—¶è¿›è¡Œçš„å¯¹è¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é—®ï¼šè¯·é—®æˆ‘çš„ç”µè¯å·ç æ˜¯å¤šå°‘&lt;/p&gt;
&lt;p&gt;ç­”ï¼šæˆ‘çš„ç”µè¯å·ç æ˜¯123-1234&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¥—æ¥å­—åŒæ ·å¦‚æ­¤ã€‚å°±æƒ³ç»™ç”µè¯æœºåˆ†é…ç”µè¯å·ç ä¸€æ ·ï¼Œåˆ©ç”¨ä»¥ä¸‹å‡½æ•°ç»™åˆ›å»ºå¥½çš„å¥—æ¥å­—åˆ†é…åœ°å€ä¿¡æ¯ï¼ˆIPåœ°å€å’Œç«¯å£å·ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;bind&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; sockfd, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr *myaddr, socklen_t addrlen);
&lt;span style=&#34;color:#228b22&#34;&gt;//æˆåŠŸæ—¶è¿”å›0ï¼Œå¤±è´¥æ—¶è¿”å›-1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è°ƒç”¨ bind å‡½æ•°ç»™å¥—æ¥å­—åˆ†é…åœ°å€ä¹‹åï¼Œå°±åŸºæœ¬å®Œæˆäº†æ‰€æœ‰çš„å‡†å¤‡å·¥ä½œã€‚æ¥ä¸‹æ¥æ˜¯éœ€è¦è¿æ¥ç”µè¯çº¿å¹¶ç­‰å¾…æ¥ç”µã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è°ƒç”¨ listen å‡½æ•°ï¼ˆè¿æ¥ç”µè¯çº¿ï¼‰æ—¶è¿›è¡Œçš„å¯¹è¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é—®ï¼šå·²æ¶è®¾å®Œç”µè¯æœºåæ˜¯å¦åªéœ€é“¾æ¥ç”µè¯çº¿ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç­”ï¼šå¯¹ï¼Œåªéœ€è¦è¿æ¥å°±èƒ½æ¥å¬ç”µè¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸€è¿æ¥ç”µè¯çº¿ï¼Œç”µè¯æœºå°±å¯ä»¥è½¬æ¢ä¸ºå¯æ¥å¬çŠ¶æ€ï¼Œè¿™æ—¶å…¶ä»–äººå¯ä»¥æ‹¨æ‰“ç”µè¯è¯·æ±‚è¿æ¥åˆ°è¯¥æœºã€‚åŒæ ·ï¼Œéœ€è¦æŠŠå¥—æ¥å­—è½¬åŒ–æˆå¯æ¥å—è¿æ¥çŠ¶æ€ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;listen&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; sockfd, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; backlog);
&lt;span style=&#34;color:#228b22&#34;&gt;//æˆåŠŸæ—¶è¿”å›0ï¼Œå¤±è´¥æ—¶è¿”å›-1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿æ¥å¥½ç”µè¯çº¿ä»¥åï¼Œå¦‚æœæœ‰äººæ‹¨æ‰“ç”µè¯å°±å“é“ƒï¼Œæ‹¿èµ·è¯ç­’æ‰èƒ½æ¥å¬ç”µè¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è°ƒç”¨ accept å‡½æ•°ï¼ˆæ‹¿èµ·è¯ç­’ï¼‰æ—¶è¿›è¡Œçš„å¯¹è¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é—®ï¼šç”µè¯é“ƒå“äº†ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç­”ï¼šæ¥å¬å•Šã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;accept&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; sockfd,&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; sockaddr *addr,socklen_t *addrlen);
&lt;span style=&#34;color:#228b22&#34;&gt;//æˆåŠŸæ—¶è¿”å›æ–‡ä»¶æè¿°ç¬¦ï¼Œå¤±è´¥æ—¶è¿”å›-1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç½‘ç»œç¼–ç¨‹ä¸­å’Œæ¥å—è¿æ¥è¯·æ±‚çš„å¥—æ¥å­—åˆ›å»ºè¿‡ç¨‹å¯æ•´ç†å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç¬¬ä¸€æ­¥ï¼šè°ƒç”¨ socket å‡½æ•°åˆ›å»ºå¥—æ¥å­—ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒæ­¥ï¼šè°ƒç”¨ bind å‡½æ•°åˆ†é…IPåœ°å€å’Œç«¯å£å·ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨ listen å‡½æ•°è½¬æ¢ä¸ºå¯æ¥å—è¯·æ±‚çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬å››æ­¥ï¼šè°ƒç”¨ accept å‡½æ•°å—ç†å¥—æ¥å­—è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;112--ç¼–å†™hello-worldå¥—æ¥å­—ç¨‹åº&#34;&gt;1.1.2  ç¼–å†™&lt;code&gt;Hello World&lt;/code&gt;å¥—æ¥å­—ç¨‹åº&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;æœåŠ¡ç«¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;æœåŠ¡å™¨ç«¯ï¼ˆserverï¼‰æ˜¯èƒ½å¤Ÿå—ç†è¿æ¥è¯·æ±‚çš„ç¨‹åºã€‚ä¸‹é¢æ„å»ºæœåŠ¡ç«¯ä»¥éªŒè¯ä¹‹å‰æåˆ°çš„å‡½æ•°è°ƒç”¨è¿‡ç¨‹ï¼Œè¯¥æœåŠ¡å™¨ç«¯æ”¶åˆ°è¿æ¥è¯·æ±‚åå‘è¯·æ±‚è€…è¿”å›&lt;code&gt;Hello World!&lt;/code&gt;ç­”å¤ã€‚é™¤å„ç§å‡½æ•°çš„è°ƒç”¨é¡ºåºå¤–ï¼Œæˆ‘ä»¬è¿˜æœªæ¶‰åŠä»»ä½•å®é™…ç¼–ç¨‹ã€‚å› æ­¤ï¼Œé˜…è¯»ä»£ç æ—¶è¯·é‡ç‚¹å…³æ³¨å¥—æ¥å­—ç›¸å…³çš„å‡½æ•°è°ƒç”¨è¿‡ç¨‹ï¼Œä¸å¿…ç†è§£å…¨è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;æœåŠ¡å™¨ç«¯ä»£ç è¯·å‚è§ï¼š&lt;a href=&#34;ch01/hello_server.c&#34;&gt;hello_server.c&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å®¢æˆ·ç«¯ç¨‹åºåªæœ‰&lt;code&gt;è°ƒç”¨ socket å‡½æ•°åˆ›å»ºå¥—æ¥å­—&lt;/code&gt; å’Œ &lt;code&gt;è°ƒç”¨ connect å‡½æ•°å‘æœåŠ¡ç«¯å‘é€è¿æ¥è¯·æ±‚&lt;/code&gt;è¿™ä¸¤ä¸ªæ­¥éª¤ï¼Œä¸‹é¢ç»™å‡ºå®¢æˆ·ç«¯ï¼Œéœ€è¦æŸ¥çœ‹ä»¥ä¸‹ä¸¤æ–¹é¢çš„å†…å®¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è°ƒç”¨ socket å‡½æ•° å’Œ connect å‡½æ•°&lt;/li&gt;
&lt;li&gt;ä¸æœåŠ¡ç«¯å…±åŒè¿è¡Œä»¥æ”¶å‘å­—ç¬¦ä¸²æ•°æ®&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å®¢æˆ·ç«¯ä»£ç è¯·å‚è§ï¼š&lt;a href=&#34;ch01/hello_client.c&#34;&gt;hello_client.c&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¼–è¯‘&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;åˆ†åˆ«å¯¹å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç¨‹åºè¿›è¡Œç¼–è¯‘ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc hello_server.c -o hserver
gcc hello_client.c -o hclient
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;è¿è¡Œ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;./hserver &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
./hclient 127.0.0.1 &lt;span style=&#34;color:#b452cd&#34;&gt;9190&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿è¡Œçš„æ—¶å€™ï¼Œé¦–å…ˆå† 9190 ç«¯å£å¯åŠ¨æœåŠ¡ï¼Œç„¶å heserver å°±ä¼šä¸€ç›´ç­‰å¾…å®¢æˆ·ç«¯è¿›è¡Œå“åº”ï¼Œå½“å®¢æˆ·ç«¯ç›‘å¬ä½äºæœ¬åœ°çš„ IP ä¸º 127.0.0.1 çš„åœ°å€çš„9190ç«¯å£æ—¶ï¼Œå®¢æˆ·ç«¯å°±ä¼šæ”¶åˆ°æœåŠ¡ç«¯çš„å›åº”ï¼Œè¾“å‡º&lt;code&gt;Hello World!&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;12-åŸºäº-linux-çš„æ–‡ä»¶æ“ä½œ&#34;&gt;1.2 åŸºäº Linux çš„æ–‡ä»¶æ“ä½œ&lt;/h3&gt;
&lt;p&gt;è®¨è®ºå¥—æ¥å­—çš„è¿‡ç¨‹ä¸­çªç„¶è°ˆåŠæ–‡ä»¶ä¹Ÿè®¸æœ‰äº›å¥‡æ€ªã€‚ä½†æ˜¯å¯¹äº Linux è€Œè¨€ï¼Œsocket æ“ä½œä¸æ–‡ä»¶æ“ä½œæ²¡æœ‰åŒºåˆ«ï¼Œå› è€Œæœ‰å¿…è¦è¯¦ç»†äº†è§£æ–‡ä»¶ã€‚åœ¨ Linux ä¸–ç•Œé‡Œï¼Œsocket ä¹Ÿè¢«è®¤ä¸ºæ˜¯æ–‡ä»¶çš„ä¸€ç§ï¼Œå› æ­¤åœ¨ç½‘ç»œæ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­è‡ªç„¶å¯ä»¥ä½¿ç”¨ I/O çš„ç›¸å…³å‡½æ•°ã€‚Windows ä¸ Linux ä¸åŒï¼Œæ˜¯è¦åŒºåˆ† socket å’Œæ–‡ä»¶çš„ã€‚å› æ­¤åœ¨ Windows ä¸­éœ€è¦è°ƒç”¨ç‰¹æ®Šçš„æ•°æ®ä¼ è¾“ç›¸å…³å‡½æ•°ã€‚&lt;/p&gt;
&lt;h4 id=&#34;121-åº•å±‚è®¿é—®å’Œæ–‡ä»¶æè¿°ç¬¦&#34;&gt;1.2.1 åº•å±‚è®¿é—®å’Œæ–‡ä»¶æè¿°ç¬¦&lt;/h4&gt;
&lt;p&gt;åˆ†é…ç»™æ ‡å‡†è¾“å…¥è¾“å‡ºåŠæ ‡å‡†é”™è¯¯çš„æ–‡ä»¶æè¿°ç¬¦ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;æ–‡ä»¶æè¿°ç¬¦&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;å¯¹è±¡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;0&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;æ ‡å‡†è¾“å…¥ï¼šStandard Input&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;æ ‡å‡†è¾“å‡ºï¼šStandard Output&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;2&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;æ ‡å‡†é”™è¯¯ï¼šStandard Error&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ–‡ä»¶å’Œå¥—æ¥å­—ä¸€èˆ¬ç»è¿‡åˆ›å»ºè¿‡ç¨‹æ‰ä¼šè¢«åˆ†é…æ–‡ä»¶æè¿°ç¬¦ã€‚&lt;/p&gt;
&lt;p&gt;æ–‡ä»¶æè¿°ç¬¦ä¹Ÿè¢«ç§°ä¸ºã€Œæ–‡ä»¶å¥æŸ„ã€ï¼Œä½†æ˜¯ã€Œå¥æŸ„ã€ä¸»è¦æ˜¯ Windows ä¸­çš„æœ¯è¯­ã€‚å› æ­¤ï¼Œåœ¨æœ¬ä¹¦ä¸­å¦‚æœè®¾è®¡ Windows å¹³å°å°†ä½¿ç”¨ã€Œå¥æŸ„ã€ï¼Œå¦‚æœæ˜¯ Linux å°†ä½¿ç”¨ã€Œæè¿°ç¬¦ã€ã€‚&lt;/p&gt;
&lt;h4 id=&#34;122-æ‰“å¼€æ–‡ä»¶&#34;&gt;1.2.2 æ‰“å¼€æ–‡ä»¶:&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/types.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;sys/stat.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;fcntl.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;open&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *path, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; flag);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å›æ–‡ä»¶æè¿°ç¬¦ï¼Œå¤±è´¥æ—¶è¿”å›-1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;path : æ–‡ä»¶åçš„å­—ç¬¦ä¸²åœ°å€
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;flag : æ–‡ä»¶æ‰“å¼€æ¨¡å¼ä¿¡æ¯
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ–‡ä»¶æ‰“å¼€æ¨¡å¼å¦‚ä¸‹è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;æ‰“å¼€æ¨¡å¼&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;å«ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O_CREAT&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;å¿…è¦æ—¶åˆ›å»ºæ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O_TRUNC&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;åˆ é™¤å…¨éƒ¨ç°æœ‰æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O_APPEND&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ç»´æŒç°æœ‰æ•°æ®ï¼Œä¿å­˜åˆ°å…¶åé¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O_RDONLY&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;åªè¯»æ‰“å¼€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O_WRONLY&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;åªå†™æ‰“å¼€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;O_RDWR&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;è¯»å†™æ‰“å¼€&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;123-å…³é—­æ–‡ä»¶&#34;&gt;1.2.3 å…³é—­æ–‡ä»¶ï¼š&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;close&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; fd);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å› 0 ï¼Œå¤±è´¥æ—¶è¿”å› -1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;fd : éœ€è¦å…³é—­çš„æ–‡ä»¶æˆ–å¥—æ¥å­—çš„æ–‡ä»¶æè¿°ç¬¦
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è‹¥è°ƒç”¨æ­¤å‡½æ•°åŒæ—¶ä¼ é€’æ–‡ä»¶æè¿°ç¬¦å‚æ•°ï¼Œåˆ™å…³é—­ï¼ˆç»ˆæ­¢ï¼‰å“åº”æ–‡ä»¶ã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤å‡½æ•°ä¸ä»…å¯ä»¥å…³é—­æ–‡ä»¶ï¼Œè¿˜å¯ä»¥å…³é—­å¥—æ¥å­—ã€‚å†æ¬¡è¯æ˜äº†ã€ŒLinux æ“ä½œç³»ç»Ÿä¸åŒºåˆ†æ–‡ä»¶ä¸å¥—æ¥å­—ã€çš„ç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;h4 id=&#34;124-å°†æ•°æ®å†™å…¥æ–‡ä»¶&#34;&gt;1.2.4 å°†æ•°æ®å†™å…¥æ–‡ä»¶ï¼š&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;ssize_t &lt;span style=&#34;color:#008b45&#34;&gt;write&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; fd, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; *buf, size_t nbytes);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å›å†™å…¥çš„å­—èŠ‚æ•° ï¼Œå¤±è´¥æ—¶è¿”å› -1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;fd : æ˜¾ç¤ºæ•°æ®ä¼ è¾“å¯¹è±¡çš„æ–‡ä»¶æè¿°ç¬¦
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;buf : ä¿å­˜è¦ä¼ è¾“æ•°æ®çš„ç¼“å†²å€¼åœ°å€
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;nbytes : è¦ä¼ è¾“æ•°æ®çš„å­—èŠ‚æ•°
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨æ­¤å‡½æ•°çš„å®šä¹‰ä¸­ï¼Œsize_t æ˜¯é€šè¿‡ typedef å£°æ˜çš„ unsigned int ç±»å‹ã€‚å¯¹ ssize_t æ¥è¯´ï¼Œssize_t å‰é¢å¤šåŠ çš„ s ä»£è¡¨ signed ï¼Œå³ ssize_t æ˜¯é€šè¿‡ typedef å£°æ˜çš„ signed int ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»ºæ–°æ–‡ä»¶å¹¶ä¿å­˜æ•°æ®ï¼š&lt;/p&gt;
&lt;p&gt;ä»£ç è§ï¼š&lt;a href=&#34;ch01/low_open.c&#34;&gt;low_open.c&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc low_open.c -o lopen
./lopen
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç„¶åä¼šç”Ÿæˆä¸€ä¸ª&lt;code&gt;data.txt&lt;/code&gt;çš„æ–‡ä»¶ï¼Œé‡Œé¢æœ‰&lt;code&gt;Let&#39;s go!&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;125-è¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®&#34;&gt;1.2.5 è¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ï¼š&lt;/h4&gt;
&lt;p&gt;ä¸ä¹‹å‰çš„&lt;code&gt;write()&lt;/code&gt;å‡½æ•°ç›¸å¯¹åº”ï¼Œ&lt;code&gt;read()&lt;/code&gt;ç”¨æ¥è¾“å…¥ï¼ˆæ¥æ”¶ï¼‰æ•°æ®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;ssize_t &lt;span style=&#34;color:#008b45&#34;&gt;read&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; fd, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; *buf, size_t nbytes);
&lt;span style=&#34;color:#228b22&#34;&gt;/*
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;æˆåŠŸæ—¶è¿”å›æ¥æ”¶çš„å­—èŠ‚æ•°ï¼ˆä½†é‡åˆ°æ–‡ä»¶ç»“å°¾åˆ™è¿”å› 0ï¼‰ï¼Œå¤±è´¥æ—¶è¿”å› -1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;fd : æ˜¾ç¤ºæ•°æ®æ¥æ”¶å¯¹è±¡çš„æ–‡ä»¶æè¿°ç¬¦
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;buf : è¦ä¿å­˜æ¥æ”¶çš„æ•°æ®çš„ç¼“å†²åœ°å€å€¼ã€‚
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;nbytes : è¦æ¥æ”¶æ•°æ®çš„æœ€å¤§å­—èŠ‚æ•°
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸‹é¢ç¤ºä¾‹é€šè¿‡ read() å‡½æ•°è¯»å– data.txt ä¸­ä¿å­˜çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ä»£ç è§ï¼š&lt;a href=&#34;ch01/low_read.c&#34;&gt;low_read.c&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc low_read.c -o lread
./lread
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨ä¸Šä¸€æ­¥çš„ data.txt æ–‡ä»¶ä¸æ²¡æœ‰åˆ çš„æƒ…å†µä¸‹ï¼Œä¼šè¾“å‡ºï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;file descriptor: 3
file data: Let&#39;s go!
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…³äºæ–‡ä»¶æè¿°ç¬¦çš„ I/O æ“ä½œåˆ°æ­¤ç»“æŸï¼Œè¦æ˜ç™½ï¼Œè¿™äº›å†…å®¹åŒæ ·é€‚åˆäºå¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;h4 id=&#34;126-æ–‡ä»¶æè¿°ç¬¦ä¸å¥—æ¥å­—&#34;&gt;1.2.6 æ–‡ä»¶æè¿°ç¬¦ä¸å¥—æ¥å­—&lt;/h4&gt;
&lt;p&gt;ä¸‹é¢å°†åŒæ—¶åˆ›å»ºæ–‡ä»¶å’Œå¥—æ¥å­—ï¼Œå¹¶ç”¨æ•´æ•°å‹æ€æ¯”è¾ƒè¿”å›çš„æ–‡ä»¶æè¿°ç¬¦çš„å€¼.&lt;/p&gt;
&lt;p&gt;ä»£ç è§ï¼š&lt;a href=&#34;ch01/fd_seri.c&#34;&gt;fd_seri.c&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¼–è¯‘è¿è¡Œ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;gcc fd_seri.c -o fds
./fds
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;è¾“å‡ºç»“æœ&lt;/strong&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;file descriptor 1: 3
file descriptor 2: 15
file descriptor 3: 16
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;13-åŸºäº-windows-å¹³å°çš„å®ç°&#34;&gt;1.3 åŸºäº Windows å¹³å°çš„å®ç°&lt;/h3&gt;
&lt;p&gt;æš‚ç•¥&lt;/p&gt;
&lt;h3 id=&#34;14-åŸºäº-windows-çš„å¥—æ¥å­—ç›¸å…³å‡½æ•°åŠç¤ºä¾‹&#34;&gt;1.4 åŸºäº Windows çš„å¥—æ¥å­—ç›¸å…³å‡½æ•°åŠç¤ºä¾‹&lt;/h3&gt;
&lt;p&gt;æš‚ç•¥&lt;/p&gt;
&lt;h3 id=&#34;15-ä¹ é¢˜&#34;&gt;1.5 ä¹ é¢˜&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;â—ä»¥ä¸‹éƒ¨åˆ†çš„ç­”æ¡ˆï¼Œä»…ä»£è¡¨æˆ‘ä¸ªäººè§‚ç‚¹ï¼Œå¯èƒ½ä¸æ˜¯æ­£ç¡®ç­”æ¡ˆ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å¥—æ¥å­—åœ¨ç½‘ç»œç¼–ç¨‹ä¸­çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä½•ç§°å®ƒä¸ºå¥—æ¥å­—ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”ï¼šæ“ä½œç³»ç»Ÿä¼šæä¾›ã€Œå¥—æ¥å­—ã€ï¼ˆsocketï¼‰çš„éƒ¨ä»¶ï¼Œå¥—æ¥å­—æ˜¯ç½‘ç»œæ•°æ®ä¼ è¾“ç”¨çš„è½¯ä»¶è®¾å¤‡ã€‚å› æ­¤ï¼Œã€Œç½‘ç»œç¼–ç¨‹ã€ä¹Ÿå«ã€Œå¥—æ¥å­—ç¼–ç¨‹ã€ã€‚ã€Œå¥—æ¥å­—ã€å°±æ˜¯ç”¨æ¥è¿æ¥ç½‘ç»œçš„å·¥å…·ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨æœåŠ¡å™¨ç«¯åˆ›å»ºå¥—æ¥å­—ä»¥åï¼Œä¼šä¾æ¬¡è°ƒç”¨ listen å‡½æ•°å’Œ accept å‡½æ•°ã€‚è¯·æ¯”è¾ƒäºŒè€…ä½œç”¨ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”ï¼šè°ƒç”¨ listen å‡½æ•°å°†å¥—æ¥å­—è½¬æ¢æˆå¯å—è¿æ¥çŠ¶æ€ï¼ˆç›‘å¬ï¼‰ï¼Œè°ƒç”¨ accept å‡½æ•°å—ç†è¿æ¥è¯·æ±‚ã€‚å¦‚æœåœ¨æ²¡æœ‰è¿æ¥è¯·æ±‚çš„æƒ…å†µä¸‹è°ƒç”¨è¯¥å‡½æ•°ï¼Œåˆ™ä¸ä¼šè¿”å›ï¼Œç›´åˆ°æœ‰è¿æ¥è¯·æ±‚ä¸ºæ­¢ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Linux ä¸­ï¼Œå¯¹å¥—æ¥å­—æ•°æ®è¿›è¡Œ I/O æ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨æ–‡ä»¶ I/O ç›¸å…³å‡½æ•°ï¼›è€Œåœ¨ Windows ä¸­åˆ™ä¸å¯ä»¥ã€‚åŸå› ä¸ºä½•ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”ï¼šæš‚ç•¥ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºå¥—æ¥å­—åä¸€èˆ¬ä¼šç»™ä»–åˆ†é…åœ°å€ï¼Œä¸ºä»€ä¹ˆï¼Ÿä¸ºäº†å®Œæˆåœ°å€åˆ†é…éœ€è¦è°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”ï¼šå¥—æ¥å­—è¢«åˆ›å»ºä¹‹åï¼Œåªæœ‰ä¸ºå…¶åˆ†é…äº†IPåœ°å€å’Œç«¯å£å·åï¼Œå®¢æˆ·ç«¯æ‰èƒ½å¤Ÿé€šè¿‡IPåœ°å€åŠç«¯å£å·ä¸æœåŠ¡å™¨ç«¯å»ºç«‹è¿æ¥ï¼Œéœ€è¦è°ƒç”¨ bind å‡½æ•°æ¥å®Œæˆåœ°å€åˆ†é…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Linux ä¸­çš„æ–‡ä»¶æè¿°ç¬¦ä¸ Windows çš„å¥æŸ„å®é™…ä¸Šéå¸¸ç±»ä¼¼ã€‚è¯·ä»¥å¥—æ¥å­—ä¸ºå¯¹è±¡è¯´æ˜å®ƒä»¬çš„å«ä¹‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”ï¼šæš‚ç•¥ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;
&lt;p&gt;åº•å±‚ I/O å‡½æ•°ä¸ ANSI æ ‡å‡†å®šä¹‰çš„æ–‡ä»¶ I/O å‡½æ•°æœ‰ä½•åŒºåˆ«ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”ï¼šæ–‡ä»¶ I/O åˆç§°ä¸ºä½çº§ç£ç›˜ I/Oï¼Œéµå¾ª POSIX ç›¸å…³æ ‡å‡†ã€‚ä»»ä½•å…¼å®¹ POSIX æ ‡å‡†çš„æ“ä½œç³»ç»Ÿä¸Šéƒ½æ”¯æŒæ–‡ä»¶I/Oã€‚æ ‡å‡† I/O è¢«ç§°ä¸ºé«˜çº§ç£ç›˜ I/Oï¼Œéµå¾ª ANSI C ç›¸å…³æ ‡å‡†ã€‚åªè¦å¼€å‘ç¯å¢ƒä¸­æœ‰æ ‡å‡† I/O åº“ï¼Œæ ‡å‡† I/O å°±å¯ä»¥ä½¿ç”¨ã€‚ï¼ˆLinux ä¸­ä½¿ç”¨çš„æ˜¯ GLIBCï¼Œå®ƒæ˜¯æ ‡å‡†Cåº“çš„è¶…é›†ã€‚ä¸ä»…åŒ…å« ANSI C ä¸­å®šä¹‰çš„å‡½æ•°ï¼Œè¿˜åŒ…æ‹¬ POSIX æ ‡å‡†ä¸­å®šä¹‰çš„å‡½æ•°ã€‚å› æ­¤ï¼ŒLinux ä¸‹æ—¢å¯ä»¥ä½¿ç”¨æ ‡å‡† I/Oï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ–‡ä»¶ I/Oï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‚è€ƒæœ¬ä¹¦ç»™å‡ºçš„ç¤ºä¾‹&lt;code&gt;low_open.c&lt;/code&gt;å’Œ&lt;code&gt;low_read.c&lt;/code&gt;ï¼Œåˆ†åˆ«åˆ©ç”¨åº•å±‚æ–‡ä»¶ I/O å’Œ ANSI æ ‡å‡† I/O ç¼–å†™æ–‡ä»¶å¤åˆ¶ç¨‹åºã€‚å¯ä»»æ„æŒ‡å®šå¤åˆ¶ç¨‹åºçš„ä½¿ç”¨æ–¹æ³•ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç­”ï¼šæš‚ç•¥ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
- https://caixiongjiang.github.io/blog/2019/tcp-ip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC-1-%E7%AB%A0-%E7%90%86%E8%A7%A3%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%92%8C%E5%A5%97%E6%8E%A5%E5%AD%97-%E7%AC%94%E8%AE%B0/ - </description>
        </item>
    
    
  </channel>
</rss> 