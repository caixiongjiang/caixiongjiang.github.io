<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ğŸŒ€riba2534&#39;s Blog</title>
    <link>https://caixiongjiang.github.io/</link>
    <description>Recent content on ğŸŒ€riba2534&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Mon, 20 Sep 2021 09:40:54 +0800</lastBuildDate>
    
        <atom:link href="https://caixiongjiang.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    
    
        <item>
        <title>LeetCode 327 åŒºé—´å’Œçš„ä¸ªæ•°ï¼ˆæ ‘çŠ¶æ•°ç»„ã€çº¿æ®µæ ‘ï¼‰</title>
        <link>https://caixiongjiang.github.io/blog/2020/leetcode-327-%E5%8C%BA%E9%97%B4%E5%92%8C%E7%9A%84%E4%B8%AA%E6%95%B0%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84%E7%BA%BF%E6%AE%B5%E6%A0%91/</link>
        <pubDate>Sat, 07 Nov 2020 16:41:38 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2020/leetcode-327-%E5%8C%BA%E9%97%B4%E5%92%8C%E7%9A%84%E4%B8%AA%E6%95%B0%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84%E7%BA%BF%E6%AE%B5%E6%A0%91/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2020/leetcode-327-%E5%8C%BA%E9%97%B4%E5%92%8C%E7%9A%84%E4%B8%AA%E6%95%B0%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84%E7%BA%BF%E6%AE%B5%E6%A0%91/ -&lt;p&gt;é¢˜ç›®é“¾æ¥ï¼š&lt;a href=&#34;https://leetcode-cn.com/problems/count-of-range-sum/&#34;&gt;åŒºé—´å’Œçš„ä¸ªæ•°&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ &lt;code&gt;nums&lt;/code&gt;ï¼Œè¿”å›åŒºé—´å’Œåœ¨ &lt;code&gt;[lower, upper]&lt;/code&gt; ä¹‹é—´çš„ä¸ªæ•°ï¼ŒåŒ…å« &lt;code&gt;lower&lt;/code&gt; å’Œ &lt;code&gt;upper&lt;/code&gt;ã€‚
åŒºé—´å’Œ &lt;code&gt;S(i, j)&lt;/code&gt; è¡¨ç¤ºåœ¨ &lt;code&gt;nums&lt;/code&gt; ä¸­ï¼Œä½ç½®ä» &lt;code&gt;i&lt;/code&gt; åˆ° &lt;code&gt;j&lt;/code&gt; çš„å…ƒç´ ä¹‹å’Œï¼ŒåŒ…å« &lt;code&gt;i&lt;/code&gt; å’Œ &lt;code&gt;j&lt;/code&gt; (&lt;code&gt;i&lt;/code&gt; â‰¤ &lt;code&gt;j&lt;/code&gt;)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯´æ˜:&lt;/strong&gt;
æœ€ç›´è§‚çš„ç®—æ³•å¤æ‚åº¦æ˜¯ &lt;em&gt;O&lt;/em&gt;(&lt;em&gt;n&lt;/em&gt;2) ï¼Œè¯·åœ¨æ­¤åŸºç¡€ä¸Šä¼˜åŒ–ä½ çš„ç®—æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹:&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥: nums = [-2,5,-1], lower = -2, upper = 2,
è¾“å‡º: 3 
è§£é‡Š: 3ä¸ªåŒºé—´åˆ†åˆ«æ˜¯: [0,0], [2,2], [0,2]ï¼Œå®ƒä»¬è¡¨ç¤ºçš„å’Œåˆ†åˆ«ä¸º: -2, -1, 2ã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ€è·¯&#34;&gt;æ€è·¯&lt;/h2&gt;
&lt;p&gt;(æ ‘çŠ¶æ•°ç»„) $O(nlogn)$&lt;/p&gt;
&lt;p&gt;è¿™é“é¢˜ä¸€ä¸ªå¾ˆç›´è§‚çš„åšæ³•å°±æ˜¯è®°å½•å‰ç¼€å’Œï¼Œç„¶åä½¿ç”¨åŒå±‚å¾ªç¯éå†æ‰€æœ‰çš„åŒºé—´ï¼Œæ—¶é—´å¤æ‚åº¦$O(n^2)$ã€‚æˆ‘ä»¬è€ƒè™‘å¦‚ä½•æ¥ä¼˜åŒ–è¿™ä¸ªè¿™ä¸ªåŒå±‚å¾ªç¯ï¼Œæˆ‘ä»¬åœ¨å›ºå®šå­æ•°ç»„çš„å³è¾¹ç•Œçš„æ—¶å€™ï¼Œé‡‡ç”¨éå†çš„æ–¹å¼æ±‚å‡ºæ‰€æœ‰åŒºé—´å’Œåœ¨&lt;code&gt;[lower,upper]&lt;/code&gt;ä¹‹é—´çš„æ•°ç»„ä¸ªæ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥æ›´ä¼˜çš„æ–¹å¼æ±‚è§£æ‰€æœ‰å¯è¡Œçš„åŒºé—´ã€‚å‡è®¾å³åŒºé—´ä¸º&lt;code&gt;A[j]&lt;/code&gt;ï¼Œå‰ç¼€å’Œä¸º&lt;code&gt;preSum[j]&lt;/code&gt;ï¼Œå…¶å®æˆ‘ä»¬éœ€è¦æ±‚çš„æ˜¯æ‰€æœ‰&lt;code&gt;preSum[j] - upper &amp;lt;= preSum[i] &amp;lt;= preSum[j] - lower(i&amp;lt;j)&lt;/code&gt;çš„ä¸ªæ•°ã€‚æ±‚æŸä¸€ä¸ªåŒºé—´å†…çš„ä¸ªæ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ ‘çŠ¶æ•°ç»„æˆ–è€…çº¿æ®µæ ‘æ¥æ±‚è§£ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ¯æ¬¡è¯»åˆ°ä¸€ä¸ªæ•°ï¼Œå…ˆæŠŠåˆæ³•åŒºé—´å†…å‰ç¼€å’Œçš„ä¸ªæ•°æ±‚å‡ºæ¥ï¼ˆåŒºé—´æŸ¥è¯¢ï¼‰ï¼Œç„¶åå°†å½“å‰å‰ç¼€å’Œå‡ºç°çš„æ¬¡æ•°åŠ ä¸Šä¸€ï¼ˆå•ç‚¹æ›´æ–°ï¼‰ã€‚å› ä¸ºåªéœ€è¦ä¸Šé¢ä¸¤ä¸ªæ“ä½œï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ ‘çŠ¶æ•°ç»„æ¥å‡å°‘ä»£ç éš¾åº¦ã€‚æ•´ä½“ä»£ç æ€è·¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ±‚å‡ºæ•°ç»„çš„å‰ç¼€å’Œæ•°ç»„ï¼ˆåŒ…æ‹¬0ï¼‰ï¼Œå¹¶å°†å‰ç¼€å’Œæ•°ç»„ç¦»æ•£åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ä¸‰ä¸ªå“ˆå¸Œè¡¨ï¼Œåˆ†åˆ«è®°å½•æ¯ä¸€ä¸ªå‰ç¼€å’Œç¦»æ•£åŒ–åçš„å¤§å°ï¼Œä»¥è¯¥æ•°å­—ä¸ºå³è¾¹ç•Œå¯¹åº”çš„å·¦è¾¹ç•Œå‰ç¼€å’Œçš„åŒºé—´&lt;code&gt;[preSum[j] - upper,preSum[j] - lower]&lt;/code&gt;å¯¹åº”çš„åŒºé—´å·¦å³ç«¯ç‚¹ç¦»æ•£åŒ–åçš„å€¼ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;lower_bound&lt;/code&gt;æŸ¥æ‰¾å¤§äºç­‰äº&lt;code&gt;preSum[j] - upper&lt;/code&gt;æœ€å°å€¼å¯¹åº”çš„ä¸‹æ ‡ï¼›&lt;/p&gt;
&lt;p&gt;&lt;code&gt;upper_bound&lt;/code&gt;æŸ¥æ‰¾å¤§äº&lt;code&gt;preSum[j] - lower&lt;/code&gt; æœ€å°å€¼å¯¹åº”çš„ä¸‹æ ‡ï¼›&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å…ˆå°†&lt;code&gt;0&lt;/code&gt;å¯¹åº”çš„ä½ç½®åŠ ä¸Š1ï¼ˆè¡¨ç¤ºä¸€ä¸ªå…ƒç´ éƒ½æ²¡æœ‰ï¼‰&lt;/li&gt;
&lt;li&gt;ç„¶åéå†æ‰€æœ‰çš„å‰ç¼€å’Œï¼Œæ‰§è¡ŒåŒºé—´æŸ¥è¯¢å’Œå•ç‚¹æ›´æ–°æ“ä½œã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ—¶é—´å¤æ‚åº¦ï¼šæ’åºã€ç¦»æ•£åŒ–å’Œæ ‘çŠ¶æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯$O(nlogn)$ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç &#34;&gt;ä»£ç &lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;36
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;37
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;38
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;39
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;40
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;41
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;42
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;43
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;44
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;45
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;46
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;47
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;48
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;49
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;50
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;51
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;52
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;53
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;54
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;55
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;56
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;57
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;58
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;59
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;60
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;61
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;62
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;63
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;64
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;65
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Solution&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; tree;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; n, m;
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;lowbit&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; x)
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; x &amp;amp; (-x);
    }
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;update&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; idx, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; delta)
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (idx &amp;lt;= m)
        {
            tree[idx] += delta;
            idx += lowbit(idx);
        }
    }
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;rangeSum&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; l, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; r)
    {
        &lt;span style=&#34;color:#228b22&#34;&gt;//lower_bound/upper_boundæ‰¾ä¸åˆ°åˆæ³•è§£æ˜¯å°±æ˜¯m + 1,æ‰€ä»¥ç›´æ¥è¿”å›0ã€‚
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (l == m + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; || r == m + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; res = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (l != r)
        {
            res += tree[r] - tree[l];
            r -= lowbit(r);
            l -= lowbit(l);
        }
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; res;
    }
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;countRangeSum&lt;/span&gt;(vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; &amp;amp;nums, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; lower, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; upper)
    {
        n = nums.size();
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (n == &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
        vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt;&amp;gt; preSum(n + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;);
        unordered_map&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; hash, hash_lower, hash_upper;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; i &amp;lt; n; i++)
            preSum[i + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;] = preSum[i] + nums[i];
        vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt;&amp;gt; temp = preSum;
        sort(temp.begin(), temp.end());
        temp.erase(unique(temp.begin(), temp.end()), temp.end());
        m = temp.size();
        tree = vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt;(m + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;);
        &lt;span style=&#34;color:#228b22&#34;&gt;//è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ä¸‹æ ‡ï¼Œåœ¨tempæ•°ç»„ä¸­ä¸‹æ ‡æ˜¯`0ï½m-1`ï¼Œä½†æ˜¯ä¸ºäº†å’Œæ ‘çŠ¶æ•°ç»„å¯¹åº”æˆ‘ä»¬éœ€è¦è½¬åŒ–æˆ`1~m`
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#228b22&#34;&gt;//æ‰€ä»¥hashå°±åŠ ä¸Šäº†1ã€‚å‡è®¾åˆæ³•çš„åŒºé—´æ˜¯`[L,R]`ï¼Œ
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#228b22&#34;&gt;//lower_boundæ‰¾åˆ°çš„æ˜¯å¤§äºç­‰äºLæœ€å°å€¼çš„ä¸‹æ ‡idxï¼ŒåŠ ä¸Š1ä¹‹åæ˜¯`idx + 1`ï¼Œä½†æ˜¯åœ¨æ±‚åŒºé—´å’Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ±‚çš„æ˜¯å·¦ç«¯ç‚¹å‰é¢é‚£ä¸ªå…ƒç´ å¯¹åº”çš„å‰ç¼€å’Œï¼Œæ­¤æ—¶åˆè¦å‡å»1ã€‚æ‰€ä»¥hash_lowerå°±ä¸å˜äº†ã€‚
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#228b22&#34;&gt;//upper_boundæ‰¾åˆ°çš„æ˜¯å¤§äºRçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸‹æ ‡ï¼Œä¹Ÿæ°å¥½æ˜¯Rå¯¹åº”çš„ä¸‹æ ‡idxåŠ ä¸Š1ä¹‹åçš„ç»“æœï¼Œæ‰€ä»¥æ²»ç†hash_upperä¹Ÿä¸å˜äº†ã€‚
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; i &amp;lt; m; i++)
        {
            hash[temp[i]] = i + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
            hash_lower[temp[i]] = lower_bound(temp.begin(), temp.end(), temp[i] - upper) - temp.begin();
            hash_upper[temp[i]] = upper_bound(temp.begin(), temp.end(), temp[i] - lower) - temp.begin();
        }
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; res = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
        update(hash[&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;], &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;);
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;; i &amp;lt;= n; i++)
        {
            res += rangeSum(hash_lower[preSum[i]], hash_upper[preSum[i]]);
            update(hash[preSum[i]], &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;);
        }
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; res;
    }
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;- https://caixiongjiang.github.io/blog/2020/leetcode-327-%E5%8C%BA%E9%97%B4%E5%92%8C%E7%9A%84%E4%B8%AA%E6%95%B0%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84%E7%BA%BF%E6%AE%B5%E6%A0%91/ - </description>
        </item>
    
    
    
        <item>
        <title>LeetCode LCP18 æ—©é¤ç»„åˆï¼ˆè´ªå¿ƒï¼Œæ€è·¯ï¼‰</title>
        <link>https://caixiongjiang.github.io/blog/2020/leetcode-lcp18-%E6%97%A9%E9%A4%90%E7%BB%84%E5%90%88%E8%B4%AA%E5%BF%83%E6%80%9D%E8%B7%AF/</link>
        <pubDate>Tue, 15 Sep 2020 00:56:00 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2020/leetcode-lcp18-%E6%97%A9%E9%A4%90%E7%BB%84%E5%90%88%E8%B4%AA%E5%BF%83%E6%80%9D%E8%B7%AF/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2020/leetcode-lcp18-%E6%97%A9%E9%A4%90%E7%BB%84%E5%90%88%E8%B4%AA%E5%BF%83%E6%80%9D%E8%B7%AF/ -&lt;p&gt;é¢˜ç›®é“¾æ¥ï¼š&lt;a href=&#34;https://leetcode-cn.com/problems/2vYnGI/&#34;&gt;æ—©é¤ç»„åˆ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å°æ‰£åœ¨ç§‹æ—¥å¸‚é›†é€‰æ‹©äº†ä¸€å®¶æ—©é¤æ‘Šä½ï¼Œä¸€ç»´æ•´å‹æ•°ç»„ &lt;code&gt;staple&lt;/code&gt; ä¸­è®°å½•äº†æ¯ç§ä¸»é£Ÿçš„ä»·æ ¼ï¼Œä¸€ç»´æ•´å‹æ•°ç»„ &lt;code&gt;drinks&lt;/code&gt; ä¸­è®°å½•äº†æ¯ç§é¥®æ–™çš„ä»·æ ¼ã€‚å°æ‰£çš„è®¡åˆ’é€‰æ‹©ä¸€ä»½ä¸»é£Ÿå’Œä¸€æ¬¾é¥®æ–™ï¼Œä¸”èŠ±è´¹ä¸è¶…è¿‡ &lt;code&gt;x&lt;/code&gt; å…ƒã€‚è¯·è¿”å›å°æ‰£å…±æœ‰å¤šå°‘ç§è´­ä¹°æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šç­”æ¡ˆéœ€è¦ä»¥ &lt;code&gt;1e9 + 7 (1000000007)&lt;/code&gt; ä¸ºåº•å–æ¨¡ï¼Œå¦‚ï¼šè®¡ç®—åˆå§‹ç»“æœä¸ºï¼š&lt;code&gt;1000000008&lt;/code&gt;ï¼Œè¯·è¿”å› &lt;code&gt;1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 1ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¾“å…¥ï¼š&lt;code&gt;staple = [10,20,5], drinks = [5,5,2], x = 15&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¾“å‡ºï¼š&lt;code&gt;6&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è§£é‡Šï¼šå°æ‰£æœ‰ 6 ç§è´­ä¹°æ–¹æ¡ˆï¼Œæ‰€é€‰ä¸»é£Ÿä¸æ‰€é€‰é¥®æ–™åœ¨æ•°ç»„ä¸­å¯¹åº”çš„ä¸‹æ ‡åˆ†åˆ«æ˜¯ï¼š
ç¬¬ 1 ç§æ–¹æ¡ˆï¼šstaple[0] + drinks[0] = 10 + 5 = 15ï¼›
ç¬¬ 2 ç§æ–¹æ¡ˆï¼šstaple[0] + drinks[1] = 10 + 5 = 15ï¼›
ç¬¬ 3 ç§æ–¹æ¡ˆï¼šstaple[0] + drinks[2] = 10 + 2 = 12ï¼›
ç¬¬ 4 ç§æ–¹æ¡ˆï¼šstaple[2] + drinks[0] = 5 + 5 = 10ï¼›
ç¬¬ 5 ç§æ–¹æ¡ˆï¼šstaple[2] + drinks[1] = 5 + 5 = 10ï¼›
ç¬¬ 6 ç§æ–¹æ¡ˆï¼šstaple[2] + drinks[2] = 5 + 2 = 7ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 2ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¾“å…¥ï¼š&lt;code&gt;staple = [2,1,1], drinks = [8,9,5,1], x = 9&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¾“å‡ºï¼š&lt;code&gt;8&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è§£é‡Šï¼šå°æ‰£æœ‰ 8 ç§è´­ä¹°æ–¹æ¡ˆï¼Œæ‰€é€‰ä¸»é£Ÿä¸æ‰€é€‰é¥®æ–™åœ¨æ•°ç»„ä¸­å¯¹åº”çš„ä¸‹æ ‡åˆ†åˆ«æ˜¯ï¼š
ç¬¬ 1 ç§æ–¹æ¡ˆï¼šstaple[0] + drinks[2] = 2 + 5 = 7ï¼›
ç¬¬ 2 ç§æ–¹æ¡ˆï¼šstaple[0] + drinks[3] = 2 + 1 = 3ï¼›
ç¬¬ 3 ç§æ–¹æ¡ˆï¼šstaple[1] + drinks[0] = 1 + 8 = 9ï¼›
ç¬¬ 4 ç§æ–¹æ¡ˆï¼šstaple[1] + drinks[2] = 1 + 5 = 6ï¼›
ç¬¬ 5 ç§æ–¹æ¡ˆï¼šstaple[1] + drinks[3] = 1 + 1 = 2ï¼›
ç¬¬ 6 ç§æ–¹æ¡ˆï¼šstaple[2] + drinks[0] = 1 + 8 = 9ï¼›
ç¬¬ 7 ç§æ–¹æ¡ˆï¼šstaple[2] + drinks[2] = 1 + 5 = 6ï¼›
ç¬¬ 8 ç§æ–¹æ¡ˆï¼šstaple[2] + drinks[3] = 1 + 1 = 2ï¼›&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;æç¤ºï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;1 &amp;lt;= staple.length &amp;lt;= 10^5&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;1 &amp;lt;= drinks.length &amp;lt;= 10^5&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;1 &amp;lt;= staple[i],drinks[i] &amp;lt;= 10^5&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;1 &amp;lt;= x &amp;lt;= 2*10^5&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€è·¯&#34;&gt;æ€è·¯&lt;/h2&gt;
&lt;p&gt;åŠ›æ‰£æ¯2020ç§‹å­£ç¼–ç¨‹å¤§èµ›åŸé¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç®—æ˜¯ä¸ªè´ªå¿ƒå§ã€‚åŸºæœ¬å°±æ˜¯ç»™ä½ ä¸¤ä¸ªæ•°ç»„ï¼Œè®©ä½ ä»ç¬¬ä¸€ä¸ªä¸­é€‰ä¸€ä¸ªå…ƒç´ ï¼Œç¬¬äºŒä¸ªä¸­é€‰ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åç»™å‡ºä¸€ä¸ªæ•°ï¼Œé—®ä¸è¶…è¿‡è¿™ä¸ªæ•°çš„é€‰æ³•çš„æ–¹æ¡ˆæ•°ã€‚&lt;/p&gt;
&lt;p&gt;ç»™å‡ºçš„æ•°ç»„æœ¬èº«æ˜¯æ— åºçš„ï¼Œé‚£ä¹ˆå…ˆç»™è¿™ä¸ªä¸¤ä¸ªæ•°ç»„æ’ä¸ªåº$O(nlogn)$&lt;/p&gt;
&lt;p&gt;å…ˆè¿›è¡Œä¸€æ³¢é¢„å¤„ç†ï¼ŒæŠŠä¸¤ä¸ªæ•°ç»„ä¸­ï¼Œä»åå¾€å‰ï¼Œå‡¡æ˜¯æ•°ç»„ä¸­çš„å€¼éƒ½å¤§äºç»™å‡ºçš„æ•°çš„æ•°å…¨éƒ¨ç­›æ‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¿è¯æœ‰åºçš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥å¼€å§‹é€‰äº†ï¼Œç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªæ•°ç»„çš„æœ€åè¾¹ï¼Œä¹Ÿå°±æ˜¯å€¼æœ€å¤§çš„å…ƒç´ ã€‚å†ç”¨ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ç¬¬äºŒä¸ªæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;ä»¤ç¬¬ä¸€ä¸ªæ•°ç»„çš„æŒ‡é’ˆä¸º $i$ï¼Œç¬¬äºŒä¸ªæ•°ç»„çš„æŒ‡é’ˆä¸º $j$ï¼Œå¯¹äºå½“å‰çš„ $j$ï¼Œæˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªæ•°ç»„ä¸­çš„æŒ‡é’ˆ $i$ å‘å·¦ç§»ï¼Œç›´åˆ° &lt;code&gt;a[i]+b[j]&amp;lt;=x&lt;/code&gt;ï¼Œæ­¤æ—¶ï¼Œç¬¬ä¸€ä¸ªæ•°ç»„çš„ä¸‹æ ‡åœ¨ &lt;code&gt;[0,i]&lt;/code&gt; å†…çš„ä»»æ„å…ƒç´ ï¼Œéƒ½å¯ä»¥å’Œç¬¬äºŒä¸ªæ•°ç»„çš„ä¸‹æ ‡ä¸º $j$ çš„å…ƒç´ ç»„æˆç­”æ¡ˆï¼Œå¯¹ç­”æ¡ˆäº§ç”Ÿçš„è´¡çŒ®æ˜¯ &lt;code&gt;i+1&lt;/code&gt;ï¼Œç„¶åæŠŠ $j$ å‘å³ç§»ï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°ä¸¤ä¸ªæ•°ç»„æœ‰ä¸€ä¸ªæ•°ç»„ä½¿ç”¨å®Œæ¯•ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ–¹æ³•å»ºç«‹åœ¨ä¸€ä¸ªæ˜¾ç„¶çš„ç»“è®ºï¼Œæ•°ç»„äºŒä¸­çš„ $b_{j+1}$ æ˜¾ç„¶å¤§äº $b_j$ï¼Œæ‰€ä»¥ $a_i+b_j&amp;gt;x$ æ—¶ $a_i+b_{j+1}&amp;gt;x$ æ’æˆç«‹ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªæ•°ç»„çš„ä¸‹æ ‡å¯ä»¥ä¸€ç›´å¾€å·¦ç§»ã€‚&lt;/p&gt;
&lt;p&gt;æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(2*nlogn+2n)$çº¦ç­‰äº$O(nlogn)$&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç &#34;&gt;ä»£ç &lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Solution&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; breakfastNumber(vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; &amp;amp;staple, vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; &amp;amp;drinks, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; x)
    {
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; mod = &lt;span style=&#34;color:#b452cd&#34;&gt;1000000007&lt;/span&gt;;
        sort(staple.begin(), staple.end());
        sort(drinks.begin(), drinks.end());
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; n = staple.size(), m = drinks.size();
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; spos = n - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;, dpos = m - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (spos &amp;gt;= &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; staple[spos] &amp;gt;= x)
            spos--;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (dpos &amp;gt;= &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; drinks[dpos] &amp;gt;= x)
            dpos--;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (spos &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt; || dpos &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; ans = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = spos, j = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (i &amp;gt;= &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; j &amp;lt;= dpos)
        {
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (i &amp;gt;= &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; staple[i] + drinks[j] &amp;gt; x)
                i--;
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (i &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;)
                &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;break&lt;/span&gt;;
            ans = (ans + i + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;) % mod;
            j++;
        }
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; ans;
    }
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;- https://caixiongjiang.github.io/blog/2020/leetcode-lcp18-%E6%97%A9%E9%A4%90%E7%BB%84%E5%90%88%E8%B4%AA%E5%BF%83%E6%80%9D%E8%B7%AF/ - </description>
        </item>
    
    
    
        <item>
        <title>LeetCode 37 è§£æ•°ç‹¬ï¼ˆdfsï¼‰</title>
        <link>https://caixiongjiang.github.io/blog/2020/leetcode-37-%E8%A7%A3%E6%95%B0%E7%8B%ACdfs/</link>
        <pubDate>Tue, 15 Sep 2020 00:53:33 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2020/leetcode-37-%E8%A7%A3%E6%95%B0%E7%8B%ACdfs/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2020/leetcode-37-%E8%A7%A3%E6%95%B0%E7%8B%ACdfs/ -&lt;p&gt;é¢˜ç›®é“¾æ¥ï¼š&lt;a href=&#34;https://leetcode-cn.com/problems/sudoku-solver/&#34;&gt;è§£æ•°ç‹¬&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œé€šè¿‡å·²å¡«å……çš„ç©ºæ ¼æ¥è§£å†³æ•°ç‹¬é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæ•°ç‹¬çš„è§£æ³•éœ€&lt;strong&gt;éµå¾ªå¦‚ä¸‹è§„åˆ™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ•°å­— &lt;code&gt;1-9&lt;/code&gt; åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚&lt;/li&gt;
&lt;li&gt;æ•°å­— &lt;code&gt;1-9&lt;/code&gt; åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚&lt;/li&gt;
&lt;li&gt;æ•°å­— &lt;code&gt;1-9&lt;/code&gt; åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ &lt;code&gt;3x3&lt;/code&gt; å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç©ºç™½æ ¼ç”¨ &lt;code&gt;&#39;.&#39;&lt;/code&gt; è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200915004540.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæ•°ç‹¬ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200915004540.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;ç­”æ¡ˆè¢«æ ‡æˆçº¢è‰²ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»™å®šçš„æ•°ç‹¬åºåˆ—åªåŒ…å«æ•°å­— &lt;code&gt;1-9&lt;/code&gt; å’Œå­—ç¬¦ &lt;code&gt;&#39;.&#39;&lt;/code&gt; ã€‚&lt;/li&gt;
&lt;li&gt;ä½ å¯ä»¥å‡è®¾ç»™å®šçš„æ•°ç‹¬åªæœ‰å”¯ä¸€è§£ã€‚&lt;/li&gt;
&lt;li&gt;ç»™å®šæ•°ç‹¬æ°¸è¿œæ˜¯ &lt;code&gt;9x9&lt;/code&gt; å½¢å¼çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€è·¯&#34;&gt;æ€è·¯&lt;/h2&gt;
&lt;p&gt;ç»å…¸çš„è§£æ•°ç‹¬æ¸¸æˆã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆè®°å½•ä¸‹æ¥æ‰€æœ‰çš„éœ€è¦å¡«æ•°å­—çš„åæ ‡ä¿¡æ¯ï¼Œç„¶åä»ç¬¬ä¸€ä¸ªéœ€è¦å¡«æ•°çš„åœ°æ–¹å¼€å§‹å¡«æ•°ï¼Œä¾æ¬¡åˆ¤æ–­æ•°å­— &lt;code&gt;1-9&lt;/code&gt; ï¼Œå½“å‰ä½ç½®æ˜¯å¦å¯ä»¥å¡«æ•°ï¼Œå¯ä»¥çš„è¯å¡«æ•°ï¼Œç»§ç»­æœç´¢ä¸‹ä¸€å±‚ï¼Œæœ€åå›æº¯çš„æ—¶å€™éœ€è¦å–æ¶ˆå¡«æ•°ç»§ç»­è¯•ã€‚å¦‚æœæ‰¾åˆ°ç­”æ¡ˆï¼Œå°±è®°å½•ä¸€ä¸‹ï¼Œè¿™é‡Œå¯ä»¥å‰ªæã€‚&lt;/p&gt;
&lt;p&gt;è¦åˆ¤æ–­ä¸€ä¸ªåœ°æ–¹èƒ½ä¸èƒ½å¡«æ•°å­—ï¼Œè¦æ»¡è¶³ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿™ä¸€è¡Œä¸­æœ‰æ²¡æœ‰ç›¸åŒæ•°å­—&lt;/li&gt;
&lt;li&gt;è¿™ä¸€åˆ—ä¸­æœ‰æ²¡æœ‰ç›¸åŒæ•°å­—&lt;/li&gt;
&lt;li&gt;å½“å‰çš„å°9å®«æ ¼ä¸­ï¼Œæœ‰æ²¡æœ‰ç›¸åŒæ•°å­—ï¼ˆå¯¹å½“å‰åæ ‡&lt;code&gt;*3&lt;/code&gt;å’Œ&lt;code&gt;/3&lt;/code&gt;çš„æ“ä½œæ˜¯ä¸ºäº†ç¡®å®šå½“å‰å°ä¹å®«æ ¼çš„èµ·å§‹ç‚¹åæ ‡ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœæ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œè¯æ˜è¿™ä¸ªåœ°æ–¹å¯ä»¥å¡«æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“çœ‹ä»£ç &lt;/p&gt;
&lt;h2 id=&#34;ä»£ç &#34;&gt;ä»£ç &lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;36
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;37
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;38
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;39
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;40
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;41
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;42
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;43
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;44
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;45
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;46
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;47
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;48
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;49
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;50
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;51
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Solution&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    vector&amp;lt;pair&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt;&amp;gt; point;
    vector&amp;lt;vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt;&amp;gt;&amp;gt; ans;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; flag;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;check&lt;/span&gt;(vector&amp;lt;vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt;&amp;gt;&amp;gt; &amp;amp;board, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; k, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; step)
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;9&lt;/span&gt;; i++)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (board[point[step].first][i] - &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt; == k || board[i][point[step].second] - &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt; == k)
                &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#658b00&#34;&gt;false&lt;/span&gt;;
        &lt;span style=&#34;color:#228b22&#34;&gt;// è®¡ç®—å½“å‰æ‰€åœ¨çš„å°ä¹å®«æ ¼åæ ‡
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; x = (point[step].first / &lt;span style=&#34;color:#b452cd&#34;&gt;3&lt;/span&gt;) * &lt;span style=&#34;color:#b452cd&#34;&gt;3&lt;/span&gt;;
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; y = (point[step].second / &lt;span style=&#34;color:#b452cd&#34;&gt;3&lt;/span&gt;) * &lt;span style=&#34;color:#b452cd&#34;&gt;3&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = x; i &amp;lt; x + &lt;span style=&#34;color:#b452cd&#34;&gt;3&lt;/span&gt;; i++)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; j = y; j &amp;lt; y + &lt;span style=&#34;color:#b452cd&#34;&gt;3&lt;/span&gt;; j++)
                &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (board[i][j] - &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt; == k)
                    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#658b00&#34;&gt;false&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#658b00&#34;&gt;true&lt;/span&gt;;
    }
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;dfs&lt;/span&gt;(vector&amp;lt;vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt;&amp;gt;&amp;gt; &amp;amp;board, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; step)
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (flag)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (step == point.size())
        {
            flag = &lt;span style=&#34;color:#658b00&#34;&gt;true&lt;/span&gt;;
            ans = board;
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;;
        }
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;; i &amp;lt;= &lt;span style=&#34;color:#b452cd&#34;&gt;9&lt;/span&gt;; i++)
        {
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (check(board, i, step))
            {
                board[point[step].first][point[step].second] = i + &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;;
                dfs(board, step + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;);
                board[point[step].first][point[step].second] = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;.&amp;#39;&lt;/span&gt;;
            }
        }
    }
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;solveSudoku&lt;/span&gt;(vector&amp;lt;vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt;&amp;gt;&amp;gt; &amp;amp;board)
    {
        flag = &lt;span style=&#34;color:#658b00&#34;&gt;false&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;9&lt;/span&gt;; i++)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; j = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; j &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;9&lt;/span&gt;; j++)
                &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (board[i][j] == &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#39;.&amp;#39;&lt;/span&gt;)
                    point.push_back({i, j});
        dfs(board, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;);
        board = ans;
    }
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;- https://caixiongjiang.github.io/blog/2020/leetcode-37-%E8%A7%A3%E6%95%B0%E7%8B%ACdfs/ - </description>
        </item>
    
    
    
        <item>
        <title>Go Channel è¯¦è§£</title>
        <link>https://caixiongjiang.github.io/blog/2020/go-channel-%E8%AF%A6%E8%A7%A3/</link>
        <pubDate>Tue, 01 Sep 2020 11:13:34 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2020/go-channel-%E8%AF%A6%E8%A7%A3/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2020/go-channel-%E8%AF%A6%E8%A7%A3/ -&lt;h1 id=&#34;go-channel-è¯¦è§£&#34;&gt;Go Channel è¯¦è§£&lt;/h1&gt;
&lt;p&gt;Channelæ˜¯Goä¸­çš„ä¸€ä¸ªæ ¸å¿ƒç±»å‹ï¼Œä½ å¯ä»¥æŠŠå®ƒçœ‹æˆä¸€ä¸ªç®¡é“ï¼Œé€šè¿‡å®ƒå¹¶å‘æ ¸å¿ƒå•å…ƒå°±å¯ä»¥å‘é€æˆ–è€…æ¥æ”¶æ•°æ®è¿›è¡Œé€šè®¯(communication)ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒçš„æ“ä½œç¬¦æ˜¯ç®­å¤´ &lt;strong&gt;&amp;lt;-&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;ch &amp;lt;- v    &lt;span style=&#34;color:#228b22&#34;&gt;// å‘é€å€¼våˆ°Channel chä¸­
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;v := &amp;lt;-ch  &lt;span style=&#34;color:#228b22&#34;&gt;// ä»Channel chä¸­æ¥æ”¶æ•°æ®ï¼Œå¹¶å°†æ•°æ®èµ‹å€¼ç»™v
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;(ç®­å¤´çš„æŒ‡å‘å°±æ˜¯æ•°æ®çš„æµå‘)&lt;/p&gt;
&lt;p&gt;å°±åƒ map å’Œ slice æ•°æ®ç±»å‹ä¸€æ ·, channelå¿…é¡»å…ˆåˆ›å»ºå†ä½¿ç”¨:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;ch := &lt;span style=&#34;color:#658b00&#34;&gt;make&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;channelç±»å‹&#34;&gt;Channelç±»å‹&lt;/h2&gt;
&lt;p&gt;Channelç±»å‹çš„å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;ChannelType = ( &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;chan&amp;#34;&lt;/span&gt; | &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;chan&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&amp;lt;-&amp;#34;&lt;/span&gt; | &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&amp;lt;-&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;chan&amp;#34;&lt;/span&gt; ) ElementType .
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å®ƒåŒ…æ‹¬ä¸‰ç§ç±»å‹çš„å®šä¹‰ã€‚å¯é€‰çš„&lt;code&gt;&amp;lt;-&lt;/code&gt;ä»£è¡¨channelçš„æ–¹å‘ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šæ–¹å‘ï¼Œé‚£ä¹ˆChannelå°±æ˜¯åŒå‘çš„ï¼Œæ—¢å¯ä»¥æ¥æ”¶æ•°æ®ï¼Œä¹Ÿå¯ä»¥å‘é€æ•°æ®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; T          &lt;span style=&#34;color:#228b22&#34;&gt;// å¯ä»¥æ¥æ”¶å’Œå‘é€ç±»å‹ä¸º T çš„æ•°æ®
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt;&amp;lt;- &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;float64&lt;/span&gt;  &lt;span style=&#34;color:#228b22&#34;&gt;// åªå¯ä»¥ç”¨æ¥å‘é€ float64 ç±»å‹çš„æ•°æ®
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&amp;lt;-&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;      &lt;span style=&#34;color:#228b22&#34;&gt;// åªå¯ä»¥ç”¨æ¥æ¥æ”¶ int ç±»å‹çš„æ•°æ®
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;&amp;lt;-&lt;/code&gt;æ€»æ˜¯ä¼˜å…ˆå’Œæœ€å·¦è¾¹çš„ç±»å‹ç»“åˆã€‚(The &amp;lt;- operator associates with the leftmost chan possible)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt;&amp;lt;- &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;    &lt;span style=&#34;color:#228b22&#34;&gt;// ç­‰ä»· chan&amp;lt;- (chan int)
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt;&amp;lt;- &amp;lt;-&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;  &lt;span style=&#34;color:#228b22&#34;&gt;// ç­‰ä»· chan&amp;lt;- (&amp;lt;-chan int)
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&amp;lt;-&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &amp;lt;-&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;  &lt;span style=&#34;color:#228b22&#34;&gt;// ç­‰ä»· &amp;lt;-chan (&amp;lt;-chan int)
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; (&amp;lt;-&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä½¿ç”¨&lt;code&gt;make&lt;/code&gt;åˆå§‹åŒ–Channel,å¹¶ä¸”å¯ä»¥è®¾ç½®å®¹é‡:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;color:#658b00&#34;&gt;make&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;100&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å®¹é‡(capacity)ä»£è¡¨Channelå®¹çº³çš„æœ€å¤šçš„å…ƒç´ çš„æ•°é‡ï¼Œä»£è¡¨Channelçš„ç¼“å­˜çš„å¤§å°ã€‚
å¦‚æœæ²¡æœ‰è®¾ç½®å®¹é‡ï¼Œæˆ–è€…å®¹é‡è®¾ç½®ä¸º0, è¯´æ˜Channelæ²¡æœ‰ç¼“å­˜ï¼Œåªæœ‰senderå’Œreceiveréƒ½å‡†å¤‡å¥½äº†åå®ƒä»¬çš„é€šè®¯(communication)æ‰ä¼šå‘ç”Ÿ(Blocking)ã€‚å¦‚æœè®¾ç½®äº†ç¼“å­˜ï¼Œå°±æœ‰å¯èƒ½ä¸å‘ç”Ÿé˜»å¡ï¼Œ åªæœ‰bufferæ»¡äº†å sendæ‰ä¼šé˜»å¡ï¼Œ è€Œåªæœ‰ç¼“å­˜ç©ºäº†åreceiveæ‰ä¼šé˜»å¡ã€‚ä¸€ä¸ªnil channelä¸ä¼šé€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡å†…å»ºçš„&lt;code&gt;close&lt;/code&gt;æ–¹æ³•å¯ä»¥å…³é—­Channelã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥åœ¨å¤šä¸ªgoroutineä»/å¾€ ä¸€ä¸ªchannel ä¸­ receive/send æ•°æ®, ä¸å¿…è€ƒè™‘é¢å¤–çš„åŒæ­¥æªæ–½ã€‚&lt;/p&gt;
&lt;p&gt;Channelå¯ä»¥ä½œä¸ºä¸€ä¸ªå…ˆå…¥å…ˆå‡º(FIFO)çš„é˜Ÿåˆ—ï¼Œæ¥æ”¶çš„æ•°æ®å’Œå‘é€çš„æ•°æ®çš„é¡ºåºæ˜¯ä¸€è‡´çš„ã€‚&lt;/p&gt;
&lt;p&gt;channelçš„ receiveæ”¯æŒ &lt;em&gt;multi-valued assignment&lt;/em&gt;ï¼Œå¦‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;v, ok := &amp;lt;-ch
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å®ƒå¯ä»¥ç”¨æ¥æ£€æŸ¥Channelæ˜¯å¦å·²ç»è¢«å…³é—­äº†ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;sendè¯­å¥&lt;/strong&gt;
sendè¯­å¥ç”¨æ¥å¾€Channelä¸­å‘é€æ•°æ®ï¼Œ å¦‚&lt;code&gt;ch &amp;lt;- 3&lt;/code&gt;ã€‚
å®ƒçš„å®šä¹‰å¦‚ä¸‹:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;SendStmt = Channel &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&amp;lt;-&amp;#34;&lt;/span&gt; Expression .
Channel  = Expression .
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨é€šè®¯(communication)å¼€å§‹å‰channelå’Œexpressionå¿…é€‰å…ˆæ±‚å€¼å‡ºæ¥(evaluated)ï¼Œæ¯”å¦‚ä¸‹é¢çš„(3+4)å…ˆè®¡ç®—å‡º7ç„¶åå†å‘é€ç»™channelã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;c := &lt;span style=&#34;color:#658b00&#34;&gt;make&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;)
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#658b00&#34;&gt;close&lt;/span&gt;(c)
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt;() { c &amp;lt;- &lt;span style=&#34;color:#b452cd&#34;&gt;3&lt;/span&gt; + &lt;span style=&#34;color:#b452cd&#34;&gt;4&lt;/span&gt; }()
i := &amp;lt;-c
fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(i)
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;sendè¢«æ‰§è¡Œå‰(proceed)é€šè®¯(communication)ä¸€ç›´è¢«é˜»å¡ç€ã€‚å¦‚å‰æ‰€è¨€ï¼Œæ— ç¼“å­˜çš„channelåªæœ‰åœ¨receiverå‡†å¤‡å¥½åsendæ‰è¢«æ‰§è¡Œã€‚å¦‚æœæœ‰ç¼“å­˜ï¼Œå¹¶ä¸”ç¼“å­˜æœªæ»¡ï¼Œåˆ™sendä¼šè¢«æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;å¾€ä¸€ä¸ªå·²ç»è¢«closeçš„channelä¸­ç»§ç»­å‘é€æ•°æ®ä¼šå¯¼è‡´&lt;strong&gt;run-time panic&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¾€nil channelä¸­å‘é€æ•°æ®ä¼šä¸€è‡´è¢«é˜»å¡ç€ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;receive æ“ä½œç¬¦
&lt;code&gt;&amp;lt;-ch&lt;/code&gt;ç”¨æ¥ä»channel chä¸­æ¥æ”¶æ•°æ®ï¼Œè¿™ä¸ªè¡¨è¾¾å¼ä¼šä¸€ç›´è¢«block,ç›´åˆ°æœ‰æ•°æ®å¯ä»¥æ¥æ”¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»ä¸€ä¸ªnil channelä¸­æ¥æ”¶æ•°æ®ä¼šä¸€ç›´è¢«blockã€‚&lt;/p&gt;
&lt;p&gt;ä»ä¸€ä¸ªè¢«closeçš„channelä¸­æ¥æ”¶æ•°æ®ä¸ä¼šè¢«é˜»å¡ï¼Œè€Œæ˜¯ç«‹å³è¿”å›ï¼Œæ¥æ”¶å®Œå·²å‘é€çš„æ•°æ®åä¼šè¿”å›å…ƒç´ ç±»å‹çš„é›¶å€¼(zero value)ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚å‰æ‰€è¿°ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„è¿”å›å‚æ•°æ¥æ£€æŸ¥channelæ˜¯å¦å…³é—­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;x, ok := &amp;lt;-ch
x, ok = &amp;lt;-ch
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;var&lt;/span&gt; x, ok = &amp;lt;-ch
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœOK æ˜¯falseï¼Œè¡¨æ˜æ¥æ”¶çš„xæ˜¯äº§ç”Ÿçš„é›¶å€¼ï¼Œè¿™ä¸ªchannelè¢«å…³é—­äº†æˆ–è€…ä¸ºç©ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;blocking&#34;&gt;blocking&lt;/h2&gt;
&lt;p&gt;ç¼ºçœæƒ…å†µä¸‹ï¼Œå‘é€å’Œæ¥æ”¶ä¼šä¸€ç›´é˜»å¡ç€ï¼Œç›´åˆ°å¦ä¸€æ–¹å‡†å¤‡å¥½ã€‚è¿™ç§æ–¹å¼å¯ä»¥ç”¨æ¥åœ¨gororutineä¸­è¿›è¡ŒåŒæ­¥ï¼Œè€Œä¸å¿…ä½¿ç”¨æ˜¾ç¤ºçš„é”æˆ–è€…æ¡ä»¶å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚å®˜æ–¹çš„ä¾‹å­ä¸­&lt;code&gt;x, y := &amp;lt;-c, &amp;lt;-c&lt;/code&gt;è¿™å¥ä¼šä¸€ç›´ç­‰å¾…è®¡ç®—ç»“æœå‘é€åˆ°channelä¸­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;sum&lt;/span&gt;(s []&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;, c &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;) {
	sum := &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;
	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; _, v := &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;range&lt;/span&gt; s {
		sum += v
	}
	c &amp;lt;- sum &lt;span style=&#34;color:#228b22&#34;&gt;// send sum to c
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;}

&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;main&lt;/span&gt;() {
	s := []&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;{&lt;span style=&#34;color:#b452cd&#34;&gt;7&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;8&lt;/span&gt;, -&lt;span style=&#34;color:#b452cd&#34;&gt;9&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;}

	c := &lt;span style=&#34;color:#658b00&#34;&gt;make&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;)
	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;sum&lt;/span&gt;(s[:&lt;span style=&#34;color:#658b00&#34;&gt;len&lt;/span&gt;(s)/&lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;], c)
	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;sum&lt;/span&gt;(s[&lt;span style=&#34;color:#658b00&#34;&gt;len&lt;/span&gt;(s)/&lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;:], c)
	x, y := &amp;lt;-c, &amp;lt;-c &lt;span style=&#34;color:#228b22&#34;&gt;// receive from c
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;
	fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(x, y, x+y)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;buffered-channels&#34;&gt;Buffered Channels&lt;/h2&gt;
&lt;p&gt;makeçš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šç¼“å­˜çš„å¤§å°ï¼š&lt;code&gt;ch := make(chan int, 100)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ç¼“å­˜çš„ä½¿ç”¨ï¼Œå¯ä»¥å°½é‡é¿å…é˜»å¡ï¼Œæä¾›åº”ç”¨çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;range&#34;&gt;Range&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;for â€¦â€¦ range&lt;/code&gt;è¯­å¥å¯ä»¥å¤„ç†Channelã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;main&lt;/span&gt;() {
	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt;() {
		time.&lt;span style=&#34;color:#008b45&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; * time.Hour)
	}()
	c := &lt;span style=&#34;color:#658b00&#34;&gt;make&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;)
	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt;() {
		&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; i := &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;10&lt;/span&gt;; i = i + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; {
			c &amp;lt;- i
		}
		&lt;span style=&#34;color:#658b00&#34;&gt;close&lt;/span&gt;(c)
	}()

	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; i := &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;range&lt;/span&gt; c {
		fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(i)
	}

	fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Finished&amp;#34;&lt;/span&gt;)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;range c&lt;/code&gt;äº§ç”Ÿçš„è¿­ä»£å€¼ä¸ºChannelä¸­å‘é€çš„å€¼ï¼Œå®ƒä¼šä¸€ç›´è¿­ä»£ç›´åˆ°channelè¢«å…³é—­ã€‚ä¸Šé¢çš„ä¾‹å­ä¸­å¦‚æœæŠŠ&lt;code&gt;close(c)&lt;/code&gt;æ³¨é‡Šæ‰ï¼Œç¨‹åºä¼šä¸€ç›´é˜»å¡åœ¨&lt;code&gt;for â€¦â€¦ range&lt;/code&gt;é‚£ä¸€è¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;select&#34;&gt;select&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;select&lt;/code&gt;è¯­å¥é€‰æ‹©ä¸€ç»„å¯èƒ½çš„sendæ“ä½œå’Œreceiveæ“ä½œå»å¤„ç†ã€‚å®ƒç±»ä¼¼&lt;code&gt;switch&lt;/code&gt;,ä½†æ˜¯åªæ˜¯ç”¨æ¥å¤„ç†é€šè®¯(communication)æ“ä½œã€‚
å®ƒçš„&lt;code&gt;case&lt;/code&gt;å¯ä»¥æ˜¯sendè¯­å¥ï¼Œä¹Ÿå¯ä»¥æ˜¯receiveè¯­å¥ï¼Œäº¦æˆ–è€…&lt;code&gt;default&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;receive&lt;/code&gt;è¯­å¥å¯ä»¥å°†å€¼èµ‹å€¼ç»™ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªå˜é‡ã€‚å®ƒå¿…é¡»æ˜¯ä¸€ä¸ªreceiveæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¤šå…è®¸æœ‰ä¸€ä¸ª&lt;code&gt;default case&lt;/code&gt;,å®ƒå¯ä»¥æ”¾åœ¨caseåˆ—è¡¨çš„ä»»ä½•ä½ç½®ï¼Œå°½ç®¡æˆ‘ä»¬å¤§éƒ¨åˆ†ä¼šå°†å®ƒæ”¾åœ¨æœ€åã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;fibonacci&lt;/span&gt;(c, quit &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;) {
	x, y := &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;
	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; {
		&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;select&lt;/span&gt; {
		&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;case&lt;/span&gt; c &amp;lt;- x:
			x, y = y, x+y
		&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;case&lt;/span&gt; &amp;lt;-quit:
			fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;quit&amp;#34;&lt;/span&gt;)
			&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;
		}
	}
}

&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;main&lt;/span&gt;() {
	c := &lt;span style=&#34;color:#658b00&#34;&gt;make&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;)
	quit := &lt;span style=&#34;color:#658b00&#34;&gt;make&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;)
	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt;() {
		&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; i := &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;10&lt;/span&gt;; i++ {
			fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(&amp;lt;-c)
		}
		quit &amp;lt;- &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;
	}()
	&lt;span style=&#34;color:#008b45&#34;&gt;fibonacci&lt;/span&gt;(c, quit)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœæœ‰åŒæ—¶å¤šä¸ªcaseå»å¤„ç†,æ¯”å¦‚åŒæ—¶æœ‰å¤šä¸ªchannelå¯ä»¥æ¥æ”¶æ•°æ®ï¼Œé‚£ä¹ˆGoä¼šä¼ªéšæœºçš„é€‰æ‹©ä¸€ä¸ªcaseå¤„ç†(pseudo-random)ã€‚å¦‚æœæ²¡æœ‰caseéœ€è¦å¤„ç†ï¼Œåˆ™ä¼šé€‰æ‹©&lt;code&gt;default&lt;/code&gt;å»å¤„ç†ï¼Œå¦‚æœ&lt;code&gt;default case&lt;/code&gt;å­˜åœ¨çš„æƒ…å†µä¸‹ã€‚å¦‚æœæ²¡æœ‰&lt;code&gt;default case&lt;/code&gt;ï¼Œåˆ™&lt;code&gt;select&lt;/code&gt;è¯­å¥ä¼šé˜»å¡ï¼Œç›´åˆ°æŸä¸ªcaseéœ€è¦å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œnil channelä¸Šçš„æ“ä½œä¼šä¸€ç›´è¢«é˜»å¡ï¼Œå¦‚æœæ²¡æœ‰default case,åªæœ‰nil channelçš„selectä¼šä¸€ç›´è¢«é˜»å¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;select&lt;/code&gt;è¯­å¥å’Œ&lt;code&gt;switch&lt;/code&gt;è¯­å¥ä¸€æ ·ï¼Œå®ƒä¸æ˜¯å¾ªç¯ï¼Œå®ƒåªä¼šé€‰æ‹©ä¸€ä¸ªcaseæ¥å¤„ç†ï¼Œå¦‚æœæƒ³ä¸€ç›´å¤„ç†channelï¼Œä½ å¯ä»¥åœ¨å¤–é¢åŠ ä¸€ä¸ªæ— é™çš„forå¾ªç¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; {
	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;select&lt;/span&gt; {
	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;case&lt;/span&gt; c &amp;lt;- x:
		x, y = y, x+y
	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;case&lt;/span&gt; &amp;lt;-quit:
		fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;quit&amp;#34;&lt;/span&gt;)
		&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;timeout&#34;&gt;timeout&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;select&lt;/code&gt;æœ‰å¾ˆé‡è¦çš„ä¸€ä¸ªåº”ç”¨å°±æ˜¯è¶…æ—¶å¤„ç†ã€‚ å› ä¸ºä¸Šé¢æˆ‘ä»¬æåˆ°ï¼Œå¦‚æœæ²¡æœ‰caseéœ€è¦å¤„ç†ï¼Œselectè¯­å¥å°±ä¼šä¸€ç›´é˜»å¡ç€ã€‚è¿™æ—¶å€™æˆ‘ä»¬å¯èƒ½å°±éœ€è¦ä¸€ä¸ªè¶…æ—¶æ“ä½œï¼Œç”¨æ¥å¤„ç†è¶…æ—¶çš„æƒ…å†µã€‚
ä¸‹é¢è¿™ä¸ªä¾‹å­æˆ‘ä»¬ä¼šåœ¨2ç§’åå¾€channel c1ä¸­å‘é€ä¸€ä¸ªæ•°æ®ï¼Œä½†æ˜¯&lt;code&gt;select&lt;/code&gt;è®¾ç½®ä¸º1ç§’è¶…æ—¶,å› æ­¤æˆ‘ä»¬ä¼šæ‰“å°å‡º&lt;code&gt;timeout 1&lt;/code&gt;,è€Œä¸æ˜¯&lt;code&gt;result 1&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;main&lt;/span&gt;() {
    c1 := &lt;span style=&#34;color:#658b00&#34;&gt;make&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;)
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt;() {
        time.&lt;span style=&#34;color:#008b45&#34;&gt;Sleep&lt;/span&gt;(time.Second * &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;)
        c1 &amp;lt;- &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;result 1&amp;#34;&lt;/span&gt;
    }()

    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;select&lt;/span&gt; {
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;case&lt;/span&gt; res := &amp;lt;-c1:
        fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(res)
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;case&lt;/span&gt; &amp;lt;-time.&lt;span style=&#34;color:#008b45&#34;&gt;After&lt;/span&gt;(time.Second * &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;):
        fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;timeout 1&amp;#34;&lt;/span&gt;)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å…¶å®å®ƒåˆ©ç”¨çš„æ˜¯&lt;code&gt;time.After&lt;/code&gt;æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªç±»å‹ä¸º&lt;code&gt;&amp;lt;-chan Time&lt;/code&gt;çš„å•å‘çš„channelï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´å‘é€ä¸€ä¸ªå½“å‰æ—¶é—´ç»™è¿”å›çš„channelä¸­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;timerå’Œticker&#34;&gt;Timerå’ŒTicker&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹ä¸€ä¸‹å…³äºæ—¶é—´çš„ä¸¤ä¸ªChannelã€‚
timeræ˜¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä»£è¡¨æœªæ¥çš„ä¸€ä¸ªå•ä¸€äº‹ä»¶ï¼Œä½ å¯ä»¥å‘Šè¯‰timerä½ è¦ç­‰å¾…å¤šé•¿æ—¶é—´ï¼Œå®ƒæä¾›ä¸€ä¸ªChannelï¼Œåœ¨å°†æ¥çš„é‚£ä¸ªæ—¶é—´é‚£ä¸ªChannelæä¾›äº†ä¸€ä¸ªæ—¶é—´å€¼ã€‚ä¸‹é¢çš„ä¾‹å­ä¸­ç¬¬äºŒè¡Œä¼šé˜»å¡2ç§’é’Ÿå·¦å³çš„æ—¶é—´ï¼Œç›´åˆ°æ—¶é—´åˆ°äº†æ‰ä¼šç»§ç»­æ‰§è¡Œã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;timer1 := time.&lt;span style=&#34;color:#008b45&#34;&gt;NewTimer&lt;/span&gt;(time.Second * &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;)
&amp;lt;-timer1.C
fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Timer 1 expired&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å½“ç„¶å¦‚æœä½ åªæ˜¯æƒ³å•çº¯çš„ç­‰å¾…çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨&lt;code&gt;time.Sleep&lt;/code&gt;æ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ä½ è¿˜å¯ä»¥ä½¿ç”¨&lt;code&gt;timer.Stop&lt;/code&gt;æ¥åœæ­¢è®¡æ—¶å™¨ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;timer2 := time.&lt;span style=&#34;color:#008b45&#34;&gt;NewTimer&lt;/span&gt;(time.Second)
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt;() {
	&amp;lt;-timer2.C
	fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Timer 2 expired&amp;#34;&lt;/span&gt;)
}()
stop2 := timer2.&lt;span style=&#34;color:#008b45&#34;&gt;Stop&lt;/span&gt;()
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; stop2 {
	fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Timer 2 stopped&amp;#34;&lt;/span&gt;)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;ticker&lt;/code&gt;æ˜¯ä¸€ä¸ªå®šæ—¶è§¦å‘çš„è®¡æ—¶å™¨ï¼Œå®ƒä¼šä»¥ä¸€ä¸ªé—´éš”(interval)å¾€Channelå‘é€ä¸€ä¸ªäº‹ä»¶(å½“å‰æ—¶é—´)ï¼Œè€ŒChannelçš„æ¥æ”¶è€…å¯ä»¥ä»¥å›ºå®šçš„æ—¶é—´é—´éš”ä»Channelä¸­è¯»å–äº‹ä»¶ã€‚ä¸‹é¢çš„ä¾‹å­ä¸­tickeræ¯500æ¯«ç§’è§¦å‘ä¸€æ¬¡ï¼Œä½ å¯ä»¥è§‚å¯Ÿè¾“å‡ºçš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;ticker := time.&lt;span style=&#34;color:#008b45&#34;&gt;NewTicker&lt;/span&gt;(time.Millisecond * &lt;span style=&#34;color:#b452cd&#34;&gt;500&lt;/span&gt;)
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt;() {
	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; t := &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;range&lt;/span&gt; ticker.C {
		fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Tick at&amp;#34;&lt;/span&gt;, t)
	}
}()
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç±»ä¼¼timer, tickerä¹Ÿå¯ä»¥é€šè¿‡&lt;code&gt;Stop&lt;/code&gt;æ–¹æ³•æ¥åœæ­¢ã€‚ä¸€æ—¦å®ƒåœæ­¢ï¼Œæ¥æ”¶è€…ä¸å†ä¼šä»channelä¸­æ¥æ”¶æ•°æ®äº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;close&#34;&gt;close&lt;/h2&gt;
&lt;p&gt;å†…å»ºçš„closeæ–¹æ³•å¯ä»¥ç”¨æ¥å…³é—­channelã€‚&lt;/p&gt;
&lt;p&gt;æ€»ç»“ä¸€ä¸‹channelå…³é—­åsenderçš„receiveræ“ä½œã€‚
å¦‚æœchannel cå·²ç»è¢«å…³é—­,ç»§ç»­å¾€å®ƒå‘é€æ•°æ®ä¼šå¯¼è‡´&lt;code&gt;panic: send on closed channel&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;main&lt;/span&gt;() {
	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt;() {
		time.&lt;span style=&#34;color:#008b45&#34;&gt;Sleep&lt;/span&gt;(time.Hour)
	}()
	c := &lt;span style=&#34;color:#658b00&#34;&gt;make&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;10&lt;/span&gt;)
	c &amp;lt;- &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;
	c &amp;lt;- &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;
	&lt;span style=&#34;color:#658b00&#34;&gt;close&lt;/span&gt;(c)
	c &amp;lt;- &lt;span style=&#34;color:#b452cd&#34;&gt;3&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä½†æ˜¯ä»è¿™ä¸ªå…³é—­çš„channelä¸­ä¸ä½†å¯ä»¥è¯»å–å‡ºå·²å‘é€çš„æ•°æ®ï¼Œè¿˜å¯ä»¥ä¸æ–­çš„è¯»å–é›¶å€¼:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;c := &lt;span style=&#34;color:#658b00&#34;&gt;make&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;10&lt;/span&gt;)
c &amp;lt;- &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;
c &amp;lt;- &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;
&lt;span style=&#34;color:#658b00&#34;&gt;close&lt;/span&gt;(c)
fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(&amp;lt;-c) &lt;span style=&#34;color:#228b22&#34;&gt;//1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(&amp;lt;-c) &lt;span style=&#34;color:#228b22&#34;&gt;//2
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(&amp;lt;-c) &lt;span style=&#34;color:#228b22&#34;&gt;//0
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(&amp;lt;-c) &lt;span style=&#34;color:#228b22&#34;&gt;//0
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä½†æ˜¯å¦‚æœé€šè¿‡&lt;code&gt;range&lt;/code&gt;è¯»å–ï¼Œchannelå…³é—­åforå¾ªç¯ä¼šè·³å‡ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;c := &lt;span style=&#34;color:#658b00&#34;&gt;make&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;10&lt;/span&gt;)
c &amp;lt;- &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;
c &amp;lt;- &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;
&lt;span style=&#34;color:#658b00&#34;&gt;close&lt;/span&gt;(c)
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; i := &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;range&lt;/span&gt; c {
	fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Println&lt;/span&gt;(i)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é€šè¿‡&lt;code&gt;i, ok := &amp;lt;-c&lt;/code&gt;å¯ä»¥æŸ¥çœ‹Channelçš„çŠ¶æ€ï¼Œåˆ¤æ–­å€¼æ˜¯é›¶å€¼è¿˜æ˜¯æ­£å¸¸è¯»å–çš„å€¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;c := &lt;span style=&#34;color:#658b00&#34;&gt;make&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;10&lt;/span&gt;)
&lt;span style=&#34;color:#658b00&#34;&gt;close&lt;/span&gt;(c)

i, ok := &amp;lt;-c
fmt.&lt;span style=&#34;color:#008b45&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;%d, %t&amp;#34;&lt;/span&gt;, i, ok) &lt;span style=&#34;color:#228b22&#34;&gt;//0, false
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;åŒæ­¥&#34;&gt;åŒæ­¥&lt;/h2&gt;
&lt;p&gt;channelå¯ä»¥ç”¨åœ¨goroutineä¹‹é—´çš„åŒæ­¥ã€‚
ä¸‹é¢çš„ä¾‹å­ä¸­main goroutineé€šè¿‡done channelç­‰å¾…workerå®Œæˆä»»åŠ¡ã€‚ workeråšå®Œä»»åŠ¡ååªéœ€å¾€channelå‘é€ä¸€ä¸ªæ•°æ®å°±å¯ä»¥é€šçŸ¥main goroutineä»»åŠ¡å®Œæˆã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;import&lt;/span&gt; (
	&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
	&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
)

&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;worker&lt;/span&gt;(done &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt;) {
	time.&lt;span style=&#34;color:#008b45&#34;&gt;Sleep&lt;/span&gt;(time.Second)

	&lt;span style=&#34;color:#228b22&#34;&gt;// é€šçŸ¥ä»»åŠ¡å·²å®Œæˆ
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;	done &amp;lt;- &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;
}

&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;main&lt;/span&gt;() {
	done := &lt;span style=&#34;color:#658b00&#34;&gt;make&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;)
	&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;worker&lt;/span&gt;(done)

	&lt;span style=&#34;color:#228b22&#34;&gt;// ç­‰å¾…ä»»åŠ¡å®Œæˆ
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;	&amp;lt;-done
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://gobyexample.com/channels&#34;&gt;https://gobyexample.com/channels&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tour.golang.org/concurrency/2&#34;&gt;https://tour.golang.org/concurrency/2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://golang.org/ref/spec#Select_statements&#34;&gt;https://golang.org/ref/spec#Select_statements&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/a8m/go-lang-cheat-sheet&#34;&gt;https://github.com/a8m/go-lang-cheat-sheet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://devs.cloudimmunity.com/gotchas-and-common-mistakes-in-go-golang/&#34;&gt;http://devs.cloudimmunity.com/gotchas-and-common-mistakes-in-go-golang/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://guzalexander.com/2013/12/06/golang-channels-tutorial.html&#34;&gt;http://guzalexander.com/2013/12/06/golang-channels-tutorial.html&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
- https://caixiongjiang.github.io/blog/2020/go-channel-%E8%AF%A6%E8%A7%A3/ - </description>
        </item>
    
    
    
        <item>
        <title>è¶…çº§ç åŠ›åœ¨çº¿ç¼–ç¨‹å¤§èµ›åˆèµ› ç¬¬2åœº é¢˜è§£</title>
        <link>https://caixiongjiang.github.io/blog/2020/%E8%B6%85%E7%BA%A7%E7%A0%81%E5%8A%9B%E5%9C%A8%E7%BA%BF%E7%BC%96%E7%A8%8B%E5%A4%A7%E8%B5%9B%E5%88%9D%E8%B5%9B-%E7%AC%AC2%E5%9C%BA-%E9%A2%98%E8%A7%A3/</link>
        <pubDate>Sun, 30 Aug 2020 13:05:00 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2020/%E8%B6%85%E7%BA%A7%E7%A0%81%E5%8A%9B%E5%9C%A8%E7%BA%BF%E7%BC%96%E7%A8%8B%E5%A4%A7%E8%B5%9B%E5%88%9D%E8%B5%9B-%E7%AC%AC2%E5%9C%BA-%E9%A2%98%E8%A7%A3/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2020/%E8%B6%85%E7%BA%A7%E7%A0%81%E5%8A%9B%E5%9C%A8%E7%BA%BF%E7%BC%96%E7%A8%8B%E5%A4%A7%E8%B5%9B%E5%88%9D%E8%B5%9B-%E7%AC%AC2%E5%9C%BA-%E9%A2%98%E8%A7%A3/ -&lt;h1 id=&#34;è¶…çº§ç åŠ›åœ¨çº¿ç¼–ç¨‹å¤§èµ›åˆèµ›-ç¬¬2åœº-é¢˜è§£&#34;&gt;è¶…çº§ç åŠ›åœ¨çº¿ç¼–ç¨‹å¤§èµ›åˆèµ› ç¬¬2åœº é¢˜è§£&lt;/h1&gt;
&lt;p&gt;ä¸‹é¢çš„é¢˜è§£ä»…ä»£è¡¨ä¸ªäººè§‚ç‚¹ï¼Œå‡ºäº†é—®é¢˜ï¼Œæ¦‚ä¸è´Ÿè´£ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”èµ›é“¾æ¥ï¼šhttps://tianchi.aliyun.com/oj/15165469968503404?spm=5176.15098393.J_6210563800.8.6b8b5cd6dK6WtT&lt;/p&gt;
&lt;h1 id=&#34;1-ä¸‰è§’é­”æ³•&#34;&gt;1. ä¸‰è§’é­”æ³•&lt;/h1&gt;
&lt;h2 id=&#34;æè¿°&#34;&gt;æè¿°&lt;/h2&gt;
&lt;p&gt;å°æ –å¿…é¡»åœ¨ä¸€ä¸ªä¸‰è§’å½¢ä¸­æ‰èƒ½æ–½å±•é­”æ³•ï¼Œç°åœ¨ä»–çŸ¥é“è‡ªå·±çš„åæ ‡å’Œä¸‰ä¸ªç‚¹çš„åæ ‡ï¼Œä»–æƒ³çŸ¥é“ä»–èƒ½å¦æ–½å±•é­”æ³•&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;âˆ’109&amp;lt;=x,y&amp;lt;=109&lt;/li&gt;
&lt;li&gt;ç‚¹åœ¨è¾¹ä¸Šä¹Ÿå±äºä¸‰è§’å½¢å†…&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç¤ºä¾‹&#34;&gt;ç¤ºä¾‹&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥: triangle = [[0,0],[2,0],[1,2]] point= [1,1]
è¾“å‡º: &amp;quot;Yes&amp;quot;
è¾“å…¥: triangle = [[0,0],[2,0],[1,1]] point= [2,1]
è¾“å‡º: &amp;quot;No&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ€è·¯&#34;&gt;æ€è·¯&lt;/h2&gt;
&lt;p&gt;åˆ¤æ–­æ˜¯å¦åœ¨ä¸‰è§’å½¢å†…ï¼Œæ¨¡æ¿é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç &#34;&gt;ä»£ç &lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;  1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;  2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;  3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;  4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;  5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;  6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;  7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;  8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;  9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 32
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 33
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 34
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 35
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 36
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 37
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 38
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 39
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 40
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 41
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 42
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 43
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 44
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 45
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 46
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 47
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 48
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 49
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 50
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 51
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 52
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 53
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 54
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 55
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 56
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 57
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 58
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 59
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 60
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 61
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 62
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 63
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 64
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 65
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 66
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 67
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 68
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 69
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 70
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 71
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 72
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 73
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 74
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 75
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 76
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 77
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 78
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 79
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 80
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 81
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 82
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 83
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 84
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 85
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 86
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 87
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 88
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 89
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 90
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 91
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 92
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 93
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 94
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 95
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 96
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 97
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 98
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 99
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;100
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;101
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;102
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;103
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;104
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;105
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;106
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;107
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;108
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;109
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;110
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;111
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;112
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;113
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;114
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;115
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;116
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;117
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;118
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;119
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;120
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;121
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;122
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;123
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;124
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;125
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;126
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;127
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;128
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;129
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;130
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;131
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;132
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;133
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;134
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Vector2d&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; x_;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; y_;

&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    Vector2d(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; x, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; y) : x_(x), y_(y) {}
    Vector2d() : x_(&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;), y_(&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;) {}

    &lt;span style=&#34;color:#228b22&#34;&gt;//äºŒç»´å‘é‡å‰ä¹˜, å‰ä¹˜çš„ç»“æœå…¶å®æ˜¯å‘é‡ï¼Œæ–¹å‘å‚ç›´äºä¸¤ä¸ªå‘é‡ç»„æˆçš„å¹³é¢ï¼Œè¿™é‡Œæˆ‘ä»¬åªéœ€è¦å…¶å¤§å°å’Œæ–¹å‘
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;CrossProduct&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; Vector2d vec)
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; x_ * vec.y_ - y_ * vec.x_;
    }

    &lt;span style=&#34;color:#228b22&#34;&gt;//äºŒç»´å‘é‡ç‚¹ç§¯
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;DotProduct&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; Vector2d vec)
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; x_ * vec.x_ + y_ * vec.y_;
    }

    &lt;span style=&#34;color:#228b22&#34;&gt;//äºŒç»´å‘é‡å‡æ³•
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;    Vector2d &lt;span style=&#34;color:#008b45&#34;&gt;Minus&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; Vector2d vec) &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt;
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; Vector2d(x_ - vec.x_, y_ - vec.y_);
    }

    &lt;span style=&#34;color:#228b22&#34;&gt;//åˆ¤æ–­ç‚¹M,Næ˜¯å¦åœ¨ç›´çº¿ABçš„åŒä¸€ä¾§
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;IsPointAtSameSideOfLine&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; Vector2d &amp;amp;pointM, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; Vector2d &amp;amp;pointN,
                                        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; Vector2d &amp;amp;pointA, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; Vector2d &amp;amp;pointB)
    {
        Vector2d AB = pointB.Minus(pointA);
        Vector2d AM = pointM.Minus(pointA);
        Vector2d AN = pointN.Minus(pointA);

        &lt;span style=&#34;color:#228b22&#34;&gt;//ç­‰äº0æ—¶è¡¨ç¤ºæŸä¸ªç‚¹åœ¨ç›´çº¿ä¸Š
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; AB.CrossProduct(AM) * AB.CrossProduct(AN) &amp;gt;= &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
    }
};

&lt;span style=&#34;color:#228b22&#34;&gt;//ä¸‰è§’å½¢ç±»
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Triangle&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;private&lt;/span&gt;:
    Vector2d pointA_, pointB_, pointC_;

&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    Triangle(Vector2d point1, Vector2d point2, Vector2d point3)
        : pointA_(point1), pointB_(point2), pointC_(point3)
    {
        &lt;span style=&#34;color:#228b22&#34;&gt;//todo åˆ¤æ–­ä¸‰ç‚¹æ˜¯å¦å…±çº¿
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;    }

    &lt;span style=&#34;color:#228b22&#34;&gt;//è®¡ç®—ä¸‰è§’å½¢é¢ç§¯
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;ComputeTriangleArea&lt;/span&gt;()
    {
        &lt;span style=&#34;color:#228b22&#34;&gt;//ä¾æ®ä¸¤ä¸ªå‘é‡çš„å‰ä¹˜æ¥è®¡ç®—ï¼Œå¯å‚è€ƒhttp://blog.csdn.net/zxj1988/article/details/6260576
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;        Vector2d AB = pointB_.Minus(pointA_);
        Vector2d BC = pointC_.Minus(pointB_);
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; fabs(AB.CrossProduct(BC) / &lt;span style=&#34;color:#b452cd&#34;&gt;2.0&lt;/span&gt;);
    }

    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;IsPointInTriangle1&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; Vector2d pointP)
    {
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; area_ABC = ComputeTriangleArea();
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; area_PAB = Triangle(pointP, pointA_, pointB_).ComputeTriangleArea();
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; area_PAC = Triangle(pointP, pointA_, pointC_).ComputeTriangleArea();
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; area_PBC = Triangle(pointP, pointB_, pointC_).ComputeTriangleArea();

        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (fabs(area_PAB + area_PBC + area_PAC - area_ABC) &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;0.000001&lt;/span&gt;)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#658b00&#34;&gt;true&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;else&lt;/span&gt;
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#658b00&#34;&gt;false&lt;/span&gt;;
    }

    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;IsPointInTriangle2&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; Vector2d pointP)
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; Vector2d::IsPointAtSameSideOfLine(pointP, pointA_, pointB_, pointC_) &amp;amp;&amp;amp;
               Vector2d::IsPointAtSameSideOfLine(pointP, pointB_, pointA_, pointC_) &amp;amp;&amp;amp;
               Vector2d::IsPointAtSameSideOfLine(pointP, pointC_, pointA_, pointB_);
    }

    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;IsPointInTriangle3&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; Vector2d pointP)
    {
        Vector2d AB = pointB_.Minus(pointA_);
        Vector2d AC = pointC_.Minus(pointA_);
        Vector2d AP = pointP.Minus(pointA_);
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; dot_ac_ac = AC.DotProduct(AC);
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; dot_ac_ab = AC.DotProduct(AB);
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; dot_ac_ap = AC.DotProduct(AP);
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; dot_ab_ab = AB.DotProduct(AB);
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; dot_ab_ap = AB.DotProduct(AP);

        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; tmp = &lt;span style=&#34;color:#b452cd&#34;&gt;1.0&lt;/span&gt; / (dot_ac_ac * dot_ab_ab - dot_ac_ab * dot_ac_ab);

        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; u = (dot_ab_ab * dot_ac_ap - dot_ac_ab * dot_ab_ap) * tmp;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (u &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt; || u &amp;gt; &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#658b00&#34;&gt;false&lt;/span&gt;;
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; v = (dot_ac_ac * dot_ab_ap - dot_ac_ab * dot_ac_ap) * tmp;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (v &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt; || v &amp;gt; &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#658b00&#34;&gt;false&lt;/span&gt;;

        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; u + v &amp;lt;= &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
    }

    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;IsPointInTriangle4&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; Vector2d pointP)
    {
        Vector2d PA = pointA_.Minus(pointP);
        Vector2d PB = pointB_.Minus(pointP);
        Vector2d PC = pointC_.Minus(pointP);
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; t1 = PA.CrossProduct(PB);
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; t2 = PB.CrossProduct(PC);
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; t3 = PC.CrossProduct(PA);
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; t1 * t2 &amp;gt;= &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; t1 * t3 &amp;gt;= &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
    }
};

&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Solution&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    &lt;span style=&#34;color:#228b22&#34;&gt;/**
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     * @param triangle: Coordinates of three points
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     * @param point: Xiaoqi&amp;#39;s coordinates
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     * @return: Judge whether you can cast magic
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     */&lt;/span&gt;
    string castMagic(vector&amp;lt;vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt;&amp;gt; &amp;amp;triangle, vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; &amp;amp;point)
    {
        Triangle &lt;span style=&#34;color:#008b45&#34;&gt;tri&lt;/span&gt;(Vector2d(triangle[&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;][&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;], triangle[&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;][&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;]),
                     Vector2d(triangle[&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;][&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;], triangle[&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;][&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;]),
                     Vector2d(triangle[&lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;][&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;], triangle[&lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;][&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;]));
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; tri.IsPointInTriangle3(Vector2d(point[&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;], point[&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;])) ? &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Yes&amp;#34;&lt;/span&gt; : &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;No&amp;#34;&lt;/span&gt;;
    }
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;2-åŒºé—´å¼‚æˆ–&#34;&gt;2. åŒºé—´å¼‚æˆ–&lt;/h1&gt;
&lt;h2 id=&#34;æè¿°-1&#34;&gt;æè¿°&lt;/h2&gt;
&lt;p&gt;æœ‰ä¸€ä¸ªæ•°ç»„numï¼Œç°åœ¨å®šä¹‰åŒºé—´å¯¹çš„å’Œç­‰äºï¼šå·¦åŒºé—´çš„æœ€å¤§å€¼åŠ å³åŒºé—´çš„æœ€å°å€¼ ç”±äºå°æ –ç‰¹åˆ«èƒ½çªå‘å¥‡æƒ³ï¼Œä»–çªç„¶æƒ³çŸ¥é“å¤šä¸ªåŒºé—´å¯¹å’Œçš„å¼‚æˆ–å’Œæ˜¯å¤šå°‘&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;4&amp;lt;=len(num)&amp;lt;=50000&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;0&amp;lt;=num[i]&amp;lt;=100000000&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;1&amp;lt;=len(ask)&amp;lt;=100000&lt;/li&gt;
&lt;li&gt;len(ask[0])=4,åˆ†åˆ«è¡¨ç¤º l1,r1,l2,r2&lt;/li&gt;
&lt;li&gt;numä¸­è§†ä½œä¸‹æ ‡ä»1å¼€å§‹ï¼Œè€Œä¸æ˜¯0&lt;/li&gt;
&lt;li&gt;å·¦å³åŒºé—´å¯èƒ½é‡åˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç¤ºä¾‹-1&#34;&gt;ç¤ºä¾‹&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥: num = [1,2,3,4,5] ask = [[1,2,3,4],[1,2,4,5]]
è¾“å‡º: 3
è¯´æ˜: [1,2,3,4]åŒºé—´å¼‚æˆ–å¯¹å’Œä¸º5ï¼Œ[1,2,4,5]åŒºé—´å¼‚æˆ–å¯¹å’Œä¸º6ï¼Œ5 xor 6 = 3
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ€è·¯-1&#34;&gt;æ€è·¯&lt;/h2&gt;
&lt;p&gt;æ±‚åŒºé—´æœ€å€¼ï¼Œç”¨çº¿æ®µæ ‘å’ŒRMQéƒ½èƒ½æï¼Œæˆ‘ç”¨çš„RMQ&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç -1&#34;&gt;ä»£ç &lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;36
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;37
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;38
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;39
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;40
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;41
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;42
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;43
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;44
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;45
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;46
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;47
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;48
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;49
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;50
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;51
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;typedef&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; ll;
&lt;span style=&#34;color:#1e889b&#34;&gt;#define N 100010
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;ll maxx[N][&lt;span style=&#34;color:#b452cd&#34;&gt;20&lt;/span&gt;];
ll minn[N][&lt;span style=&#34;color:#b452cd&#34;&gt;20&lt;/span&gt;];
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;RMQ&lt;/span&gt;(ll n)
{
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (ll j = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;; j &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;20&lt;/span&gt;; j++)
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (ll i = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;; i &amp;lt;= n; i++)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (i + (&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; j) - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;lt;= n)
            {
                maxx[i][j] = max(maxx[i][j - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;], maxx[i + (&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; (j - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;))][j - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;]);
                minn[i][j] = min(minn[i][j - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;], minn[i + (&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; (j - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;))][j - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;]);
            }
}
ll &lt;span style=&#34;color:#008b45&#34;&gt;get_max&lt;/span&gt;(ll a, ll b)
{
    ll k = (ll)(log(b - a + &lt;span style=&#34;color:#b452cd&#34;&gt;1.0&lt;/span&gt;) / log(&lt;span style=&#34;color:#b452cd&#34;&gt;2.0&lt;/span&gt;));
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; max(maxx[a][k], maxx[b - (&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; k) + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;][k]);
}
ll &lt;span style=&#34;color:#008b45&#34;&gt;get_min&lt;/span&gt;(ll a, ll b)
{
    ll k = (ll)(log(b - a + &lt;span style=&#34;color:#b452cd&#34;&gt;1.0&lt;/span&gt;) / log(&lt;span style=&#34;color:#b452cd&#34;&gt;2.0&lt;/span&gt;));
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; min(minn[a][k], minn[b - (&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; k) + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;][k]);
}
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Solution&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    &lt;span style=&#34;color:#228b22&#34;&gt;/**
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     * @param num: array of num
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     * @param ask: llerval pairs
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     * @return: return the sum of xor
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     */&lt;/span&gt;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; Intervalxor(vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; &amp;amp;num, vector&amp;lt;vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt;&amp;gt; &amp;amp;ask)
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (ll i = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; i &amp;lt; num.size(); i++)
        {
            minn[i + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;][&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;] = maxx[i + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;][&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;] = num[i];
        }
        ll n = num.size();
        RMQ(n);
        ll ans = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; as : ask)
        {
            ll l1 = as[&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;], r1 = as[&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;];
            ll l2 = as[&lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;], r2 = as[&lt;span style=&#34;color:#b452cd&#34;&gt;3&lt;/span&gt;];
            ll tmp = get_max(l1, r1) + get_min(l2, r2);
            ans ^= tmp;
        }
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; ans;
    }
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;3-äº”å­å›æ–‡&#34;&gt;3. äº”å­å›æ–‡&lt;/h1&gt;
&lt;h2 id=&#34;æè¿°-2&#34;&gt;æè¿°&lt;/h2&gt;
&lt;p&gt;å°æ –æœ€è¿‘å¾ˆå–œæ¬¢å›æ–‡ä¸²ï¼Œç”±äºå°æ –çš„å¹¸è¿æ•°å­—æ˜¯5ï¼Œä»–æƒ³çŸ¥é“å½¢ä¼¼â€œabcba&amp;quot;çš„å›æ–‡ä¸²åœ¨ä»–ç»™å®šçš„å­—ç¬¦ä¸²ä¸­çš„æ•°é‡&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;s.length&amp;lt;=106&lt;/li&gt;
&lt;li&gt;å­—ç¬¦ä¸²såªåŒ…å«å°å†™å­—æ¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç¤ºä¾‹-2&#34;&gt;ç¤ºä¾‹&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ ·ä¾‹ 1ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥ï¼šs = &amp;quot;abcba&amp;quot;
è¾“å‡ºï¼š1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ ·ä¾‹ 2ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥ï¼šs = &amp;quot;abcbabcccb&amp;quot;
è¾“å‡ºï¼š2
è§£é‡Šï¼šå½¢ä¼¼â€abcbaâ€œçš„å­—ç¬¦ä¸²æœ‰â€abcbaâ€œå’Œâ€cbabcâ€œ
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ€è·¯-2&#34;&gt;æ€è·¯&lt;/h2&gt;
&lt;p&gt;ç›´æ¥O(n)éå†åˆ¤æ–­ï¼Œä¸ç”¨ç®—æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç -2&#34;&gt;ä»£ç &lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Solution&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    &lt;span style=&#34;color:#228b22&#34;&gt;/**
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     * @param s: The given string
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     * @return: return the number of Five-character palindrome
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     */&lt;/span&gt;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; pd(string &amp;amp;s, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; mid)
    {
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; f1 = s[mid - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;] == s[mid + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;];
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; f2 = s[mid - &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;] == s[mid + &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;];
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; f3 = (s[mid - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;] != s[mid - &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;]) &amp;amp; (s[mid] != s[mid - &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;]) &amp;amp; (s[mid] != s[mid - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;]);
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; f1 &amp;amp; f2 &amp;amp; f3;
    }
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;Fivecharacterpalindrome&lt;/span&gt;(string &amp;amp;s)
    {
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; n = s.size();
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (n &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;5&lt;/span&gt;)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; ans = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;; i &amp;lt; n - &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;;)
        {
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (pd(s, i))
            {
                i += &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;;
                ans++;
            }
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;else&lt;/span&gt;
            {
                i++;
            }
        }
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; ans;
    }
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;4-å°æ –çš„é‡‘å­—å¡”&#34;&gt;4. å°æ –çš„é‡‘å­—å¡”&lt;/h1&gt;
&lt;h2 id=&#34;æè¿°-3&#34;&gt;æè¿°&lt;/h2&gt;
&lt;p&gt;å°æ –æœ‰ä¸€ä¸ªé‡‘å­—å¡”ï¼Œæ¯ä¸€å±‚éƒ½æœ‰ç¼–å·. 
&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200830130158.jpeg&#34; alt=&#34;1107.png&#34;&gt; 
å°æ –å¯ä»¥åœ¨ä¸åŒç‚¹é—´ç§»åŠ¨ï¼Œå‡è®¾å°æ –ç°åœ¨åœ¨(x1,y1),ä»–èƒ½å¤Ÿç§»åŠ¨åˆ°çš„ä¸‹ä¸€ä¸ªç‚¹(x2,y2)æ»¡è¶³x2&amp;gt;=x1&amp;amp;&amp;amp;y2&amp;gt;=y1x2&amp;gt;=x1&amp;amp;&amp;amp;y2&amp;gt;=y1 ç°åœ¨å°æ –å‘†åœ¨(k,k)å¤„ï¼Œç”±äºæˆ‘ä»¬ä¸èƒ½ç¡®å®šå°æ –ç°åœ¨åœ¨å“ªå„¿ï¼Œæ‰€ä»¥ä½ éœ€è¦æ±‚å‡ºæ‰€æœ‰ç‚¹(k,k)åˆ°è¾¾(n,n)çš„æ–¹æ¡ˆæ•°çš„å’Œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1&amp;lt;=k&amp;lt;=n&amp;lt;=107&lt;/li&gt;
&lt;li&gt;ç”±äºæ–¹æ¡ˆæ•°å¾ˆå¤§ï¼Œè¯·å¯¹æ–¹æ¡ˆæ•°å–æ¨¡1e9+7&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç¤ºä¾‹-3&#34;&gt;ç¤ºä¾‹&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥ï¼šn=3,k=[1,2,3]
è¾“å‡ºï¼š9
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ€è·¯-3&#34;&gt;æ€è·¯&lt;/h2&gt;
&lt;p&gt;è¶…çº§å¡ç‰¹å…°æ•°/å¤§æ–½ç½—å¾·æ•° è£¸é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;é¢˜ç›®ä¸­æ±‚çš„æ˜¯ k åˆ° n çš„æ–¹æ¡ˆæ•°ï¼Œæ‰€ä»¥å¯¹äºæ¯ä¸€ä¸ªä¸‰è§’å½¢è€Œè¨€ï¼Œè¦æ±‚ç¬¬ &lt;code&gt;n-k+1&lt;/code&gt; ä¸ªå¤§æ–½ç½—å¾·æ•°ã€‚&lt;/p&gt;
&lt;p&gt;æ¨¡æ¿å¯ä»¥çœ‹è¿™é‡Œï¼šhttps://blog.csdn.net/PleasantlY1/article/details/84074637&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç -3&#34;&gt;ä»£ç &lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;36
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;37
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;38
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;39
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;40
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;41
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;typedef&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; LL;
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; LL mod = &lt;span style=&#34;color:#b452cd&#34;&gt;1e9&lt;/span&gt; + &lt;span style=&#34;color:#b452cd&#34;&gt;7&lt;/span&gt;;
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; LL maxn = &lt;span style=&#34;color:#b452cd&#34;&gt;1e7&lt;/span&gt; + &lt;span style=&#34;color:#b452cd&#34;&gt;10&lt;/span&gt;;
LL num[maxn];
LL &lt;span style=&#34;color:#008b45&#34;&gt;inverse&lt;/span&gt;(LL x, LL y) &lt;span style=&#34;color:#228b22&#34;&gt;///å¿«é€Ÿå¹‚åŠ è´¹é©¬å°å®šç†æ±‚é€†å…ƒ
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;{
    LL sum = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (y)
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (y &amp;amp; &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;)
            sum = sum * x % mod;
        y /= &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;;
        x = x * x % mod;
    }
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; sum % mod;
}
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Solution&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    &lt;span style=&#34;color:#228b22&#34;&gt;/**
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     * @param n: The number of pyramid levels n
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     * @param k: Possible coordinates k
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     * @return: Find the sum of the number of plans
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;     */&lt;/span&gt;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; pyramid(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; n, vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; &amp;amp;k)
    {
        num[&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;] = num[&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;] = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;; i &amp;lt;= n; i++)
        {
            num[i] = ((&lt;span style=&#34;color:#b452cd&#34;&gt;6&lt;/span&gt; * i - &lt;span style=&#34;color:#b452cd&#34;&gt;3&lt;/span&gt;) * num[i - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;] % mod - (i - &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;) * num[i - &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;] % mod + mod) % mod * inverse(i + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;, mod - &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;) % mod;
        }
        LL ans = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;auto&lt;/span&gt; x : k)
        {
            x = n - x + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
            LL tmp = x == &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; ? &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; : num[x - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;] * &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt; % mod;
            ans = (ans + tmp) % mod;
        }
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;int&lt;/span&gt;(ans);
    }
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;- https://caixiongjiang.github.io/blog/2020/%E8%B6%85%E7%BA%A7%E7%A0%81%E5%8A%9B%E5%9C%A8%E7%BA%BF%E7%BC%96%E7%A8%8B%E5%A4%A7%E8%B5%9B%E5%88%9D%E8%B5%9B-%E7%AC%AC2%E5%9C%BA-%E9%A2%98%E8%A7%A3/ - </description>
        </item>
    
    
    
        <item>
        <title>LeetCode 214 æœ€çŸ­å›æ–‡ä¸²(kmpã€nextåº”ç”¨)</title>
        <link>https://caixiongjiang.github.io/blog/2020/leetcode-214-%E6%9C%80%E7%9F%AD%E5%9B%9E%E6%96%87%E4%B8%B2kmpnext%E5%BA%94%E7%94%A8/</link>
        <pubDate>Sat, 29 Aug 2020 02:41:03 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2020/leetcode-214-%E6%9C%80%E7%9F%AD%E5%9B%9E%E6%96%87%E4%B8%B2kmpnext%E5%BA%94%E7%94%A8/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2020/leetcode-214-%E6%9C%80%E7%9F%AD%E5%9B%9E%E6%96%87%E4%B8%B2kmpnext%E5%BA%94%E7%94%A8/ -&lt;p&gt;é¢˜ç›®é“¾æ¥ï¼š&lt;a href=&#34;https://leetcode-cn.com/problems/shortest-palindrome/&#34;&gt;æœ€çŸ­å›æ–‡ä¸²&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² &lt;em&gt;&lt;strong&gt;s&lt;/strong&gt;&lt;/em&gt;ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨å­—ç¬¦ä¸²å‰é¢æ·»åŠ å­—ç¬¦å°†å…¶è½¬æ¢ä¸ºå›æ–‡ä¸²ã€‚æ‰¾åˆ°å¹¶è¿”å›å¯ä»¥ç”¨è¿™ç§æ–¹å¼è½¬æ¢çš„æœ€çŸ­å›æ–‡ä¸²ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 1:&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥: &amp;quot;aacecaaa&amp;quot;
è¾“å‡º: &amp;quot;aaacecaaa&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 2:&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥: &amp;quot;abcd&amp;quot;
è¾“å‡º: &amp;quot;dcbabcd&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ€è·¯&#34;&gt;æ€è·¯&lt;/h2&gt;
&lt;p&gt;kmp&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬å›å½’ä¸€ä¸‹ kmp ä¸­ next æ•°ç»„çš„å«ä¹‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;next[i]&lt;/code&gt; ä»£è¡¨ ä» &lt;code&gt;[0,i-1]&lt;/code&gt; çš„æœ€é•¿çš„ç›¸åŒ&lt;strong&gt;çœŸå‰åç¼€çš„é•¿åº¦&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é‚£ä¹ˆå¯¹äºè¿™ä¸ªé¢˜ç›®è€Œè¨€ï¼Œå·²çŸ¥é¢˜ç›®è®©æˆ‘ä»¬åœ¨å­—ç¬¦ä¸²å‰é¢å¢åŠ å­—ç¬¦è®©ä»–å˜æˆå›æ–‡ä¸²ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºä¸€ä¸ªå›æ–‡ä¸²è€Œè¨€ï¼Œå®ƒçš„æ‰€æœ‰çš„å‰ç¼€å’Œåç¼€æ˜¯ç›¸åŒçš„ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾ç°åœ¨ç»™å‡ºçš„å­—ç¬¦ä¸²æ˜¯ï¼š&lt;code&gt;abacd&lt;/code&gt;ï¼Œå¯ä»¥ç¡®å®šæŠŠå­—ç¬¦ä¸²çš„é€†åºåŠ åœ¨è¿™ä¸ªå­—ç¬¦ä¸²å‰é¢ä¸€å®šå›æ–‡ï¼Œæ¯”å¦‚ &lt;code&gt;dcabaabacd&lt;/code&gt; å°±ä¸€å®šæ˜¯ä¸ªå›æ–‡ä¸²ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å‘ç°&lt;strong&gt;åŸä¸²çš„å‰ç¼€&lt;/strong&gt;å’Œ&lt;strong&gt;é€†åºåçš„åç¼€&lt;/strong&gt; æœ‰é‡åˆï¼Œå¯¹äºåˆšåˆšç»™å‡ºçš„ä¾‹å­æ¥è¯´ã€‚åŸä¸²æ˜¯ &lt;code&gt;abacd&lt;/code&gt;ï¼Œé€†åºæ˜¯ &lt;code&gt;dcaba&lt;/code&gt;ï¼Œåˆ™å‰åç¼€é‡åˆçš„éƒ¨åˆ†æ˜¯ &lt;code&gt;aba&lt;/code&gt;ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‹¼å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œè¿™ä¸€å—å°±ä¸ç”¨åŠ¨ï¼Œåªéœ€è¦æŠŠåŸä¸²ä¸­ &lt;code&gt;aba&lt;/code&gt;åé¢çš„å­—ç¬¦ä¸² &lt;code&gt;cd&lt;/code&gt; é€†åºåçš„å­—ç¬¦ä¸² &lt;code&gt;dc&lt;/code&gt; åŠ åœ¨åŸä¸²å‰ï¼Œå˜æˆ &lt;code&gt;dcabacd&lt;/code&gt; å°±æ˜¯ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä½•æ±‚å¾—è¿™ä¸ªåŸä¸²çš„å‰ç¼€å’Œé€†åºåçš„åç¼€çš„æœ€å¤§é•¿åº¦å‘¢ï¼Œæ­£å¥½kmpçš„nextæ•°ç»„å°±æ˜¯ä¸“é—¨å¹²è¿™ä¸ªäº‹çš„ï¼Œæˆ‘ä»¬ç»™åŸä¸²å’Œé€†åºä¸²ä¸­é—´åŠ ä¸€ä¸ª &lt;code&gt;#&lt;/code&gt; å·(é˜²æ­¢å‡ºç°åŸä¸²ä¸­å­—ç¬¦éƒ½ç›¸åŒçš„æƒ…å†µ)ï¼Œç»„æˆä¸€ä¸ªæ–°ä¸²ï¼Œç„¶åå¯¹è¿™ä¸ªæ–°ä¸²æ±‚ nextï¼Œåˆ™æ–°çš„nextæ•°ç»„çš„æœ€åçš„å€¼å°±æ˜¯æœ€é•¿çœŸå‰åç¼€çš„é•¿åº¦ã€‚&lt;/p&gt;
&lt;p&gt;çŸ¥é“è¿™ä¸ªé•¿åº¦åï¼Œåªéœ€è¦æŠŠè¿™ä¸ªé•¿åº¦ä¹‹åçš„ä¸²é€†åºï¼ŒåŠ åœ¨åŸä¸²å‰å³å¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç &#34;&gt;ä»£ç &lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Solution&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; nxt;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;get_next&lt;/span&gt;(string &amp;amp;p)
    {
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; len = p.length();
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; j = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;, k = -&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
        nxt[&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;] = -&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (j &amp;lt; len)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (k == -&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; || p[j] == p[k])
                nxt[++j] = ++k;
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;else&lt;/span&gt;
                k = nxt[k];
    }
    string &lt;span style=&#34;color:#008b45&#34;&gt;shortestPalindrome&lt;/span&gt;(string s)
    {
        string rs = s;
        reverse(rs.begin(), rs.end());
        string ns = s + &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;#&amp;#34;&lt;/span&gt; + rs;
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; n = ns.size();
        nxt.resize(n + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;);
        get_next(ns);
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; rs.substr(&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;, rs.size() - nxt[n]) + s;
    }
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;- https://caixiongjiang.github.io/blog/2020/leetcode-214-%E6%9C%80%E7%9F%AD%E5%9B%9E%E6%96%87%E4%B8%B2kmpnext%E5%BA%94%E7%94%A8/ - </description>
        </item>
    
    
    
        <item>
        <title>Linuxå†…æ ¸æ•°æ®ç»“æ„</title>
        <link>https://caixiongjiang.github.io/blog/2020/linux%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</link>
        <pubDate>Fri, 28 Aug 2020 01:49:53 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2020/linux%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2020/linux%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ -&lt;h1 id=&#34;linux-å†…æ ¸æ•°æ®ç»“æ„&#34;&gt;Linux å†…æ ¸æ•°æ®ç»“æ„&lt;/h1&gt;
&lt;h1 id=&#34;è·å¾—æºç &#34;&gt;è·å¾—æºç &lt;/h1&gt;
&lt;p&gt;ç›®å‰ï¼ŒLinux å†…æ ¸çš„æºç ç»´æŠ¤åœ¨ GitHub ä¸Šï¼Œåœ°å€ä¸ºï¼šhttps://github.com/torvalds/linux&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å…‹éš†åˆ°æœ¬åœ°&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;git clone https://github.com/torvalds/linux
&lt;/code&gt;&lt;/pre&gt;&lt;ol&gt;
&lt;li&gt;æœ¬ä¹¦ä½¿ç”¨çš„æºç ç‰ˆæœ¬ä¸º 2.6.34 ï¼Œæ‰€ä»¥åˆ‡æ¢åˆ°å¯¹åº” Tagï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;cd linux
git checkout v2.6.34
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ–è€…ç›´æ¥åœ¨ï¼šhttps://github.com/torvalds/linux/releases/tag/v2.6.34 ä¸‹è½½&lt;/p&gt;
&lt;h1 id=&#34;linux-æºç æ ‘æ ¹ç›®å½•è¯´æ˜&#34;&gt;Linux æºç æ ‘æ ¹ç›®å½•è¯´æ˜&lt;/h1&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ tree -L 1
.
â”œâ”€â”€ arch       # ç‰¹å®šä½“ç³»ç»“æ„çš„æºç 
â”œâ”€â”€ block      # å—è®¾å¤‡ I/O å±‚
â”œâ”€â”€ COPYING     # å†…æ ¸è®¸å¯è¯ï¼ˆGNU GPL v2ï¼‰
â”œâ”€â”€ CREDITS     # å†…æ ¸ä»£ç å¼€å‘è€…åˆ—è¡¨
â”œâ”€â”€ crypto      # åŠ å¯† API
â”œâ”€â”€ Documentation  # å†…æ ¸æºç æ–‡æ¡£
â”œâ”€â”€ drivers     # è®¾å¤‡é©±åŠ¨ç¨‹åº
â”œâ”€â”€ firmware     # ä½¿ç”¨æŸäº›é©±åŠ¨ç¨‹åºè€Œéœ€è¦çš„è®¾å¤‡å›ºä»¶ 
â”œâ”€â”€ fs        # VFS å’Œå„ç§æ–‡ä»¶ç³»ç»Ÿ
â”œâ”€â”€ include     # å†…æ ¸å¤´æ–‡ä»¶
â”œâ”€â”€ init       # å†…æ ¸å¼•å¯¼å’Œåˆå§‹åŒ–
â”œâ”€â”€ ipc       # è¿›ç¨‹é—´é€šä¿¡ä»£ç 
â”œâ”€â”€ Kbuild      # ç”¨äºç¼–è¯‘Linuxå†…æ ¸æ–‡ä»¶ï¼Œå¯¹makefileè¿›è¡Œäº†æ‰©å…… 
â”œâ”€â”€ kernel      # åƒè°ƒåº¦ç¨‹åºè¿™æ ·çš„æ ¸å¿ƒå­ç³»ç»Ÿ
â”œâ”€â”€ lib       # é€šç”¨å†…æ ¸å‡½æ•°
â”œâ”€â”€ MAINTAINERS   # ç»´æŠ¤è€…åˆ—è¡¨ä»¥åŠå¦‚ä½•æäº¤å†…æ ¸æ›´æ”¹çš„è¯´æ˜æ–‡ä»¶
â”œâ”€â”€ Makefile     # makefile
â”œâ”€â”€ mm        # å†…å­˜ç®¡ç†å­ç³»ç»Ÿå’Œvm   
â”œâ”€â”€ net       # ç½‘ç»œå­ç³»ç»Ÿ 
â”œâ”€â”€ README      # README
â”œâ”€â”€ REPORTING-BUGS  # Linuxå†…æ ¸å¸¸è§é—®é¢˜è§£ç­”  
â”œâ”€â”€ samples     # ç¤ºä¾‹
â”œâ”€â”€ scripts     # ç¼–è¯‘å†…æ ¸æ‰€ç”¨çš„è„šæœ¬ 
â”œâ”€â”€ security     # Linuxå®‰å…¨æ¨¡å—
â”œâ”€â”€ sound      # è¯­éŸ³å­ç³»ç»Ÿ
â”œâ”€â”€ tools      # åœ¨Linuxå¼€å‘ä¸­æœ‰ç”¨çš„å·¥å…·
â”œâ”€â”€ usr       # æ—©æœŸç”¨æˆ·ç©ºé—´ä»£ç ï¼ˆæ‰€è°“çš„ inittranfsï¼‰
â””â”€â”€ virt       # è™šæ‹ŸåŒ–åŸºç¡€ç»“æ„
21 directories, 7 files
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;å†…æ ¸æ•°æ®ç»“æ„ç®€ä»‹&#34;&gt;å†…æ ¸æ•°æ®ç»“æ„ç®€ä»‹&lt;/h1&gt;
&lt;p&gt;ä»‹ç»é€šç”¨æ•°æ®ç»“æ„ä¸­æœ€æœ‰ç”¨çš„å‡ ä¸ªï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é“¾è¡¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é˜Ÿåˆ—&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ˜ å°„&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;äºŒå‰æ ‘&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;é“¾è¡¨&#34;&gt;é“¾è¡¨&lt;/h1&gt;
&lt;p&gt;include/linux/list.h&lt;/p&gt;
&lt;h2 id=&#34;ç®€å•å®šä¹‰&#34;&gt;ç®€å•å®šä¹‰&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#228b22&#34;&gt;// å•å‘é“¾è¡¨
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_element
{
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; *data;
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_element *next; &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;/ &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;æŒ‡å‘ä¸‹ä¸€ä¸ª&lt;/span&gt;*
};
&lt;span style=&#34;color:#228b22&#34;&gt;// åŒå‘é“¾è¡¨
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_element
{
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; *data;
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_element *next; &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;/ &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;æŒ‡å‘ä¸‹ä¸€ä¸ª&lt;/span&gt;*
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_element *prev; &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;/ &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;æŒ‡å‘å‰ä¸€ä¸ª&lt;/span&gt;*
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç¯å½¢é“¾è¡¨å³æŠŠé“¾è¡¨çš„å°¾å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ å˜ä¸ºé“¾è¡¨çš„å¤´éƒ¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;kernelä¸­çš„é“¾è¡¨&#34;&gt;kernelä¸­çš„é“¾è¡¨&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;kernelä¸­å¯¹é“¾è¡¨çš„å®šä¹‰åœ¨ï¼šinclude/linux/list.h ä¸‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”±äºåŒå‘é“¾è¡¨æœ‰æ¯”è¾ƒå¼ºå¤§çš„çµæ´»æ€§ï¼Œæ‰€ä»¥linuxä¸­çš„é“¾è¡¨é‡‡ç”¨&lt;strong&gt;ç¯å½¢åŒå‘é“¾è¡¨&lt;/strong&gt;æ¥å®Œæˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Linuxä¸ä¼ ç»Ÿçš„æ–¹å¼ä¸ä¼—ä¸åŒï¼Œå®ƒ&lt;strong&gt;ä¸æ˜¯å°†æ•°æ®ç»“æ„å¡å…¥é“¾è¡¨ï¼Œè€Œæ˜¯æŠŠé“¾è¡¨èŠ‚ç‚¹å¡å…¥æ•°æ®ç»“æ„&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828012504.png&#34; alt=&#34;8266c5d8-4ad4-4d93-a727-b16804b5fc10&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;èŠ‚ç‚¹å®šä¹‰&#34;&gt;èŠ‚ç‚¹å®šä¹‰&lt;/h2&gt;
&lt;p&gt;é“¾è¡¨èŠ‚ç‚¹å®šä¹‰ä¸ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#228b22&#34;&gt;// include/linux/list.h  19
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head {
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head *next, *prev;
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;èŠ‚ç‚¹æœ¬èº«å¹¶æ²¡æœ‰æ„ä¹‰ï¼Œå®ƒéœ€è¦è¢«åµŒå…¥è‡ªå·±çš„æ•°æ®ç»“æ„ä¸­æ‰èƒ½ç”Ÿæ•ˆï¼Œé“¾è¡¨éœ€è¦åœ¨ä½¿ç”¨å‰è¿›è¡Œåˆå§‹åŒ–ï¼Œå› ä¸ºå¤šæ•°å…ƒç´ æ˜¯åŠ¨æ€åˆ›å»ºçš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#228b22&#34;&gt;// include/linux/list.h  23è¡Œ
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#define LIST_HEAD_INIT(*name*) { &amp;amp;(name), &amp;amp;(name) }
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;çœ‹èµ·æ¯”è¾ƒç®€å•ï¼Œé‚£å¦‚ä½•ä½¿ç”¨è¿™ä¸ªé“¾è¡¨èŠ‚ç‚¹å‘¢ï¼Œä¹¦ä¸­æä¾›äº†ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; fox
{
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; tail_length;
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt; weight;
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; is_fantastic;
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head list; &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;/ &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;æ‰€æœ‰&lt;/span&gt; fox &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;ç»“æ„å½¢æˆé“¾è¡¨&lt;/span&gt;*
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;container_of-å®&#34;&gt;container_of å®&lt;/h2&gt;
&lt;h3 id=&#34;ä»‹ç»&#34;&gt;ä»‹ç»&lt;/h3&gt;
&lt;p&gt;åŸå‹å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;include/linux/kernel.h 709è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#define container_of(*ptr*, *type*, *member*) ({      \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;  const typeof( ((type *)0)-&amp;gt;member ) *__mptr = (ptr);   \ &lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;// 1
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;  (type *)( (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *)__mptr - offsetof(type,member) );})   &lt;span style=&#34;color:#228b22&#34;&gt;// 2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å…¶ä¸­ offsetof çš„å®šä¹‰ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;include/linux/stddef.h 24è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#define offsetof(*TYPE*, *MEMBER*) ((size_t) &amp;amp;((TYPE *)0)-&amp;gt;MEMBER)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å…¶ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸Šé¢ typeof ä¸º GNU gcc æ‰©å±•è¯­æ³•ï¼Œå¯ç”¨æ¥è·å–ä¸€ä¸ªå˜é‡çš„ç±»å‹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»¥ä¸Š1ä»£ç å»æ‰åï¼Œå°†2ä¸­çš„ __mptræ›¿æ¢ä¸ºpträ¹Ÿå¯æ­£å¸¸å·¥ä½œã€‚çœ‹ä¼¼æ— ç”¨ï¼Œå®åˆ™ç”¨äºç¼–è¯‘æœŸé—´ç±»å‹æ£€æŸ¥&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨é“¾è¡¨ç»“æ„ä¸­ï¼Œä½¿ç”¨äº†ä¸€ä¸ª list_entry çš„å®ï¼Œä¸ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#define list_entry(*ptr*, *type*, *member*) \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;  container_of(ptr, type, member)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å®è´¨ä¸Šå°±æ˜¯è°ƒç”¨äº†ä¸€ä¸‹ container_of&lt;/p&gt;
&lt;h3 id=&#34;åŠŸèƒ½åŠä½¿ç”¨æ–¹æ³•&#34;&gt;åŠŸèƒ½åŠä½¿ç”¨æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;åŠŸèƒ½ï¼š&lt;em&gt;é€šè¿‡æˆå‘˜å˜é‡çš„åœ°å€å¾—åˆ°å®ƒæ‰€åœ¨ç»“æ„çš„é¦–åœ°å€&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;å‚æ•°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;type éœ€è¦æ“ä½œçš„æ•°æ®ç±»å‹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;member typeç»“æ„çš„æˆå‘˜åç§°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ptr memberç±»å‹å®šä¹‰çš„æŒ‡é’ˆå˜é‡&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨æ–¹æ³•ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#1e889b&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#define container_of(*ptr*, *type*, *member*) ({      \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;  const typeof( ((type *)0)-&amp;gt;member ) *__mptr = (ptr);   \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;  (type *)( (char *)__mptr - offsetof(type,member) ); })
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#define offsetof(*TYPE*, *MEMBER*) ((size_t) &amp;amp; ((TYPE *)0)-&amp;gt;MEMBER)
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; typeabc
{
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; mem0;
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;float&lt;/span&gt; mem2;
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; mem4;
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; mem6;
};
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;main&lt;/span&gt;()
{
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; typeabc abc, *pabc;
  abc.mem2 = &lt;span style=&#34;color:#b452cd&#34;&gt;0.0&lt;/span&gt;;
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;float&lt;/span&gt; *pmem2 = &amp;amp;abc.mem2;
  &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;/&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;é€šè¿‡æˆå‘˜å˜é‡çš„åœ°å€å¾—åˆ°å®ƒæ‰€åœ¨ç»“æ„çš„é¦–åœ°å€&lt;/span&gt;*
  pabc = container_of(pmem2, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; typeabc, mem2);
  printf(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;%p&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&lt;/span&gt;, pabc);
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ”¾åœ¨å†…æ ¸ä¸­ï¼Œä½¿ç”¨ container_of å¯ä»¥æ–¹ä¾¿çš„ä»é“¾è¡¨æŒ‡é’ˆæ‰¾åˆ°å…¶çˆ¶ç»“æ„ä¸­åŒ…å«çš„ä»»ä½•å˜é‡ï¼Œå› ä¸ºåœ¨Cè¯­è¨€ä¸­ï¼Œä¸€ä¸ªç»™å®šç»“æ„çš„å˜é‡åç§»åœ¨ç¼–è¯‘çš„æ—¶å€™åœ°å€å°±è¢«å›ºå®šäº†ä¸‹æ¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é“¾è¡¨æ“ä½œ&#34;&gt;é“¾è¡¨æ“ä½œ&lt;/h2&gt;
&lt;p&gt;æ‰€æœ‰æ“ä½œçš„å¤æ‚åº¦éƒ½æ˜¯ O(1)&lt;/p&gt;
&lt;h3 id=&#34;æ’å…¥èŠ‚ç‚¹&#34;&gt;æ’å…¥èŠ‚ç‚¹&lt;/h3&gt;
&lt;p&gt;å†…æ ¸æä¾›äº†ä¸€ç»„é“¾è¡¨æ“ä½œæµç¨‹ï¼Œä½¿ç”¨ list_add() æ–¹æ³•åŠ å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹åˆ°é“¾è¡¨ä¸­ï¼š&lt;/p&gt;
&lt;p&gt;ä»ä»¥ä¸‹ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ’å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹æ—¶ï¼Œæ˜¯æŠŠæ–°èŠ‚ç‚¹æ’å…¥åˆ°äº†å¤´ç»“ç‚¹å’Œå…¶ä¸‹ä¸€ä¸ªç‚¹çš„ä¸­é—´ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#228b22&#34;&gt;// include/linux/list.h  34è¡Œ
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;**
 ** Insert a* *new* *entry between two known consecutive entries.*
 ***
 ** This is only* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt;* *internal* *list* *manipulation where we know*
 ** the prev/next entries already!*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#1e889b&#34;&gt;#ifndef CONFIG_DEBUG_LIST
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; __list_add(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head *new,
         &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **prev*,
         &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **next*)
{
  next-&amp;gt;prev = new;
  new-&amp;gt;next = next;
  new-&amp;gt;prev = prev;
  prev-&amp;gt;next = new;
}
&lt;span style=&#34;color:#1e889b&#34;&gt;#else
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;extern&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; __list_add(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head *new,
         &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **prev*,
         &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **next*);
&lt;span style=&#34;color:#1e889b&#34;&gt;#endif
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** list_add - add a* *new* *entry*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;**new**:* *new* *entry to be added*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;head:* *list* *head to add it after*
 ***
 ** Insert a* *new* *entry after the specified head.*
 ** This is good* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt;* *implementing stacks.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; list_add(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head *new, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **head*)
{
  __list_add(new, head, head-&amp;gt;next);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;æ’å…¥åˆ°é“¾è¡¨å°¾éƒ¨&#34;&gt;æ’å…¥åˆ°é“¾è¡¨å°¾éƒ¨ï¼š&lt;/h3&gt;
&lt;p&gt;å®è´¨ä¸Šæ˜¯è°ƒç”¨äº† __list_add() æ–¹æ³•ã€‚æŠŠå…ƒç´ æ’åœ¨äº†æŠ•æœºå‰çš„å‰ä¸€ä¸ªåˆ°å¤´ç»“ç‚¹ä¸­é—´&lt;/p&gt;
&lt;p&gt;include/linux/list.h 70è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** list_add_tail - add a* *new* *entry*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;**new**:* *new* *entry to be added*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;head:* *list* *head to add it before*
 ***
 ** Insert a* *new* *entry before the specified head.*
 ** This is useful* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt;* *implementing queues.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; list_add_tail(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head *new, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **head*)
{
  __list_add(new, head-&amp;gt;prev, head);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;åˆ é™¤èŠ‚ç‚¹&#34;&gt;åˆ é™¤èŠ‚ç‚¹&lt;/h3&gt;
&lt;p&gt;ä»£ç å¾ˆå®¹æ˜“çœ‹æ‡‚&lt;/p&gt;
&lt;p&gt;include/linux/list.h 83è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;**
 ** Delete a* *list* *entry by making the prev/next entries*
 ** point to each other.*
 ***
 ** This is only* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt;* *internal* *list* *manipulation where we know*
 ** the prev/next entries already!*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; __list_del(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head * *prev*, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head * *next*)
{
  next-&amp;gt;prev = prev;
  prev-&amp;gt;next = next;
}
&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** list_del - deletes entry from* *list**.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;entry: the element to* *delete* *from the* *list**.*
 ** Note: list_empty() on entry does* *not* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;* *&lt;span style=&#34;color:#658b00&#34;&gt;true&lt;/span&gt;* *after* *this**, the entry is*
 ** in an undefined state.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#1e889b&#34;&gt;#ifndef CONFIG_DEBUG_LIST
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; list_del(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **entry*)
{
  __list_del(entry-&amp;gt;prev, entry-&amp;gt;next);
  entry-&amp;gt;next = LIST_POISON1;
  entry-&amp;gt;prev = LIST_POISON2;
}
&lt;span style=&#34;color:#1e889b&#34;&gt;#else
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;extern&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; list_del(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **entry*);
&lt;span style=&#34;color:#1e889b&#34;&gt;#endif
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;include/linux/list.h 136è¡Œ ä»é“¾è¡¨ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å¯¹å…¶é‡æ–°åˆå§‹åŒ–&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;*/***
 ** list_del_init - deletes entry from* *list* *and* *reinitialize it.*
 ** @entry: the element to* *delete* *from the* *list**.*
 **/*
static inline void list_del_init(struct list_head **entry*)
{
  __list_del(entry-&amp;gt;prev, entry-&amp;gt;next);
  INIT_LIST_HEAD(entry);
}
// é‡æ–°åˆå§‹åŒ–çš„æ–¹æ³•ï¼ŒæŠŠä¸‹ä¸€ä¸ªå’Œå‰ä¸€ä¸ªèŠ‚ç‚¹å˜æˆè‡ªå·±
static inline void INIT_LIST_HEAD(struct list_head **list*)
{
  list-&amp;gt;next = list;
  list-&amp;gt;prev = list;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;ç§»åŠ¨å’Œåˆå¹¶èŠ‚ç‚¹&#34;&gt;ç§»åŠ¨å’Œåˆå¹¶èŠ‚ç‚¹&lt;/h3&gt;
&lt;p&gt;ç›´æ¥æŠŠè¦ç§»åŠ¨çš„èŠ‚ç‚¹è¿™ä¸€æ®µçš„å¤´å°¾ç»™æ¥èµ·æ¥ï¼Œç„¶åå†æ’å…¥åˆ°æ–°çš„åœ°æ–¹&lt;/p&gt;
&lt;p&gt;ç§»åŠ¨èŠ‚ç‚¹ 90è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** list_move - delete from one* *list* *and* *add* *as* *another**&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;&amp;#39;&lt;/span&gt;s head*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;**list**: the entry to move*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;head: the head that will precede our entry*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; list_move(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **list*, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **head*)
{
  __list_del(list-&amp;gt;prev, list-&amp;gt;next);
  list_add(list, head);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åˆå¹¶èŠ‚ç‚¹ 271è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;__list_splice&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **list*,
         &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **prev*,
         &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **next*)
{
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head *first = list-&amp;gt;next;
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head *last = list-&amp;gt;prev;
  first-&amp;gt;prev = prev;
  prev-&amp;gt;next = first;
  last-&amp;gt;next = next;
  next-&amp;gt;prev = last;
}
&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** list_splice - join two lists, this is designed* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt;* *stacks*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;**list**: the* *new* *list* *to add.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;head: the place to add it in the first* *list**.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; list_splice(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **list*,
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head **head*)
{
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (!list_empty(list))
    __list_splice(list, head, head-&amp;gt;next);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;éå†é“¾è¡¨&#34;&gt;éå†é“¾è¡¨&lt;/h2&gt;
&lt;h3 id=&#34;æ­£å‘éå†&#34;&gt;æ­£å‘éå†&lt;/h3&gt;
&lt;p&gt;include/linux/list.h  367è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** list_for_each   -  iterate over a* *list*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;pos:   the &amp;amp;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; list_head to* *use* *as* *a* *loop* *cursor**.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;head:  the head* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt;* *your* *list**.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#1e889b&#34;&gt;#define list_for_each(*pos*, *head*) \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;  for (pos = (head)-&amp;gt;next; prefetch(pos-&amp;gt;next), pos != (head); \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;      pos = pos-&amp;gt;next)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å…¶ä¸­ï¼Œä½¿ç”¨äº† prefetch() å®ï¼Œå…¶åŠŸèƒ½æ˜¯æ•°æ®çš„é¢„å…ˆè¯»å–ã€‚å½“ä½ ç¡®è®¤åç»§ç»­è¦è¯»å–æŸå†…å­˜çš„ä¿¡æ¯çš„æ—¶å€™ï¼Œå¯ä»¥é‡‡ç”¨prefetchå°†è¿™ä¸€å—æ•°æ®è¯» å–åˆ°cacheä¹‹ä¸­ï¼Œä»¥ä¾¿åç»§å¿«é€Ÿè®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;åˆ©ç”¨ä¸Šé¢æåˆ°çš„ list_entry() ï¼Œå¯ä»¥å®ç°ä¼˜ç¾çš„éå†ï¼ŒæŠŠå½“å‰é“¾è¡¨èŠ‚ç‚¹æ‰€åœ¨çš„ç»“æ„ä½“çš„ç»“æ„åœ°å€æ‹¿å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;418è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** list_for_each_entry  -  iterate over* *list* *of given type*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;pos:   the type &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\&lt;/span&gt;* to* *use* *as* *a* *loop* *cursor**.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;head:  the head* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt;* *your* *list**.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;member: the name of the list_struct within the &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#1e889b&#34;&gt;#define list_for_each_entry(*pos*, *head*, *member*)        \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;  for (pos = list_entry((head)-&amp;gt;next, typeof(*pos), member);  \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;     &amp;amp;pos-&amp;gt;member != (head);   \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;     pos = list_entry(pos-&amp;gt;member.next, typeof(*pos), member))
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;p&gt;fs/notify/inotify/inotify.c 213è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;**
 ** inotify_find_handle - find the watch associated with the given inode* *and*
 ** handle*
 ***
 ** Callers must hold inode-&amp;gt;inotify_mutex.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; inotify_watch *inode_find_handle(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; inode **inode*,
              &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; inotify_handle **ih*)
{
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; inotify_watch *watch;
  list_for_each_entry(watch, &amp;amp;inode-&amp;gt;inotify_watches, i_list) {
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (watch-&amp;gt;ih == ih)
      &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; watch;
  }
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#658b00&#34;&gt;NULL&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ˜¯linuxä¸­å†…æ ¸æ–‡ä»¶ç³»ç»Ÿçš„æ›´æ–°é€šçŸ¥æœºåˆ¶ï¼Œå‡½æ•°éå†äº† inode-&amp;gt;inotify_watchsä¸­çš„æ‰€æœ‰é¡¹&lt;/p&gt;
&lt;h3 id=&#34;åå‘éå†&#34;&gt;åå‘éå†&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#228b22&#34;&gt;// 425è¡Œ
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** list_for_each_entry_reverse - iterate backwards over* *list* *of given type.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;pos:   the type &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\&lt;/span&gt;* to* *use* *as* *a* *loop* *cursor**.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;head:  the head* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt;* *your* *list**.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;member: the name of the list_struct within the &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#1e889b&#34;&gt;#define list_for_each_entry_reverse(*pos*, *head*, *member*)      \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;  for (pos = list_entry((head)-&amp;gt;prev, typeof(*pos), member);  \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;     prefetch(pos-&amp;gt;member.prev), &amp;amp;pos-&amp;gt;member != (head);   \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;     pos = list_entry(pos-&amp;gt;member.prev, typeof(*pos), member))
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å’Œä¸Šé¢ä¸€æ ·ï¼Œæ— éæ˜¯æ²¿ç€å‰é©±éå†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;éå†åŒæ—¶åˆ é™¤&#34;&gt;éå†åŒæ—¶åˆ é™¤&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#228b22&#34;&gt;// 487è¡Œ
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** list_for_each_entry_safe - iterate over* *list* *of given type safe against removal of* *list* *entry*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;pos:   the type &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\&lt;/span&gt;* to* *use* *as* *a* *loop* *cursor**.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;n:    another type &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\&lt;/span&gt;* to* *use* *as* *temporary* *storage*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;head:  the head* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt;* *your* *list**.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;member: the name of the list_struct within the &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#1e889b&#34;&gt;#define list_for_each_entry_safe(*pos*, *n*, *head*, *member*)      \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;  for (pos = list_entry((head)-&amp;gt;next, typeof(*pos), member),  \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;    n = list_entry(pos-&amp;gt;member.next, typeof(*pos), member); \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;     &amp;amp;pos-&amp;gt;member != (head);           \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;     pos = n, n = list_entry(n-&amp;gt;member.next, typeof(*n), member))
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åˆ é™¤çš„åŸç†æ˜¯ï¼Œåœ¨åˆ é™¤ä¹‹å‰å­˜å‚¨ next æŒ‡é’ˆåˆ°ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œä»¥ä¾¿èƒ½æ‰§è¡Œåˆ é™¤æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚åœ¨ fs/notify/inotify/inotify.c 452è¡Œä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** inotify_inode_is_dead - an inode has been deleted, cleanup any watches*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;inode: inode that is about to be removed*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; inotify_inode_is_dead(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; inode **inode*)
{
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; inotify_watch *watch, *next;
  mutex_lock(&amp;amp;inode-&amp;gt;inotify_mutex);
  list_for_each_entry_safe(watch, next, &amp;amp;inode-&amp;gt;inotify_watches, i_list) {
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; inotify_handle *ih = watch-&amp;gt;ih;
    mutex_lock(&amp;amp;ih-&amp;gt;mutex);
    inotify_remove_watch_locked(ih, watch);
    mutex_unlock(&amp;amp;ih-&amp;gt;mutex);
  }
  mutex_unlock(&amp;amp;inode-&amp;gt;inotify_mutex);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­¤å‡½æ•°éå† inotify_watches é“¾è¡¨ä¸­æ‰€æœ‰é¡¹&lt;/p&gt;
&lt;p&gt;å…¶ä½™é“¾è¡¨è¿˜æœ‰å¾ˆå¤šæ“ä½œï¼Œéƒ½å¯ä»¥åœ¨è¯¥å¤´æ–‡ä»¶ä¸­æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;h1 id=&#34;é˜Ÿåˆ—&#34;&gt;é˜Ÿåˆ—&lt;/h1&gt;
&lt;p&gt;æ“ä½œç³»ç»Ÿçš„ç¼–ç¨‹æ¨¡å‹æœ‰ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œç”Ÿäº§è€…ç”Ÿäº§æ•°æ®ï¼Œæ¶ˆè´¹è€…æ¶ˆè´¹æ•°æ®ï¼Œéœ€è¦ä¸€ä¸ªé˜Ÿåˆ—æ¥å½“ä¸­é—´äººã€‚&lt;/p&gt;
&lt;p&gt;åŸç†æ— éæ˜¯å…ˆå…¥å…ˆå‡ºï¼ˆFIFOï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828012915.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;Linuxå†…æ ¸ä¸­çš„é˜Ÿå®ç°åœ¨ &lt;code&gt;kernel/kfifo.c&lt;/code&gt; ä¸­ï¼Œè€Œå£°æ˜åœ¨ &lt;code&gt;include/linux/kfifo.h&lt;/code&gt; ä¸­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;kfifo&#34;&gt;Kfifo&lt;/h2&gt;
&lt;p&gt;include/linux/kfifo.h 47è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; kfifo {
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *buffer;  &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/\&lt;/span&gt;* the buffer holding the data &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\*/&lt;/span&gt;*
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; size;  &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/\&lt;/span&gt;* the size of the allocated buffer &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\*/&lt;/span&gt;*
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; in;   &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/\&lt;/span&gt;* data is added at offset (in % size) &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\*/&lt;/span&gt;*
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; out;  &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/\&lt;/span&gt;* data is extracted from off. (out % size) &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\*/&lt;/span&gt;*
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Linuxçš„kfifoæä¾›äº†ä¸¤ä¸ªæ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;enqueue å…¥é˜Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;dequeue å‡ºé˜Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;kfifoå¯¹è±¡ç»´æŠ¤äº†ä¸¤ä¸ªå¯¹è±¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å…¥å£åç§»é‡ï¼šä¸‹ä¸€æ¬¡å…¥é˜Ÿåˆ—æ—¶å€™çš„ä½ç½®&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‡ºå£åç§»é‡ï¼šä¸‹ä¸€æ¬¡å‡ºé˜Ÿåˆ—æ—¶çš„ä½ç½®&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å‡ºå£åç§»é‡æ€»æ˜¯å°äºå…¥å£åç§»é‡ï¼Œå¦åˆ™æ— æ„ä¹‰ï¼Œå› ä¸ºé‚£æ ·è¯´æ˜è¦å‡ºé˜Ÿåˆ—çš„å…ƒç´ æ ¹æœ¬è¿˜æ²¡æœ‰å…¥é˜Ÿåˆ—&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å…¥é˜Ÿæ˜¯æ‹·è´æ•°æ®åˆ°é˜Ÿåˆ—çš„å…¥å£åç§»é‡ã€‚ä¹‹åå…¥å£åç§»é‡å¢åŠ æ¨å…¥çš„å…ƒç´ æ•°ç›®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‡ºé˜Ÿæ“ä½œæ˜¯ä»é˜Ÿåˆ—çš„å‡ºå£åç§»é‡å¤„æ‹·è´æ•°æ®ã€‚ä¹‹åå‡ºå£åç§»é‡å‡å»æ‘˜å–å…ƒç´ çš„æ•°ç›®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;In == out æ—¶è¯´æ˜é˜Ÿåˆ—ç©ºäº†ï¼Œåœ¨æ–°çš„æ•°æ®è¢«æ¨å…¥å‰ï¼Œä¸å¯ä»¥åœ¨æ‘˜å–ä»»ä½•æ•°æ®äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¥å£åç§»é‡ç­‰äºé˜Ÿåˆ—é•¿åº¦æ—¶ï¼Œè¯´æ˜åœ¨é˜Ÿåˆ— resize å‰ï¼Œä¸å¯ä»¥å†åŠ å…¥æ–°æ•°æ®&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åˆ›å»ºé˜Ÿåˆ—&#34;&gt;åˆ›å»ºé˜Ÿåˆ—&lt;/h2&gt;
&lt;p&gt;kernel/kfifo.c 56è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** kfifo_alloc - allocates a* *new* *FIFO internal buffer*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;fifo: the fifo to assign then* *new* *buffer*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;size: the size of the buffer to be allocated,* *this* *have to be a power of* *&lt;span style=&#34;color:#b452cd&#34;&gt;2.&lt;/span&gt;*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;gfp_mask: get_free_pages mask,* *passed to* *kmalloc**()*
 ***
 ** This function dynamically allocates a* *new* *fifo internal buffer*
 ***
 ** The size will be rounded-up to a power of* *&lt;span style=&#34;color:#b452cd&#34;&gt;2.&lt;/span&gt;*
 *** *The buffer will be release with* *kfifo_free**()**.*
 ** Return* *&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt;* *no error, otherwise the an error code*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; kfifo_alloc(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; kfifo **fifo*, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; *size*, gfp_t *gfp_mask*)
{
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;char&lt;/span&gt; *buffer;
  &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;**
   ** round up to the next power of* *&lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt;**, since our* *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;&amp;#39;&lt;/span&gt;let the indices*
   ** wrap&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;&amp;#39;&lt;/span&gt; technique works only in* *this* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;case&lt;/span&gt;**.*
   *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (!is_power_of_2(size)) {
    BUG_ON(size &amp;gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0x80000000&lt;/span&gt;);
    size = roundup_pow_of_two(size);
  }
  buffer = kmalloc(size, gfp_mask);
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (!buffer) {
    _kfifo_init(fifo, &lt;span style=&#34;color:#658b00&#34;&gt;NULL&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;);
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; -ENOMEM;
  }
  _kfifo_init(fifo, buffer, size);
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ­¤å‡½æ•°åˆå§‹åŒ–äº†ä¸€ä¸ªå¤§å°ä¸º size çš„kfifo&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ gfp_mask æ ‡è¯†åˆ†é…é˜Ÿåˆ—&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœæˆåŠŸä¼šè¿”å›0ï¼Œå¦‚æœé”™è¯¯ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ç ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;sizeå¿…é¡»æ˜¯2çš„æ¬¡å¹‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;kfifoçš„sizeæ˜¯2^nã€‚æ‰€ä»¥å½“in &amp;gt; 2^nçš„æ—¶å€™ï¼Œ(in &amp;amp; 2^n - 1) == (in % 2^n)ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ç”¨ä¸æ“ä½œæ›¿ä»£æ±‚ä½™æ¥è·å–inåœ¨é˜Ÿåˆ—ä¸­å®é™…çš„ä½ç½®ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…¶ä¸­&lt;/p&gt;
&lt;p&gt;kernel/kfifo.c 31è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;_kfifo_init&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; kfifo **fifo*, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; **buffer*,
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; *size*)
{
  fifo-&amp;gt;buffer = buffer;
  fifo-&amp;gt;size = size;
  kfifo_reset(fifo);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æ­¤å‡½æ•°åˆ›å»ºå¹¶åˆå§‹åŒ–ä¸€ä¸ª kfifo å¯¹è±¡ï¼Œä½¿ç”¨ bufferæŒ‡å‘çš„ size å­—èŠ‚å¤§å°çš„å†…å­˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é™æ€å£°æ˜æ–¹æ³•ï¼š&lt;/p&gt;
&lt;p&gt;include/linux/kfifo.h 67è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** DECLARE_KFIFO - macro to* *declare* *a kfifo* *and* *the associated buffer*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;name: name of the declared kfifo datatype*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;size: size of the fifo buffer. Must be a power of two.*
 ***
 ** Note1: the macro can be used inside &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;* *or* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;union&lt;/span&gt; declaration*
 ** Note2: the macro creates two objects:*
 **  A kfifo object with the given name* *and* *a buffer* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt;* *the kfifo*
 **  object named name**&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;##&lt;/span&gt;kfifo_buffer*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#1e889b&#34;&gt;#define DECLARE_KFIFO(*name*, *size*) \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;union { \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;  struct kfifo name; \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;  unsigned char name##kfifo_buffer[size + sizeof(struct kfifo)]; \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;}
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å’Œ&lt;/p&gt;
&lt;p&gt;include/linux/kfifo.h 83è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** INIT_KFIFO - Initialize a kfifo declared by DECLARE_KFIFO*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;name: name of the declared kfifo datatype*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#1e889b&#34;&gt;#define INIT_KFIFO(*name*) \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;  name = __kfifo_initializer(sizeof(name##kfifo_buffer) - \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;        sizeof(struct kfifo), \
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;        name##kfifo_buffer + sizeof(struct kfifo))
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªåä¸º name ï¼Œå¤§å°ä¸º size çš„ kfifo å¯¹è±¡ï¼Œå’Œå‰é¢ä¸€æ ·ï¼Œsize å¿…é¡»æ˜¯2çš„å¹‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å…¥é˜Ÿæ“ä½œ&#34;&gt;å…¥é˜Ÿæ“ä½œ&lt;/h2&gt;
&lt;p&gt;kernel/kfifo.c 240è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** kfifo_in - puts some data into the FIFO*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;fifo: the fifo to be used.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;from: the data to be added.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;**len**: the length of the data to be added.*
 ***
 ** This function copies at most &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;**len* *bytes from the &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;from buffer into*
 ** the FIFO depending on the free space, and returns the number of*
 ** bytes copied.*
 ***
 ** Note that with only one concurrent reader and one concurrent*
 ** writer, you don**&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;&amp;#39;&lt;/span&gt;t need extra locking to use these functions.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; kfifo_in(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; kfifo **fifo*, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; **from*,
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; *len*)
{
  len = min(kfifo_avail(fifo), len);
  __kfifo_in_data(fifo, from, len, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;);
  __kfifo_add_in(fifo, len);
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; len;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æŠŠ from æŒ‡é’ˆæŒ‡å‘çš„ len  å­—èŠ‚æ•°æ®æ‹·è´åˆ° fifo æ‰€æŒ‡çš„é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœæˆåŠŸï¼Œåˆ™è¿”å›æ¨å…¥å­—èŠ‚çš„å¤§å°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœé˜Ÿåˆ—ä¸­çš„ç©ºé—²å­—èŠ‚ &amp;lt; lenï¼Œåˆ™è¯¥å‡½æ•°å€¼æœ€å¤šå¯æ‹·è´é˜Ÿåˆ—å¯ç”¨ç©ºé—´é‚£ä¹ˆå¤šçš„æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»  kernel/kfifo.c 119è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;__kfifo_in_data&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; kfifo **fifo*,
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; **from*, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; *len*, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; *off*)
{
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; l;
  &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;**
   ** Ensure that we sample the fifo-&amp;gt;out index -before- we*
   ** start putting bytes into the kfifo.*
   *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
  smp_mb();
  off = __kfifo_off(fifo, fifo-&amp;gt;in + off);
  &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/\&lt;/span&gt;* first put the data starting from fifo-&amp;gt;in to buffer end &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\*/&lt;/span&gt;*
  l = min(len, fifo-&amp;gt;size - off);
  memcpy(fifo-&amp;gt;buffer + off, from, l);
  &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/\&lt;/span&gt;* then put the rest (&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; any) at the beginning of the buffer &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\*/&lt;/span&gt;*
  memcpy(fifo-&amp;gt;buffer, from + l, len - l);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œæ‹·è´æ•°æ®çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯å‡½æ•° memcpy&lt;/p&gt;
&lt;h2 id=&#34;å‡ºé˜Ÿæ“ä½œ&#34;&gt;å‡ºé˜Ÿæ“ä½œ&lt;/h2&gt;
&lt;p&gt;kernel/kfifo.c 283è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** kfifo_out - gets some data from the FIFO*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;fifo: the fifo to be used.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;to: where the data must be copied.*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;**len**: the size of the destination buffer.*
 ***
 ** This function copies at most &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;**len* *bytes from the FIFO into the*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;to buffer and returns the number of copied bytes.*
 ***
 ** Note that with only one concurrent reader and one concurrent*
 ** writer, you don**&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;&amp;#39;&lt;/span&gt;t need extra locking to use these functions.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; kfifo_out(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; kfifo **fifo*, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; **to*, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; *len*)
{
  len = min(kfifo_len(fifo), len);
  __kfifo_out_data(fifo, to, len, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;);
  __kfifo_add_out(fifo, len);
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; len;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;è¯¥å‡½æ•°ä» fifo æŒ‡å‘çš„é˜Ÿåˆ—ä¸­æ‹·è´å‡ºé•¿åº¦ä¸ºlençš„å­—èŠ‚åˆ°toæ‰€æŒ‡çš„ç¼“å†²ä¸­ã€‚å¦‚æœæˆåŠŸï¼Œåˆ™è¿”å›æ‹·è´æ•°æ®çš„é•¿åº¦ã€‚å¦‚æœé˜Ÿåˆ—ä¸­æ•°æ®å¤§å°å°äºlenï¼Œåˆ™è¯¥å‡½æ•°æ‹·è´å‡ºçš„æ•°æ®å¿…ç„¶å°äºéœ€è¦çš„æ•°æ®å¤§å°&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“æ•°æ®è¢«æ‘˜å–åï¼Œæ•°æ®å°±ä¼šè¢«åˆ é™¤æ‰ï¼Œå¦‚æœåªæ˜¯æƒ³çœ‹ä¸€ä¸‹é˜Ÿåˆ—çš„æ•°æ®ï¼Œè€Œä¸åƒè¢«åˆ é™¤ï¼Œå¯ä»¥ä½¿ç”¨ kernel/kfifo.c 306è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** kfifo_out_peek - copy some data from the FIFO, but* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;do&lt;/span&gt;* *not remove it*
 *** *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;fifo**: the fifo to be used.*
 *** *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;to**: where the data must be copied.*
 *** *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;len**: the size of the destination buffer.*
 *** *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;offset**: offset into the fifo*
 ***
 ** This function copies at most* *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;len* *bytes at* *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;offset* *from the FIFO*
 ** into the* *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;to* *buffer and returns the number of copied bytes.*
 ** The data is not removed from the FIFO.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; kfifo_out_peek(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; kfifo **fifo*, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; **to*, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; *len*,
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; *offset*)
{
  len = min(kfifo_len(fifo), len + offset);
  __kfifo_out_data(fifo, to, len, offset);
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; len;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿›è¡Œåªè¯»æ•°æ®ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è·å–é˜Ÿåˆ—é•¿åº¦&#34;&gt;è·å–é˜Ÿåˆ—é•¿åº¦&lt;/h2&gt;
&lt;p&gt;include/linux/kfifo.h 148è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** kfifo_size - returns the size of the fifo in bytes*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;fifo: the fifo to be used.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt; __must_check &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; kfifo_size(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; kfifo *fifo)
{
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; fifo-&amp;gt;size;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æ­¤å‡½æ•°è·å¾—å­˜å‚¨ kfifo é˜Ÿåˆ—çš„æ€»ä½“ç©ºé—´å¤§å°ï¼ˆå­—èŠ‚ä¸ºå•ä½ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;include/linux/kfifo.h 157è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** kfifo_len - returns the number of used bytes in the FIFO*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;fifo: the fifo to be used.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; kfifo_len(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; kfifo **fifo*)
{
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;register&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;  out;
  out = fifo-&amp;gt;out;
  smp_rmb();
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; fifo-&amp;gt;in - out;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æ­¤å‡½æ•°è¡¨ç¤ºå½“å‰é˜Ÿåˆ—ä¸­çš„å…ƒç´ æ•°é‡ï¼Œä»æºç å¯ä»¥çœ‹å‡ºæ¥ï¼Œæ˜¯åšäº†ä¸€æ¬¡å‡æ³•è¿ç®—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é‡ç½®å’Œæ’¤é”€é˜Ÿåˆ—&#34;&gt;é‡ç½®å’Œæ’¤é”€é˜Ÿåˆ—&lt;/h2&gt;
&lt;p&gt;é‡ç½®é˜Ÿåˆ—ï¼šinclude/linux/kfifo.h 129è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** kfifo_reset - removes the entire FIFO contents*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;fifo: the fifo to be emptied.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; kfifo_reset(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; kfifo **fifo*)
{
  fifo-&amp;gt;in = fifo-&amp;gt;out = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä»æºç å¯ä»¥çœ‹å‡ºï¼Œå®è´¨ä¸Šæ˜¯ç›´æ¥æŠŠå…¥å£å’Œå‡ºå£åç§»é‡å˜æˆäº†0&lt;/p&gt;
&lt;p&gt;æ’¤é”€é˜Ÿåˆ—ï¼škernel/kfifo.c 93è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** kfifo_free - frees the FIFO internal buffer*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;fifo: the fifo to be freed.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; kfifo_free(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; kfifo **fifo*)
{
  kfree(fifo-&amp;gt;buffer);
  _kfifo_init(fifo, &lt;span style=&#34;color:#658b00&#34;&gt;NULL&lt;/span&gt;, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä»æºç å¯ä»¥çœ‹å‡ºï¼Œé¦–å…ˆè°ƒç”¨äº† kfee é‡Šæ”¾äº†å†…å­˜ï¼Œç„¶ååˆå§‹åŒ–äº†ä¸€ä¸ª NULL çš„kfifoå¯¹è±¡&lt;/p&gt;
&lt;h1 id=&#34;æ˜ å°„&#34;&gt;æ˜ å°„&lt;/h1&gt;
&lt;p&gt;æ˜ å°„å°±æ˜¯æˆ‘ä»¬å¸¸è§çš„ k-v é”®å€¼å¯¹ã€‚æ˜¯ç”±å”¯ä¸€é”®ç»„æˆçš„é›†åˆï¼Œè€Œæ¯ä¸ªé”®å¿…ç„¶å…³è”ä¸€ä¸ªç‰¹å®šçš„å€¼ã€‚è¿™ç§é”®åˆ°å€¼çš„å…³ç³»ç§°ä¸ºæ˜ å°„ï¼Œæ˜ å°„è‡³å°‘è¦æ”¯æŒä¸‰ä¸ªæ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ADD(k,v)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Removeï¼ˆkeyï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Value = Lookup (key)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Linux å†…æ ¸æä¾›äº†ç®€å•çš„ã€æœ‰æ•ˆçš„æ˜ å°„æ•°æ®ç»“æ„ã€‚ä½†æ˜¯ä»–å¹¶éæ˜¯ä¸€ä¸ªé€šç”¨çš„æ˜ å°„ï¼Œä»–çš„ç›®æ ‡æ˜¯ï¼šæ˜ å°„ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†æ•°ï¼ˆUIDï¼‰åˆ°ä¸€ä¸ªæŒ‡é’ˆ&lt;/p&gt;
&lt;h2 id=&#34;æ•°æ®ç»“æ„é€‰å‹&#34;&gt;æ•°æ®ç»“æ„é€‰å‹&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“ï¼Œæ•£åˆ—è¡¨ï¼ˆHashï¼‰ä¹Ÿæ˜¯ä¸€ç§å¸¸ç”¨çš„å®ç° k,v çš„æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆåœ¨ linux ä¸­é€‰ç”¨äº†çº¢é»‘æ ‘å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æ•£åˆ—è¡¨éœ€è¦è®¾å®šå…·ä½“å¤§å°å’Œæ•£åˆ—å‡½æ•°ï¼Œè€Œçº¢é»‘æ ‘ä¼˜é›…çš„æ‰©å±•å­˜å‚¨ä»»æ„é”®&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ•£åˆ—è¡¨å¦‚æœé‡åˆ°å“ˆå¸Œå†²çªï¼Œé‚£ä¹ˆæœ€åçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œè€Œçº¢é»‘æ ‘æœ€åæƒ…å†µä¸‹æ˜¯ O(logn)ï¼Œæ‰€ä»¥çº¢é»‘æ ‘åœ¨æœ€åçš„å¤æ‚åº¦ä¸‹æœ‰æ›´å¥½çš„è¡¨ç°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;äºŒå‰æœç´¢æ ‘æ˜¯æœ‰åºçš„ï¼Œå¯ä»¥ç»™ç”¨æˆ·çš„æŒ‰åºéå†å¸¦æ¥è‰¯å¥½çš„æ€§èƒ½&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;äºŒå‰æœç´¢æ ‘ä¸éœ€è¦æ•£åˆ—å‡½æ•°&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;åˆå§‹åŒ–&#34;&gt;åˆå§‹åŒ–&lt;/h2&gt;
&lt;p&gt;idrçš„å®šä¹‰ï¼šinclude/linux/idr.h 59è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr {
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr_layer *top;
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr_layer *id_free;
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;    layers; &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/\&lt;/span&gt;* only valid without concurrent changes &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\*/&lt;/span&gt;*
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;    id_free_cnt;
  spinlock_t   lock;
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åˆå§‹åŒ–å‡½æ•°ï¼šlib/idr.c 680è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** idr_init - initialize idr handle*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;idp:   idr handle*
 ***
 *** *This function is use to* *set* *up the* *handle* *(&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;idp)* *that you will pass*
 ** to the rest of the functions.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; idr_init(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr **idp*)
{
  memset(idp, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;sizeof&lt;/span&gt;(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr));
  spin_lock_init(&amp;amp;idp-&amp;gt;lock);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è°ƒç”¨äº†ä¸€ä¸‹ memsetå‡½æ•°ï¼ŒæŠŠå¯¹åº”ç©ºé—´ç½®é›¶ï¼Œç„¶ååˆå§‹åŒ–äº†å…¶ä¸­çš„ lock .&lt;/p&gt;
&lt;h2 id=&#34;åˆ†é…uid&#34;&gt;åˆ†é…UID&lt;/h2&gt;
&lt;p&gt;å»ºç«‹ idr åï¼Œå°±å¯ä»¥åˆ†é…æ–°çš„ UID äº†.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å‘Šè¯‰idréœ€è¦åˆ†é…æ–°çš„UIDï¼Œå…è®¸å…¶åœ¨å¿…è¦æ—¶è°ƒæ•´åå¤‡æ ‘å¤§å°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¯·æ±‚çœŸæ­£çš„æ–°çš„UID&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;lib/idr.c 108è¡Œ  è°ƒæ•´åå¤‡æ ‘çš„å¤§å°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** idr_pre_get - reserver resources* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt;* *idr allocation*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;idp:   idr handle*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;gfp_mask:  memory allocation flags*
 ***
 ** This function should be called prior to locking* *and* *calling the*
 ** idr_get_new&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\&lt;/span&gt;* functions. It preallocates enough memory to satisfy*
 ** the worst possible allocation.*
 ***
 ** If the system is REALLY out of memory* *this* *function returns* *&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;**,*
 ** otherwise* *&lt;span style=&#34;color:#b452cd&#34;&gt;1.&lt;/span&gt;*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; idr_pre_get(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr **idp*, gfp_t *gfp_mask*)
{
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (idp-&amp;gt;id_free_cnt &amp;lt; IDR_FREE_MAX) {
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr_layer *new;
    new = kmem_cache_zalloc(idr_layer_cache, gfp_mask);
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (new == &lt;span style=&#34;color:#658b00&#34;&gt;NULL&lt;/span&gt;)
      &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; (&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;);
    move_to_free_list(idp, new);
  }
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä»æºç å¯ä»¥çœ‹å‡ºï¼Œè°ƒæ•´ç”± idp æŒ‡å‘ idr çš„å¤§å°ï¼Œå¦‚æœçœŸçš„éœ€è¦è°ƒæ•´å¤§å°ï¼Œå†…å­˜åˆ†é…ä¾‹ç¨‹ä½¿ç”¨ gfp æ ‡è¯†ï¼šgfp_mask&lt;/p&gt;
&lt;p&gt;lib/idr.c 315è¡Œ  å®é™…æ‰§è¡Œè·å–æ–°çš„UID&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** idr_get_new - allocate* *new* *idr entry*
 *** *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;idp**: idr handle*
 *** *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;ptr**: pointer you want associated with the id*
 *** *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;id**: pointer to the allocated handle*
 ***
 ** This is the allocate id function.  It should be called with any*
 ** required locks.*
 ***
 ** If memory is required, it will* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;* *-EAGAIN, you should unlock*
 *** *and go back to the* *idr_pre_get**()* *call.  If the idr is full, it will*
 *** *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;* *-ENOSPC.*
 ***
 *** *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;id* *returns a value in the range* *&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;* *...* *&lt;span style=&#34;color:#b452cd&#34;&gt;0x7fffffff&lt;/span&gt;*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; idr_get_new(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr **idp*, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; **ptr*, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; **id*)
{
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; rv;
  rv = idr_get_new_above_int(idp, ptr, &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;);
  &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;**
   ** This is a cheap hack until the IDR code can be fixed to*
   *** *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;* *proper error values.*
   *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (rv &amp;lt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;)
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; _idr_rc_to_errno(rv);
  *id = rv;
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¯¥æ–¹æ³•ä½¿ç”¨ idp æŒ‡å‘çš„ idr åˆ†é…ä¸€ä¸ªæ–°çš„ UID ï¼Œå¹¶ä¸”å°†å…¶å…³è”åˆ°æŒ‡é’ˆ ptr ä¸Šã€‚æˆåŠŸæ—¶ï¼Œè¯¥æ–¹æ³•è¿”å›0ï¼Œå¹¶ä¸”å°†æ–°çš„ UID å­˜äº id.&lt;/p&gt;
&lt;h2 id=&#34;æŸ¥æ‰¾uid&#34;&gt;æŸ¥æ‰¾UID&lt;/h2&gt;
&lt;p&gt;lib/idr.c 490è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** idr_find -* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;* *pointer* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt;* *given id*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;idp: idr handle*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;id: lookup key*
 ***
 ** Return the pointer given the id it has been registered with.  A %**&lt;span style=&#34;color:#658b00&#34;&gt;NULL&lt;/span&gt;*
 *** *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;* *indicates that &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;id is* *not* *valid* *or* *you passed %**&lt;span style=&#34;color:#658b00&#34;&gt;NULL&lt;/span&gt;* *in*
 ** idr_get_new().*
 ***
 *** *This function can be called under* *rcu_read_lock**()**, given that the leaf*
 ** pointers lifetimes are correctly managed.*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; *idr_find(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr **idp*, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; *id*)
{
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; n;
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr_layer *p;
  p = rcu_dereference_raw(idp-&amp;gt;top);
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (!p)
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#658b00&#34;&gt;NULL&lt;/span&gt;;
  n = (p-&amp;gt;layer+&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;) * IDR_BITS;
  &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/\&lt;/span&gt;* Mask off upper bits we don&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;&amp;#39;&lt;/span&gt;t use &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; the search. &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\*/&lt;/span&gt;*
  id &amp;amp;= MAX_ID_MASK;
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (id &amp;gt;= (&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n))
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#658b00&#34;&gt;NULL&lt;/span&gt;;
  BUG_ON(n == &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;);
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (n &amp;gt; &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; p) {
    n -= IDR_BITS;
    BUG_ON(n != p-&amp;gt;layer*IDR_BITS);
    p = rcu_dereference_raw(p-&amp;gt;ary[(id &amp;gt;&amp;gt; n) &amp;amp; IDR_MASK]);
  }
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;((&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; *)p);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœè°ƒç”¨æˆåŠŸï¼Œåˆ™è¿”å›idå…³è”çš„æŒ‡é’ˆï¼Œå¦‚æœé”™è¯¯åˆ™è¿”å›ç©ºæŒ‡é’ˆ&lt;/p&gt;
&lt;h2 id=&#34;åˆ é™¤uid&#34;&gt;åˆ é™¤UID&lt;/h2&gt;
&lt;p&gt;lib/idr.c 390è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;36
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;37
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;38
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** idr_remove - remove the given id* *and* *free it**&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;&amp;#39;&lt;/span&gt;s slot*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;idp: idr handle*
 ** &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;@&lt;/span&gt;id: unique key*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; idr_remove(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr **idp*, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; *id*)
{
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr_layer *p;
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr_layer *to_free;
  &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/\&lt;/span&gt;* Mask off upper bits we don&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;&amp;#39;&lt;/span&gt;t use &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; the search. &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\*/&lt;/span&gt;*
  id &amp;amp;= MAX_ID_MASK;
  sub_remove(idp, (idp-&amp;gt;layers - &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;) * IDR_BITS, id);
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (idp-&amp;gt;top &amp;amp;&amp;amp; idp-&amp;gt;top-&amp;gt;count == &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;amp;&amp;amp; (idp-&amp;gt;layers &amp;gt; &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;) &amp;amp;&amp;amp;
    idp-&amp;gt;top-&amp;gt;ary[&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;]) {
    &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;**
     ** Single child at leftmost slot: we can shrink the tree.*
     ** This level is not needed anymore since when layers are*
     ** inserted, they are inserted at the top of the existing*
     ** tree.*
     *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
    to_free = idp-&amp;gt;top;
    p = idp-&amp;gt;top-&amp;gt;ary[&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;];
    rcu_assign_pointer(idp-&amp;gt;top, p);
    --idp-&amp;gt;layers;
    to_free-&amp;gt;bitmap = to_free-&amp;gt;count = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
    free_layer(to_free);
  }
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (idp-&amp;gt;id_free_cnt &amp;gt;= IDR_FREE_MAX) {
    p = get_from_free_list(idp);
    &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;**
     ** Note: we don**&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;&amp;#39;&lt;/span&gt;t call the rcu callback here, since the only*
     ** layers that fall into the freelist are those that have been*
     ** preallocated.*
     *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
    kmem_cache_free(idr_layer_cache, p);
  }
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœåˆ é™¤æˆåŠŸï¼Œä¼šå°†idå…³è”çš„æŒ‡é’ˆä¸€èµ·ä»æ˜ å°„ä¸­åˆ é™¤ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªå‡½æ•°æ²¡æœ‰åŠæ³•æç¤ºä»»ä½•é”™è¯¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ’¤é”€-idr&#34;&gt;æ’¤é”€ idr&lt;/h2&gt;
&lt;p&gt;lib/idr.c 477è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;***
 ** idr_destroy - release all cached layers within an idr tree*
 ** idp: idr handle*
 *&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/&lt;/span&gt;*
&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; idr_destroy(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr **idp*)
{
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (idp-&amp;gt;id_free_cnt) {
    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; idr_layer *p = get_from_free_list(idp);
    kmem_cache_free(idr_layer_cache, p);
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™ä¸ªæºç å¾ˆå¥½æ‡‚ï¼Œé€šè¿‡å¾ªç¯ï¼Œç›´æ¥é‡Šæ”¾idrä¸­æœªä½¿ç”¨çš„å†…å­˜ã€‚ä½†æ˜¯å®ƒå¹¶ä¸é‡Šæ”¾å½“å‰åˆ†é…ç»™UIDä½¿ç”¨çš„ä»»ä½•å†…å­˜ã€‚é€šå¸¸æ¥è¯´ï¼Œå†…æ ¸ä»£ç ä¸ä¼šæ’¤é”€ idr&lt;/p&gt;
&lt;h1 id=&#34;äºŒå‰æ ‘&#34;&gt;äºŒå‰æ ‘&lt;/h1&gt;
&lt;p&gt;æ ‘æ˜¯ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰å›¾ï¼ŒäºŒå‰æ ‘æ˜¯æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåªæœ‰ä¸¤ä¸ªå‡ºè¾¹ä»¥åŠ0æˆ–1ä¸ªå…¥è¾¹çš„æ ‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013724.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;äºŒå‰æ ‘æœç´¢æ ‘bst&#34;&gt;äºŒå‰æ ‘æœç´¢æ ‘ï¼ˆBSTï¼‰&lt;/h2&gt;
&lt;p&gt;éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å„¿å­å°äºè¿™ä¸ªèŠ‚ç‚¹çš„å€¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿™ä¸ªèŠ‚ç‚¹çš„å³å„¿å­å¤§äºè¿™ä¸ªèŠ‚ç‚¹çš„å€¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¶æ‰€æœ‰çš„å­æ ‘ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013747.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;å¹³è¡¡äºŒå‰æ ‘&#34;&gt;å¹³è¡¡äºŒå‰æ ‘&lt;/h2&gt;
&lt;p&gt;å¹³è¡¡äºŒå‰æ ‘é€’å½’å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å·¦å³å­æ ‘çš„é«˜åº¦å·®å°äºç­‰äº 1ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¶æ¯ä¸€ä¸ªå­æ ‘å‡ä¸ºå¹³è¡¡äºŒå‰æ ‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å¹³è¡¡äºŒå‰æœç´¢æ ‘&#34;&gt;å¹³è¡¡äºŒå‰æœç´¢æ ‘&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å¿…é¡»æ˜¯ä¸€æ£µäºŒå‰æ ‘&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¿…é¡»æ˜¯ä¸€æ£µäºŒå‰æœç´¢æ ‘&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¦æ»¡è¶³å¹³è¡¡çš„ç‰¹æ€§&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å®šä¹‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ·±åº¦ï¼šä»æ ¹èŠ‚ç‚¹èµ·ï¼Œåˆ°è¾¾ä»–ä¸€å…±ç»è¿‡çš„çˆ¶èŠ‚ç‚¹æ•°ç›®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¶å­èŠ‚ç‚¹ï¼šæ ‘çš„æœ€åº•å±‚èŠ‚ç‚¹ï¼ˆæ²¡æœ‰å„¿å­ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ ‘çš„é«˜åº¦ï¼šæ ‘ä¸­å¤„äºæœ€åº•å±‚èŠ‚ç‚¹çš„æ•°ç›®&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼ˆè‹±è¯­ï¼šBalanced Binary Search Treeï¼‰æ˜¯ä¸€ç§ç»“æ„å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå®ƒæ˜¯ä¸€ç§æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³ä¸¤å­æ ‘é«˜åº¦å·®éƒ½ä¸è¶…è¿‡ä¸€çš„äºŒå‰æ ‘ã€‚å®ƒèƒ½åœ¨O(logn)å†…å®Œæˆæ’å…¥ã€æŸ¥æ‰¾å’Œåˆ é™¤æ“ä½œï¼Œæœ€æ—©è¢«å‘æ˜çš„å¹³è¡¡äºŒå‰æœç´¢æ ‘ä¸ºAVLæ ‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013835.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘&#34;&gt;è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘&lt;/h2&gt;
&lt;p&gt;å®šä¹‰ï¼šåœ¨ä¿è¯æ˜¯ä¸€æ£µäºŒå‰æœç´¢æ ‘çš„å‰æä¸‹ï¼Œè¦ä¿è¯è‡ªå¹³è¡¡&lt;/p&gt;
&lt;h3 id=&#34;avlæ ‘&#34;&gt;AVLæ ‘&lt;/h3&gt;
&lt;p&gt;è™½ç„¶ä¹¦ä¸Šæ²¡æœ‰AVLï¼Œä½†æ˜¯è¿˜æ˜¯æ‹¿å‡ºæ¥è¯´ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åŸºæœ¬å®šä¹‰&#34;&gt;åŸºæœ¬å®šä¹‰&lt;/h4&gt;
&lt;p&gt;ä¸ºäº†ä¿è¯å¹³è¡¡çš„ç‰¹æ€§ï¼ŒAVL æ ‘å¼•å…¥äº†æ‰€è°“ç›‘ç£æœºåˆ¶ï¼Œå°±æ˜¯åœ¨æ ‘çš„æŸä¸€éƒ¨åˆ†çš„ä¸å¹³è¡¡åº¦è¶…è¿‡ä¸€ä¸ªé˜ˆå€¼åè§¦å‘ç›¸åº”çš„å¹³è¡¡æ“ä½œã€‚ä¿è¯æ ‘çš„å¹³è¡¡åº¦åœ¨å¯ä»¥æ¥å—çš„èŒƒå›´å†…ã€‚&lt;/p&gt;
&lt;p&gt;å®šä¹‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¹³è¡¡å› å­ï¼šæŸä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘é«˜åº¦å‡å»å³å­æ ‘é«˜åº¦çš„å·®å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;AVL æ ‘ï¼š æ‰€æœ‰ç»“ç‚¹çš„å¹³è¡¡å› å­çš„ç»å¯¹å€¼éƒ½ä¸è¶…è¿‡ 1 çš„äºŒå‰æ ‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥å½“æ’å…¥æ–°èŠ‚ç‚¹æ—¶ï¼Œå±‚æ•°ä¼šå¢åŠ å¯¼è‡´AVLçš„æ€§è´¨è¢«ç ´åï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¥ä½¿æ ‘å…·æœ‰AVLæ€§è´¨ã€‚æœ€å¤šæ—‹è½¬çš„æ¬¡æ•°æ˜¯äºŒå‰æ ‘çš„å±‚æ•°ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ O(nlogn)&lt;/p&gt;
&lt;h4 id=&#34;å…·ä½“å®ç°&#34;&gt;å…·ä½“å®ç°&lt;/h4&gt;
&lt;p&gt;äºŒå‰æ ‘çš„å¹³è¡¡åŒ–æœ‰ä¸¤å¤§åŸºç¡€æ“ä½œï¼š å·¦æ—‹å’Œå³æ—‹ã€‚å·¦æ—‹ï¼Œå³æ˜¯é€†æ—¶é’ˆæ—‹è½¬ï¼›å³æ—‹ï¼Œå³æ˜¯é¡ºæ—¶é’ˆæ—‹è½¬ã€‚è¿™ç§æ—‹è½¬åœ¨æ•´ä¸ªå¹³è¡¡åŒ–è¿‡ç¨‹ä¸­å¯èƒ½è¿›è¡Œä¸€æ¬¡æˆ–å¤šæ¬¡ï¼Œè¿™ä¸¤ç§æ“ä½œéƒ½æ˜¯ä»å¤±å»å¹³è¡¡çš„æœ€å°å­æ ‘æ ¹ç»“ç‚¹å¼€å§‹çš„(å³ç¦»æ’å…¥ç»“ç‚¹æœ€è¿‘ä¸”å¹³è¡¡å› å­è¶…è¿‡1çš„ç¥–ç»“ç‚¹)ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å³æ—‹æ“ä½œ&#34;&gt;å³æ—‹æ“ä½œï¼š&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013905.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;æ‰€è°“å³æ—‹æ“ä½œï¼Œå°±æ˜¯æŠŠä¸Šå›¾ä¸­çš„ B èŠ‚ç‚¹å’Œ C èŠ‚ç‚¹è¿›è¡Œæ‰€è°“â€œçˆ¶å­äº¤æ¢â€ã€‚åœ¨ä»…æœ‰è¿™ä¸‰ä¸ªèŠ‚ç‚¹æ—¶å€™ï¼Œæ˜¯ååˆ†ç®€å•çš„ã€‚ä½†æ˜¯å½“ B èŠ‚ç‚¹å¤„å­˜åœ¨å³å­©å­æ—¶ï¼Œäº‹æƒ…å°±å˜å¾—æœ‰ç‚¹å¤æ‚äº†ã€‚æˆ‘ä»¬é€šå¸¸çš„æ“ä½œæ˜¯ï¼š&lt;strong&gt;æŠ›å¼ƒå³å­©å­ï¼Œå°†ä¹‹å’Œæ—‹è½¬åçš„èŠ‚ç‚¹ C ç›¸è¿ï¼Œæˆä¸ºèŠ‚ç‚¹ C çš„å·¦å­©å­&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å·¦æ—‹æ“ä½œ&#34;&gt;å·¦æ—‹æ“ä½œ&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013918.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;å·¦æ—‹æ“ä½œå’Œå³æ—‹æ“ä½œååˆ†ç±»ä¼¼ï¼Œå”¯ä¸€ä¸åŒçš„å°±æ˜¯éœ€è¦å°†å·¦å³å‘¼å”¤ä¸‹ã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¿™ä¸¤ç§æ“ä½œæ˜¯å¯¹ç§°çš„&lt;/p&gt;
&lt;h4 id=&#34;éœ€è¦å¹³è¡¡çš„å››ç§æƒ…å†µ&#34;&gt;éœ€è¦å¹³è¡¡çš„å››ç§æƒ…å†µ&lt;/h4&gt;
&lt;h5 id=&#34;llå‹&#34;&gt;LLå‹&lt;/h5&gt;
&lt;p&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013938.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;æ‰€è°“ LL å‹å°±æ˜¯ä¸Šå›¾å·¦è¾¹é‚£ç§æƒ…å†µï¼Œå³å› ä¸ºåœ¨æ ¹èŠ‚ç‚¹çš„å·¦å­©å­çš„å·¦å­æ ‘æ·»åŠ äº†æ–°èŠ‚ç‚¹ï¼Œå¯¼è‡´æ ¹èŠ‚ç‚¹çš„å¹³è¡¡å› å­å˜ä¸º +2ï¼ŒäºŒå‰æ ‘å¤±å»å¹³è¡¡ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œå¯¹èŠ‚ç‚¹ n å³æ—‹ä¸€æ¬¡å³å¯ã€‚&lt;/p&gt;
&lt;h5 id=&#34;rrå‹&#34;&gt;RRå‹&lt;/h5&gt;
&lt;p&gt;&lt;em&gt;|&lt;/em&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828013959.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;RR å‹çš„æƒ…å†µå’Œ LL å‹å®Œå…¨å¯¹ç§°ã€‚åªéœ€è¦å¯¹èŠ‚ç‚¹ n è¿›è¡Œä¸€æ¬¡å·¦æ—‹å³å¯ä¿®æ­£ã€‚&lt;/p&gt;
&lt;h5 id=&#34;lrå‹&#34;&gt;LRå‹&lt;/h5&gt;
&lt;p&gt;&lt;em&gt;|&lt;/em&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014003.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;LR å°±æ˜¯å°†æ–°çš„èŠ‚ç‚¹æ’å…¥åˆ°äº† n çš„å·¦å­©å­çš„å³å­æ ‘ä¸Šå¯¼è‡´çš„ä¸å¹³è¡¡çš„æƒ…å†µã€‚è¿™æ—¶æˆ‘ä»¬éœ€è¦çš„æ˜¯å…ˆå¯¹ i è¿›è¡Œä¸€æ¬¡å·¦æ—‹å†å¯¹ n è¿›è¡Œä¸€æ¬¡å³æ—‹ã€‚&lt;/p&gt;
&lt;h5 id=&#34;rlå‹&#34;&gt;RLå‹&lt;/h5&gt;
&lt;p&gt;RL å°±æ˜¯å°†æ–°çš„èŠ‚ç‚¹æ’å…¥åˆ°äº† n çš„å³å­©å­çš„å·¦å­æ ‘ä¸Šå¯¼è‡´çš„ä¸å¹³è¡¡çš„æƒ…å†µã€‚è¿™æ—¶æˆ‘ä»¬éœ€è¦çš„æ˜¯å…ˆå¯¹ i è¿›è¡Œä¸€æ¬¡å³æ—‹å†å¯¹ n è¿›è¡Œä¸€æ¬¡å·¦æ—‹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å››ç§æƒ…å†µçš„åˆ¤æ–­å¾ˆç®€å•ã€‚æˆ‘ä»¬æ ¹æ®ç ´åæ ‘çš„å¹³è¡¡æ€§ï¼ˆå¹³è¡¡å› å­çš„ç»å¯¹å€¼å¤§äº 1ï¼‰çš„èŠ‚ç‚¹ä»¥åŠå…¶å­èŠ‚ç‚¹çš„å¹³è¡¡å› å­æ¥åˆ¤æ–­å¹³è¡¡åŒ–ç±»å‹ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ’å…¥&#34;&gt;æ’å…¥&lt;/h4&gt;
&lt;p&gt;æ’å…¥æˆåŠŸåï¼Œåœ¨é€’å½’å›æº¯æ—¶ä¾æ¬¡å¯¹ç»è¿‡çš„ç»“ç‚¹åˆ¤æ–­æ˜¯å¦å¤±è¡¡ï¼Œè‹¥å¤±è¡¡å°±éœ€è¦å¯¹å…¶è¿›è¡Œå¯¹åº”çš„æ—‹è½¬æ“ä½œä½¿å…¶æ¢å¤å¹³è¡¡ï¼Œåœ¨è¿™æœŸé—´ï¼ŒåŸå…ˆä½œä¸ºä¸€æ£µå­æ ‘çš„æ ¹ç»“ç‚¹å°±ä¼šå› ä¸ºæ—‹è½¬è¢«æ›¿æ¢&lt;/p&gt;
&lt;h4 id=&#34;åˆ é™¤&#34;&gt;åˆ é™¤&lt;/h4&gt;
&lt;p&gt;åˆ é™¤æ“ä½œçš„å››ç§å¤±è¡¡æƒ…å†µå’Œæ’å…¥æ“ä½œä¸€æ ·&lt;/p&gt;
&lt;h3 id=&#34;çº¢é»‘æ ‘&#34;&gt;çº¢é»‘æ ‘&lt;/h3&gt;
&lt;p&gt;çº¢é»‘æ ‘ï¼ˆè‹±è¯­ï¼šRedâ€“black treeï¼‰æ˜¯ä¸€ç§è‡ªå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ˜¯åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ç”¨åˆ°çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå…¸å‹çš„ç”¨é€”æ˜¯å®ç°å…³è”æ•°ç»„ã€‚å®ƒåœ¨1972å¹´ç”±é²é“å¤«Â·è´å°”å‘æ˜ï¼Œè¢«ç§°ä¸º&amp;quot;å¯¹ç§°äºŒå‰Bæ ‘&amp;quot;ï¼Œå®ƒç°ä»£çš„åå­—æºäºLeo J. Guibaså’ŒRobert Sedgewickäº1978å¹´å†™çš„ä¸€ç¯‡è®ºæ–‡ã€‚çº¢é»‘æ ‘çš„ç»“æ„å¤æ‚ï¼Œä½†å®ƒçš„æ“ä½œæœ‰ç€è‰¯å¥½çš„æœ€åæƒ…å†µè¿è¡Œæ—¶é—´ï¼Œå¹¶ä¸”åœ¨å®è·µä¸­é«˜æ•ˆï¼šå®ƒå¯ä»¥åœ¨O(logn)æ—¶é—´å†…å®ŒæˆæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ï¼Œè¿™é‡Œçš„næ˜¯æ ‘ä¸­å…ƒç´ çš„æ•°ç›®&lt;/p&gt;
&lt;h4 id=&#34;æ€§è´¨&#34;&gt;æ€§è´¨&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯çº¢çš„ï¼Œè¦ä¹ˆæ˜¯é»‘çš„&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ ¹èŠ‚ç‚¹æ—¶é»‘è‰²çš„&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ï¼ˆå¶å­èŠ‚ç‚¹æ˜¯NILèŠ‚ç‚¹ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„ä¸¤ä¸ªå„¿å­éƒ½æ˜¯é»‘è‰²çš„ï¼ˆä»æ¯ä¸ªå¶å­åˆ°æ ¹çš„æ‰€æœ‰è·¯å¾„ä¸Šä¸èƒ½æœ‰ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹ã€‚ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰ç®€å•è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;em&gt;|&lt;/em&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014137.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;è¿™äº›çº¦æŸç¡®ä¿äº†çº¢é»‘æ ‘çš„å…³é”®ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»æ ¹åˆ°å¶å­çš„æœ€é•¿çš„å¯èƒ½è·¯å¾„ä¸å¤šäºæœ€çŸ­çš„å¯èƒ½è·¯å¾„çš„ä¸¤å€é•¿ã€‚ç»“æœæ˜¯è¿™ä¸ªæ ‘å¤§è‡´ä¸Šæ˜¯å¹³è¡¡çš„&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºæ“ä½œæ¯”å¦‚æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æŸä¸ªå€¼çš„æœ€åæƒ…å†µæ—¶é—´éƒ½è¦æ±‚ä¸æ ‘çš„é«˜åº¦æˆæ¯”ä¾‹ï¼Œè¿™ä¸ªåœ¨é«˜åº¦ä¸Šçš„ç†è®ºä¸Šé™å…è®¸çº¢é»‘æ ‘åœ¨æœ€åæƒ…å†µä¸‹éƒ½æ˜¯é«˜æ•ˆçš„ï¼Œè€Œä¸åŒäºæ™®é€šçš„äºŒå‰æŸ¥æ‰¾æ ‘ã€‚&lt;/p&gt;
&lt;p&gt;è¦çŸ¥é“ä¸ºä»€ä¹ˆè¿™äº›æ€§è´¨ç¡®ä¿äº†è¿™ä¸ªç»“æœï¼Œæ³¨æ„åˆ°æ€§è´¨4å¯¼è‡´äº†è·¯å¾„ä¸èƒ½æœ‰ä¸¤ä¸ªç›¸è¿çš„çº¢è‰²èŠ‚ç‚¹å°±è¶³å¤Ÿäº†ã€‚æœ€çŸ­çš„å¯èƒ½è·¯å¾„éƒ½æ˜¯é»‘è‰²èŠ‚ç‚¹ï¼Œæœ€é•¿çš„å¯èƒ½è·¯å¾„æœ‰äº¤æ›¿çš„çº¢è‰²å’Œé»‘è‰²èŠ‚ç‚¹ã€‚å› ä¸ºæ ¹æ®æ€§è´¨5æ‰€æœ‰æœ€é•¿çš„è·¯å¾„éƒ½æœ‰ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ï¼Œè¿™å°±è¡¨æ˜äº†æ²¡æœ‰è·¯å¾„èƒ½å¤šäºä»»ä½•å…¶ä»–è·¯å¾„çš„ä¸¤å€é•¿ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¾ˆå¤šæ ‘æ•°æ®ç»“æ„çš„è¡¨ç¤ºä¸­ï¼Œä¸€ä¸ªèŠ‚ç‚¹æœ‰å¯èƒ½åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œè€Œå¶å­èŠ‚ç‚¹åŒ…å«æ•°æ®ã€‚ç”¨è¿™ç§èŒƒä¾‹è¡¨ç¤ºçº¢é»‘æ ‘æ˜¯å¯èƒ½çš„ï¼Œä½†æ˜¯è¿™ä¼šæ”¹å˜ä¸€äº›æ€§è´¨å¹¶ä½¿ç®—æ³•å¤æ‚ã€‚ä¸ºæ­¤ï¼Œæœ¬æ–‡ä¸­æˆ‘ä»¬ä½¿ç”¨&amp;quot;nilå¶å­&amp;quot;æˆ–&amp;quot;ç©ºï¼ˆnullï¼‰å¶å­&amp;quot;ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå®ƒä¸åŒ…å«æ•°æ®è€Œåªå……å½“æ ‘åœ¨æ­¤ç»“æŸçš„æŒ‡ç¤ºã€‚è¿™äº›èŠ‚ç‚¹åœ¨ç»˜å›¾ä¸­ç»å¸¸è¢«çœç•¥ï¼Œå¯¼è‡´äº†è¿™äº›æ ‘å¥½åƒåŒä¸Šè¿°åŸåˆ™ç›¸çŸ›ç›¾ï¼Œè€Œå®é™…ä¸Šä¸æ˜¯è¿™æ ·ã€‚ä¸æ­¤æœ‰å…³çš„ç»“è®ºæ˜¯æ‰€æœ‰èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œå°½ç®¡å…¶ä¸­çš„ä¸€ä¸ªæˆ–ä¸¤ä¸ªå¯èƒ½æ˜¯ç©ºå¶å­ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ—‹è½¬&#34;&gt;æ—‹è½¬&lt;/h4&gt;
&lt;p&gt;çº¢é»‘æ ‘ä¹Ÿæ˜¯ä¸€ä¸ªç‰¹åŒ–çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ‰€ä»¥åªè¯»æ“ä½œå’Œæ™®é€šè€ŒäºŒå‰æŸ¥æ‰¾æ ‘ç›¸åŒã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æ’å…¥æˆ–åˆ é™¤ä¼šå¯¼è‡´ä¸ç¬¦åˆçº¢é»‘æ ‘æ€§è´¨ï¼Œæ‰€ä»¥éœ€è¦O(logn)çš„é¢œè‰²å˜æ›´ï¼ˆæ¯ä¸ªèŠ‚ç‚¹ä¸è¶…è¿‡ä¸‰æ¬¡æ—‹è½¬ï¼‰&lt;/p&gt;
&lt;p&gt;å¯¹äºé‡æ–°ç€è‰²ï¼Œå¹¶ä¸å›°éš¾ã€‚å¯ä»¥çœ‹ä¸€ä¸‹ã€Œæ—‹è½¬ã€æ–¹å¼ï¼š&lt;/p&gt;
&lt;h5 id=&#34;å·¦æ—‹&#34;&gt;å·¦æ—‹&lt;/h5&gt;
&lt;p&gt;&lt;em&gt;|&lt;/em&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014201.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;xå˜æˆyçš„å·¦å„¿å­ï¼Œxçš„å³å„¿å­å˜æˆyçš„å·¦å„¿å­&lt;/p&gt;
&lt;h5 id=&#34;å³æ—‹&#34;&gt;å³æ—‹&lt;/h5&gt;
&lt;p&gt;&lt;em&gt;|&lt;/em&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014205.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;xå˜æˆyçš„å³å„¿å­,xçš„å·¦å„¿å­å˜æˆyçš„å³å„¿å­&lt;/p&gt;
&lt;h4 id=&#34;æ’å…¥-1&#34;&gt;æ’å…¥&lt;/h4&gt;
&lt;p&gt;å°†çº¢é»‘æ ‘å½“ä½œä¸€é¢—äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå°†ç»“ç‚¹æ’å…¥ï¼Œæ’å…¥åï¼Œè¯¥æ ‘ä»ç„¶æ˜¯ä¸€æ£µäºŒå‰æŸ¥æ‰¾æ ‘ï¼Œä½†æ˜¯å®ƒå¯èƒ½å·²ç»ä¸æ˜¯çº¢é»‘æ ‘äº†ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å°±è¦é€šè¿‡ &amp;ldquo;æ—‹è½¬&amp;rdquo; å’Œ &amp;ldquo;é‡æ–°ç€è‰²&amp;rdquo; æ¥ä½¿å®ƒé‡æ–°æˆä¸ºçº¢é»‘æ ‘ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æŠŠæ’å…¥çš„æ–°èŠ‚ç‚¹çš„é¢œè‰²å˜æˆçº¢è‰²&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœè®¾ä¸ºé»‘è‰²ï¼Œå°±ä¼šå¯¼è‡´æ ¹åˆ°å¶å­çš„è·¯å¾„ä¸Šæœ‰ä¸€æ¡è·¯ä¸Šï¼Œå¤šä¸€ä¸ªé¢å¤–çš„é»‘èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ˜¯å¾ˆéš¾è°ƒæ•´çš„ã€‚ä½†æ˜¯è®¾ä¸ºçº¢è‰²èŠ‚ç‚¹åï¼Œå¯èƒ½ä¼šå¯¼è‡´å‡ºç°ä¸¤ä¸ªè¿ç»­çº¢è‰²èŠ‚ç‚¹çš„å†²çªï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡é¢œè‰²è°ƒæ¢å’Œæ ‘æ—‹è½¬æ¥è°ƒæ•´ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ’å…¥çš„èŠ‚ç‚¹ä¸€å…±ä¼šæœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;è¢«æ’å…¥ç»“ç‚¹æ˜¯æ ¹ç»“ç‚¹ï¼Œé‚£æˆ‘ä»¬æŠŠæ­¤ç»“ç‚¹æ¶‚ä¸ºé»‘è‰²å°±è¡Œäº†ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;è¢«æ’å…¥ç»“ç‚¹çš„çˆ¶äº²ç»“ç‚¹æ˜¯é»‘è‰²çš„ï¼Œé‚£ä¹ˆä»€ä¹ˆä¹Ÿä¸éœ€è¦åšï¼Œç»“ç‚¹è¢«æ’å…¥åï¼Œä»ç„¶æ˜¯çº¢é»‘æ ‘ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;è¢«æ’å…¥ç»“ç‚¹çš„çˆ¶äº²ç»“ç‚¹æ˜¯çº¢è‰²çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶æ˜¯è¿èƒŒ &amp;ldquo;æ€§è´¨ 3&amp;rdquo; çš„ï¼Œéœ€è¦è°ƒæ•´ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è°ƒæ•´æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;p&gt;æ­¤ç§æƒ…å†µï¼Œè¢«æ’å…¥çš„èŠ‚ç‚¹ä¸€å®šå­˜åœ¨ç¥–çˆ¶èŠ‚ç‚¹ï¼ˆçˆ¸çˆ¸çš„çˆ¸çˆ¸ï¼‰ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºå…­ç§æƒ…å†µï¼Œç”±äºæ¶‰åŠé•œåƒæ“ä½œï¼Œå¯ä»¥åˆ†æˆä¸‰ç§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Case 1 ï¼šå½“å‰ç»“ç‚¹çš„çˆ¶äº²æ˜¯çº¢è‰²ï¼Œå”å”å­˜åœ¨ä¸”ä¹Ÿæ˜¯çº¢è‰²&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;|&lt;/em&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014224.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å›¾ä¸­ï¼Œ&amp;ldquo;ç»“ç‚¹ 1&amp;rdquo; ä¸º &amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo;ã€‚é‚£ä¹ˆæˆ‘ä»¬çš„å¤„ç†ç­–ç•¥å°±æ˜¯ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;çˆ¶äº²ç»“ç‚¹&amp;rdquo; æ”¹ä¸ºé»‘è‰²ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;å”å”ç»“ç‚¹&amp;rdquo; æ”¹ä¸ºé»‘è‰²ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;ç¥–çˆ¶ç»“ç‚¹&amp;rdquo; æ”¹ä¸ºçº¢è‰²ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;ç¥–çˆ¶ç»“ç‚¹&amp;rdquo; è®¾ä¸º &amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo;ï¼Œç»§ç»­è¿›è¡Œæ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¤„ç†å®Œåï¼Œå›¾ä¸­æ˜¾ç¤ºçš„ä¸¤æ¡è·¯å¾„ä¸Šï¼Œé»‘è‰²ç»“ç‚¹æ•°ç›¸åŒä¸”å’ŒåŸå›¾æ•°ç›®ä¸€è‡´ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Case 2ï¼šå½“å‰ç»“ç‚¹çš„çˆ¶äº²æ˜¯çº¢è‰²ï¼Œå”å”ä¸å­˜åœ¨æˆ–æ˜¯é»‘è‰²ï¼Œä¸”å½“å‰ç»“ç‚¹æ˜¯å…¶çˆ¶äº²çš„å³å­©å­&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;|&lt;/em&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014231.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å›¾ä¸­ï¼Œ&amp;ldquo;ç»“ç‚¹ 2&amp;rdquo; ä¸º &amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo;ã€‚é‚£ä¹ˆæˆ‘ä»¬çš„å¤„ç†ç­–ç•¥å°±æ˜¯ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;çˆ¶äº²ç»“ç‚¹&amp;rdquo; è®¾ä¸º &amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo;ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;ä»¥æ–°çš„ &amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo; ä¸ºæ”¯ç‚¹è¿›è¡Œå·¦æ—‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¤„ç†å®Œä¸Šè¿°æ“ä½œä¹‹åï¼Œä»ç„¶å‘ç°ä¸æ»¡è¶³çº¢é»‘æ ‘çš„æ€§è´¨ï¼Œè¿™å°±æ˜¯ä¸‹ä¸€æ¡ Case&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Case 3ï¼šå½“å‰ç»“ç‚¹çš„çˆ¶äº²æ˜¯çº¢è‰²ï¼Œå”å”ä¸å­˜åœ¨æˆ–æ˜¯é»‘è‰²ï¼Œä¸”å½“å‰ç»“ç‚¹æ˜¯å…¶çˆ¶äº²çš„å·¦å­©å­&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;|&lt;/em&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014236.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å›¾ä¸­ï¼Œ&amp;ldquo;ç»“ç‚¹ 1&amp;rdquo; ä¸º &amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo;ã€‚é‚£ä¹ˆæˆ‘ä»¬çš„å¤„ç†ç­–ç•¥å°±æ˜¯ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;çˆ¶äº²ç»“ç‚¹&amp;rdquo; æ”¹ä¸ºé»‘è‰²ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;ç¥–çˆ¶ç»“ç‚¹&amp;rdquo; æ”¹ä¸ºçº¢è‰²ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;ä»¥ &amp;ldquo;ç¥–çˆ¶ç»“ç‚¹&amp;rdquo; ä¸ºæ”¯ç‚¹è¿›è¡Œå³æ—‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¤„ç†å®Œåï¼Œå›¾ä¸­æ˜¾ç¤ºçš„ä¸¤æ¡è·¯å¾„ä¸Šï¼Œé»‘è‰²ç»“ç‚¹æ•°ç›¸åŒä¸”å’ŒåŸå›¾æ•°ç›®ä¸€è‡´ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åˆ é™¤-1&#34;&gt;åˆ é™¤&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;é¦–å…ˆ&lt;/strong&gt;ï¼Œå’Œåˆ é™¤ä¸€æ£µæ™®é€šäºŒå‰æŸ¥æ‰¾æ ‘çš„ç»“ç‚¹ç›¸åŒï¼Œæˆ‘ä»¬ä¼šé‡åˆ°ä¸‰ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&amp;ldquo;è¢«åˆ ç»“ç‚¹&amp;rdquo; æ²¡æœ‰å­©å­ï¼Œå¦‚æœå®ƒæ˜¯çº¢è‰²çš„ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥åˆ é™¤ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&amp;ldquo;è¢«åˆ ç»“ç‚¹&amp;rdquo; åªæœ‰ä¸€ä¸ªå­©å­ï¼Œé‚£ä¹ˆåˆ é™¤è¯¥ç»“ç‚¹åï¼Œç”¨è¿™ä¸ªå­©å­å»æ›¿æ¢å®ƒå³å¯ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&amp;ldquo;è¢«åˆ ç»“ç‚¹&amp;rdquo; æœ‰ä¸¤ä¸ªå­©å­ï¼Œé‚£ä¹ˆå…ˆæ‰¾å‡ºå®ƒçš„ &amp;ldquo;åç»§ç»“ç‚¹&amp;rdquo;ï¼Œç„¶åç”¨ &amp;ldquo;åç»§ç»“ç‚¹&amp;rdquo; å»æ›¿æ¢ &amp;ldquo;è¢«åˆ ç»“ç‚¹&amp;rdquo;ï¼ŒæŠŠé—®é¢˜è½¬åŒ–ä¸ºåˆ é™¤ &amp;ldquo;åç»§ç»“ç‚¹&amp;rdquo; ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ &amp;ldquo;åç»§ç»“ç‚¹&amp;rdquo; æ‰æ˜¯çœŸæ­£çš„ &amp;ldquo;è¢«åˆ ç»“ç‚¹&amp;rdquo;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æ¥ç€&lt;/strong&gt;ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ &amp;ldquo;åŸå…ˆç»“ç‚¹&amp;rdquo; è¢«åˆ æ‰åï¼Œä¼šé‡åˆ°å“ªå‡ ç§æƒ…å†µï¼Œåˆ†æå‘ç°ï¼Œä¸€å…±æœ‰å››ç§ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&amp;ldquo;åŸå…ˆç»“ç‚¹&amp;rdquo; ä¸ºé»‘è‰²ï¼Œ&amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo; ä¸ºçº¢è‰²ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠ &amp;ldquo;åŸå…ˆç»“ç‚¹&amp;rdquo; åˆ æ‰åï¼Œæ‹¿ &amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo; å»æ›¿æ¢å®ƒï¼Œå¹¶ä¿®æ”¹é¢œè‰²ä¸ºé»‘è‰²å³å¯ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&amp;ldquo;åŸå…ˆç»“ç‚¹&amp;rdquo; ä¸ºé»‘è‰²ï¼Œ&amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo; ä¸ºé»‘è‰²ï¼Œè¿™ç§æƒ…å†µæ¯”è¾ƒå¤æ‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&amp;ldquo;åŸå…ˆç»“ç‚¹&amp;rdquo; ä¸ºçº¢è‰²ï¼Œ&amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo; ä¸ºçº¢è‰²ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠ &amp;ldquo;åŸå…ˆç»“ç‚¹&amp;rdquo; åˆ æ‰åï¼Œç›´æ¥æ‹¿&amp;quot;å½“å‰ç»“ç‚¹&amp;quot; å»æ›¿æ¢å®ƒå³å¯ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&amp;ldquo;åŸå…ˆç»“ç‚¹&amp;rdquo; ä¸ºçº¢è‰²ï¼Œ&amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo; ä¸ºé»‘è‰²ï¼Œè¿™å’Œ &amp;ldquo;æƒ…å†µ 3&amp;rdquo; ä¸€æ ·ï¼Œç›´æ¥æ‹¿&amp;quot;å½“å‰ç»“ç‚¹&amp;quot; å»æ›¿æ¢å®ƒå³å¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æœ€å&lt;/strong&gt;ï¼Œå¯¹äºä¸Šè¿°çš„ &amp;ldquo;æƒ…å†µ 2&amp;rdquo;ã€‚è¿™ç§æƒ…å†µå¯ä»¥è¿›ä¸€æ­¥å†åˆ’åˆ†ä¸º 8 ç§æƒ…å†µï¼Œå› ä¸ºæ¶‰åŠåˆ°é•œåƒæ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€ç†è§£å…¶ä¸­ä¸€è¾¹é•œåƒçš„ 4 ç§æƒ…å†µå³å¯ï¼ˆæ³¨æ„ï¼Œä¸‹é¢çš„å›¾ç‰‡ä¸Šï¼Œ&amp;ldquo;åŸå…ˆç»“ç‚¹&amp;rdquo; å·²è¢«åˆ é™¤ï¼Œæ•…æœªç”»å‡ºï¼Œåªç”»å‡ºäº† &amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo; ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Case 1ï¼šå½“å‰ç»“ç‚¹æ˜¯é»‘è‰²ï¼Œå…„å¼Ÿç»“ç‚¹æ˜¯çº¢è‰²&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;|&lt;/em&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014252.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&amp;ldquo;ç»“ç‚¹ 1&amp;rdquo; ä¸º &amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo;ã€‚è§‚å¯Ÿä¸Šå›¾ï¼Œå›  &amp;ldquo;åŸå…ˆç»“ç‚¹&amp;rdquo; å·²è¢«åˆ é™¤ï¼Œæ•…è·¯å¾„2-&amp;gt;1ä¸Šå°‘äº†ä¸€ä¸ªé»‘è‰²ç»“ç‚¹ï¼ˆå³ä¾§è·¯å¾„çš„é»‘è‰²ç»“ç‚¹æœªç”»å®Œå…¨ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å¤„ç†ç­–ç•¥å°±æ˜¯ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;å…„å¼Ÿç»“ç‚¹&amp;rdquo; æ”¹ä¸ºé»‘è‰²ï¼›ä¹Ÿå°±æ˜¯æŠŠä¸Šå›¾ä¸­ 4 å˜é»‘&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;çˆ¶äº²ç»“ç‚¹&amp;rdquo; æ”¹ä¸ºçº¢è‰²ï¼›ä¹Ÿå°±æ˜¯æŠŠ 2 å˜çº¢&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;ä»¥ &amp;ldquo;çˆ¶äº²ç»“ç‚¹&amp;rdquo; ä¸ºæ”¯ç‚¹è¿›è¡Œå·¦æ—‹ï¼›ä»¥ 2 ä¸ºæ”¯ç‚¹è¿›è¡Œå·¦æ—‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å·¦æ—‹åï¼Œé‡æ–°è®¾ç½® &amp;ldquo;å…„å¼Ÿç»“ç‚¹&amp;rdquo;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¤„ç†å®Œåï¼Œæˆ‘ä»¬å‘ç°ä¾æ—§æœ‰ 2 ä¸ªé»‘è‰²ç»“ç‚¹ï¼Œè¯´æ˜å½“å‰çŠ¶æ€å¹¶ä¸æ»¡è¶³çº¢é»‘æ ‘æ€§è´¨ã€‚å…¶å®ï¼Œè¿™æ˜¯è¿›å…¥äº†ä¸‹é¢çš„ Case 2ï¼ŒCase 3ï¼Œå’Œ Case 4 é˜¶æ®µäº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Case 2ï¼šå½“å‰ç»“ç‚¹æ˜¯é»‘è‰²ï¼Œå…„å¼Ÿç»“ç‚¹æ˜¯é»‘è‰²ï¼Œä¸¤ä¸ªå­©å­ä¸ºç©ºæˆ–æ˜¯é»‘è‰²&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;|&lt;/em&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014255.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&amp;ldquo;ç»“ç‚¹ 1&amp;rdquo; ä¸º &amp;ldquo;å½“å‰èŠ‚ç‚¹&amp;rdquo;ã€‚å¦‚ä¸Šå›¾ï¼Œå›  &amp;ldquo;åŸå…ˆç»“ç‚¹&amp;rdquo; å·²è¢«åˆ é™¤ï¼Œæ•…è·¯å¾„2-&amp;gt;1ä¸Šå°‘äº†ä¸€ä¸ªé»‘è‰²ç»“ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å¤„ç†ç­–ç•¥å°±æ˜¯ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;å…„å¼Ÿç»“ç‚¹&amp;rdquo; æ”¹ä¸ºçº¢è‰²ï¼›å°±æ˜¯æŠŠ 4 å˜çº¢&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;çˆ¶äº²ç»“ç‚¹&amp;rdquo; è®¾ç½®ä¸ºæ–°çš„ &amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo;ï¼Œç»§ç»­è¿›è¡Œæ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¤„ç†å®Œåï¼Œæˆ‘ä»¬å‘ç°å½“å‰çŠ¶æ€ä¸æ»¡è¶³çº¢é»‘æ ‘æ€§è´¨ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°åªè¦æŠŠ &amp;ldquo;ç»“ç‚¹ 2&amp;rdquo; ç€è‰²ä¸ºé»‘è‰²ä¸å°±è¡Œäº†ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Case 3ï¼šå½“å‰ç»“ç‚¹æ˜¯é»‘è‰²ï¼Œå…„å¼Ÿç»“ç‚¹æ˜¯é»‘è‰²ï¼Œå…„å¼Ÿç»“ç‚¹çš„å·¦å­©å­æ˜¯çº¢è‰²ï¼Œå³å­©å­ä¸ºç©ºæˆ–æ˜¯é»‘è‰²&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;|&lt;/em&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014300.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&amp;ldquo;ç»“ç‚¹ 1&amp;rdquo; ä¸º &amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo;ã€‚è§‚å¯Ÿä¸Šå›¾ï¼Œå›  &amp;ldquo;åŸå…ˆç»“ç‚¹&amp;rdquo; å·²è¢«åˆ é™¤ï¼Œæ•…è·¯å¾„2-&amp;gt;1ä¸Šå°‘äº†ä¸€ä¸ªé»‘è‰²ç»“ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å¤„ç†ç­–ç•¥å°±æ˜¯ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;å…„å¼Ÿç»“ç‚¹&amp;rdquo; çš„å·¦å­©å­æ”¹ä¸ºé»‘è‰²ï¼›å°±æ˜¯å°† 3 å˜é»‘&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;å…„å¼Ÿç»“ç‚¹&amp;rdquo; æ”¹ä¸ºçº¢è‰²ï¼› å°† 4 å˜çº¢&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;ä»¥ &amp;ldquo;å…„å¼Ÿç»“ç‚¹&amp;rdquo; ä¸ºæ”¯ç‚¹è¿›è¡Œå³æ—‹ï¼› ä»¥ 4 ä¸ºæ”¯ç‚¹å³æ—‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å³æ—‹åï¼Œé‡æ–°è®¾ç½® &amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo; çš„ &amp;ldquo;å…„å¼Ÿç»“ç‚¹&amp;rdquo;ã€‚ 3 å˜æˆäº†æ–°çš„å…„å¼ŸèŠ‚ç‚¹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¤„ç†å®Œåï¼Œæˆ‘ä»¬å‘ç°å›¾ä¸­2-&amp;gt;1ä¸Šè¿˜æ˜¯åªæœ‰ 1 ä¸ªé»‘è‰²ç»“ç‚¹ï¼Œè¯´æ˜å½“å‰çŠ¶æ€ä¸æ»¡è¶³çº¢é»‘æ ‘æ€§è´¨ã€‚å…¶å®è¿™æ˜¯è¿›å…¥äº†Case 4&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Case 4ï¼šå½“å‰ç»“ç‚¹æ˜¯é»‘è‰²ï¼Œå…„å¼Ÿç»“ç‚¹æ˜¯é»‘è‰²ï¼Œå…„å¼Ÿç»“ç‚¹çš„å³å­©å­æ˜¯çº¢è‰²ï¼Œå·¦å­©å­ä¸ºç©ºæˆ–çº¢é»‘çš†å¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;|&lt;/em&gt;&lt;img src=&#34;https://image-1252109614.cos.ap-beijing.myqcloud.com/img/20200828014306.png&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&amp;ldquo;ç»“ç‚¹ 1&amp;rdquo; ä¸º &amp;ldquo;å½“å‰ç»“ç‚¹&amp;rdquo;ã€‚è§‚å¯Ÿä¸Šå›¾ï¼Œå›  &amp;ldquo;åŸå…ˆç»“ç‚¹&amp;rdquo; å·²è¢«åˆ é™¤ï¼Œæ•…è·¯å¾„ 2-&amp;gt;1 ä¸Šå°‘äº†ä¸€ä¸ªé»‘è‰²ç»“ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å¤„ç†ç­–ç•¥å°±æ˜¯ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;çˆ¶äº²ç»“ç‚¹&amp;rdquo; çš„é¢œè‰²èµ‹ç»™ &amp;ldquo;å…„å¼Ÿç»“ç‚¹&amp;rdquo;ï¼›æŠŠ 2 çš„é¢œè‰²ç»™ 4 ï¼Œç›¸å½“äºæŠŠ 4 å˜çº¢&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;çˆ¶äº²ç»“ç‚¹&amp;rdquo; æ”¹ä¸ºé»‘è‰²ï¼› æŠŠ 2 å˜é»‘&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;å°† &amp;ldquo;å…„å¼Ÿç»“ç‚¹&amp;rdquo; çš„å³å­©å­æ”¹ä¸ºé»‘è‰²ï¼› æŠŠ 5 å˜é»‘&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;ä»¥ &amp;ldquo;çˆ¶äº²ç»“ç‚¹&amp;rdquo; ä¸ºæ”¯ç‚¹è¿›è¡Œå·¦æ—‹ï¼› ä»¥ 2 ä¸ºæ”¯ç‚¹è¿›è¡Œå·¦æ—‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ¯”è¾ƒ&#34;&gt;æ¯”è¾ƒ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å¯¹äº AVL æ ‘ï¼Œåœ¨æ’å…¥æˆ–åˆ é™¤æ“ä½œåï¼Œéƒ½è¦åˆ©ç”¨é€’å½’çš„å›æº¯ï¼Œå»ç»´æŠ¤ä»è¢«åˆ ç»“ç‚¹åˆ°æ ¹ç»“ç‚¹è¿™æ¡è·¯å¾„ä¸Šçš„æ‰€æœ‰ç»“ç‚¹çš„å¹³è¡¡æ€§ï¼Œå›æº¯çš„é‡çº§æ˜¯éœ€è¦ O(logn) çš„ï¼Œå…¶ä¸­æ’å…¥æ“ä½œæœ€å¤šéœ€è¦ä¸¤æ¬¡æ—‹è½¬ï¼Œåˆ é™¤æ“ä½œå¯èƒ½æ˜¯ 1 æ¬¡ã€2 æ¬¡æˆ– 2 æ¬¡ä»¥ä¸Šã€‚è€Œçº¢é»‘æ ‘åœ¨ æ’å…¥çš„æ—¶å€™æœ€å¤šéœ€è¦ 2 æ¬¡æ—‹è½¬ï¼Œåœ¨ rebalance çš„æ—¶å€™æœ€å¤šä¹Ÿåªéœ€è¦ 3 æ¬¡æ—‹è½¬ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¶æ¬¡ï¼ŒAVL æ ‘çš„ç»“æ„ç›¸è¾ƒçº¢é»‘æ ‘æ¥è¯´æ›´ä¸ºå¹³è¡¡ï¼Œæ•…åœ¨æ’å…¥å’Œåˆ é™¤ç»“ç‚¹æ—¶æ›´å®¹æ˜“å¼•èµ·ä¸å¹³è¡¡ã€‚å› æ­¤åœ¨å¤§é‡æ•°æ®éœ€è¦æ’å…¥æˆ–è€…åˆ é™¤æ—¶ï¼ŒAVL æ ‘éœ€è¦ rebalance çš„é¢‘ç‡ä¼šæ›´é«˜ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œçº¢é»‘æ ‘çš„æ•ˆç‡ä¼šæ›´é«˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å†…æ ¸ä¸­çš„å®ç°&#34;&gt;å†…æ ¸ä¸­çš„å®ç°&lt;/h2&gt;
&lt;p&gt;å†…æ ¸ä¸­çš„å®ç°ï¼Œå®šä¹‰åœ¨ include/linux/rbtree.h ä¸­ï¼Œå®ç°åœ¨ lib/rbtree.c ã€‚&lt;/p&gt;
&lt;h3 id=&#34;èŠ‚ç‚¹å®šä¹‰-1&#34;&gt;èŠ‚ç‚¹å®šä¹‰&lt;/h3&gt;
&lt;p&gt;include/linux/rbtree.h 100è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; rb_node
{
  &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt;  rb_parent_color;
&lt;span style=&#34;color:#1e889b&#34;&gt;#define RB_RED    0
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#define RB_BLACK   1
&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; rb_node *rb_right;
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; rb_node *rb_left;
} __attribute__((aligned(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;sizeof&lt;/span&gt;(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt;))));
  &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;*/\&lt;/span&gt;* The alignment might seem pointless, but allegedly CRIS needs it &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\*/&lt;/span&gt;*
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; rb_root
{
  &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; rb_node *rb_node;
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ ¹èŠ‚ç‚¹ç”± rb_root å®šä¹‰ï¼Œç»™å®šä¸€ä¸ª rb_node ã€‚å¯ä»¥é€šè¿‡è·Ÿè¸ªåŒåèŠ‚ç‚¹æŒ‡é’ˆæ¥æ‰¾åˆ°ä»–çš„å·¦å³å­èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#228b22&#34;&gt;// include/linux/rbtree.h 133è¡Œ é€šè¿‡æŒ‡é’ˆå¯»æ‰¾è¿™ä¸ªç»“æ„çš„åœ°å€
&lt;/span&gt;&lt;span style=&#34;color:#228b22&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#1e889b&#34;&gt;#define rb_entry(*ptr*, *type*, *member*) container_of(ptr, type, member)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;æ“ä½œ&#34;&gt;æ“ä½œ&lt;/h3&gt;
&lt;p&gt;å¼•ç”¨ä¸€æ®µä»£ç æ³¨é‡Šï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt; *linux/include/linux/rbtree.h*
 *To* *use* *rbtrees you**&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;&amp;#39;&lt;/span&gt;ll have to implement your own insert and search cores.*
 *This will avoid us to* *use* *callbacks* *and* *to* *drop* *drammatically performances.*
 *I know it&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;&amp;#39;&lt;/span&gt;s not the cleaner way,  but in C (not in C++) to get*
 *performances and genericity...*
 *Some example of* *insert* *and* *search* *follows* *here. The* *search* *is* *a plain*
 *normal search over an ordered tree. The* *insert* *instead must be implemented*
 *in two steps: First, the code must* *insert* *the* *element* *in* *order* *as* *a red leaf*
 *in the tree, and then the support library function rb_insert_color() must*
 *be called. Such function will* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;do&lt;/span&gt;* *the* *not* *trivial* *work* *to* *rebalance the*
 *rbtree, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; necessary.*
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Rbtree ä¸­å¹¶æ²¡æœ‰æä¾›æœç´¢å’Œæ’å…¥ä¾‹ç¨‹ï¼Œè¿™äº›å†ç¨‹å¸Œæœ›ç”± rbtree çš„ç”¨æˆ·è‡ªå·±å®šä¹‰ã€‚è¿™æ˜¯å› ä¸ºCè¯­è¨€ä¸å¤ªå®¹æ˜“è¿›è¡Œæ³›å‹ç¼–ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;æºç ä¸­ä¹Ÿæä¾›äº†ä½¿ç”¨å†…æ ¸ä¸­çº¢é»‘æ ‘çš„ä¾‹ç¨‹ï¼š&lt;/p&gt;
&lt;p&gt;include/linux/rbtree.h 34è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;*&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt;* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt;* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; page ** *rb_search_page_cache**(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; inode &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\&lt;/span&gt;* inode,*
             *&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt;* *&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt;* *offset)*
*{*
  *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;* *rb_node* *** *n* *=* *inode**-&amp;gt;**i_rb_page_cache**.**rb_node**;*
  *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;* *page* *** *page**;*
  *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt;* *(n)*
  *{*
    *page = rb_entry(n, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; page, rb_page_cache);*
    *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt;* *(offset &amp;lt; page-&amp;gt;offset)*
      *n = n-&amp;gt;rb_left;*
    *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;else&lt;/span&gt;* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt;* *(offset &amp;gt; page-&amp;gt;offset)*
      *n = n-&amp;gt;rb_right;*
    *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;else&lt;/span&gt;*
      *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;* *page;*
  *}*
  *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;* *&lt;span style=&#34;color:#658b00&#34;&gt;NULL&lt;/span&gt;**;*
*}*
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸Šé¢çš„ä¾‹å­å®ç°äº†ï¼Œåœ¨é¡µé«˜é€Ÿç¼“å­˜ä¸­æœç´¢ä¸€ä¸ªæ–‡ä»¶åŒºï¼ˆç”±ä¸€ä¸ªièŠ‚ç‚¹å’Œä¸€ä¸ªåç§»é‡å…±åŒæè¿°ï¼‰ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰è‡ªå·±çš„ rbtree ï¼Œè¯¥å‡½æ•°å°†æœç´¢ç»™å®šèŠ‚ç‚¹içš„rbtreeï¼Œä»¥å¯»æ‰¾åŒ¹é…çš„åç§»å€¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;*&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt;* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt;* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;* *page* ** __**rb_insert_page_cache**(**&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;* *inode* *** *inode**,*
              *&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt;* *&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt;* *offset,*
              *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;* *rb_node* *** *node**)*
*{*
  *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;* *rb_node* **** *p* *= &amp;amp;**inode**-&amp;gt;**i_rb_page_cache**.**rb_node**;*
  *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;* *rb_node* *** *parent* *=* *&lt;span style=&#34;color:#658b00&#34;&gt;NULL&lt;/span&gt;**;*
  *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;* *page* *** *page**;*
  *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt;* *(&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\&lt;/span&gt;*p)*
  *{*
    *parent = &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\&lt;/span&gt;*p;*
    *page = rb_entry(parent, &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; page, rb_page_cache);*
    *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt;* *(offset &amp;lt; page-&amp;gt;offset)*
      *p = &amp;amp;(&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\&lt;/span&gt;*p)-&amp;gt;rb_left;*
    *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;else&lt;/span&gt;* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt;* *(offset &amp;gt; page-&amp;gt;offset)*
      *p = &amp;amp;(&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\&lt;/span&gt;*p)-&amp;gt;rb_right;*
    *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;else&lt;/span&gt;*
      *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;* *page;*
  *}*
  *rb_link_node(node, parent, p);*
  *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;* *&lt;span style=&#34;color:#658b00&#34;&gt;NULL&lt;/span&gt;**;*
*}*
*&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;static&lt;/span&gt;* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;inline&lt;/span&gt;* *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; page ** *rb_insert_page_cache**(&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt; inode &lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;\&lt;/span&gt;* inode,*
             *&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;unsigned&lt;/span&gt;* *&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;long&lt;/span&gt;* *offset,*
             *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;* *rb_node* *** *node**)*
*{*
  *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;struct&lt;/span&gt;* *page* *** *ret**;*
  *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt;* *((ret = __rb_insert_page_cache(inode, offset, node)))*
    *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;goto&lt;/span&gt;* *out;*
  *&lt;span style=&#34;color:#008b45&#34;&gt;rb_insert_color&lt;/span&gt;(node, &amp;amp;inode-&amp;gt;i_rb_page_cache);*
 *out:*
  *&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt;* *ret;*
*}*
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ’å…¥æ“ä½œæ ¹æ® offseté€‰æ‹©æ’å…¥æ–¹å‘ï¼Œå‡½æ•°å¸Œæœ›æ‰¾ä¸åˆ°åŒ¹é…çš„offsetï¼Œå› ä¸ºä»–æƒ³è¦æ‰¾åˆ°çš„æ˜¯æ–° offset è¦æ’å…¥çš„å¶å­èŠ‚ç‚¹ï¼Œç„¶åç”¨ rb_link_node() åœ¨ç»™å®šä½ç½®æ’å…¥æ–°èŠ‚ç‚¹ï¼Œæ’å…¥ä¹‹åå†è°ƒç”¨å‡½æ•°è¿›è¡Œå¤æ‚çš„çº¢é»‘æ ‘å¹³è¡¡è¿‡ç¨‹ï¼Œå¦‚æœé¡µè¢«åŠ å…¥æˆåŠŸï¼Œåˆ™è¿”å›NULLï¼Œå¦åˆ™è¿”å›å·²ç»å­˜åœ¨çš„é¡µåœ°å€&lt;/p&gt;
&lt;h1 id=&#34;æ•°æ®ç»“æ„çš„é€‰æ‹©&#34;&gt;æ•°æ®ç»“æ„çš„é€‰æ‹©&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœå¯¹æ•°æ®é›†åˆçš„ä¸»è¦æ“ä½œæ˜¯éå†æ•°æ®ï¼Œé‚£å°±ä½¿ç”¨é“¾è¡¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœä»£ç ç¬¦åˆ ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼ï¼Œå°±ä½¿ç”¨é˜Ÿåˆ—&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœéœ€è¦æ˜ å°„ä¸€ä¸ª UID åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£å°±ä½¿ç”¨æ˜ å°„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœéœ€è¦å­˜å‚¨å¤§é‡æ•°æ®å—ï¼Œå¹¶ä¸”éœ€è¦æ£€ç´¢å¿«é€Ÿï¼Œå°±ç”¨çº¢é»‘æ ‘ã€‚æ’å…¥åˆ é™¤å¤æ‚åº¦éƒ½æ˜¯O(logn)çš„&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;æ€è€ƒ&#34;&gt;æ€è€ƒ&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;å†…æ ¸ä¸­ä¸æ˜¯æŠŠå°†æ•°æ®ç»“æ„å¡å…¥é“¾è¡¨ï¼Œè€Œæ˜¯å°†é“¾è¡¨èŠ‚ç‚¹å¡å…¥æ•°æ®ç»“æ„ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç­”ï¼šä¸€æ¡é“¾è¡¨å¯ä»¥ä¸²è”èµ·å¤šä¸ªä¸åŒå¯¹è±¡ï¼Œæ¯”è¾ƒçµæ´»&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;AVLæ ‘ä¹Ÿæ˜¯å¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼Œä¸ºä»€ä¹ˆé€‰ç”¨äº†çº¢é»‘æ ‘è€Œä¸æ˜¯AVL?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç­”ï¼šDocumentation/rbtree.txtä¸­ç¬¬16è¡Œæåˆ°ï¼šçº¢é»‘æ ‘ç±»ä¼¼äºAVLæ ‘ï¼Œä½†æä¾›æ›´å¿«çš„å®æ—¶æ€§æ’å…¥å’Œåˆ é™¤çš„æœ‰ç•Œæœ€åæƒ…å†µæ€§èƒ½ï¼ˆæœ€å¤šä¸¤ä¸ªåˆ†åˆ«æ—‹è½¬å’Œä¸‰æ¬¡æ—‹è½¬ä»¥å¹³è¡¡æ ‘ï¼‰ã€‚æŸ¥æ‰¾æ—¶é—´ç¨æ…¢ï¼ˆä½†ä»ä¸ºOï¼ˆlog nï¼‰ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;çº¢é»‘æ ‘ä¸§å¤±äº†éƒ¨åˆ†å¹³è¡¡æ€§ï¼Œæ¥ä¿è¯æ—‹è½¬çš„æ¬¡æ•°ï¼Œæ€»ä½“æ¥è¯´ï¼Œæ€§èƒ½æ›´å¥½&lt;/p&gt;
&lt;h1 id=&#34;å…¶ä»–&#34;&gt;å…¶ä»–&lt;/h1&gt;
&lt;p&gt;å†…æ ¸çš„æ–‡ä»¶ç›®å½•ä¸­ï¼Œæœ‰ä¸­æ–‡æ–‡æ¡£ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/torvalds/linux/tree/master/Documentation/translations/zh_CN/process&#34;&gt;https://github.com/torvalds/linux/tree/master/Documentation/translations/zh_CN/process&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ï¼Œè¿™é‡Œæœ‰å†…æ ¸è§„å®šçš„ä»£ç é£æ ¼ä¸­æ–‡ç‰ˆï¼šhttps://github.com/torvalds/linux/blob/master/Documentation/translations/zh_CN/process/coding-style.rst&lt;/p&gt;
&lt;h1 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.cnblogs.com/yangguang-it/p/11667772.html&#34;&gt;Linuxå†…æ ¸é“¾è¡¨â€”â€”çœ‹è¿™ä¸€ç¯‡æ–‡ç« å°±å¤Ÿäº†&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E7%BA%A2%E9%BB%91%E6%A0%91&#34;&gt;ç»´åŸºç™¾ç§‘ï¼šçº¢é»‘æ ‘&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
- https://caixiongjiang.github.io/blog/2020/linux%E5%86%85%E6%A0%B8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ - </description>
        </item>
    
    
    
        <item>
        <title>LeetCode 332 é‡æ–°å®‰æ’è¡Œç¨‹(è¾“å‡ºæ¬§æ‹‰è·¯ç»)</title>
        <link>https://caixiongjiang.github.io/blog/2020/leetcode-332-%E9%87%8D%E6%96%B0%E5%AE%89%E6%8E%92%E8%A1%8C%E7%A8%8B%E8%BE%93%E5%87%BA%E6%AC%A7%E6%8B%89%E8%B7%AF%E7%BB%8F/</link>
        <pubDate>Thu, 27 Aug 2020 02:00:55 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2020/leetcode-332-%E9%87%8D%E6%96%B0%E5%AE%89%E6%8E%92%E8%A1%8C%E7%A8%8B%E8%BE%93%E5%87%BA%E6%AC%A7%E6%8B%89%E8%B7%AF%E7%BB%8F/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2020/leetcode-332-%E9%87%8D%E6%96%B0%E5%AE%89%E6%8E%92%E8%A1%8C%E7%A8%8B%E8%BE%93%E5%87%BA%E6%AC%A7%E6%8B%89%E8%B7%AF%E7%BB%8F/ -&lt;p&gt;é¢˜ç›®é“¾æ¥ï¼š&lt;a href=&#34;https://leetcode-cn.com/problems/reconstruct-itinerary/&#34;&gt;é‡æ–°å®‰æ’è¡Œç¨‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæœºç¥¨çš„å­—ç¬¦ä¸²äºŒç»´æ•°ç»„ &lt;code&gt;[from, to]&lt;/code&gt;ï¼Œå­æ•°ç»„ä¸­çš„ä¸¤ä¸ªæˆå‘˜åˆ†åˆ«è¡¨ç¤ºé£æœºå‡ºå‘å’Œé™è½çš„æœºåœºåœ°ç‚¹ï¼Œå¯¹è¯¥è¡Œç¨‹è¿›è¡Œé‡æ–°è§„åˆ’æ’åºã€‚æ‰€æœ‰è¿™äº›æœºç¥¨éƒ½å±äºä¸€ä¸ªä» JFKï¼ˆè‚¯å°¼è¿ªå›½é™…æœºåœºï¼‰å‡ºå‘çš„å…ˆç”Ÿï¼Œæ‰€ä»¥è¯¥è¡Œç¨‹å¿…é¡»ä» JFK å¼€å§‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯´æ˜:&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚æœå­˜åœ¨å¤šç§æœ‰æ•ˆçš„è¡Œç¨‹ï¼Œä½ å¯ä»¥æŒ‰å­—ç¬¦è‡ªç„¶æ’åºè¿”å›æœ€å°çš„è¡Œç¨‹ç»„åˆã€‚ä¾‹å¦‚ï¼Œè¡Œç¨‹ [&amp;ldquo;JFK&amp;rdquo;, &amp;ldquo;LGA&amp;rdquo;] ä¸ [&amp;ldquo;JFK&amp;rdquo;, &amp;ldquo;LGB&amp;rdquo;] ç›¸æ¯”å°±æ›´å°ï¼Œæ’åºæ›´é å‰&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰çš„æœºåœºéƒ½ç”¨ä¸‰ä¸ªå¤§å†™å­—æ¯è¡¨ç¤ºï¼ˆæœºåœºä»£ç ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å‡å®šæ‰€æœ‰æœºç¥¨è‡³å°‘å­˜åœ¨ä¸€ç§åˆç†çš„è¡Œç¨‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 1:&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥: [[&amp;quot;MUC&amp;quot;, &amp;quot;LHR&amp;quot;], [&amp;quot;JFK&amp;quot;, &amp;quot;MUC&amp;quot;], [&amp;quot;SFO&amp;quot;, &amp;quot;SJC&amp;quot;], [&amp;quot;LHR&amp;quot;, &amp;quot;SFO&amp;quot;]]
è¾“å‡º: [&amp;quot;JFK&amp;quot;, &amp;quot;MUC&amp;quot;, &amp;quot;LHR&amp;quot;, &amp;quot;SFO&amp;quot;, &amp;quot;SJC&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 2:&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥: [[&amp;quot;JFK&amp;quot;,&amp;quot;SFO&amp;quot;],[&amp;quot;JFK&amp;quot;,&amp;quot;ATL&amp;quot;],[&amp;quot;SFO&amp;quot;,&amp;quot;ATL&amp;quot;],[&amp;quot;ATL&amp;quot;,&amp;quot;JFK&amp;quot;],[&amp;quot;ATL&amp;quot;,&amp;quot;SFO&amp;quot;]]
è¾“å‡º: [&amp;quot;JFK&amp;quot;,&amp;quot;ATL&amp;quot;,&amp;quot;JFK&amp;quot;,&amp;quot;SFO&amp;quot;,&amp;quot;ATL&amp;quot;,&amp;quot;SFO&amp;quot;]
è§£é‡Š: å¦ä¸€ç§æœ‰æ•ˆçš„è¡Œç¨‹æ˜¯ [&amp;quot;JFK&amp;quot;,&amp;quot;SFO&amp;quot;,&amp;quot;ATL&amp;quot;,&amp;quot;JFK&amp;quot;,&amp;quot;ATL&amp;quot;,&amp;quot;SFO&amp;quot;]ã€‚ä½†æ˜¯å®ƒè‡ªç„¶æ’åºæ›´å¤§æ›´é åã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ€è·¯&#34;&gt;æ€è·¯&lt;/h2&gt;
&lt;p&gt;çœ‹åˆ°ç±»ä¼¼äºã€Œä¸€ç¬”ç”»é—®é¢˜ã€ï¼Œç¬¬ä¸€æ—¶é—´æƒ³åˆ°æ¬§æ‹‰è·¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡å›¾ä¸­æ‰€æœ‰è¾¹æ°å¥½ä¸€æ¬¡ä¸”è¡Œéæ‰€æœ‰é¡¶ç‚¹çš„é€šè·¯ç§°ä¸ºæ¬§æ‹‰é€šè·¯ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡å›¾ä¸­æ‰€æœ‰è¾¹æ°å¥½ä¸€æ¬¡ä¸”è¡Œéæ‰€æœ‰é¡¶ç‚¹çš„å›è·¯ç§°ä¸ºæ¬§æ‹‰å›è·¯ã€‚&lt;/li&gt;
&lt;li&gt;å…·æœ‰æ¬§æ‹‰å›è·¯çš„æ— å‘å›¾ç§°ä¸ºæ¬§æ‹‰å›¾ã€‚&lt;/li&gt;
&lt;li&gt;å…·æœ‰æ¬§æ‹‰é€šè·¯ä½†ä¸å…·æœ‰æ¬§æ‹‰å›è·¯çš„æ— å‘å›¾ç§°ä¸ºåŠæ¬§æ‹‰å›¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› ä¸ºæœ¬é¢˜ä¿è¯è‡³å°‘å­˜åœ¨ä¸€ç§åˆç†çš„è·¯å¾„ï¼Œä¹Ÿå°±å‘Šè¯‰äº†æˆ‘ä»¬ï¼Œè¿™å¼ å›¾æ˜¯ä¸€ä¸ªæ¬§æ‹‰å›¾æˆ–è€…åŠæ¬§æ‹‰å›¾ã€‚æˆ‘ä»¬åªéœ€è¦è¾“å‡ºè¿™æ¡æ¬§æ‹‰é€šè·¯çš„è·¯å¾„å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥ä»èµ·ç‚¹è¿›è¡Œ &lt;code&gt;DFS&lt;/code&gt;ï¼Œç„¶åä½†æ˜¯è¦æ³¨æ„èµ°è¿‡çš„è¾¹ä¸èƒ½é‡å¤èµ°ï¼Œç›´åˆ°èµ°å®Œæ‰€æœ‰è¾¹æœ€åå°±æ˜¯ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å®˜æ–¹é¢˜è§£çš„å®ç°æ¯”è¾ƒéªšï¼Œæ²¡æƒ³åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨äº†ä¸€ä¸ªå“ˆå¸Œåˆ°ä¼˜å…ˆé˜Ÿåˆ—çš„æ˜ å°„ï¼Œä¸€ä¸ªå­—ç¬¦ä¸²æ˜ å°„ä¸€ä¸ªæœ€å°å †ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®è´ªå¿ƒæ€è·¯æ¥ä¿è¯å­—å…¸åºäº†ã€‚&lt;/p&gt;
&lt;p&gt;æä¸€ä¸ªæ ˆå­˜ç­”æ¡ˆï¼Œå› ä¸ºæ˜¯dfsä»åç½‘å‰å›æº¯ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯åç€çš„ï¼Œæœ€ååè½¬ä¸€ä¸‹å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºæ¬§æ‹‰è·¯çš„åˆ¤æ–­ï¼Œå¯ä»¥çœ‹ &lt;a href=&#34;https://blog.csdn.net/riba2534/article/details/53728084&#34;&gt;NYOJ42 ä¸€ç¬”ç”»é—®é¢˜(æ¬§æ‹‰è·¯+å¹¶æŸ¥é›†)&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç &#34;&gt;ä»£ç &lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Solution&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    unordered_map&amp;lt;string, priority_queue&amp;lt;string, vector&amp;lt;string&amp;gt;, greater&amp;lt;string&amp;gt;&amp;gt;&amp;gt; e;
    vector&amp;lt;string&amp;gt; stk;
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;dfs&lt;/span&gt;(string u)
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;while&lt;/span&gt; (!e[u].empty())
        {
            string v = e[u].top();
            e[u].pop();
            dfs(v);
        }
        stk.push_back(u);
    }
    vector&amp;lt;string&amp;gt; findItinerary(vector&amp;lt;vector&amp;lt;string&amp;gt;&amp;gt; &amp;amp;tickets)
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (vector&amp;lt;string&amp;gt; ticket : tickets)
            e[ticket[&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;]].push(ticket[&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;]);
        dfs(&lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;JFK&amp;#34;&lt;/span&gt;);
        reverse(stk.begin(), stk.end());
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; stk;
    }
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;- https://caixiongjiang.github.io/blog/2020/leetcode-332-%E9%87%8D%E6%96%B0%E5%AE%89%E6%8E%92%E8%A1%8C%E7%A8%8B%E8%BE%93%E5%87%BA%E6%AC%A7%E6%8B%89%E8%B7%AF%E7%BB%8F/ - </description>
        </item>
    
    
    
        <item>
        <title>LeetCode 491 é€’å¢å­åºåˆ—(æšä¸¾å­é›†)</title>
        <link>https://caixiongjiang.github.io/blog/2020/leetcode-491-%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97%E6%9E%9A%E4%B8%BE%E5%AD%90%E9%9B%86/</link>
        <pubDate>Tue, 25 Aug 2020 01:22:00 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2020/leetcode-491-%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97%E6%9E%9A%E4%B8%BE%E5%AD%90%E9%9B%86/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2020/leetcode-491-%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97%E6%9E%9A%E4%B8%BE%E5%AD%90%E9%9B%86/ -&lt;p&gt;é¢˜ç›®é“¾æ¥ï¼š&lt;a href=&#34;https://leetcode-cn.com/problems/increasing-subsequences/&#34;&gt;é€’å¢å­åºåˆ—&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæ•´å‹æ•°ç»„, ä½ çš„ä»»åŠ¡æ˜¯æ‰¾åˆ°æ‰€æœ‰è¯¥æ•°ç»„çš„é€’å¢å­åºåˆ—ï¼Œé€’å¢å­åºåˆ—çš„é•¿åº¦è‡³å°‘æ˜¯2ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹:&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥: [4, 6, 7, 7]
è¾“å‡º: [[4, 6], [4, 7], [4, 6, 7], [4, 6, 7, 7], [6, 7], [6, 7, 7], [7,7], [4,7,7]]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¯´æ˜:&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç»™å®šæ•°ç»„çš„é•¿åº¦ä¸ä¼šè¶…è¿‡15ã€‚&lt;/li&gt;
&lt;li&gt;æ•°ç»„ä¸­çš„æ•´æ•°èŒƒå›´æ˜¯ [-100,100]ã€‚&lt;/li&gt;
&lt;li&gt;ç»™å®šæ•°ç»„ä¸­å¯èƒ½åŒ…å«é‡å¤æ•°å­—ï¼Œç›¸ç­‰çš„æ•°å­—åº”è¯¥è¢«è§†ä¸ºé€’å¢çš„ä¸€ç§æƒ…å†µã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ€è·¯&#34;&gt;æ€è·¯&lt;/h2&gt;
&lt;p&gt;å…ˆçœ‹ä¸€çœ¼æ•°æ®èŒƒå›´ï¼Œæ˜¯15ï¼ŒçŒœä¸€ä¸‹å¤æ‚åº¦ï¼Œå¤§æ¦‚ $2^{15}$ èƒ½è¿‡ï¼Œåº”è¯¥å°±æ˜¯äºŒè¿›åˆ¶æšä¸¾å­é›†äº†ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºæšä¸¾å­é›†ï¼Œå¯ä»¥çœ‹æˆ‘ä¹‹å‰å†™çš„åšå®¢ ï¼š&lt;a href=&#34;https://blog.csdn.net/riba2534/article/details/79834558&#34;&gt;äºŒè¿›åˆ¶æšä¸¾å­é›†è¯¦è§£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æšä¸¾å­é›†å¯ä»¥æ±‚å‡ºï¼Œæ‰€æœ‰çš„ç»„åˆæ–¹å¼ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿™ä¸ªåºåˆ—æ˜¯ä¸æ˜¯ä¸€ä¸ªé€’å¢åºåˆ—&lt;/li&gt;
&lt;li&gt;å»é‡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…³äºåˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªé€’å¢åºåˆ—ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾ä¸€ä¸ªæ¯”è¾ƒå°çš„æ•° t ï¼Œå…¶å€¼ä¸€ç›´è·Ÿéšå½“å‰éå†çš„æ•°çš„å€¼ï¼Œå¦‚æœéå†åˆ°çš„æ•°å°äºtï¼Œåˆ™è¿™è‚¯å®šæ˜¯ä¸€ä¸ªé€’å‡åºåˆ—ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºå»é‡ï¼Œå¯ä»¥ç”¨ &lt;code&gt;unordered_map&lt;/code&gt; åšä¸€ä¸ª &lt;code&gt;string&lt;/code&gt; çš„æ˜ å°„ï¼Œæ¯”å¦‚ç°åœ¨æœ‰åˆ—è¡¨ &lt;code&gt;[1,12,-3,4]&lt;/code&gt;ï¼Œæˆ‘ä»¬ç»™æ¯ä¸ªæ•°å­—åŠ ä¸Šåˆ†éš”ç¬¦ï¼Œå˜æˆä¸€ä¸ªå­—ç¬¦ä¸² &lt;code&gt;1|12|-3|4&lt;/code&gt;ï¼Œå°†è¿™ä¸ªå€¼è¿›è¡Œæ˜ å°„ï¼Œå¯ä»¥ä¿è¯ä¸é‡å¤ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç &#34;&gt;ä»£ç &lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;36
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;37
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Solution&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    vector&amp;lt;vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt;&amp;gt; findSubsequences(vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; &amp;amp;nums)
    {
        vector&amp;lt;vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt;&amp;gt; ans;
        unordered_map&amp;lt;string, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; mp;
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; n = nums.size();
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (!n)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; ans;
        vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; tmp;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; i &amp;lt; (&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n); i++)
        {
            tmp.clear();
            string s = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;
            &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; t = -&lt;span style=&#34;color:#b452cd&#34;&gt;200&lt;/span&gt;, flag = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;;
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; j = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; j &amp;lt; n; j++)
                &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (i &amp;amp; (&lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; j))
                {
                    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (nums[j] &amp;lt; t)
                    {
                        flag = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;;
                        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;break&lt;/span&gt;;
                    }
                    t = nums[j];
                    tmp.push_back(nums[j]);
                    s = s + to_string(nums[j]) + &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;|&amp;#34;&lt;/span&gt;;
                }
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (flag &amp;amp;&amp;amp; tmp.size() &amp;gt;= &lt;span style=&#34;color:#b452cd&#34;&gt;2&lt;/span&gt; &amp;amp;&amp;amp; !mp[s])
            {
                ans.push_back(tmp);
                mp[s]++;
            }
        }
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; ans;
    }
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;- https://caixiongjiang.github.io/blog/2020/leetcode-491-%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97%E6%9E%9A%E4%B8%BE%E5%AD%90%E9%9B%86/ - </description>
        </item>
    
    
    
        <item>
        <title>LeetCode 679 24 ç‚¹æ¸¸æˆ(æš´åŠ›ï¼Œé€’å½’)</title>
        <link>https://caixiongjiang.github.io/blog/2020/leetcode-679-24-%E7%82%B9%E6%B8%B8%E6%88%8F%E6%9A%B4%E5%8A%9B%E9%80%92%E5%BD%92/</link>
        <pubDate>Sat, 22 Aug 2020 01:57:03 +0800</pubDate>
        
        <guid>https://caixiongjiang.github.io/blog/2020/leetcode-679-24-%E7%82%B9%E6%B8%B8%E6%88%8F%E6%9A%B4%E5%8A%9B%E9%80%92%E5%BD%92/</guid>
        <description>ğŸŒ€riba2534&#39;s Blog https://caixiongjiang.github.io/blog/2020/leetcode-679-24-%E7%82%B9%E6%B8%B8%E6%88%8F%E6%9A%B4%E5%8A%9B%E9%80%92%E5%BD%92/ -&lt;p&gt;é¢˜ç›®é“¾æ¥ï¼š&lt;a href=&#34;https://leetcode-cn.com/problems/24-game/&#34;&gt;24 ç‚¹æ¸¸æˆ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä½ æœ‰ 4 å¼ å†™æœ‰ 1 åˆ° 9 æ•°å­—çš„ç‰Œã€‚ä½ éœ€è¦åˆ¤æ–­æ˜¯å¦èƒ½é€šè¿‡ &lt;code&gt;*&lt;/code&gt;ï¼Œ&lt;code&gt;/&lt;/code&gt;ï¼Œ&lt;code&gt;+&lt;/code&gt;ï¼Œ&lt;code&gt;-&lt;/code&gt;ï¼Œ&lt;code&gt;(&lt;/code&gt;ï¼Œ&lt;code&gt;)&lt;/code&gt; çš„è¿ç®—å¾—åˆ° 24ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 1:&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥: [4, 1, 8, 7]
è¾“å‡º: True
è§£é‡Š: (8-4) * (7-1) = 24
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ 2:&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;è¾“å…¥: [1, 2, 1, 2]
è¾“å‡º: False
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„:&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é™¤æ³•è¿ç®—ç¬¦ &lt;code&gt;/&lt;/code&gt; è¡¨ç¤ºå®æ•°é™¤æ³•ï¼Œè€Œä¸æ˜¯æ•´æ•°é™¤æ³•ã€‚ä¾‹å¦‚ 4 / (1 - 2/3) = 12 ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªè¿ç®—ç¬¦å¯¹ä¸¤ä¸ªæ•°è¿›è¡Œè¿ç®—ã€‚ç‰¹åˆ«æ˜¯æˆ‘ä»¬ä¸èƒ½ç”¨ &lt;code&gt;-&lt;/code&gt; ä½œä¸ºä¸€å…ƒè¿ç®—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;[1, 1, 1, 1]&lt;/code&gt; ä½œä¸ºè¾“å…¥æ—¶ï¼Œè¡¨è¾¾å¼ &lt;code&gt;-1 - 1 - 1 - 1&lt;/code&gt; æ˜¯ä¸å…è®¸çš„ã€‚&lt;/li&gt;
&lt;li&gt;ä½ ä¸èƒ½å°†æ•°å­—è¿æ¥åœ¨ä¸€èµ·ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ä¸º &lt;code&gt;[1, 2, 1, 2]&lt;/code&gt; æ—¶ï¼Œä¸èƒ½å†™æˆ 12 + 12 ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ€è·¯&#34;&gt;æ€è·¯&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆæ‹¬å·å¯ä»¥ç›´æ¥å¿½ç•¥æ‰ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ä»æ•°ç»„ä¸­ä»»æ„å–æ•°å¹¶ç»„åˆã€‚æ‹¬å·æ²¡å•¥ç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€æ­¥ï¼šä» 4 ä¸ªæ•°é‡Œé¢é€‰ 2 ä¸ªæ•°ï¼Œä¸º  $C_4^2$ ï¼Œ4ç§è¿ç®—ç¬¦å’Œä¸¤ä¸ªæ•°å­—ï¼Œæœ‰8ç§å¯èƒ½ï¼Œæ‰€ä»¥æƒ…å†µä¸€å…±æ˜¯ï¼š&lt;code&gt;6*8=48&lt;/code&gt; ç§&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒæ­¥ï¼šå‰©ä¸‹çš„ä¸¤ä¸ªæ•°å’Œä¸Šä¸€æ­¥ç”Ÿæˆçš„æ–°æ•°æ€»å…±æ˜¯3ä¸ªæ•°ï¼Œæ‰€ä»¥ $C_3^2 \times 8=24$ ç§&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰æ­¥ï¼š$C_2^2*8=8$ ç§&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åˆ™ä¸€å…±æœ‰ $48 \times 24 \times 8 = 9216$ ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºåŠ æ³•å’Œä¹˜æ³•å…·æœ‰äº¤æ¢å¾‹ï¼Œåˆ™ï¼š$4$ ç§è¿ç®—ç¬¦å’Œ $2$ ä¸ªæ•°å­—ï¼Œåªæœ‰ $6$ ç§å¯èƒ½ï¼Œæ‰€ä»¥ä¸€å…±çš„æƒ…å†µæ•°é‡ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;$(C_4^2 \times 6) + (C_3^2 \times 6) + (C_2^2 \times 6) = 3888$ ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“å†™æ³•ç›´æ¥é€’å½’æš´åŠ›å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„ï¼Œæœ¬é¢˜ä¸­é™¤æ³•æ˜¯å®æ•°é™¤æ³•ï¼Œåˆ™æœ€åéœ€è¦åˆ¤æ–­æ˜¯å¦ç­‰äº $24$ ï¼Œç”¨ &lt;code&gt;eps=1e-9&lt;/code&gt; æ¥åˆ¤æ–­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç &#34;&gt;ä»£ç &lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;36
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;37
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;38
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;39
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;40
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;41
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;42
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;43
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;44
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Solution&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt;&amp;gt; gen_num(vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt;&amp;gt; n, &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; num)
    {
        vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt;&amp;gt; new_nums = n;
        new_nums.push_back(num);
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; new_nums;
    }
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;handler&lt;/span&gt;(vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt;&amp;gt; n)
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (n.size() == &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; fabs(n[&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;] - &lt;span style=&#34;color:#b452cd&#34;&gt;24&lt;/span&gt;) &amp;lt; (&lt;span style=&#34;color:#b452cd&#34;&gt;1e-9&lt;/span&gt;);

        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; result = &lt;span style=&#34;color:#658b00&#34;&gt;false&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; i &amp;lt; n.size(); i++)
        {
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; j = i + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;; j &amp;lt; n.size(); j++)
            {
                vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt;&amp;gt; new_n, fin;
                &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; k = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; k &amp;lt; n.size(); k++)
                    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (k != i &amp;amp;&amp;amp; k != j)
                        new_n.push_back(n[k]);
                &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; x = n[i], y = n[j];
                result |= handler(gen_num(new_n, x + y));
                result |= handler(gen_num(new_n, x - y));
                result |= handler(gen_num(new_n, y - x));
                result |= handler(gen_num(new_n, x * y));
                &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (fabs(y) &amp;gt; &lt;span style=&#34;color:#b452cd&#34;&gt;1e-8&lt;/span&gt;)
                    result |= handler(gen_num(new_n, x / y));
                &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (fabs(x) &amp;gt; &lt;span style=&#34;color:#b452cd&#34;&gt;1e-8&lt;/span&gt;)
                    result |= handler(gen_num(new_n, y / x));
            }
        }
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; result;
    }
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;judgePoint24&lt;/span&gt;(vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; &amp;amp;nums)
    {
        vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt;&amp;gt; n;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; num : nums)
            n.push_back(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt;(num));
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; handler(n);
    }
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¼˜åŒ–åï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;36
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;37
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;38
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;39
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;40
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;41
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;42
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;43
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;44
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;45
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;46
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;47
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;48
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;49
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;50
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;51
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;52
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;53
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;54
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;55
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;56
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;57
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;58
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;59
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#008b45;font-weight:bold&#34;&gt;Solution&lt;/span&gt;
{
&lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;public&lt;/span&gt;:
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; handler(vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt;&amp;gt; &amp;amp;n)
    {
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (n.size() == &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;)
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; fabs(n[&lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;] - &lt;span style=&#34;color:#b452cd&#34;&gt;24&lt;/span&gt;) &amp;lt; (&lt;span style=&#34;color:#b452cd&#34;&gt;1e-9&lt;/span&gt;);
        &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; result = &lt;span style=&#34;color:#658b00&#34;&gt;false&lt;/span&gt;;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; i = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; i &amp;lt; n.size(); i++)
        {
            &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; j = i + &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;; j &amp;lt; n.size(); j++)
            {
                vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt;&amp;gt; new_n;
                &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; k = &lt;span style=&#34;color:#b452cd&#34;&gt;0&lt;/span&gt;; k &amp;lt; n.size(); k++)
                    &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (k != i &amp;amp;&amp;amp; k != j)
                        new_n.push_back(n[k]);

                &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt; x = n[i], y = n[j];
                new_n.push_back(x + y);
                result |= handler(new_n);
                new_n.pop_back();

                new_n.push_back(x - y);
                result |= handler(new_n);
                new_n.pop_back();

                new_n.push_back(y - x);
                result |= handler(new_n);
                new_n.pop_back();

                new_n.push_back(x * y);
                result |= handler(new_n);
                new_n.pop_back();

                &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (fabs(y) &amp;gt; &lt;span style=&#34;color:#b452cd&#34;&gt;1e-8&lt;/span&gt;)
                {
                    new_n.push_back(x / y);
                    result |= handler(new_n);
                    new_n.pop_back();
                }

                &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;if&lt;/span&gt; (fabs(x) &amp;gt; &lt;span style=&#34;color:#b452cd&#34;&gt;1e-8&lt;/span&gt;)
                {
                    new_n.push_back(y / x);
                    result |= handler(new_n);
                    new_n.pop_back();
                }
            }
        }
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; result;
    }
    &lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#008b45&#34;&gt;judgePoint24&lt;/span&gt;(vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt;&amp;gt; &amp;amp;nums)
    {
        vector&amp;lt;&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt;&amp;gt; n;
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;int&lt;/span&gt; num : nums)
            n.push_back(&lt;span style=&#34;color:#00688b;font-weight:bold&#34;&gt;double&lt;/span&gt;(num));
        &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;return&lt;/span&gt; handler(n);
    }
};
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;- https://caixiongjiang.github.io/blog/2020/leetcode-679-24-%E7%82%B9%E6%B8%B8%E6%88%8F%E6%9A%B4%E5%8A%9B%E9%80%92%E5%BD%92/ - </description>
        </item>
    
    
  </channel>
</rss> 